{"version":3,"sources":["wizard.js"],"names":["define","langx","browser","eventer","noder","geom","$","plugins","panels","Panel","Wizard","inherit","klassName","pluginName","options","disablePreviousStep","selectedItem","step","_construct","elm","prototype","call","this","$element","attr","currentStep","numSteps","find","length","$prevBtn","$nextBtn","kids","children","detach","nextText","trim","text","append","steps","addClass","window","console","warn","on","proxy","previous","next","stepclicked","destroy","remove","outerHTML","addSteps","index","i","l","$pane","$startPane","$startStep","$step","items","slice","arguments","$steps","$stepContent","Array","label","badge","pane","before","syncSteps","setState","removeSteps","howMany","$start","action","undefined","prev","each","item","canMovePrev","isFirstStep","isLastStep","last","lastText","removeClass","prevSelector","$prevSteps","currentSelector","$currentStep","target","first","totalWidth","outerWidth","containerWidth","width","newMargin","position","left","e","create","trigger","initialized","li","currentTarget","evt","isDefaultPrevented","isNaN","parseInt","html","direction","is","firstFormField","focus","retVal","Number","stepname","register"],"mappings":"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","file":"../wizard.js","sourcesContent":["define([\n  \"skylark-langx/langx\",\n  \"skylark-domx-browser\",\n  \"skylark-domx-eventer\",\n  \"skylark-domx-noder\",\n  \"skylark-domx-geom\",\n  \"skylark-domx-query\",\n  \"skylark-domx-plugins-base\",\n  \"./panels\",\n  \"./panel\"\n ],function(langx,browser,eventer,noder,geom,$,plugins,panels,Panel){\n\n\n\tvar Wizard = Panel.inherit({\n\t\tklassName: \"Wizard\",\n\n\t    pluginName : \"lark.panels.wizard\",\n\n\t    options : {\n\t\t\tdisablePreviousStep: false,\n\t\t\tselectedItem: {\n\t\t\t\tstep: -1\n\t\t\t}//-1 means it will attempt to look for \"active\" class in order to set the step\n\t    },\n\n\t    _construct : function(elm,options) {\n      \t\tPanel.prototype._construct.call(this,elm,options);\n\n\t\t\tthis.$element = this.$();\n\t\t\tthis.options.disablePreviousStep = (this.$element.attr('data-restrict') === 'previous') ? true : this.options.disablePreviousStep;\n\t\t\tthis.currentStep = this.options.selectedItem.step;\n\t\t\tthis.numSteps = this.$element.find('.steps li').length;\n\t\t\tthis.$prevBtn = this.$element.find('button.btn-prev');\n\t\t\tthis.$nextBtn = this.$element.find('button.btn-next');\n\n\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\tthis.nextText = langx.trim(this.$nextBtn.text());\n\t\t\tthis.$nextBtn.append(kids);\n\n\t\t\tvar steps = this.$element.children('.steps-container');\n\t\t\t// maintains backwards compatibility with < 3.8, will be removed in the future\n\t\t\tif (steps.length === 0) {\n\t\t\t\tsteps = this.$element;\n\t\t\t\tthis.$element.addClass('no-steps-container');\n\t\t\t\tif (window && window.console && window.console.warn) {\n\t\t\t\t\twindow.console.warn('please update your wizard markup to include \".steps-container\" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup');\n\t\t\t\t}\n\t\t\t}\n\t\t\tsteps = steps.find('.steps');\n\n\t\t\t// handle events\n\t\t\tthis.$prevBtn.on('click.fu.wizard', langx.proxy(this.previous, this));\n\t\t\tthis.$nextBtn.on('click.fu.wizard', langx.proxy(this.next, this));\n\t\t\tsteps.on('click.fu.wizard', 'li.complete', langx.proxy(this.stepclicked, this));\n\n\t\t\tthis.selectedItem(this.options.selectedItem);\n\n\t\t\tif (this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', true);\n\t\t\t\tthis.$element.find('.steps').addClass('previous-disabled');\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// any external bindings [none]\n\t\t\t// empty elements to return to original markup [none]\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\t//index is 1 based\n\t\t//second parameter can be array of objects [{ ... }, { ... }] or you can pass n additional objects as args\n\t\t//object structure is as follows (all params are optional): { badge: '', label: '', pane: '' }\n\t\taddSteps: function (index) {\n\t\t\tvar items = [].slice.call(arguments).slice(1);\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar i, l, $pane, $startPane, $startStep, $step;\n\n\t\t\tindex = (index === -1 || (index > (this.numSteps + 1))) ? this.numSteps + 1 : index;\n\t\t\tif (items[0] instanceof Array) {\n\t\t\t\titems = items[0];\n\t\t\t}\n\n\t\t\t$startStep = $steps.find('li:nth-child(' + index + ')');\n\t\t\t$startPane = $stepContent.find('.step-pane:nth-child(' + index + ')');\n\t\t\tif ($startStep.length < 1) {\n\t\t\t\t$startStep = null;\n\t\t\t}\n\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t$step = $('<li data-step=\"' + index + '\"><span class=\"badge badge-info\"></span></li>');\n\t\t\t\t$step.append(items[i].label || '').append('<span class=\"chevron\"></span>');\n\t\t\t\t$step.find('.badge').append(items[i].badge || index);\n\n\t\t\t\t$pane = $('<div class=\"step-pane\" data-step=\"' + index + '\"></div>');\n\t\t\t\t$pane.append(items[i].pane || '');\n\n\t\t\t\tif (!$startStep) {\n\t\t\t\t\t$steps.append($step);\n\t\t\t\t\t$stepContent.append($pane);\n\t\t\t\t} else {\n\t\t\t\t\t$startStep.before($step);\n\t\t\t\t\t$startPane.before($pane);\n\t\t\t\t}\n\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\t//index is 1 based, howMany is number to remove\n\t\tremoveSteps: function (index, howMany) {\n\t\t\tvar action = 'nextAll';\n\t\t\tvar i = 0;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar $start;\n\n\t\t\thowMany = (howMany !== undefined) ? howMany : 1;\n\n\t\t\tif (index > $steps.find('li').length) {\n\t\t\t\t$start = $steps.find('li:last');\n\t\t\t} else {\n\t\t\t\t$start = $steps.find('li:nth-child(' + index + ')').prev();\n\t\t\t\tif ($start.length < 1) {\n\t\t\t\t\taction = 'children';\n\t\t\t\t\t$start = $steps;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$start[action]().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar step = item.attr('data-step');\n\t\t\t\tif (i < howMany) {\n\t\t\t\t\titem.remove();\n\t\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:first').remove();\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t});\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\tsetState: function () {\n\t\t\tvar canMovePrev = (this.currentStep > 1);//remember, steps index is 1 based...\n\t\t\tvar isFirstStep = (this.currentStep === 1);\n\t\t\tvar isLastStep = (this.currentStep === this.numSteps);\n\n\t\t\t// disable buttons based on current step\n\t\t\tif (!this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', (isFirstStep === true || canMovePrev === false));\n\t\t\t}\n\n\t\t\t// change button text of last step, if specified\n\t\t\tvar last = this.$nextBtn.attr('data-last');\n\t\t\tif (last) {\n\t\t\t\tthis.lastText = last;\n\t\t\t\t// replace text\n\t\t\t\tvar text = this.nextText;\n\t\t\t\tif (isLastStep === true) {\n\t\t\t\t\ttext = this.lastText;\n\t\t\t\t\t// add status class to wizard\n\t\t\t\t\tthis.$element.addClass('complete');\n\t\t\t\t} else {\n\t\t\t\t\tthis.$element.removeClass('complete');\n\t\t\t\t}\n\n\t\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\t\tthis.$nextBtn.text(text).append(kids);\n\t\t\t}\n\n\t\t\t// reset classes for all steps\n\t\t\tvar $steps = this.$element.find('.steps li');\n\t\t\t$steps.removeClass('active').removeClass('complete');\n\t\t\t$steps.find('span.badge').removeClass('badge-info').removeClass('badge-success');\n\n\t\t\t// set class for all previous steps\n\t\t\tvar prevSelector = '.steps li:lt(' + (this.currentStep - 1) + ')';\n\t\t\tvar $prevSteps = this.$element.find(prevSelector);\n\t\t\t$prevSteps.addClass('complete');\n\t\t\t$prevSteps.find('span.badge').addClass('badge-success');\n\n\t\t\t// set class for current step\n\t\t\tvar currentSelector = '.steps li:eq(' + (this.currentStep - 1) + ')';\n\t\t\tvar $currentStep = this.$element.find(currentSelector);\n\t\t\t$currentStep.addClass('active');\n\t\t\t$currentStep.find('span.badge').addClass('badge-info');\n\n\t\t\t// set display of target element\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar target = $currentStep.attr('data-step');\n\t\t\t$stepContent.find('.step-pane').removeClass('active');\n\t\t\t$stepContent.find('.step-pane[data-step=\"' + target + '\"]:first').addClass('active');\n\n\t\t\t// reset the wizard position to the left\n\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\n\t\t\t// check if the steps are wider than the container div\n\t\t\tvar totalWidth = 0;\n\t\t\tthis.$element.find('.steps > li').each(function () {\n\t\t\t\ttotalWidth += $(this).outerWidth();\n\t\t\t});\n\t\t\tvar containerWidth = 0;\n\t\t\tif (this.$element.find('.actions').length) {\n\t\t\t\tcontainerWidth = this.$element.width() - this.$element.find('.actions').first().outerWidth();\n\t\t\t} else {\n\t\t\t\tcontainerWidth = this.$element.width();\n\t\t\t}\n\n\t\t\tif (totalWidth > containerWidth) {\n\t\t\t\t// set the position so that the last step is on the right\n\t\t\t\tvar newMargin = totalWidth - containerWidth;\n\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\n\t\t\t\t// set the position so that the active step is in a good\n\t\t\t\t// position if it has been moved out of view\n\t\t\t\tif (this.$element.find('li.active').first().position().left < 200) {\n\t\t\t\t\tnewMargin += this.$element.find('li.active').first().position().left - 200;\n\t\t\t\t\tif (newMargin < 1) {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// only fire changed event after initializing\n\t\t\tif (typeof (this.initialized) !== 'undefined') {\n\t\t\t\tvar e = eventer.create('changed.fu.wizard');\n\t\t\t\tthis.$element.trigger(e, {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.initialized = true;\n\t\t},\n\n\t\tstepclicked: function (e) {\n\t\t\tvar li = $(e.currentTarget);\n\t\t\tvar index = this.$element.find('.steps li').index(li);\n\n\t\t\tif (index < this.currentStep && this.options.disablePreviousStep) {//enforce restrictions\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvar evt = eventer.create('stepclicked.fu.wizard');\n\t\t\t\tthis.$element.trigger(evt, {\n\t\t\t\t\tstep: index + 1\n\t\t\t\t});\n\t\t\t\tif (evt.isDefaultPrevented()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.currentStep = (index + 1);\n\t\t\t\tthis.setState();\n\t\t\t}\n\t\t},\n\n\t\tsyncSteps: function () {\n\t\t\tvar i = 1;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\n\t\t\t$steps.children().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar badge = item.find('.badge');\n\t\t\t\tvar step = item.attr('data-step');\n\n\t\t\t\tif (!isNaN(parseInt(badge.html(), 10))) {\n\t\t\t\t\tbadge.html(i);\n\t\t\t\t}\n\n\t\t\t\titem.attr('data-step', i);\n\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:last').attr('data-step', i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\n\t\tprevious: function () {\n\t\t\tif (this.options.disablePreviousStep || this.currentStep === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'previous'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// don't increment ...what? Why?\n\n\t\t\tthis.currentStep -= 1;\n\t\t\tthis.setState();\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$prevBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$prevBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$nextBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tnext: function () {\n\t\t\tvar e = eventer.create('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'next'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// respect preventDefault in case dev has attached validation to step and wants to stop propagation based on it.\n\n\t\t\tif (this.currentStep < this.numSteps) {\n\t\t\t\tthis.currentStep += 1;\n\t\t\t\tthis.setState();\n\t\t\t} else {//is last step\n\t\t\t\tthis.$element.trigger('finished.fu.wizard');\n\t\t\t}\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$nextBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$nextBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$prevBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tselectedItem: function (selectedItem) {\n\t\t\tvar retVal, step;\n\n\t\t\tif (selectedItem) {\n\t\t\t\tstep = selectedItem.step || -1;\n\t\t\t\t//allow selection of step by data-name\n\t\t\t\tstep = Number(this.$element.find('.steps li[data-name=\"' + step + '\"]').first().attr('data-step')) || Number(step);\n\n\t\t\t\tif (1 <= step && step <= this.numSteps) {\n\t\t\t\t\tthis.currentStep = step;\n\t\t\t\t\tthis.setState();\n\t\t\t\t} else {\n\t\t\t\t\tstep = this.$element.find('.steps li.active:first').attr('data-step');\n\t\t\t\t\tif (!isNaN(step)) {\n\t\t\t\t\t\tthis.currentStep = parseInt(step, 10);\n\t\t\t\t\t\tthis.setState();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tretVal = this;\n\t\t\t} else {\n\t\t\t\tretVal = {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t};\n\t\t\t\tif (this.$element.find('.steps li.active:first[data-name]').length) {\n\t\t\t\t\tretVal.stepname = this.$element.find('.steps li.active:first').attr('data-name');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn retVal;\n\t\t}\n\n\t});\n\n   plugins.register(Wizard);\n\n\treturn panels.Wizard = Wizard;\n\n});\n"]}