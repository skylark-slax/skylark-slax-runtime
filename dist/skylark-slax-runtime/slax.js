/**
 * skylark-slax-runtime - The skylark shells widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-slax/skylark-slax-runtime/
 * @license MIT
 */
define(["skylark-langx-ns","skylark-langx-objects","skylark-langx-hoster","skylark-langx-async","skylark-net-http/Xhr","skylark-domx-eventer"],function(skylark,objects,hoster,async,Xhr,eventer){var _config={},_rootUrl="",_baseUrl="",slax={prepare:function(config){var p,slaxRoot,slaxApp,d,p;if(config=config||hoster.global.slaxConfig,!config)for(var scripts=document.getElementsByTagName("script"),i=0,script,slaxDir,src,match;i<scripts.length;)if(script=scripts[i++],(src=script.getAttribute("src"))&&(match=src.match(/(((.*)\/)|^)skylark-slax-runtime([0-9A-Za-z\-]*)\.js(\W|$)/i))){slaxDir=match[3]||"",(src=script.getAttribute("data-slax-config"))?config=eval("({ "+src+" })"):(slaxRoot=script.getAttribute("data-slax-root"),null==slaxRoot&&(slaxRoot=slaxDir),slaxApp=script.getAttribute("data-slax-page")||script.getAttribute("data-slax-app"));break}return config?(objects.mixin(_config,config),p=async.Deferred.resolve()):(d=new async.Deferred,p=d.promise,Xhr.get(slaxRoot+"/slax-config.json").then(function(t){if(slaxApp){for(var s,a=0;a<t.apps.length;a++)t.apps[a].name==slaxApp&&(s=slaxRoot+t.apps[a].dir);Xhr.get(s+"/spa.json").then(function(t){objects.mixin(_config,t),d.resolve()})}else objects.mixin(_config,t),d.resolve()})),p},start:function(){var a,r=_config;r.runtime&&require.config(r.runtime),r.boot?(0,window[r.boot])(r):(a=function(t,s){var a=slax.page=t(s=s||r);hoster.global.go=function(t,s){a.go(t,s)},a.prepare().then(function(){a.run()})},r.spaModule?require([r.spaModule],function(s){s._start?s._start().then(function(t){a(s,t)}):a(s)}):a(skylark.spa))}};return define("slax",[],function(){return slax}),skylark.attach("slax",slax)});
//# sourceMappingURL=sourcemaps/slax.js.map
