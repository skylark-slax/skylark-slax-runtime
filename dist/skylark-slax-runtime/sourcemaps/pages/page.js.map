{"version":3,"sources":["pages/page.js"],"names":["define","langx","css","scripter","finder","$","spa","nprogress","bootbox","Visibility","Tinycon","updateAlert","alert","params","find","html","title","message","attr","type","clearTimeout","parseInt","timeout","startTimeout","children","fadeOut","translate","translatedHTML","fadeIn","off","removeClass","clickfn","addClass","on","e","target","is","this","remove","timeoutId","setTimeout","Page","inherit","options","i18n","locale","txt","Deferred","resolve","alerts","container","titles","success","error","templator","parse","skins","_construct","prototype","call","_titleObj","active","interval","undefined","self","isFocused","change","event","state","alternatingTitle","progress","alert_id","Date","getTime","trim","option","length","parseTemplate","alertTpl","prepend","closefn","removeAlert","id","alertSuccess","alertError","titleObj","app","window","document","translated","clearInterval","setInterval","indexOf","text","refreshTitle","tinycon","bubble","isUndefined","isPlainObject","isDefined","setOptions","setBubble","reskin","skinName","cssUrl","clientEl","currentSkinClassName","currentSkin","getElementById","split","filter","className","startsWith","slice","linkEl","createElement","rel","href","onload","parentNode","removeChild","join","head","appendChild","loadStyleSheet","url","loadedCallback","errorCallback","removeStyleSheet","loadScript","loadJavaScript","removeScript","deleteJavaScript"],"mappings":"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","file":"../../pages/page.js","sourcesContent":["define([\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-domx-css\",\r\n\t\"skylark-langx-scripter\",\r\n\t\"skylark-domx-finder\",\r\n\t\"skylark-domx-query\",\r\n\t\"skylark-appify-spa\",\r\n\t\"skylark-nprogress\",\r\n\t\"skylark-bootbox4\",\r\n    \"skylark-visibility\",\r\n    \"skylark-tinycon\"\r\n],function(langx, css, scripter, finder,$,spa,nprogress,bootbox,Visibility, Tinycon){\r\n\tfunction createAlert(params,template) {\r\n\t    params.parseTemplate('alert', params, function (alertTpl) {\r\n\t      params.translate(alertTpl, function (translatedHTML) {\t\t\t\t\r\n\t        var alert = $('#' + params.alert_id);\r\n\t\t\t\t\tif (alert.length) {\r\n\t\t\t\t\t\treturn updateAlert(alert, params);\r\n\t\t\t\t\t}\r\n\t\t\t\t\talert = $(translatedHTML);\r\n\t\t\t\t\talert.fadeIn(200);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\tparams.container.prepend(alert);\r\n\t\t\t\t\t//components.get('toaster/tray').prepend(alert);\r\n\r\n\t\t\t\t\talert.find('button').on('click', function () {\r\n\t\t\t\t\t\tif (typeof params.closefn === 'function') {\r\n\t\t\t\t\t\t\tparams.closefn();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfadeOut(alert);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tif (params.timeout) {\r\n\t\t\t\t\t\tstartTimeout(alert, params.timeout);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof params.clickfn === 'function') {\r\n\t\t\t\t\t\talert\r\n\t\t\t\t\t\t\t.addClass('pointer')\r\n\t\t\t\t\t\t\t.on('click', function (e) {\r\n\t\t\t\t\t\t\t\tif (!$(e.target).is('.close')) {\r\n\t\t\t\t\t\t\t\t\tparams.clickfn();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfadeOut(alert);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t  });\r\n\t   });\r\n\r\n\t\t//Benchpress.parse('alert', params, function (alertTpl) {\r\n\t\t//\ttranslator.translate(alertTpl, function (translatedHTML) {\r\n\t\t//\t\t...\r\n\t\t//\t});\r\n\t\t//});\r\n\t}\r\n\r\n\tfunction updateAlert(alert, params) {\r\n\t\talert.find('strong').html(params.title);\r\n\t\talert.find('p').html(params.message);\r\n\t\talert.attr('class', 'alert alert-dismissable alert-' + params.type + ' clearfix');\r\n\r\n\t\tclearTimeout(parseInt(alert.attr('timeoutId'), 10));\r\n\t\tif (params.timeout) {\r\n\t\t\tstartTimeout(alert, params.timeout);\r\n\t\t}\r\n\r\n\t\talert.children().fadeOut(100);\r\n\t\t//translator.translate(alert.html(), function (translatedHTML) {\r\n\t\tparams.translate(alert.html(), function (translatedHTML) {\r\n\t\t\talert.children().fadeIn(100);\r\n\t\t\talert.html(translatedHTML);\r\n\t\t});\r\n\r\n\t\t// Handle changes in the clickfn\r\n\t\talert.off('click').removeClass('pointer');\r\n\t\tif (typeof params.clickfn === 'function') {\r\n\t\t\talert\r\n\t\t\t\t.addClass('pointer')\r\n\t\t\t\t.on('click', function (e) {\r\n\t\t\t\t\tif (!$(e.target).is('.close')) {\r\n\t\t\t\t\t\tparams.clickfn();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfadeOut(alert);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fadeOut(alert) {\r\n\t\talert.fadeOut(500, function () {\r\n\t\t\t$(this).remove();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction startTimeout(alert, timeout) {\r\n\t\tvar timeoutId = setTimeout(function () {\r\n\t\t\tfadeOut(alert);\r\n\t\t}, timeout);\r\n\r\n\t\talert.attr('timeoutId', timeoutId);\r\n\r\n\t\t// Reset and start animation\r\n\t\talert.css('transition-property', 'none');\r\n\t\talert.removeClass('animate');\r\n\r\n\t\tsetTimeout(function () {\r\n\t\t\talert.css('transition-property', '');\r\n\t\t\talert.css('transition', 'width ' + (timeout + 450) + 'ms linear, background-color ' + (timeout + 450) + 'ms ease-in');\r\n\t\t\talert.addClass('animate');\r\n\t\t}, 50);\r\n\r\n\t\t// Handle mouseenter/mouseleave\r\n\t\talert\r\n\t\t\t.on('mouseenter', function () {\r\n\t\t\t\t$(this).css('transition-duration', 0);\r\n\t\t\t});\r\n\t}\r\n\r\n\tvar Shell = spa.Page.inherit({\r\n\t\toptions : {\r\n\t        i18n : {\r\n\t            locale : \"en\",\r\n\t            translate : function(txt) {\r\n\t              return langx.Deferred.resolve(txt);\r\n\t            }\r\n\t        },\r\n\t\t\talerts : {\r\n\t\t\t\tcontainer : \"\",     // element,$elment or selector,\r\n\t\t\t\ttitles : {\r\n\t\t\t\t\tsuccess : '[[global:alert.success]]',\r\n\t\t\t\t\terror :  '[[global:alert.error]]'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttemplator  : {\r\n\t\t\t\tparse  : null,    // template function\r\n\t\t\t},\r\n\t\t\tskins : {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_construct : function(options) {\r\n\t\t\tspa.Page.prototype._construct.call(this,options);\r\n\r\n\t      \tthis._titleObj = {\r\n\t        \tactive: false,\r\n\t        \tinterval: undefined,\r\n\t        \ttitles: [],\r\n\t      \t};\r\n\r\n\t     \tvar self = this;\r\n\r\n\t     \tself.isFocused = true;\r\n\r\n\t      \tVisibility.change(function (event, state) {\r\n\t        \tif (state === 'visible') {\r\n\t          \t\tself.isFocused = true;\r\n\t         \t\tself.alternatingTitle('');\r\n\t        \t} else if (state === 'hidden') {\r\n\t          \t\tself.isFocused = false;\r\n\t        \t}\r\n      \t\t});      \r\n\t\t},\r\n\r\n\t\tprogress : function() {\r\n\t\t\treturn nprogress;\r\n\t\t},\r\n\r\n\t\talert : function (params) {\r\n\t\t\tparams.alert_id = 'alert_button_' + (params.alert_id ? params.alert_id : new Date().getTime());\r\n\t\t\tparams.title = params.title ? params.title.trim() || '' : '';\r\n\t\t\tparams.message = params.message ? params.message.trim() : '';\r\n\t\t\tparams.type = params.type || 'info';\r\n\r\n\r\n\t\t\tvar alert = $('#' + params.alert_id);\r\n\r\n      \t\tparams.translate = params.translate || this.option(\"i18n.translate\");\r\n\t\t\tif (alert.length) {\r\n\t\t\t\tupdateAlert(alert, params);\r\n\t\t\t} else {\r\n        \t\tparams.parseTemplate = params.parseTemplate || this.option(\"templator.parse\");\r\n        \t\tparams.container  = params.container || this.option(\"alerts.container\");\r\n\t\t\t\tcreateAlert(params);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tremoveAlert : function (id) {\r\n\t\t\t$('#alert_button_' + id).remove();\r\n\t\t},\r\n\r\n\t\talertSuccess : function (message, timeout) {\r\n\t\t\tthis.alert({\r\n\t\t\t\ttitle: this.option(\"alerts.titles.success\"),\r\n\t\t\t\tmessage: message,\r\n\t\t\t\ttype: 'success',\r\n\t\t\t\ttimeout: timeout || 5000,\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\talertError : function (message, timeout) {\r\n\t\t\tmessage = message.message || message;\r\n\r\n\t\t\tthis.alert({\r\n\t\t\t\ttitle: this.option(\"alerts.titles.error\"),\r\n\t\t\t\tmessage: message,\r\n\t\t\t\ttype: 'danger',\r\n\t\t\t\ttimeout: timeout || 10000,\r\n\t\t\t});\r\n\t\t},\r\n\r\n    \talternatingTitle : function (title) {\r\n      \t\tif (typeof title !== 'string') {\r\n        \t\treturn;\r\n      \t\t}\r\n\r\n\t      var titleObj = this._titleObj;\r\n\r\n\t      if (title.length > 0 && !app.isFocused) {\r\n\t        if (!titleObj.titles[0]) {\r\n\t          titleObj.titles[0] = window.document.title;\r\n\t        }\r\n\r\n\t        var translate = this.option(\"i18n.translate\");\r\n\t        translate(title, function (translated) {\r\n\t            titleObj.titles[1] = translated;\r\n\t            if (titleObj.interval) {\r\n\t              clearInterval(titleObj.interval);\r\n\t            }\r\n\r\n\t            titleObj.interval = setInterval(function () {\r\n\t              var title = titleObj.titles[titleObj.titles.indexOf(window.document.title) ^ 1];\r\n\t              if (title) {\r\n\t                window.document.title = $('<div/>').html(title).text();\r\n\t              }\r\n\t            }, 2000);\r\n\t        });\r\n\t        \r\n\t      } else {\r\n\t        if (titleObj.interval) {\r\n\t          clearInterval(titleObj.interval);\r\n\t        }\r\n\t        if (titleObj.titles[0]) {\r\n\t          window.document.title = $('<div/>').html(titleObj.titles[0]).text();\r\n\t        }\r\n\t      }\r\n\t    },\r\n\r\n\t    refreshTitle : function (title) {\r\n\t        var self = this,\r\n\t            translate = this.option(\"i18n.translate\"),\r\n\t            titleObj = this._titleObj;\r\n\r\n\t        translate(title, function (translated) {\r\n\t          titleObj.titles[0] = translated;\r\n\t          self.alternatingTitle('');\r\n\t        });\r\n\t    },\r\n\r\n\r\n\t    /*\r\n\t     * Manipulatethe favicon, in particular adding alert bubbles and changing images. \r\n\t     */\r\n\t    tinycon : function(bubble,options) {\r\n\r\n\t    \tif (langx.isUndefined(options)){\r\n\t    \t\tif (langx.isPlainObject(bubble))\t{\r\n\t    \t\t\toptions = bubble;\r\n\t    \t\t\tbubble = undefined;\r\n\t    \t\t}\r\n\t    \t} \r\n\r\n\t    \tif (langx.isDefined(options)) {\r\n\t    \t\tTinycon.setOptions(options)\r\n\t    \t}\r\n\t    \tif (langx.isDefined(bubble)) {\r\n\t    \t\tTinycon.setBubble(bubble);\r\n\t    \t}\r\n\r\n\t    },\r\n\r\n\r\n\t\treskin : function (skinName,cssUrl,clientEl) {\r\n\r\n\t\t\tif (!clientEl) {\r\n\t\t\t\tclientEl = document.getElementById(\"skinSheet\");\r\n\t\t\t\tif (!clientEl) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar currentSkinClassName = $('body').attr('class').split(/\\s+/).filter(function (className) {\r\n\t\t\t\treturn className.startsWith('skin-');\r\n\t\t\t});\r\n\t\t\tvar currentSkin = currentSkinClassName[0].slice(5);\r\n\t\t\tcurrentSkin = currentSkin !== 'noskin' ? currentSkin : '';\r\n\r\n\t\t\t// Stop execution if skin didn't change\r\n\t\t\tif (skinName === currentSkin) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar linkEl = document.createElement('link');\r\n\t\t\tlinkEl.rel = 'stylesheet';\r\n\t\t\tlinkEl.type = 'text/css';\r\n\t\t\tlinkEl.href = cssUrl;\r\n\t\t\tlinkEl.onload = function () {\r\n\t\t\t\tclientEl.parentNode.removeChild(clientEl);\r\n\r\n\t\t\t\t// Update body class with proper skin name\r\n\t\t\t\t$('body').removeClass(currentSkinClassName.join(' '));\r\n\t\t\t\t$('body').addClass('skin-' + (skinName || 'noskin'));\r\n\t\t\t};\r\n\r\n\t\t\tdocument.head.appendChild(linkEl);\r\n\t\t},\r\n\r\n\r\n\t\tloadStyleSheet : function(url,options,loadedCallback, errorCallback) {\r\n\t\t\treturn css.loadStyleSheet(url,options,loadedCallback, errorCallback);\r\n\r\n\t\t},\r\n\r\n\t\tremoveStyleSheet : function(id) {\r\n\t\t\treturn css.removeStyleSheet(id);\r\n\r\n\t\t},\r\n\r\n\t\tloadScript : function(url, loadedCallback, errorCallback) {\r\n\t\t\treturn scripter.loadJavaScript(url,loadedCallback,errorCallback);\r\n\t\t},\r\n\r\n\t\tremoveScript : function(id) {\r\n\t\t\treturn scripter.deleteJavaScript(id);\r\n\t\t}\r\n\r\n\r\n\t});\r\n\r\n\r\n\treturn Shell;\r\n\r\n});\r\n"]}