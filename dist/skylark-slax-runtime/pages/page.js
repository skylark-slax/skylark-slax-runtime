/**
 * skylark-slax-runtime - The skylark shells widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-slax/skylark-slax-runtime/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx-css","skylark-langx-scripter","skylark-domx-finder","skylark-domx-query","skylark-appify-spa","skylark-nprogress","skylark-bootbox4","skylark-visibility","skylark-tinycon"],function(n,s,i,t,r,e,o,a,l,c){function u(e,n){e.find("strong").html(n.title),e.find("p").html(n.message),e.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(e.attr("timeoutId"),10)),n.timeout&&f(e,n.timeout),e.children().fadeOut(100),n.translate(e.html(),function(t){e.children().fadeIn(100),e.html(t)}),e.off("click").removeClass("pointer"),"function"==typeof n.clickfn&&e.addClass("pointer").on("click",function(t){r(t.target).is(".close")||n.clickfn(),d(e)})}function d(t){t.fadeOut(500,function(){r(this).remove()})}function f(t,e){var n=setTimeout(function(){d(t)},e);t.attr("timeoutId",n),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(e+450)+"ms linear, background-color "+(e+450)+"ms ease-in"),t.addClass("animate")},50),t.on("mouseenter",function(){r(this).css("transition-duration",0)})}return e.Page.inherit({options:{i18n:{locale:"en",translate:function(t){return n.Deferred.resolve(t)}},alerts:{container:"",titles:{success:"[[global:alert.success]]",error:"[[global:alert.error]]"}},templator:{parse:null},skins:{}},_construct:function(t){e.Page.prototype._construct.call(this,t),this._titleObj={active:!1,interval:void 0,titles:[]};var n=this;n.isFocused=!0,l.change(function(t,e){"visible"===e?(n.isFocused=!0,n.alternatingTitle("")):"hidden"===e&&(n.isFocused=!1)})},progress:function(){return o},alert:function(t){t.alert_id="alert_button_"+(t.alert_id||(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";var n,e=r("#"+t.alert_id);t.translate=t.translate||this.option("i18n.translate"),e.length?u(e,t):(t.parseTemplate=t.parseTemplate||this.option("templator.parse"),t.container=t.container||this.option("alerts.container"),(n=t).parseTemplate("alert",n,function(t){n.translate(t,function(t){var e=r("#"+n.alert_id);if(e.length)return u(e,n);(e=r(t)).fadeIn(200),n.container.prepend(e),e.find("button").on("click",function(){return"function"==typeof n.closefn&&n.closefn(),d(e),!1}),n.timeout&&f(e,n.timeout),"function"==typeof n.clickfn&&e.addClass("pointer").on("click",function(t){r(t.target).is(".close")||n.clickfn(),d(e)})})}))},removeAlert:function(t){r("#alert_button_"+t).remove()},alertSuccess:function(t,e){this.alert({title:this.option("alerts.titles.success"),message:t,type:"success",timeout:e||5e3})},alertError:function(t,e){t=t.message||t,this.alert({title:this.option("alerts.titles.error"),message:t,type:"danger",timeout:e||1e4})},alternatingTitle:function(t){var e;"string"==typeof t&&(e=this._titleObj,0<t.length&&!app.isFocused?(e.titles[0]||(e.titles[0]=window.document.title),this.option("i18n.translate")(t,function(t){e.titles[1]=t,e.interval&&clearInterval(e.interval),e.interval=setInterval(function(){var t=e.titles[1^e.titles.indexOf(window.document.title)];t&&(window.document.title=r("<div/>").html(t).text())},2e3)})):(e.interval&&clearInterval(e.interval),e.titles[0]&&(window.document.title=r("<div/>").html(e.titles[0]).text())))},refreshTitle:function(t){var e=this,n=this.option("i18n.translate"),i=this._titleObj;n(t,function(t){i.titles[0]=t,e.alternatingTitle("")})},tinycon:function(t,e){n.isUndefined(e)&&n.isPlainObject(t)&&(e=t,t=void 0),n.isDefined(e)&&c.setOptions(e),n.isDefined(t)&&c.setBubble(t)},reskin:function(t,e,n){var i,s;(n=n||document.getElementById("skinSheet"))&&(s=(i=r("body").attr("class").split(/\s+/).filter(function(t){return t.startsWith("skin-")}))[0].slice(5),t!==(s="noskin"!==s?s:""))&&((s=document.createElement("link")).rel="stylesheet",s.type="text/css",s.href=e,s.onload=function(){n.parentNode.removeChild(n),r("body").removeClass(i.join(" ")),r("body").addClass("skin-"+(t||"noskin"))},document.head.appendChild(s))},loadStyleSheet:function(t,e,n,i){return s.loadStyleSheet(t,e,n,i)},removeStyleSheet:function(t){return s.removeStyleSheet(t)},loadScript:function(t,e,n){return i.loadJavaScript(t,e,n)},removeScript:function(t){return i.deleteJavaScript(t)}})});
//# sourceMappingURL=../sourcemaps/pages/page.js.map
