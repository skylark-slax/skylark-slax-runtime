/**
 * skylark-slax-runtime - The skylark shells widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-slax/skylark-slax-runtime/
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(t,e,n){"function"==typeof n?(map[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),i=t.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):map[t]={factory:null,resolved:!0,exports:n}},require=globals.require=function(t){if(!map.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=map[t];if(!module.resolved){var e=[];module.deps.forEach(function(t){e.push(require(t))}),module.exports=module.factory.apply(globals,e)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(t,e,n){"string"==typeof e&&(e=e.split("."));for(var i=e.length,r=t,s=0,a=e[s++];s<i;)r=r[a]=r[a]||{},a=e[s++];if(r[a]){if(n)throw new Error("This namespace already exists:"+e)}else r[a]=n||{};return r[a]}}),define("skylark-langx-ns/ns",["./_attach"],function(t){var e={attach:function(n,i){return t(e,n,i)}};return e}),define("skylark-langx-ns/main",["./ns"],function(t){return t}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),define("skylark-langx-types/types",["skylark-langx-ns"],function(t){var e,n=Array.isArray,i={}.toString,r=(e={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),function(t){return null==t?String(t):e[i.call(t)]||"object"}),s=n||function(t){return object&&object.constructor===Array};function a(t){var e;for(e in t)if(null!==t[e])return!1;return!0}function o(t){return"function"==r(t)}function l(t){return t&&t.nodeType}function c(t){return"number"==typeof t}function u(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function h(t){return"string"==typeof t}function d(t){return t&&t==t.window}function p(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}var f=1/0,m=1.7976931348623157e308,g=NaN,y=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,x=/^0o[0-7]+$/i,b=parseInt;function w(t){if(!t)return 0===t?t:0;if((t=_(t))===f||t===-f){var e=t<0?-1:1;return e*m}return t==t?t:0}function _(t){if("number"==typeof t)return t;if(p(t))return g;if(u(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=k.test(t);return n||x.test(t)?b(t.slice(2),n?2:8):v.test(t)?g:+t}return t.attach("langx.types",{isArray:s,isArrayLike:function(t){return!h(t)&&!l(t)&&"number"==typeof t.length&&!o(t)},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===i.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:a,isEmptyObject:a,isFunction:o,isHtmlNode:l,isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:c,isNumeric:c,isObject:u,isPlainObject:function(t){return u(t)&&!d(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:h,isSameOrigin:function(t){if(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t.startsWith(e)}},isSymbol:p,isUndefined:function(t){return void 0===t},isWindow:d,type:r,toFinite:w,toNumber:_,toInteger:function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0}})}),define("skylark-langx-types/main",["./types"],function(t){return t}),define("skylark-langx-types",["skylark-langx-types/main"],function(t){return t}),define("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(t,e){var n,i,r=Object.prototype.hasOwnProperty,s=(Array.prototype.slice,e.isBoolean,e.isFunction,e.isObject),a=e.isPlainObject,o=e.isArray;e.isArrayLike,e.isString,e.toInteger;function l(t){if(!s(t))return[];var e=[];for(var n in t)e.push(n);return e}function c(t,e){if(!o(e))return null!=t&&r.call(t,e);for(var n=e.length,i=0;i<n;i++){var s=e[i];if(null==t||!r.call(t,s))return!1;t=t[s]}return!!n}return t.attach("langx.objects",{allKeys:l,attach:t.attach,defaults:(n=l,i=!0,function(t){var e=arguments.length;if(i&&(t=Object(t)),e<2||null==t)return t;for(var r=1;r<e;r++)for(var s=arguments[r],a=n(s),o=a.length,l=0;l<o;l++){var c=a[l];i&&void 0!==t[c]||(t[c]=s[c])}return t}),has:c,isMatch:function(t,e){var n=n(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var a=n[s];if(e[a]!==r[a]||!(a in r))return!1}return!0},keys:function(t){if(s(t))return[];var e=[];for(var n in t)c(t,n)&&e.push(n);return e},removeItem:function(t,e){if(o(t)){var n=t.indexOf(e);-1!=n&&t.splice(n,1)}else if(a(t))for(var i in t)if(t[i]==e){delete t[i];break}return this},values:function(t){for(var e=l(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}})}),define("skylark-langx-objects/clone",["skylark-langx-types","./objects"],function(t,e){var n=t.isPlainObject,i=t.isArray;return e.clone=function t(e,r){var s;if(void 0===e||null===e)s=e;else if(r&&e.clone)s=e.clone();else if(i(e)){s=[];for(var a=0;a<e.length;a++)s.push(t(e[a]))}else if(n(e))for(var o in s={},e)s[o]=t(e[o]);else s=e;return s}}),define("skylark-langx-objects/each",["./objects"],function(t){return t.each=function(t,e,n){var i,r,s,a;if(t)if(void 0===(i=t.length)){for(r in t)if(t.hasOwnProperty(r)&&(a=t[r],!1===(n?e.call(a,a,r):e.call(a,r,a))))break}else for(s=0;s<i&&(a=t[s],!1!==(n?e.call(a,a,s):e.call(a,s,a)));s++);return this}}),define("skylark-langx-objects/_mixin",["skylark-langx-types","./objects"],function(t,e){var n=t.isPlainObject;return function t(e,i,r,s){for(var a in i)s&&void 0!==e[a]||(r&&n(i[a])?(n(e[a])||(e[a]={}),t(e[a],i[a],r,s)):void 0!==i[a]&&(e[a]=i[a]));return e}}),define("skylark-langx-objects/_parse_mixin_args",["skylark-langx-types","./objects"],function(t,e){var n=Array.prototype.slice,i=t.isBoolean;return function(t){var e=n.call(arguments,0),r=e.shift(),s=!1;i(e[e.length-1])&&(s=e.pop());return{target:r,sources:e,deep:s}}}),define("skylark-langx-objects/mixin",["skylark-langx-types","./objects","./_mixin","./_parse_mixin_args"],function(t,e,n,i){return e.mixin=function(){var t=i.apply(this,arguments);return t.sources.forEach(function(e){n(t.target,e,t.deep,!1)}),t.target}}),define("skylark-langx-objects/extend",["./objects","./mixin"],function(t,e){var n=Array.prototype.slice;return t.extend=function(t){var i,r=n.call(arguments,1);"boolean"==typeof t&&(i=t,t=r.shift());0==r.length&&(r=[t],t=this);return r.forEach(function(n){e(t,n,i)}),t}}),define("skylark-langx-objects/includes",["./objects"],function(t){return t.includes=function(t,e,n,i){t=isArrayLike(t)?t:values(t),n=n&&!i?toInteger(n):0;var r=t.length;n<0&&(n=nativeMax(r+n,0));return isString(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&baseIndexOf(t,e,n)>-1}}),define("skylark-langx-objects/is-equal",["skylark-langx-types","./objects"],function(t,e){var n,i,r=t.isFunction,s="undefined"!=typeof Symbol?Symbol.prototype:null;return n=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var s=typeof t;return("function"===s||"object"===s||"object"==typeof e)&&i(t,e,n,r)},i=function(t,e,i,a){var o=toString.call(t);if(o!==toString.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var l="[object Array]"===o;if(!l){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,u=e.constructor;if(c!==u&&!(r(c)&&c instanceof c&&r(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],a=a||[];for(var h=i.length;h--;)if(i[h]===t)return a[h]===e;if(i.push(t),a.push(e),l){if((h=t.length)!==e.length)return!1;for(;h--;)if(!n(t[h],e[h],i,a))return!1}else{var d,p=Object.keys(t);if(h=p.length,Object.keys(e).length!==h)return!1;for(;h--;)if(d=p[h],void 0===e[d]||!n(t[d],e[d],i,a))return!1}return i.pop(),a.pop(),!0},e.isEqual=function(t,e){return n(t,e)}}),define("skylark-langx-objects/omit",["./objects"],function(t){return t.omit=function(t,e,n){if(!t)return null;for(var i=mixin({},t),r=1;r<arguments.length;r++){var s=arguments[r];s in t&&delete i[s]}return i}}),define("skylark-langx-objects/pick",["./objects"],function(t){return t.pick=function(t,e,n){if(!t)return null;for(var i={},r=1;r<arguments.length;r++){var s=arguments[r];s in t&&(i[s]=t[s])}return i}}),define("skylark-langx-objects/result",["skylark-langx-types","./objects"],function(t,e){var n=t.isArray,i=t.isFunction;return e.result=function(t,e,r){n(e)||(e=e.split("."));var s=e.length;if(!s)return i(r)?r.call(t):r;for(var a=0;a<s;a++){var o=null==t?void 0:t[e[a]];void 0===o&&(o=r,a=s),t=i(o)?o.call(t):o}return t}}),define("skylark-langx-objects/safe-mixin",["./objects","./_mixin","./_parse_mixin_args"],function(t,e,n){return t.safeMixin=function(){var t=n.apply(this,arguments);return t.sources.forEach(function(n){e(t.target,n,t.deep,!0)}),t.target}}),define("skylark-langx-objects/scall",["./objects"],function(t){return t.scall=function(t,e,n,i){if(t&&t[e]){var r=slice.call(arguments,2);return t[e].apply(t,r)}}}),define("skylark-langx-objects/shadow",["./objects"],function(t){return t.shadow=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}}),define("skylark-langx-objects/main",["./objects","./clone","./each","./extend","./includes","./is-equal","./mixin","./omit","./pick","./result","./safe-mixin","./scall","./shadow"],function(t){return t}),define("skylark-langx-objects",["skylark-langx-objects/main"],function(t){return t}),define("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(t){var e={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(e.isNode=!0,e.isBrowser=!1),e.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var n=null;if(Object.defineProperty(e,"document",function(){if(!n){var t="undefined"==typeof window?require("html-element"):window;n=t.document}return n}),void 0===e.global.CustomEvent&&(e.global.CustomEvent=function(t,e){this.type=t,this.props=e}),e.isBrowser){var i=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent),r=e.browser={};i.browser&&(r[i.browser]=!0,r.version=i.version),r.chrome?r.webkit=!0:r.webkit&&(r.safari=!0)}return e.detects={},t.attach("langx.hoster",e)}),define("skylark-langx-hoster/detects/mobile",["../hoster"],function(t){var e=/iPhone/i,n=/iPod/i,i=/iPad/i,r=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,o=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,c=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,h=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,f=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,g=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};return t.detects.mobile=function(t){var y={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?y.userAgent=t:t&&t.userAgent&&(y={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):y={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var v=y.userAgent,k=v.split("[FBAN");void 0!==k[1]&&(v=k[0]);void 0!==(k=v.split("Twitter"))[1]&&(v=k[0]);var x=function(t){return function(e){return e.test(t)}}(v),b={apple:{phone:x(e)&&!x(c),ipod:x(n),tablet:!x(e)&&(x(i)||g(y))&&!x(c),universal:x(r),device:(x(e)||x(n)||x(i)||x(r)||g(y))&&!x(c)},amazon:{phone:x(o),tablet:!x(o)&&x(l),device:x(o)||x(l)},android:{phone:!x(c)&&x(o)||!x(c)&&x(s),tablet:!x(c)&&!x(o)&&!x(s)&&(x(l)||x(a)),device:!x(c)&&(x(o)||x(l)||x(s)||x(a))||x(/\bokhttp\b/i)},windows:{phone:x(c),tablet:x(u),device:x(c)||x(u)},other:{blackberry:x(h),blackberry10:x(d),opera:x(p),firefox:x(m),chrome:x(f),device:x(h)||x(d)||x(p)||x(m)||x(f)},any:!1,phone:!1,tablet:!1};return b.any=b.apple.device||b.android.device||b.windows.device||b.other.device,b.phone=b.apple.phone||b.android.phone||b.windows.phone,b.tablet=b.apple.tablet||b.android.tablet||b.windows.tablet,b}}),define("skylark-langx-hoster/is-mobile",["./hoster","./detects/mobile"],function(t,e){return void 0==t.isMobile&&(t.isMobile=e()),t.isMobile}),define("skylark-langx-hoster/main",["./hoster","./is-mobile"],function(t){return t}),define("skylark-langx-hoster",["skylark-langx-hoster/main"],function(t){return t}),define("skylark-langx-arrays/arrays",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects"],function(t,e,n){var i=Array.prototype.filter,r=Array.prototype.find,s=e.isArrayLike;function a(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function o(t){return t!=t}function l(t){if(s(t)){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(s(i))for(var r=0;r<i.length;r++)e.push(i[r]);else e.push(i)}return e}return t}function c(t,e,n){return s(t)?(n||[]).concat(Array.prototype.slice.call(t,e||0)):[t]}return t.attach("langx.arrays",{baseFindIndex:a,baseIndexOf:function(t,e,n){if(e!=e)return a(t,o,n);var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1},compact:function(t){return i.call(t,function(t){return null!=t})},first:function(t,e){return e?t.slice(0,e):t[0]},filter:function(t,e){return i.call(t,e)},find:function(t,e){return r.call(t,e)},flatten:l,grep:function(t,e){var i=[];return n.each(t,function(t,n){e(n,t)&&i.push(n)}),i},inArray:function(t,e){if(!e)return-1;var n;if(e.indexOf)return e.indexOf(t);n=e.length;for(;n--;)if(e[n]===t)return n;return-1},indexOf:function(t,e){return t.indexOf(e)},makeArray:c,toArray:c,last:function(t){return t[t.length-1]},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},forEach:function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n)},map:function(t,e){var n,i,r,a=[];if(s(t))for(i=0;i<t.length;i++)null!=(n=e.call(t[i],t[i],i))&&a.push(n);else for(r in t)null!=(n=e.call(t[r],t[r],r))&&a.push(n);return l(a)},reduce:function(t,e,n){return Array.prototype.reduce.call(t,e,n)},uniq:function(t){return i.call(t,function(e,n){return t.indexOf(e)==n})}})}),define("skylark-langx-arrays/main",["./arrays"],function(t){return t}),define("skylark-langx-arrays",["skylark-langx-arrays/main"],function(t){return t}),define("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(t,e,n){return t.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define("skylark-langx-funcs/defer",["skylark-langx-types","./funcs"],function(t,e){return e.defer=function(e,n,i,r){var s={cancel:null},a=e;t.isNumber(n)||t.isFunction(n)||(r=i,i=n,n=0);i&&(a=function(){e.apply(r,i)});if(t.isFunction(n)){var o=!1;n(function(){o||a()}),s.cancel=function(){o=!0}}else{var l;0==n&&requestAnimationFrame?(l=requestAnimationFrame(a),s.cancel=function(){return cancelAnimationFrame(l)}):(l=setTimeout(a,n),s.cancel=function(){return clearTimeout(l)})}return s}}),define("skylark-langx-funcs/debounce",["./funcs","./defer"],function(t,e){return t.debounce=function(t,n,i){var r,s,a=function(){var a=this,l=arguments;return o(),r=setTimeout(function(){r=null,i?s=e(t,l,a):t.apply(a,l)},n),{cancel:o}},o=a.cancel=function(){r&&clearTimeout(r),s&&s.cancel(),r=void 0,s=void 0};return a}}),define("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(t,e){var n=t.mixin,i=function(){function t(){}return function(e,i){t.prototype=e;var r=new t;return t.prototype=null,i&&n(r,i),r}}();return e.delegate=i}),define("skylark-langx-funcs/loop",["./funcs"],function(t){function e(t){this.callback=t,this.running=!1,this.id=-1}return e.prototype.start=function(){if(!this.running){this.running=!0;var t=this;!function e(){t.callback();t.running&&(t.id=requestAnimationFrame(e))}()}},e.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new e(t)}}),define("skylark-langx-funcs/negate",["./funcs"],function(t){return t.negate=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(...e){return!t.apply(this,e)}}}),define("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(t,e){var n=Array.prototype.slice,i=t.isFunction,r=t.isString;return e.bind=e.proxy=function t(e,s){var a=2 in arguments&&n.call(arguments,2);if(i(e)){return function(){return e.apply(s,a?a.concat(n.call(arguments)):arguments)}}if(r(s))return a?(a.unshift(e[s],e),t.apply(null,a)):t(e[s],e);throw new TypeError("expected function")}}),define("skylark-langx-funcs/template",["skylark-langx-objects","./funcs","./proxy"],function(t,e,n){Array.prototype.slice;var i={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},r=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g;function o(e,o,l){var c;l=t.defaults({},l,i);var u=RegExp([(l.escape||r).source,(l.interpolate||r).source,(l.evaluate||r).source].join("|")+"|$","g"),h=0,d="__p+='";e.replace(u,function(t,n,i,r,o){return d+=e.slice(h,o).replace(a,function(t){return"\\"+s[t]}),n&&(d+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(d+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(d+="';\n"+r+"\n__p+='"),h=o+t.length,t}),d+="';\n",l.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+d+"return __p;\n";try{c=new Function(l.variable||"obj","_",d)}catch(t){throw t.source=d,t}if(o)return c(o,this);var p=n(function(t){return c.call(this,t,this)},this),f=l.variable||"obj";return p.source="function("+f+"){\n"+d+"}",p}return o.templateSettings=e.templateSettings=i,e.template=o}),define("skylark-langx-funcs/throttle",["./funcs"],function(t){return t.throttle=function(t,e){let n=window.performance.now();return function(...i){const r=window.performance.now();r-n>=e&&(t(...i),n=r)}}}),define("skylark-langx-funcs/main",["./funcs","./debounce","./defer","./delegate","./loop","./negate","./proxy","./template","./throttle"],function(t){return t}),define("skylark-langx-funcs",["skylark-langx-funcs/main"],function(t){return t}),define("skylark-langx-async/deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(t,e,n){"use strict";var i=Array.prototype.slice,r=e.proxy,s=t.makeArray,a=n.result,o=n.mixin;o(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var l=function(){var t=this;this.promise=c(new Promise(function(e,n){t._resolve=e,t._reject=n}))};function c(t){if(t.isResolved)return t;var e=!0,n=!1,i=!1,r=t.then(function(t){return i=!0,e=!1,t},function(t){throw n=!0,e=!1,t});r.isResolved=function(){return i},r.isPending=function(){return e},r.isRejected=function(){return n},r.state=function(){return i?"resolved":n?"rejected":"pending"};var s=[],a=[];return r.then=function(t,e,n){return n&&this.progress(n),c(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}))},r.progress=function(t){return s.forEach(function(e){t(e)}),a.push(t),this},r.pipe=r.then,r.notify=function(t){try{return s.push(t),a.forEach(function(e){return e(t)})}catch(t){this.reject(t)}return this},r}return l.prototype.resolve=function(t){var e=i.call(arguments);return this.resolveWith(null,e)},l.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},l.prototype.notify=function(t){var e=a(this,"promise");return e.notify(t),this},l.prototype.reject=function(t){var e=i.call(arguments);return this.rejectWith(null,e)},l.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},l.prototype.isResolved=function(){var t=a(this,"promise");return t.isResolved()},l.prototype.isRejected=function(){var t=a(this,"promise");return t.isRejected()},l.prototype.state=function(){var t=a(this,"promise");return t.state()},l.prototype.then=function(t,e,n){var i=a(this,"promise");return i.then(t,e,n)},l.prototype.progress=function(t){var e=a(this,"promise");return e.progress(t)},l.prototype.catch=function(t){var e=a(this,"promise");return e.catch(t)},l.prototype.always=function(){var t=a(this,"promise");return t.always.apply(t,arguments),this},l.prototype.done=function(){var t=a(this,"promise");return t.done.apply(t,arguments),this},l.prototype.fail=function(t){var e=a(this,"promise");return e.fail(t),this},l.all=function(t){var e=new l;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),a(e,"promise")},l.first=function(t){return c(Promise.race(t))},l.when=function(t,e,n,i){var s=t&&"function"==typeof t.then,a=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new l).resolve(t);if(!a){var o=new l(t.cancel);t.then(r(o.resolve,o),r(o.reject,o),o.notify),t=o.promise}return e||n||i?t.then(e,n,i):t},l.reject=function(t){var e=new l;return e.reject(t),e.promise},l.immediate=l.resolve=function(t){var e=new l;return e.resolve.apply(e,arguments),e.promise},l.promise=function(t){var e=new l;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},l}),define("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./deferred"],function(t,e,n){var i=e.each,r={Deferred:n,parallel:function(t,e,r){var s=[];return r=r||null,e=e||[],i(t,function(t,n){s.push(n.apply(r,e))}),n.all(s)},series:function(t,e,r){var s=[],a=new n,o=a.promise;return r=r||null,e=e||[],a.resolve(),i(t,function(t,n){o=o.then(function(){return n.apply(r,e)}),s.push(o)}),n.all(s)},waterful:function(t,e,r){var s=new n,a=s.promise;return r=r||null,e=e||[],s.resolveWith(r,e),i(t,function(t,e){a=a.then(e)}),a}};return t.attach("langx.async",r)}),define("skylark-langx-async/main",["./async"],function(t){return t}),define("skylark-langx-async",["skylark-langx-async/main"],function(t){return t}),define("skylark-langx-events/events",["skylark-langx-ns"],function(t){return t.attach("langx.events",{})}),define("skylark-langx-constructs/constructs",["skylark-langx-ns"],function(t){return t.attach("langx.constructs",{})}),define("skylark-langx-constructs/inherit",["./constructs"],function(t){return t.inherit=function(t,e){if("function"!=typeof e&&e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object.setPrototypeOf(t,e)}}),define("skylark-langx-constructs/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","./constructs","./inherit"],function(t,e,n,i,r,s){var a=i.uniq,o=n.has,l=n.mixin,c=e.isArray,u=e.isDefined,h=function(){function t(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function n(i,r,h,d){c(r)&&(d=h,h=r,r=null),r=r||Object,u(h)&&!c(h)&&(d=h,h=!1);var p=r;h&&(h=function(t,e){var n=[];return e.forEach(function(t){if(o(t,"__mixins__"))throw new Error("nested mixins");for(var e=[];t;)e.unshift(t),t=t.superclass;n=n.concat(e)}),(n=(n=a(n)).filter(function(e){for(var n=t;n;){if(e===n)return!1;if(o(n,"__mixins__"))for(var i=n.__mixins__,r=0;r<i.length;r++)if(i[r]===e)return!1;n=n.superclass}return!0})).length>0&&n}(p,h)),h&&(p=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=new Function;s(r,n),r.superclass=null,l(r.prototype,e[i].prototype),r.prototype.__mixin__=e[i],n=r}return n}(p,h));var f=i.klassName||"",m=new Function("return function "+f+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return s(m,p),m.superclass=r,m._constructor||(m._constructor=t),h&&(m.__mixins__=h),m.partial||(m.partial=function(t,n){return function(t,n,i){var r=t.prototype,s=t.superclass.prototype,a=i&&i.noOverrided;i&&i.overrides;for(var o in n)if("constructor"!==o){var l=n[o];"function"==typeof n[o]?r[o]=l._constructor||a||"function"!=typeof s[o]?l:function(t,e,n){return function(){var t=this.overrided;this.overrided=n;var i=e.apply(this,arguments);return this.overrided=t,i}}(0,l,s[o]):e.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(r,o,l):r[o]=l}return t}(this,t,n)}),m.inherit||(m.inherit=function(t,e,i){return n(t,this,e,i)}),m.partial(i,d),m}}();return r.klass=h}),define("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-constructs/klass"],function(t,e){return t.attach("langx.klass",e)}),define("skylark-langx-klass/main",["./klass"],function(t){return t}),define("skylark-langx-klass",["skylark-langx-klass/main"],function(t){return t}),define("skylark-langx-events/event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(t,e,n,i){var r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function s(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),t.each(r,function(t,r){var s=i[t];n[t]=function(){return this[r]=e.returnTrue,s&&s.apply(i,arguments)},n[r]=e.returnFalse})),n}class a extends CustomEvent{constructor(e,n){super(e,n),t.safeMixin(this,n),s(this)}}return a.compatible=s,i.Event=a}),define("skylark-langx-events/listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event"],function(t,e,n,i,r,s){Array.prototype.slice;var a=n.compact,o=(t.isDefined,t.isUndefined),l=(t.isPlainObject,t.isFunction,t.isBoolean),c=t.isString,u=t.isEmptyObject,h=(e.mixin,e.safeMixin,i({listenTo:function(e,n,i,r,s){if(!e)return this;if(t.isPlainObject(n)){t.isBoolean(i)?(s=i,i=null):t.isBoolean(r)&&(s=r);var a=n;for(var u in a){var h=u.match(/^([\w:-]*)\s*(.*)$/),d=h[1],p=h[2]||i;p?this.listenTo(e,d,p,a[u],s):this.listenTo(e,d,a[u],s)}return this}l(r)?(s=r,r=i,i=null):l(i)?(s=i,r=i=null):o(r)&&(s=!1,r=i,i=null),r||(r="handleEvent"),c(r)&&(r=this[r]),s?i?e.one(n,i,r,this):e.one(n,r,this):i?e.on(n,i,r,this):e.on(n,r,this);for(var f,m=this._listeningTo||(this._listeningTo=[]),g=0;g<m.length;g++)if(m[g].obj==e){f=m[g];break}f||m.push(f={obj:e,events:{}});var y=f.events,v=y[n]=y[n]||[];return-1==v.indexOf(r)&&v.push(r),this},listenToOnce:function(t,e,n,i){return this.listenTo(t,e,n,i,1)},unlistenTo:function(t,e,n){var i=this._listeningTo;if(!i)return this;c(n)&&(n=this[n]);for(var r=0;r<i.length;r++){var s=i[r];if(!t||t==s.obj){var o=s.events;for(var l in o)if(!e||e==l){var h=o[l];if(h){for(var d=0;d<h.length;d++)n&&n!=h[r]||(s.obj.off(l,h[r],this),h[r]=null);h=o[l]=a(h),u(h)&&(o[l]=null)}}u(o)&&(i[r]=null)}}return i=this._listeningTo=a(i),u(i)&&(this._listeningTo=null),this}}));return r.Listener=h}),define("skylark-langx-events/emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event","./listener"],function(t,e,n,i,r,s,a){var o=Array.prototype.slice,l=n.compact,c=t.isDefined,u=t.isPlainObject,h=t.isFunction,d=t.isString,p=(t.isEmptyObject,e.mixin);e.safeMixin;function f(t){var e=(""+t).split(".");return{name:e[0],ns:e.slice(1).join(" ")}}var m=new Map,g=a.inherit({_prepareArgs:function(t,e){return e=c(e)?[t].concat(e):[t]},on:function(t,e,n,i,r,s){var a=this,o=this._hub||(this._hub={});if(u(t))return r=i,each(t,function(t,i){a.on(t,e,n,i,r,s)}),this;if(d(e)||h(i)||(r=i,i=n,n=e,e=void 0),h(n)&&(r=i,i=n,n=null),!i)throw new Error("No callback function");if(!h(i))throw new Error("The callback  is not afunction");return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var a=f(t),l=a.name,c=a.ns;(o[l]||(o[l]=[])).push({fn:i,selector:e,data:n,ctx:r,ns:c,one:s})}),this},one:function(t,e,n,i,r){return this.on(t,e,n,i,r,1)},emit:function(t){if(!this._hub)return this;var e=this;d(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var n=o.call(arguments,1);return n=this._prepareArgs(t,n),[t.type||t.name,"all"].forEach(function(i){var r=f(i),s=r.name,a=r.ns,o=e._hub[s];if(o){for(var c=o.length,h=!1,d=0;d<c;d++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var m=o[d];(!a||m.ns&&m.ns.startsWith(a))&&(m.data&&(t.data=p({},m.data,t.data)),2==n.length&&u(n[1])&&(t.data=t.data||{},p(t.data,n[1])),m.fn.apply(m.ctx,n),m.one&&(o[d]=null,h=!0))}h&&(e._hub[i]=l(o))}}),this},queueEmit:function(t){const e=t.type||t;let n=m.get(this);n||(n=new Map,m.set(this,n));const i=n.get(e);n.delete(e),window.clearTimeout(i);const r=window.setTimeout(()=>{0===n.size&&(n=null,m.delete(this)),this.trigger(t)},0);n.set(e,r)},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},off:function(t,e){if(t){var n=this._hub||(this._hub={});return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var i=f(t),r=i.name,s=i.ns,a=n[r];if(a){var o=[];if(e||s)for(var l=0,c=a.length;l<c;l++)e&&a[l].fn!==e&&a[l].fn._!==e?o.push(a[l]):!s||a[l].ns&&0==a[l].ns.indexOf(s)||o.push(a[l]);o.length?n[r]=o:delete n[r]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return r.Emitter=g}),define("skylark-langx-events/create-event",["./events","./event"],function(t,e){return t.createEvent=function(t,n){return new e(t,n)}}),define("skylark-langx-events/main",["./events","./event","./listener","./emitter","./create-event"],function(t){return t}),define("skylark-langx-events",["skylark-langx-events/main"],function(t){return t}),define("skylark-langx-emitter/emitter",["skylark-langx-events"],function(t){return t.Emitter}),define("skylark-langx-emitter/evented",["./emitter"],function(t){return t}),define("skylark-langx-urls/urls",["skylark-langx-ns"],function(t){return t.attach("langx.urls",{})}),define("skylark-langx-urls/parse-url",["./urls"],function(t){"use strict";return t.parseUrl=function(t){const e=["protocol","hostname","port","pathname","search","hash","host"];let n=document.createElement("a");n.href=t;const i=""===n.host&&"file:"!==n.protocol;let r;i&&((r=document.createElement("div")).innerHTML=`<a href="${t}"></a>`,n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(r));const s={};for(let t=0;t<e.length;t++)s[e[t]]=n[e[t]];"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,""));"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,""));s.protocol||(s.protocol=window.location.protocol);i&&document.body.removeChild(r);return s}}),define("skylark-langx-urls/is-cross-origin",["./urls","./parse-url"],function(t,e){"use strict";return t.isCrossOrigin=function(t,n=window.location){const i=e(t);return(":"===i.protocol?n.protocol:i.protocol)+i.host!==n.protocol+n.host}}),define("skylark-net-http/http",["skylark-langx-ns/ns"],function(t){return t.attach("net.http",{})}),define("skylark-net-http/Xhr",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-funcs","skylark-langx-async/deferred","skylark-langx-emitter/evented","skylark-langx-urls/is-cross-origin","./http"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(t){return a||(a=document.createElement("a")),a.href=t,a.href},a,Xhr=function(){var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{}};function mimeToDataType(t){if(t&&(t=t.split(";",2)[0]),t){if(t==htmlType)return"html";if(t==jsonType)return"json";if(scriptTypeRE.test(t))return"script";if(xmlTypeRE.test(t))return"xml"}return"text"}function appendQuery(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&"string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||("string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(t,e,n,i){var r,s=isArray(e),a=isPlainObject(e);each(e,function(e,o){r=type(o),i&&(e=n?i:i+"["+(a||"object"==r||"array"==r?e:"")+"]"),!i&&s?t.add(o.name,o.value):"array"==r||!n&&"object"==r?serialize(t,o,n,e):t.add(e,o)})}var param=function(t,e){var n=[];return n.add=function(t,e){isFunction(e)&&(e=e()),null==e&&(e=""),this.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},serialize(n,t,e),n.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),"blob"!=dataType&&"arraybuffer"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type"));try{"script"==dataType?eval(xhr.responseText):result="xml"==dataType?xhr.responseXML:"json"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):"blob"==dataType?xhr.response:"arraybuffer"==dataType?xhr.response:xhr.responseText}catch(t){error=t}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||isCrossOrigin(url)||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var t=this._,e=t.xhr;e&&e.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type="GET",this._request(t)},post:function(t){return(t=t||{}).type="POST",this._request(t)},patch:function(t){return(t=t||{}).type="PATCH",this._request(t)},put:function(t){return(t=t||{}).type="PUT",this._request(t)},del:function(t){return(t=t||{}).type="DELETE",this._request(t)},init:function(t){this._={options:t||{}}}});return["request","get","post","put","del","patch"].forEach(function(t){Xhr[t]=function(e,n){var i=new Xhr({url:e});return i[t](n)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),define("skylark-langx/arrays",["skylark-langx-arrays"],function(t){return t}),define("skylark-langx/klass",["skylark-langx-klass"],function(t){return t}),define("skylark-langx/array-store",["./klass"],function(t){var e=function(t){if(!t)return t;var n=!!t.then;function i(i){t[i]=function(){var r=arguments,s=Deferred.when(t,function(t){return e(Array.prototype[i].apply(t,r))});if("forEach"!==i||n)return s}}return n&&(t=Object.delegate(t)),i("forEach"),i("filter"),i("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},n=t({klassName:"ArrayStore",queryEngine:function(t,e){switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var n=t;t=function(t){for(var e in n){var i=n[e];if(i&&i.test){if(!i.test(t[e],t))return!1}else if(i!=t[e])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}function i(n){var i=function(t,e,n){var i,r=0,s=t&&t.length||0,a=[];s&&"string"==typeof t&&(t=t.split(""));"string"==typeof e&&(e=cache[e]||buildFn(e));if(n)for(;r<s;++r)i=t[r],e.call(n,i,r,t)&&a.push(i);else for(;r<s;++r)i=t[r],e(i,r,t)&&a.push(i);return a}(n,t),r=e&&e.sort;if(r&&i.sort("function"==typeof r?r:function(t,e){for(var n,i=0;n=r[i];i++){var s=t[n.attribute],a=e[n.attribute];if(s=null!=s?s.valueOf():s,a=null!=a?a.valueOf():a,s!=a)return!!n.descending==(null==s||s>a)?-1:1}return 0}),e&&(e.start||e.count)){var s=i.length;(i=i.slice(e.start||0,(e.start||0)+(e.count||1/0))).total=s}return i}return i.matches=t,i},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var n=this.data,i=this.index,r=this.idProperty,s=t[r]=e&&"id"in e?e.id:r in t?t[r]:Math.random();if(s in i){if(e&&!1===e.overwrite)throw new Error("Object already exists");n[i[s]]=t}else i[s]=n.push(t)-1;return s},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,n=this.data;if(t in e)return n.splice(e[t],1),this.setData(n),!0},query:function(t,n){return e(this.queryEngine(t,n)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,n=t.length;e<n;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}});return n}),define("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(t){var e,n=0;function i(t){return function(i,r,s,a){var o,l=i[r];l&&l.target==i||(i[r]=o=function(){for(var t=n,i=arguments,r=o.before;r;)i=r.advice.apply(this,i)||i,r=r.next;if(o.around)var s=o.around.advice(this,i);for(var a=o.after;a&&a.id<t;){if(a.receiveArguments){var l=a.advice.apply(this,i);s=l===e?s:l}else s=a.advice.call(this,s,i);a=a.next}return s},l&&(o.around={advice:function(t,e){return l.apply(t,e)}}),o.target=i);var c=function(t,e,i,r){var s,a=t[e],o="around"==e;if(o){var l=i(function(){return a.advice(this,arguments)});s={remove:function(){l&&(l=t=i=null)},advice:function(t,e){return l?l.apply(t,e):a.advice(t,e)}}}else s={remove:function(){if(s.advice){var n=s.previous,r=s.next;r||n?(n?n.next=r:t[e]=r,r&&(r.previous=n)):delete t[e],t=i=s.advice=null}},id:n++,advice:i,receiveArguments:r};if(a&&!o)if("after"==e){for(;a.next&&(a=a.next););a.next=s,s.previous=a}else"before"==e&&(t[e]=s,s.next=a,a.previous=s);else t[e]=s;return s}(o||l,t,s,a);return s=null,c}}return t.attach("langx.aspect",{after:i("after"),around:i("around"),before:i("before")})}),define("skylark-langx-aspect/main",["./aspect"],function(t){return t}),define("skylark-langx-aspect",["skylark-langx-aspect/main"],function(t){return t}),define("skylark-langx/aspect",["skylark-langx-aspect"],function(t){return t}),define("skylark-langx/async",["skylark-langx-async"],function(t){return t}),define("skylark-langx-binary/binary",["skylark-langx-ns"],function(t){"use strict";return t.attach("langx.binary",{fromBase64:function(t){for(var e,n,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.length/4*3,o=new ArrayBuffer(a),l=new Uint8Array(o),c=0,u=0;c<a;c+=3)e=s.indexOf(t.charAt(u++)),n=s.indexOf(t.charAt(u++)),i=s.indexOf(t.charAt(u++)),r=s.indexOf(t.charAt(u++)),l[c]=e<<2|n>>4,64!==i&&(l[c+1]=(15&n)<<4|i>>2),64!==r&&(l[c+2]=(3&i)<<6|r);return o},fromBinaryString:function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n},fromBuffer:function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i++)n[i]=t[i];return e},readInt8:function(t,e){return t[e]<<24>>24},readUint16:function(t,e){return t[e]<<8|t[e+1]},readUint32:function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}})}),define("skylark-langx-binary/main",["./binary"],function(t){return t}),define("skylark-langx-binary",["skylark-langx-binary/main"],function(t){return t}),define("skylark-langx/binary",["skylark-langx-binary"],function(t){return t}),define("skylark-langx-constructs/main",["./constructs","./inherit","./klass"],function(t){return t}),define("skylark-langx-constructs",["skylark-langx-constructs/main"],function(t){return t}),define("skylark-langx/constructs",["skylark-langx-constructs"],function(t){return t}),define("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(t){return t.attach("langx.datetimes",{parseMilliSeconds:function(t){var e=t.split(" "),n=parseInt(e[0]);if(isNaN(n))return 0;switch(e[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),define("skylark-langx-datetimes/to_date",["skylark-langx-types","./datetimes"],function(t,e){let n;return e.toDate=function(e){if(!e||!t.isString(e))return null;n||(n=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const i=n.exec(e);if(!i)return null;const r=parseInt(i[1],10);let s=parseInt(i[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(i[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(i[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(i[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(i[6],10);c=c>=0&&c<=59?c:0;const u=i[7]||"Z";let h=parseInt(i[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(i[9],10)||0;d=d>=0&&d<=59?d:0,"-"===u?(o+=h,l+=d):"+"===u&&(o-=h,l-=d);return new Date(Date.UTC(r,s,a,o,l,c))}}),define("skylark-langx-datetimes/main",["./datetimes","./to_date"],function(t){return t}),define("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(t){return t}),define("skylark-langx/datetimes",["skylark-langx-datetimes"],function(t){return t}),define("skylark-langx/deferred",["skylark-langx-async"],function(t){return t.Deferred}),define("skylark-langx/emitter",["skylark-langx-events"],function(t){return t.Emitter}),define("skylark-langx/evented",["./emitter"],function(t){return t}),define("skylark-langx/events",["skylark-langx-events"],function(t){return t}),define("skylark-langx/funcs",["skylark-langx-funcs"],function(t){return t}),define("skylark-langx-globals/globals",["skylark-langx-ns"],function(t){var e=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();return t.attach("langx.globals",e)}),define("skylark-langx-globals/console",["./globals"],function(t){return t.console=console}),define("skylark-langx-globals/document",["./globals"],function(t){var e;"undefined"!=typeof global?global:"undefined"!=typeof window&&window;return e="undefined"!=typeof document?document:require("min-document"),t.document=e}),define("skylark-langx-globals/window",["./globals"],function(t){var e="undefined"!=typeof window?window:{};return t.window=e}),define("skylark-langx-globals/main",["./globals","./console","./document","./window"],function(t){return t}),define("skylark-langx-globals",["skylark-langx-globals/main"],function(t){return t}),define("skylark-langx/globals",["skylark-langx-globals"],function(t){return t}),define("skylark-langx/hoster",["skylark-langx-hoster"],function(t){return t}),define("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(t,e){for(var n=[],i=0;i<256;i++)n[i]=(i<16?"0":"")+i.toString(16);var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),p=s((i-e)/2),f=a((i-e)/2);"XYX"===r?t.set(o*u,l*h,l*d,o*c):"YZY"===r?t.set(l*d,o*u,l*h,o*c):"ZXZ"===r?t.set(l*h,l*d,o*u,o*c):"XZX"===r?t.set(o*u,l*f,l*p,o*c):"YXY"===r?t.set(l*p,o*u,l*f,o*c):"ZYZ"===r?t.set(l*f,l*p,o*u,o*c):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return t.attach("langx.maths",r)}),define("skylark-langx-maths/main",["./maths"],function(t){return t}),define("skylark-langx-maths",["skylark-langx-maths/main"],function(t){return t}),define("skylark-langx/maths",["skylark-langx-maths"],function(t){return t}),define("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(t,e){return t.attach("langx.numerics",{toFinite:e.toFinite,toNumber:e.toNumber,toInteger:e.toInteger})}),define("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(t,e,n){for(var i=[],r=0;r<256;r++)i[r]=(r<16?"0":"")+r.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),p=s((i-e)/2),f=a((i-e)/2);"XYX"===r?t.set(o*u,l*h,l*d,o*c):"YZY"===r?t.set(l*d,o*u,l*h,o*c):"ZXZ"===r?t.set(l*h,l*d,o*u,o*c):"XZX"===r?t.set(o*u,l*f,l*p,o*c):"YXY"===r?t.set(l*p,o*u,l*f,o*c):"ZYZ"===r?t.set(l*f,l*p,o*u,o*c):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return n.maths=s}),define("skylark-langx-numerics/quaternion",["skylark-langx-klass","./numerics","./maths"],function(t,e,n){var i=t({klassName:"Quaternion",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t.order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),p=o(r/2);return"XYZ"===s?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"YXZ"===s?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"ZXY"===s?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"ZYX"===s?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"YZX"===s?(this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p):"XZY"===s&&(this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=i+o+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(u-l)*e,this._y=(s-c)*e,this._z=(a-r)*e):i>o&&i>h?(e=2*Math.sqrt(1+i-o-h),this._w=(u-l)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(s+c)/e):o>h?(e=2*Math.sqrt(1+o-i-h),this._w=(s-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(l+u)/e):(e=2*Math.sqrt(1+h-i-o),this._w=(a-r)/e,this._x=(s+c)/e,this._y=(l+u)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,a=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,a=s*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var o=1-a*a;if(o<=Number.EPSILON){var l=1-e;return this._w=l*s+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(o),u=Math.atan2(c,a),h=Math.sin((1-e)*u)/c,d=Math.sin(e*u)/c;return this._w=s*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}});return Object.assign(i,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,a){var o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(u!==f||o!==h||l!==d||c!==p){var m=1-a,g=o*h+l*d+c*p+u*f,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var k=Math.sqrt(v),x=Math.atan2(k,g*y);m=Math.sin(m*x)/k,a=Math.sin(a*x)/k}var b=a*y;if(o=o*m+h*b,l=l*m+d*b,c=c*m+p*b,u=u*m+f*b,m===1-a){var w=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=w,l*=w,c*=w,u*=w}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=u}}),Object.assign(i.prototype,{}),e.Quaternion=i}),define("skylark-langx-numerics/vector3",["skylark-langx-klass","./numerics","./maths","./quaternion"],function(t,e,n,i){var r=new i,s=t({klassName:"Vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(r.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z,o=t.w,l=o*e+s*i-a*n,c=o*n+a*e-r*i,u=o*i+r*n-s*e,h=-r*e-s*n-a*i;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return a.copy(this).projectOnVector(t),this.sub(a)},reflect:function(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(MathUtils.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},_construct:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}}),a=new s;return e.Vector3=s}),define("skylark-langx-numerics/matrix4",["skylark-langx-klass","./numerics","./vector3"],function(t,e,n){var i=new n,r=new n(0,0,0),s=new n(1,1,1),a=new n,o=new n,l=new n,c=t({set:function(t,e,n,i,r,s,a,o,l,c,u,h,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/i.setFromMatrixColumn(t,0).length(),s=1/i.setFromMatrixColumn(t,1).length(),a=1/i.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=s*c,d=s*u,p=a*c,f=a*u;e[0]=o*c,e[4]=-o*u,e[8]=l,e[1]=d+p*l,e[5]=h-f*l,e[9]=-a*o,e[2]=f-h*l,e[6]=p+d*l,e[10]=s*o}else if("YXZ"===t.order){var m=o*c,g=o*u,y=l*c,v=l*u;e[0]=m+v*a,e[4]=y*a-g,e[8]=s*l,e[1]=s*u,e[5]=s*c,e[9]=-a,e[2]=g*a-y,e[6]=v+m*a,e[10]=s*o}else if("ZXY"===t.order){var m=o*c,g=o*u,y=l*c,v=l*u;e[0]=m-v*a,e[4]=-s*u,e[8]=y+g*a,e[1]=g+y*a,e[5]=s*c,e[9]=v-m*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){var h=s*c,d=s*u,p=a*c,f=a*u;e[0]=o*c,e[4]=p*l-d,e[8]=h*l+f,e[1]=o*u,e[5]=f*l+h,e[9]=d*l-p,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var k=s*o,x=s*l,b=a*o,w=a*l;e[0]=o*c,e[4]=w-k*u,e[8]=b*u+x,e[1]=u,e[5]=s*c,e[9]=-a*c,e[2]=-l*c,e[6]=x*u+b,e[10]=k-w*u}else if("XZY"===t.order){var k=s*o,x=s*l,b=a*o,w=a*l;e[0]=o*c,e[4]=-u,e[8]=l*c,e[1]=k*u+w,e[5]=s*c,e[9]=x*u-b,e[2]=b*u-x,e[6]=a*c,e[10]=w*u+k}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(r,t,s)},lookAt:function(t,e,n){var i=this.elements;return l.subVectors(t,e),0===l.lengthSq()&&(l.z=1),l.normalize(),a.crossVectors(n,l),0===a.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),a.crossVectors(n,l)),a.normalize(),o.crossVectors(l,a),i[0]=a.x,i[4]=o.x,i[8]=l.x,i[1]=a.y,i[5]=o.y,i[9]=l.y,i[2]=a.z,i[6]=o.z,i[10]=l.z,this},multiply:function(t,e){return void 0!==e?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],k=n[11],x=n[15],b=i[0],w=i[4],_=i[8],C=i[12],S=i[1],E=i[5],T=i[9],M=i[13],z=i[2],A=i[6],$=i[10],P=i[14],I=i[3],j=i[7],N=i[11],O=i[15];return r[0]=s*b+a*S+o*z+l*I,r[4]=s*w+a*E+o*A+l*j,r[8]=s*_+a*T+o*$+l*N,r[12]=s*C+a*M+o*P+l*O,r[1]=c*b+u*S+h*z+d*I,r[5]=c*w+u*E+h*A+d*j,r[9]=c*_+u*T+h*$+d*N,r[13]=c*C+u*M+h*P+d*O,r[2]=p*b+f*S+m*z+g*I,r[6]=p*w+f*E+m*A+g*j,r[10]=p*_+f*T+m*$+g*N,r[14]=p*C+f*M+m*P+g*O,r[3]=y*b+v*S+k*z+x*I,r[7]=y*w+v*E+k*A+x*j,r[11]=y*_+v*T+k*$+x*N,r[15]=y*C+v*M+k*P+x*O,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14],p=t[3],f=t[7],m=t[11],g=t[15];return p*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+f*(+e*o*d-e*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+m*(+e*l*u-e*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+g*(-i*a*c-e*o*u+e*a*h+i*s*u-n*s*h+n*o*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,i=t.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],y=i[13],v=i[14],k=i[15],x=p*v*h-y*f*h+y*u*m-c*v*m-p*u*k+c*f*k,b=g*f*h-d*v*h-g*u*m+l*v*m+d*u*k-l*f*k,w=d*y*h-g*p*h+g*c*m-l*y*m-d*c*k+l*p*k,_=g*p*u-d*y*u-g*c*f+l*y*f+d*c*v-l*p*v,C=r*x+s*b+a*w+o*_;if(0===C)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/C;return n[0]=x*S,n[1]=(y*f*o-p*v*o-y*a*m+s*v*m+p*a*k-s*f*k)*S,n[2]=(c*v*o-y*u*o+y*a*h-s*v*h-c*a*k+s*u*k)*S,n[3]=(p*u*o-c*f*o-p*a*h+s*f*h+c*a*m-s*u*m)*S,n[4]=b*S,n[5]=(d*v*o-g*f*o+g*a*m-r*v*m-d*a*k+r*f*k)*S,n[6]=(g*u*o-l*v*o-g*a*h+r*v*h+l*a*k-r*u*k)*S,n[7]=(l*f*o-d*u*o+d*a*h-r*f*h-l*a*m+r*u*m)*S,n[8]=w*S,n[9]=(g*p*o-d*y*o-g*s*m+r*y*m+d*s*k-r*p*k)*S,n[10]=(l*y*o-g*c*o+g*s*h-r*y*h-l*s*k+r*c*k)*S,n[11]=(d*c*o-l*p*o-d*s*h+r*p*h+l*s*m-r*c*m)*S,n[12]=_*S,n[13]=(d*y*a-g*p*a+g*s*f-r*y*f-d*s*v+r*p*v)*S,n[14]=(g*c*a-l*y*a-g*s*u+r*y*u+l*s*v-r*c*v)*S,n[15]=(l*p*a-d*c*a+d*s*u-r*p*u-l*s*f+r*c*f)*S,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,a=t.y,o=t.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,a=e._z,o=e._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,p=r*u,f=s*c,m=s*u,g=a*u,y=o*l,v=o*c,k=o*u,x=n.x,b=n.y,w=n.z;return i[0]=(1-(f+g))*x,i[1]=(d+k)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(d-k)*b,i[5]=(1-(h+g))*b,i[6]=(m+y)*b,i[7]=0,i[8]=(p+v)*w,i[9]=(m-y)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var r=this.elements,s=i.set(r[0],r[1],r[2]).length(),a=i.set(r[4],r[5],r[6]).length(),o=i.set(r[8],r[9],r[10]).length(),l=this.determinant();l<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],u.copy(this);var c=1/s,h=1/a,d=1/o;return u.elements[0]*=c,u.elements[1]*=c,u.elements[2]*=c,u.elements[4]*=h,u.elements[5]*=h,u.elements[6]*=h,u.elements[8]*=d,u.elements[9]*=d,u.elements[10]*=d,e.setFromRotationMatrix(u),n.x=s,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var a=this.elements,o=1/(e-t),l=1/(n-i),c=1/(s-r),u=(e+t)*o,h=(n+i)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),u=new c;return e.Matrix4=c}),define("skylark-langx-numerics/euler",["skylark-langx-klass","./numerics","./maths","./quaternion","./vector3","./matrix4"],function(t,e,n,i,r,s){var a=new s,o=new i,l=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=n.clamp,s=t.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],p=s[6],f=s[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,f),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,f))):"XZY"===e?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-h,f),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return o.setFromEuler(this),this.setFromQuaternion(o,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||l.DefaultOrder}});return l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",e.Euler=l}),define("skylark-langx-numerics/matrix3",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Matrix3",isMatrix3:!0,set:function(t,e,n,i,r,s,a,o,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],y=i[1],v=i[4],k=i[7],x=i[2],b=i[5],w=i[8];return r[0]=s*f+a*y+o*x,r[3]=s*m+a*v+o*b,r[6]=s*g+a*k+o*w,r[1]=l*f+c*y+u*x,r[4]=l*m+c*v+u*b,r[7]=l*g+c*k+u*w,r[2]=h*f+d*y+p*x,r[5]=h*m+d*v+p*b,r[8]=h*g+d*k+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8];return e*s*c-e*a*l-n*r*c+n*a*o+i*r*l-i*s*o},getInverse:function(t,e){void 0!==e&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,i=this.elements,r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=d*l-c*h,f=c*u-d*o,m=h*o-l*u,g=r*p+s*f+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);var y=1/g;return i[0]=p*y,i[1]=(a*h-d*s)*y,i[2]=(c*s-a*l)*y,i[3]=f*y,i[4]=(d*r-a*u)*y,i[5]=(a*o-c*r)*y,i[6]=m*y,i[7]=(s*u-h*r)*y,i[8]=(l*r-s*o)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,s,a){var o=Math.cos(r),l=Math.sin(r);this.set(n*o,n*l,-n*(o*s+l*a)+s+t,-i*l,i*o,-i*(-l*s+o*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],s=i[3],a=i[6],o=i[1],l=i[4],c=i[7];return i[0]=e*r+n*o,i[3]=e*s+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*o,i[4]=-n*s+e*l,i[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return e.Matrix3=n}),define("skylark-langx-numerics/transform",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Transform",value:{get:function(){return this._.value}}});return e.Transform=n}),define("skylark-langx-numerics/matrix-transform",["./numerics","./transform"],function(t,e){var n=e.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){var e=this._={};e.matrix=t}});return t.MatrixTransform=n}),define("skylark-langx-numerics/plane",["skylark-langx-klass","./numerics","./matrix3","./vector3"],function(t,e,n,i){var r=new i,s=new i,a=new n,o=t({klassName:"Plane",set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=r.subVectors(n,e).cross(s.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("mathsPlane: .projectPoint() target is now required"),e=new i),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("mathsPlane: .intersectLine() target is now required"),e=new i);var n=t.delta(r),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/s;return a<0||a>1?void 0:e.copy(n).multiplyScalar(a).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),t=new i),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||a.getNormalMatrix(t),i=this.coplanarPoint(r).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,e){this.normal=void 0!==t?t:new i(1,0,0),this.constant=void 0!==e?e:0}});return e.Plane=o}),define("skylark-langx-numerics/rotate-transform",["./numerics","./transform","./matrix-transform"],function(t,e,n){var i=t.RotateTransform=e.inherit({klassName:"RotateTransform",value:{get:function(){return n.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e,n){var i=this._={};i.angle=t||0,i.centerX=e||0,i.centerY=n||0}});return i}),define("skylark-langx-numerics/scale-transform",["./numerics","./transform","./matrix-transform"],function(t,e,n){var i=e.inherit({klassName:"ScaleTransform",value:{get:function(){return n.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e,n,i){var r=this._={};r.scaleX=t||1,r.scaleY=e||1,r.centerX=n||0,r.centerY=i||0}});return t.ScaleTransform=i}),define("skylark-langx-numerics/skew-transform",["./numerics","./transform","./matrix-transform"],function(t,e,n){var i=e.inherit({klassName:"SkewTransform",value:{get:function(){return n.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e){var n=this._={};n.skewX=t||0,n.skewY=e||0}});return t.SkewTransform=i}),define("skylark-langx-numerics/vector2",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector2",set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this},_construct:function(t,e){this.x=t||0,this.y=e||0}});return e.Vector2=n}),define("skylark-langx-numerics/transform-matrix",["skylark-langx-klass","./numerics","./vector2"],function(t,e,n){var i=Math.PI/180,r={},s=function(t){return r[t]||(r[t]=Math.PI*t/180)},a=t({klassName:"TransformMatrix",_multiplyPoint:function(t){var e=this._,i=t.x*e.m11+t.y*e.m21+e.dx,r=t.x*e.m12+t.y*e.m22+e.dy;return new n(i,r)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){if(this.isIdentity())return t.clone();var e=this.multiplyPoint(t.leftTop),n=this.multiplyPoint(t.leftBottom),i=this.multiplyPoint(t.right),r=this.multiplyPoint(t.rightBottom),s=Math.min(e.x,n.x,i.x,r.x),a=Math.min(e.y,n.y,i.y,r.y),o=Math.max(e.x,n.x,i.x,r.x),l=Math.max(e.y,n.y,i.y,r.y);return new Rect(s,a,o-s,l-a)},prepend:function(t,e,n,i,r,s){var a=this.dx;if(1!=t||0!=e||0!=n||1!=i){var o=this.m11,l=this.m21;this.m11=o*t+this.m12*n,this.m12=o*e+this.m12*i,this.m21=l*t+this.m22*n,this.m22=l*e+this.m22*i}return this.dx=a*t+this.dy*n+r,this.dy=a*e+this.dy*i+s,this},append:function(t,e,n,i,r,s){var a=this.m11,o=this.m12,l=this.m21,c=this.m22;return this.m11=t*a+e*l,this.m12=t*o+e*c,this.m21=n*a+i*l,this.m22=n*o+i*c,this.dx=r*a+s*l+this.dx,this.dy=r*o+s*c+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,e,n,r,s,a,o,l,c){if(s%360)var u=s*i,h=Math.cos(u),d=Math.sin(u);else h=1,d=0;return(l||c)&&(this.dx-=l,this.dy-=c),a||o?(a*=i,o*=i,this.prepend(h*n,d*n,-d*r,h*r,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,e)):this.prepend(h*n,d*n,-d*r,h*r,t,e),this},appendTransform:function(t,e,n,r,s,a,o,l,c){if(s%360)var u=s*i,h=Math.cos(u),d=Math.sin(u);else h=1,d=0;return a||o?(a*=i,o*=i,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,e),this.append(h*n,d*n,-d*r,h*r,0,0)):this.append(h*n,d*n,-d*r,h*r,t,e),(l||c)&&(this.dx-=l*this.m11+c*this.m21,this.dy-=l*this.m12+c*this.m22),this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m11,r=this.m21,s=this.dx;return this.m11=i*e-this.m12*n,this.m12=i*n+this.m12*e,this.m21=r*e-this.m22*n,this.m22=r*n+this.m22*e,this.dx=s*e-this.dy*n,this.dy=s*n+this.dy*e,this},skew:function(t,e){return t*=i,e*=i,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,e){return this.m11*=t,this.m22*=e,this.dx*=t,this.dy*=e,this},translate:function(t,e){return this.dx+=t,this.dy+=e,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,e=this.m12,n=this.m21,i=this.m22,r=this.dx,s=t*i-e*n;return this.m11=i/s,this.m12=-e/s,this.m21=-n/s,this.m22=t/s,this.dx=(n*this.dy-i*r)/s,this.dy=-(t*this.dy-e*r)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){null==t&&(t={}),t.x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var e=Math.atan2(-this.m21,this.m22),n=Math.atan2(this.m12,this.m11);return e==n?(t.rotation=n/i,this.m11<0&&this.m22>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/i,t.skewY=n/i),t},reinitialize:function(t,e,n,i,r,s,a,o,l){return this._initialize(t,e,n,i,r,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=l,this},appendProperties:function(t,e,n){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=n||this.compositeOperation,this},prependProperties:function(t,e,n){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||n,this},multiply:function(t){var e=this.m11,n=this.m12,i=this.m21,r=this.m22,s=this.dx,a=this.dy,o=t;return this.m11=e*o.m11+i*o.m12,this.m12=n*o.m11+r*o.m12,this.m21=e*o.m21+i*o.m22,this.m22=n*o.m21+r*o.m22,this.dx=e*o.dx+i*o.dy+s,this.dy=n*o.dx+r*o.dy+a,this},clone:function(){var t=this._,e=new a(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return e.shadow=this.shadow,e.alpha=this.alpha,e.compositeOperation=this.compositeOperation,e},toString:function(){var t=this._;return"[TransformMatrix (m11="+t.m11+" m12="+t.m12+" m21="+t.m21+" m22="+t.m22+" dx="+t.dx+" dy="+t.dy+")]"},_construct:function(t,e,n,i,r,s){var a=this._={};a.m11=t||1,a.m12=e||0,a.m21=n||0,a.m22=i||1,a.dx=r||0,a.dy=s||0}});return Object.assign(a,{translate:function(t,e){return new a(1,0,0,1,t,e)},scale:function(t,e){return new a(t,0,0,e||t,0,0)},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return new a(e,n,-n,e,0,0)},rotateg:function(t){return this.rotate(s(t))},skewX:function(t){var e=Math.tan(t);return new a(1,0,e,1)},skewXg:function(t){return this.skewX(s(t))},skewY:function(t){var e=Math.tan(t);return new a(1,e,0,1)},skewYg:function(t){return this.skewY(s(t))},reflect:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,i=e*e,r=n+i,s=2*n/r-1,o=2*t*e/r,l=o,c=2*i/r-1;return new a(s,l,o,c)},project:function(t,e){var n=t*t,i=e*e,r=n+i,s=n/r,o=t*e/r;return yx=o,yy=i/r,new a(s,yx,o,yy)},_sandwich:function(t,e,n){return this.translate(e,n).multiply(t).multiply(this.translate(-e,-n))},scaleAt:function(t,e,n,i){switch(arguments.length){case 4:return this._sandwich(this.scale(t,e),n,i);case 3:return"number"==typeof n?this._sandwich(this.scale(t),e,n):this._sandwich(this.scale(t,e),n.x,n.y)}return this._sandwich(this.scale(t),e.x,e.y)},rotateAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotate(t),e,n):this._sandwich(this.rotate(t),e.x,e.y)},rotategAt:function(t,e,n){return arguments.length>2?this._sandwich(this.rotateg(t),e,n):this._sandwich(this.rotateg(t),e.x,e.y)},skewXAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewX(t),e,n):this._sandwich(this.skewX(t),e.x,e.y)},skewXgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewXg(t),e,n):this._sandwich(this.skewXg(t),e.x,e.y)},skewYAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewY(t),e,n):this._sandwich(this.skewY(t),e.x,e.y)},skewYgAt:function(t,e,n){return arguments.length>2?this._sandwich(this.skewYg(t),e,n):this._sandwich(this.skewYg(t),e.x,e.y)}}),e.TransformMatrix=a}),define("skylark-langx-numerics/translate-transform",["./numerics","./transform","./matrix-transform"],function(t,e,n,i,r){var s=e.inherit({klassName:"TranslateTransform",value:{get:function(){return n.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e){var n=this._;n.x=t||0,n.y=e||0}});return t.TranslateTransform=s}),define("skylark-langx-numerics/vector4",["skylark-langx-klass","./numerics"],function(t,e){var n=t({klassName:"Vector4",set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,s=t.elements,a=s[0],o=s[4],l=s[8],c=s[1],u=s[5],h=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,g=(u+1)/2,y=(f+1)/2,v=(o+c)/4,k=(l+d)/4,x=(h+p)/4;return m>g&&m>y?m<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(m),i=v/n,r=k/n):g>y?g<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(g),n=v/i,r=x/i):y<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(y),n=k/r,i=x/r),this.set(n,i,r,e),this}var b=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(b)<.001&&(b=1),this.x=(p-h)/b,this.y=(l-d)/b,this.z=(c-o)/b,this.w=Math.acos((a+u+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},_construct:function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}});return e.Vector4=n}),define("skylark-langx-numerics/main",["./numerics","./euler","./maths","./matrix3","./matrix4","./matrix-transform","./plane","./quaternion","./rotate-transform","./scale-transform","./skew-transform","./transform","./transform-matrix","./translate-transform","./vector2","./vector3","./vector4"],function(t){return t}),define("skylark-langx-numerics",["skylark-langx-numerics/main"],function(t){return t}),define("skylark-langx/numerics",["skylark-langx-numerics"],function(t){return t}),define("skylark-langx/objects",["skylark-langx-objects"],function(t){return t}),define("skylark-langx/Evented",["./emitter"],function(t){return t}),define("skylark-langx-strings/strings",["skylark-langx-ns"],function(t){var e=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function n(t){return e[t]}var i=/[&<>"'`=]/g;const r=/\x00/g;var s=0;function a(t,e){var n,i,r,s,a,o,l,c=arguments.callee;return c.cache[t]||(c.cache[t]=(n=t,i=/^[\w\-]+$/.test(t)?c.get(t):(n="template(string)",t),r=1,s=("try { "+(c.variable?"var "+c.variable+" = this.stash;":"with (this.stash) { ")+"this.ret += '"+i.replace(/<%/g,"").replace(/%>/g,"").replace(/'(?![^\x11\x13]+?\x13)/g,"\\x27").replace(/^\s*|\s*$/g,"").replace(/\n|\r\n/g,function(){return"';\nthis.line = "+ ++r+"; this.ret += '\\n"}).replace(/\x11=raw(.+?)\x13/g,"' + ($1) + '").replace(/\x11=(.+?)\x13/g,"' + this.escapeHTML($1) + '").replace(/\x11(.+?)\x13/g,"'; $1; this.ret += '")+"'; "+(c.variable?"":"}")+"return this.ret;} catch (e) { throw 'TemplateError: ' + e + ' (on "+n+"' + ' line ' + this.line + ')'; } //@ sourceURL="+n+"\n").replace(/this\.ret \+= '';/g,""),a=new Function(s),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},l=function(t){return(""+t).replace(/[&<>\'\"]/g,function(t){return o[t]})},function(t){return a.call(c.context={escapeHTML:l,line:1,ret:"",stash:t})})),e?c.cache[t](e):c.cache[t]}return a.cache={},a.get=function(t){return document.getElementById(t).innerHTML},t.attach("langx.strings",{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}},escapeHTML:function(t){if(null==t)return"";if(!t)return String(t);return t.toString().replace(i,n)},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},ltrim:function(t){return t.replace(/^\s+/,"")},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},rtrim:function(t){return t.replace(/\s+$/,"")},serializeValue:function(t){return JSON.stringify(t)},substitute:function(t,e,n,i){function r(t,e){if(t.match(/\./)){var n,i=function(t,e){var r=t.pop();return r?e[r]?i(t,n=e[r]):null:n};return i(t.split(".").reverse(),e)}return e[t]}return i=i||window,n=n?proxy(i,n):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,s,a){var o=r(s,e);return a&&(o=r(a,i).call(i,o,s)),n(o,s).toString()})},slugify:function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var e="a/_,:;",n=0,i=e.length;n<i;n++)t=t.replace(new RegExp(e.charAt(n),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(n));return t=t.replace(/\s+/g,"-").replace(/-+/g,"-")},trim:function(t){return null==t?"":String.prototype.trim.call(t)},trimNull:function(t){if("string"!=typeof t)return warn("The argument for removeNullCharacters must be a string."),t;return t.replace(r,"")},uniqueId:function(t){var e=++s+"";return t?t+e:e},upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}),define("skylark-langx-strings/base64",["./strings"],function(t){return t.base64={decode:function(t,e){e=null!=e&&e;var n,i,r,s,a,o,l,c="",u=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;u<t.length;)s=this._keyStr.indexOf(t.charAt(u++)),a=this._keyStr.indexOf(t.charAt(u++)),o=this._keyStr.indexOf(t.charAt(u++)),l=this._keyStr.indexOf(t.charAt(u++)),n=s<<2|a>>4,i=(15&a)<<4|o>>2,r=(3&o)<<6|l,c+=String.fromCharCode(n),64!=o&&(c+=String.fromCharCode(i)),64!=l&&(c+=String.fromCharCode(r));e||(c=function(t){var e="",n=0,i=c1=c2=0;for(;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return e}(c));return c},encode:function(t,e){var n,i,r,s,a,o,l,c="",u=0;(e=null!=e&&e)||(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t));for(;u<t.length;)n=t.charCodeAt(u++),i=t.charCodeAt(u++),r=t.charCodeAt(u++),s=n>>2,a=(3&n)<<4|i>>4,o=(15&i)<<2|r>>6,l=63&r,isNaN(i)?o=l=64:isNaN(r)&&(l=64),c=c+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(l);return c}}}),define("skylark-langx-strings/main",["./strings","./base64"],function(t){return t}),define("skylark-langx-strings",["skylark-langx-strings/main"],function(t){return t}),define("skylark-langx/strings",["skylark-langx-strings"],function(t){return t}),define("skylark-langx/stateful",["./Evented","./strings","./objects"],function(t,e,n){var i=n.isEqual,r=n.mixin,s=n.result,a=n.isEmptyObject,o=n.clone,l=e.uniqueId,c=t.inherit({_construct:function(t,e){var n=t||{};e||(e={}),this.cid=l(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var i=s(this,"defaults");n=r({},i,n),this.set(n,e),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return o(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var s=n.unset,a=n.silent,l=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=o(this.attributes),this.changed={});var u=this.attributes,h=this.changed,d=this._previousAttributes;for(var p in r)e=r[p],i(u[p],e)||l.push(p),i(d[p],e)?delete h[p]:h[p]=e,s?delete u[p]:u[p]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){l.length&&(this._pending=n);for(var f=0;f<l.length;f++)this.trigger("change:"+l[f],this,u[l[f]],n)}if(c)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,r({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var r in t){var s=t[r];i(e[r],s)||(n[r]=s)}return!a(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},r({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,r(e,{validationError:n})),!1)}});return c}),define("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(t,e){var n=new e.Emitter;return t.attach("langx.topic",{publish:function(t,e,i){var r=[].slice.call(arguments,1);return n.trigger({type:t,data:r})},subscribe:function(t,e,i){var r=function(t){e.apply(i,t.data)};return n.on(t,r),{remove:function(){n.off(t,r)}}}})}),define("skylark-langx-topic/main",["./topic"],function(t){return t}),define("skylark-langx-topic",["skylark-langx-topic/main"],function(t){return t}),define("skylark-langx/topic",["skylark-langx-topic"],function(t){return t}),define("skylark-langx/types",["skylark-langx-types"],function(t){return t}),define("skylark-langx-urls/get-absolute-url",["./urls"],function(t){"use strict";return t.getAbsoluteUrl=function(t){if(!t.match(/^https?:\/\//)){const e=document.createElement("div");e.innerHTML=`<a href="${t}">x</a>`,t=e.firstChild.href}return t}}),define("skylark-langx-urls/get-file-extension",["./urls"],function(t){"use strict";return t.getFileExtension=function(t){if("string"==typeof t){const e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=e.exec(t);if(n)return n.pop().toLowerCase()}return""}}),define("skylark-langx-urls/get-file-name",["./urls"],function(t){"use strict";return t.getFileName=function(t){const e=t.indexOf("#"),n=t.indexOf("?"),i=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)}}),define("skylark-langx-urls/get-query",["./urls"],function(t){"use strict";return t.getQuery=function(t){for(var e={},n=t.split("&"),i=n.length,r=[],s=0;s<i;s++){r=n[s].split("=",2);try{r[0]=decodeURIComponent(r[0]),r[1]=decodeURIComponent(r[1])}catch(t){}void 0===e[r[0]]?e[r[0]]=r[1]:e[r[0]]+=","+r[1]}return e}}),define("skylark-langx-urls/path",["skylark-langx-types","skylark-langx-constructs/klass","./urls"],function(t,e,n){var i=e({_construct:function(){var e=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&t.isString(arguments[0])?this._parse(arguments[0]):t.isArray(arguments[0])&&(e.segments=arguments[0],e.hasLeading=arguments[1]||!1,e.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var t,e=this._.segments,n=0;n<e.length;n++)if("."==e[n]||".."==e[n]){t=!0;break}if(t){for(var i=[],n=0;n<e.length;n++)".."==e[n]?0==i.length?this.hasLeading||i.push(e[n]):".."==i[i.length-1]?i.push(".."):i.pop():"."==e[n]&&1!=e.length||i.push(e[n]);if(i.length==e.length)return;this._.segments=i}},_length:function(t){return this._.segments.length},_parse:function(t){t||(t=".");var e=this._,n=t.split("/");"/"==t.charAt(0)&&(e.hasLeading=!0,n.shift()),"/"==t.charAt(t.length-1)&&(e.hasTrailing=!0,n.pop()),e.segments=n,e.path=t,this._canonicalize()},append:function(e){return t.isString(e)?this.appendPathStr(e):this.appendPath(e)},appendPath:function(t){if(t.isAbsolute())return t;var e=this.segments,n=t.segments,r=e.concat(n),s=new i(r,this.hasLeading,t.hasTrailing);return s},appendPathStr:function(t){return t=new i(t||""),this.appendPath(t)},clone:function(){return new i(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(t){for(var e=this.segments,n=new i(t).segments;n.length>0&&e.length>0;)if(n.pop()!=e.pop())return!1;return!0},equals:function(t){var e=this._.segments,n=t._.segments;if(e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(n[i]!=e[i])return!1;return!0},firstSegment:function(t){var e=this._.segments;return e[t||0]},getExtension:function(){var t=this._.extension,e=this._.path;return textension||(t=this._.extension=e.substr(e.lastIndexOf(".")+1)),t},getSegments:function(){return this.segments},getParentPath:function(){var t=this._.parentPath;if(!t){var e=this.segments;e.pop(),t=this._.parentPath=new i(e,this.hasLeading)}return t},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var t=this._.segments;return t[t.length-1]},matchingFirstSegments:function(t){for(var e=this.segments,n=t.segments,i=Math.min(e.length,n.length),r=0,s=0;s<i;s++){if(e[s]!=n[s])return r;r++}return r},normalize:function(){},removeFirstSegments:function(t){var e=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,new i(e.slice(t,e.length),n,hasTrailing)},removeLastSegments:function(t){var e=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,t||(t=1),new i(e.slice(0,e.length-t),n,hasTrailing)},removeMatchingFirstSegments:function(t){var e=this.matchingFirstSegments(t);return this.removeFirstSegments(e)},removeMatchingLastSegments:function(t){var e=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(e)},removeRelative:function(){var t=this.segments;return t.length>0&&"."==t[1]?this.removeFirstSegments(1):this},relativeTo:function(t,e){"string"==typeof t&&(t=new i(t));var n=this.segments;if(this.isAbsolute())return this;var r=t.segments,s=this.matchingFirstSegments(t),a=r.length;e&&(a-=1);var o=a-s,l=o+n.length-s;if(0==l)return i.EMPTY;for(var c=[],u=0;u<o;u++)c.push("..");for(var u=s;u<n.length;u++)c.push(n[u]);return new i(c,!1,this.hasTrailing)},segment:function(t){var e=this._.segments;return e.length<t?null:e[t]},startsWith:function(t){var e=this.matchingFirstSegments(t);return t._length()==e},toString:function(){var t=[],e=this._.segments;this.hasLeading&&t.push("/");for(var n=0;n<e.length;n++)n>0&&t.push("/"),t.push(e[n]);return this.hasTrailing&&t.push("/"),t.join("")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return i.EMPTY=new i(""),n.Path=i}),define("skylark-langx-urls/main",["./urls","./get-absolute-url","./get-file-extension","./get-file-name","./get-query","./is-cross-origin","./parse-url","./path"],function(t){return t}),define("skylark-langx-urls",["skylark-langx-urls/main"],function(t){return t}),define("skylark-langx/urls",["skylark-langx-urls"],function(t){return t}),define("skylark-langx/langx",["./skylark","./arrays","./array-store","./aspect","./async","./binary","./constructs","./datetimes","./deferred","./emitter","./evented","./events","./funcs","./globals","./hoster","./klass","./maths","./numerics","./objects","./stateful","./strings","./topic","./types","./urls"],function(t,e,n,i,r,s,a,o,l,c,u,h,d,p,f,m,g,y,v,k,x,b,w,_){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var C=v.mixin,S=(v.safeMixin,w.isFunction);var E=1;function T(){return T}return C(T,{createEvent:c.createEvent,funcArg:function(t,e,n,i){return S(e)?e.call(t,n,i):e},getQueryParams:function(t){var e=(t=t||window.location.href).split("?"),n={};e.length>1&&e[1].split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]});return n},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=E++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),C(T,e,i,o,d,y,v,x,w,{ArrayStore:n,async:r,Deferred:l,Emitter:c,Evented:u,hoster:f,klass:m,Stateful:k,topic:b}),t.langx=T}),define("skylark-domx-browser/browser",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){"use strict";var n=e.hoster.browser;return e.mixin(n,{isIE:!!/msie/i.exec(window.navigator.userAgent),location:function(){return window.location},support:{}}),t.attach("domx.browser",n)}),define("skylark-domx-browser/support/css3",["skylark-langx/langx","../browser"],function(t,e){"use strict";var n,i,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=null,a="",o="",l={},c={},u=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,h=window.document,d=h.createElement("div"),p=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.matchesSelector,f=d.style;for(var m in f){var g=m.match(i||u);if(g){i||(n=g[1],i=new RegExp("^("+n+")(.*)$"),n,a="-"+n.toLowerCase()+"-",o=n.toLowerCase()),l[t.lowerFirst(g[2])]=m;var y=t.dasherize(g[2]);c[y]=a+y,r[m]&&(s=r[m])}}s||void 0!==f.transition&&(s=r.transition);var v={normalizeStyleProperty:function(t){return l[t]||t},normalizeCssProperty:function(t){return c[t]||t},normalizeCssEvent:function(t){return o?o+t:t.toLowerCase()},matchesSelector:p};return t.mixin(e,v),e.css3PropPrefix=v.propPrefix=a,s&&(e.support.transition=v.transition={end:s}),e.support.cssPointerEvents=v.pointerEvents=(d.style.cssText="pointer-events:auto","auto"===d.style.pointerEvents),d=null,e.support.css3=v}),define("skylark-domx-browser/support/fullscreen",["../browser"],function(t){const e={prefixed:!0},n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],i=n[0];let r;for(let t=0;t<n.length;t++)if(n[t][1]in document){r=n[t];break}if(r){for(let t=0;t<r.length;t++)e[i[t]]=r[t];e.prefixed=r[0]!==i[0],t.requestFullscreen=function(){return document.body[e.requestFullscreen].apply(this,arguments)},t.exitFullscreen=function(){return document[e.exitFullscreen].apply(this,arguments)},t.support.fullscreen=e}else t.support.fullscreen=null;return t.support.fullscreen}),define("skylark-domx-browser/support/touch",["../browser"],function(t){return t.support.tocuh=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}),define("skylark-domx-browser/main",["./browser","./support/css3","./support/fullscreen","./support/touch"],function(t){return t}),define("skylark-domx-browser",["skylark-domx-browser/main"],function(t){return t}),define("skylark-langx/main",["./langx"],function(t){return t}),define("skylark-langx",["skylark-langx/main"],function(t){return t}),define("skylark-langx-scripter/scripter",["skylark-langx/skylark","skylark-langx"],function(t,e){var n=document.getElementsByTagName("head")[0],i={},r={},s=0;function a(){return a}var o={type:!0,src:!0,nonce:!0,noModule:!0};return e.mixin(a,{loadJavaScript:function(t,e,a){var o=i[t];if(o||(o=i[t]={state:0,loadedCallbacks:[],errorCallbacks:[]}),o.loadedCallbacks.push(e),o.errorCallbacks.push(a),1===o.state)o.node.onload();else if(-1===o.state)o.node.onerror();else{var l=o.node=document.createElement("script"),c=o.id=s++;l.type="text/javascript",l.async=!1,l.defer=!1,startTime=(new Date).getTime(),n.appendChild(l),l.onload=function(){o.state=1;for(var t=o.loadedCallbacks,e=t.length;e--;)t[e]();o.loadedCallbacks=[],o.errorCallbacks=[]},l.onerror=function(){o.state=-1;for(var t=o.errorCallbacks,e=t.length;e--;)t[e]();o.loadedCallbacks=[],o.errorCallbacks=[]},l.src=t,r[c]=l}return o.id},deleteJavaScript:function(t){var e=r[t];if(e){var n=e.src;e.parentNode&&e.parentNode.remove(e),delete r[t],delete i[n]}},evaluate:function(t,e,n){var i,r,s=(n=n||document).createElement("script");if(s.text=t,e)for(i in o)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);return n.head.appendChild(s).parentNode.removeChild(s),this},loadScript:function(t){var n=new e.Deferred;return n.promise.scriptId=this.loadJavaScript(t,function(){n.resolve()},function(t){n.reject(t)}),n.promise}}),t.attach("langx.scripter",a)}),define("skylark-langx-scripter/main",["./scripter"],function(t){return t}),define("skylark-langx-scripter",["skylark-langx-scripter/main"],function(t){return t}),define("skylark-domx-noder/noder",["skylark-langx-ns","skylark-langx-types","skylark-langx-arrays","skylark-langx-strings","skylark-langx-scripter","skylark-domx-browser"],function(t,e,n,i,r,s){var a=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),o=/^\s*<(\w+|!)[^>]*>/,l=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,c=document.createElement("div"),u=document.createElement("table"),h=document.createElement("tbody"),d=document.createElement("tr"),p={tr:h,tbody:u,thead:u,tfoot:u,td:d,th:d,"*":c},f=/^(?:body|html)$/i,m=/^$|^module$|\/(?:java|ecma)script/i,g=Array.prototype.map,y=Array.prototype.slice;function v(t,i){var r=function(t){"function"==typeof t&&(t=t());return g.call(e.isArrayLike(t)?t:[t],t=>("function"==typeof t&&(t=t()),M(t)||T(t)?t:"string"==typeof t&&/\S/.test(t)?document.createTextNode(t):void 0)).filter(t=>t)}(t);return i&&(r=g.call(r,function(t){return t.cloneNode(!0)})),n.flatten(r)}function k(t,e){var n=t.nodeName&&t.nodeName.toLowerCase();return void 0!==e?n===e.toLowerCase():n}function x(t,i){if(e.isFunction(t))return t.apply(i,[]);if(e.isArrayLike(t)){for(var r,s=0;s<t.length;s++)e.isFunction(t[s])&&(t[s]=t[s].apply(i,[]),e.isArrayLike(t[s])&&(r=!0));r&&(t=n.flatten(t))}return t}function b(t,e,n){e=x(e,t);for(var i=t,r=v(e,n),s=0;s<r.length;s++)i.appendChild(r[s]);return this}function w(t,n,i,r){var s;if(s=/svg/i.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t),e.isHtmlNode(n)?(r=n,n=null,i=null):e.isHtmlNode(i)&&(r=i,i=null),n)for(var a in n)s[a]=n[a];if(i)for(var a in i)s.setAttribute(a,i[a]);return r&&b(r,s),s}function _(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this}function C(t){return!1===t?s.exitFullscreen.apply(document):t?t[s.support.fullscreen.requestFullscreen]():document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}var S=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;function E(t,e,n){if(n)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function T(t){return t&&3===t.nodeType}function M(t){return t&&1===t.nodeType}function z(t){return t?9==t.nodeType?t:t.ownerDocument:document}function A(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||A(t.parentNode)))}function P(){return P}return Object.assign(P,{active:function(t){var e;t=t||document;try{e=t.activeElement}catch(n){e=t.body}e||(e=t.body);e.nodeName||(e=t.body);return e},after:function(t,e,n){e=x(e,t);var i=(s=t).parentNode;if(i)for(var r=v(e,n),s=s.nextSibling,a=0;a<r.length;a++)s?i.insertBefore(r[a],s):i.appendChild(r[a]);return this},append:b,before:function(t,e,n){e=x(e,t);var i=t,r=i.parentNode;if(r)for(var s=v(e,n),a=0;a<s.length;a++)r.insertBefore(s[a],i);return this},blur:function(t){t.blur()},body:function(){return document.body},clone:function(t,e){var n,i=this;if(!a||1!==t.nodeType||e)return t.cloneNode(e);if(!e)return n=document.createElement(t.nodeName),each(i.getAttribs(t),function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))}),n},contains:function(t,e){return E(e,t)},contents:function(t){if(k(t,"iframe"))return t.contentDocument;return t.childNodes},createElement:w,createFragment:function(t){if(t=i.trim(t),l.test(t))return[w(RegExp.$1)];var e=o.test(t)&&RegExp.$1;e in p||(e="*");var n=p[e];return n.innerHTML=function(t){for(var e=t.split("/>"),n="",i=0;i<e.length-1;i++){var r=e[i].split("<");n+=e[i]+"></"+r[r.length-1].split(" ")[0]+">"}return n+e[e.length-1]}(""+t),dom=y.call(n.childNodes),dom.forEach(function(t){n.removeChild(t)}),dom},createTextNode:function(t){return document.createTextNode(t)},doc:function(){return document},empty:_,generateId:function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;for(;n--;)i+=e.charCodeAt(n);return i.toString(36)},fullscreen:C,focusable:function(t,e){var n,i,r,s,a,o=t.nodeName.toLowerCase();if("area"===o)return n=t.parentNode,i=n.name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&((r=$("img[usemap='#"+i+"']")).length>0&&r.is(":visible"));/^(input|select|textarea|button|object)$/.test(o)?(s=!t.disabled)&&(a=$(t).closest("fieldset")[0])&&(s=!a.disabled):s="a"===o&&t.href||e;return s&&$(t).is(":visible")&&visible($(t))},fromPoint:function(t,e){return document.elementFromPoint(t,e)},html:function(t,n){var i=function(t,n){if(void 0===n)return t.innerHTML;if(_(t),n=n||"",e.isString(n)&&(n=n.replace(S,"<$1></$2>")),e.isString(n)||e.isNumber(n))t.innerHTML=n;else if(e.isArrayLike(n))for(var i=0;i<n.length;i++)t.appendChild(n[i]);else t.appendChild(n);return this}(t,n);if(void 0!==n){for(var s=t.querySelectorAll("script"),a=0;a<s.length;a++){var o=s[a];m.test(o.type||"")&&r.evaluate(o.textContent,o)}return this}return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)},isChildOf:E,isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isEditable:A,isElement:M,isFullscreen:function(t){return C()===t},isInDocument:function(t){return t===document.body||document.body.contains(t)},isInFrame:function(){try{return window.parent!==window.self}catch(t){return!0}},isInput:function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||A(t)},isTextNode:T,isWindow:e.isWindow,nodeName:k,offsetParent:function(t){var e=t.offsetParent||document.body;for(;e&&!f.test(e.nodeName)&&"static"==document.defaultView.getComputedStyle(e).position;)e=e.offsetParent;return e},ownerDoc:z,ownerWindow:function(t){var e=z(t);return e.defaultView||e.parentWindow},prepend:function(t,e,n){for(var i=t,r=i.firstChild,s=v(e,n),a=0;a<s.length;a++)r?i.insertBefore(s[a],r):i.appendChild(s[a]);return this},reflow:function(t){t||(t=document);return t.offsetHeight,this},remove:function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){console.warn("The node is already removed",t)}return this},removeChild:function(t,n){e.isArrayLike(n)||(n=[n]);for(var i=0;i<n.length;i++)t.removeChild(n[i]);return this},replace:function(t,e){return e.parentNode.replaceChild(t,e),this},selectable:function(t,e){if(void 0===t||void 0===t.style)return;t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off"},traverse:function t(e,n){n(e);for(var i=0,r=e.childNodes.length;i<r;i++)t(e.childNodes[i],n);return this},reverse:function(t){for(var e=t.firstChild,n=t.children.length-1;n>0;n--)if(n>0){var i=t.children[n];t.insertBefore(i,e)}},wrapper:function(t,n){e.isString(n)&&(n=this.createFragment(n).firstChild);t.parentNode.insertBefore(n,t),n.appendChild(t)},wrapperInner:function(t,e){var n=y.call(t.childNodes);t.appendChild(e);for(var i=0;i<n.length;i++)e.appendChild(n[i]);return this},unwrap:function(t){var e=t.parentNode;if(e){if(this.isDoc(e.parentNode))return;e.parentNode.insertBefore(t,e)}}}),t.attach("domx.noder",P)}),define("skylark-domx-styler/styler",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){Array.prototype.every;var n=Array.prototype.forEach,i=e.camelCase,r=e.dasherize;function s(t,e){return"number"!=typeof e||a[r(t)]?e:e+"px"}var a={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},o={};function l(t){return t in o?o[t]:o[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function c(t,e){var n=t.className||"",i=n&&void 0!==n.baseVal;if(void 0===e)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}var u={};function h(t,n){if(!n)return this;var i=c(t);return(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);i.match(e)||(i+=(i?" ":"")+t)}),c(t,i),this}function d(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)}function p(t,e){var n=l(e);return t.className&&t.className.match(n)}function f(t,n){if(n){var i=c(t);(e.isString(n)?n.split(/\s+/g):n).forEach(function(t){var e=l(t);i.match(e)&&(i=i.replace(e," "))}),c(t,i.trim())}else c(t,"");return this}var m=function(){return m};return e.mixin(m,{autocssfix:!1,cssHooks:{},addClass:h,className:c,css:function(t,a,o){if(void 0==o){var l=d(t);if(void 0==a)return l;if(e.isString(a))return t.style[i(a)]||l.getPropertyValue(r(a));if(e.isArrayLike(a)){var c={};return n.call(a,function(e){c[e]=t.style[i(e)]||l.getPropertyValue(r(e))}),c}}var u="";if("string"==typeof a)o||0===o?u=r(a)+":"+s(a,o):t.style.removeProperty(r(a));else for(key in a)void 0!==a[key]&&(a[key]||0===a[key]?u+=r(key)+":"+s(key,a[key])+";":t.style.removeProperty(r(key)));return t.style.cssText+=";"+u,this},disabled:function(t,e){if(arguments.length<2)return!!this.dom.disabled;return t.disabled=e,this},hasClass:p,hide:function(t){return m.css(t,"display","none"),this},isInvisible:function(t){return"none"==m.css(t,"display")||0==m.css(t,"opacity")||"hidden"==m.css(t,"visibility")},removeClass:f,show:function(t){m.css(t,"display",""),"none"==m.css(t,"display")&&m.css(t,"display",function(t){var e,n;u[t]||(e=document.createElement(t),document.body.appendChild(e),n=d(e).getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),u[t]=n);return u[t]}(t.nodeName));return this},toggleClass:function(t,e,n){return e.split(/\s+/g).forEach(function(e){void 0===n&&(n=!p(t,e)),n?h(t,e):f(t,e)}),this}}),t.attach("domx.styler",m)}),define("skylark-domx-styler/main",["./styler"],function(t,e,n){return t}),define("skylark-domx-styler",["skylark-domx-styler/main"],function(t){return t}),define("skylark-domx-noder/overlay",["skylark-domx-styler","./noder"],function(t,e){return e.overlay=function(n,i){var r=e.createElement("div",i);return t.css(r,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),n.appendChild(r),r}}),define("skylark-domx-noder/throb",["skylark-langx/langx","skylark-domx-styler","./noder"],function(t,e,n){return n.throb=function(t,i){(i=i||{}).text,i.style;var r,s=i.time,a=i.callback,o=n.createElement("div",{className:i.className||"throbber"}),l=function(){r&&(clearTimeout(r),r=null),o&&(n.remove(o),o=null)};i.style&&e.css(o,i.style);var c=i.content||'<span class="throb"></span>';n.html(o,c),t.appendChild(o),s&&(r=setTimeout(function(){l(),a&&a()},s));return{throbber:o,remove:l,update:function(t){t&&t.text&&o&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-noder/main",["./noder","./overlay","./throb"],function(t){return t}),define("skylark-domx-noder",["skylark-domx-noder/main"],function(t){return t}),define("skylark-domx-finder/finder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,r,s){var a={},o=Array.prototype.filter,l=Array.prototype.slice,c=n.matchesSelector;(function(){var t,e,n,i,r,s={},a={},o=/\\/g,l=function(n,r){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var o=(i=!!r)?a:s;if(o[n])return o[n];for(t={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},e=-1;n!=(n=n.replace(d,p)););return t.length=t.expressions.length,o[t.raw]=i?u(t):t},c=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},u=function(t){for(var e=t.expressions,n=0;n<e.length;n++){for(var i=e[n],r={parts:[],tag:"*",combinator:c(i[0].combinator)},s=0;s<i.length;s++){var a=i[s];a.reverseCombinator||(a.reverseCombinator=" "),a.combinator=a.reverseCombinator,delete a.reverseCombinator}i.reverse().push(r)}return t},h=(r=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(t){return t.replace(r,"\\")}),d=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+h(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function p(r,s,a,l,u,d,p,f,m,g,y,v,k,x,b,w){if((s||-1===e)&&(t.expressions[++e]=[],n=-1,s))return"";if(a||l||-1===n){a=a||" ";var _=t.expressions[e];i&&_[n]&&(_[n].reverseCombinator=c(a)),_[++n]={combinator:a,tag:"*"}}var C=t.expressions[e][n];if(u)C.tag=u.replace(o,"");else if(d)C.id=d.replace(o,"");else if(p)p=p.replace(o,""),C.classList||(C.classList=[]),C.classes||(C.classes=[]),C.classList.push(p),C.classes.push({value:p,regexp:new RegExp("(^|\\s)"+h(p)+"(\\s|$)")});else if(k)w=(w=w||b)?w.replace(o,""):null,C.pseudos||(C.pseudos=[]),C.pseudos.push({key:k.replace(o,""),value:w,type:1==v.length?"class":"element"});else if(f){var S,E;switch(f=f.replace(o,""),y=(y||"").replace(o,""),m){case"^=":E=new RegExp("^"+h(y));break;case"$=":E=new RegExp(h(y)+"$");break;case"~=":E=new RegExp("(^|\\s)"+h(y)+"(\\s|$)");break;case"|=":E=new RegExp("^"+h(y)+"(-|$)");break;case"=":S=function(t){return y==t};break;case"*=":S=function(t){return t&&t.indexOf(y)>-1};break;case"!=":S=function(t){return y!=t};break;default:S=function(t){return!!t}}""==y&&/^[*$^]=$/.test(m)&&(S=function(){return!1}),S||(S=function(t){return t&&E.test(t)}),C.attributes||(C.attributes=[]),C.attributes.push({key:f,operator:m,value:y,test:S})}return""}var f=this.Slick||{};f.parse=function(t){return l(t)},f.escapeRegExp=h,this.Slick||(this.Slick=f)}).apply(a);var u=/^(?:input|select|textarea|button)$/i,h=/^h\d$/i,l=Array.prototype.slice;a.parseSelector=a.Slick.parse;var d=a.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},checked:function(t){return!!t.checked},contains:function(t,e,n,i){if($(this).text().indexOf(i)>-1)return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,n,i){return e==i},even:function(t,e,n,i){return e%2==0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return r.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,n,i){return e>i},has:function(t,e,n,i){return x(t,i)},header:function(t){return h.test(t.nodeName)},hidden:function(t){return!a.pseudos.visible(t)},input:function(t){return u.test(t.nodeName)},last:function(t,e,n){return e===n.length-1},lt:function(t,e,n,i){return e<i},not:function(t,e,n,i){return!_(t,i)},odd:function(t,e,n,i){return e%2==1},parent:function(t){return!!t.parentElement},selected:function(t){return!!t.selected},tabbable:function(t){var e=t.tabindex,n=null!=e;return(!n||e>=0)&&r.focusable(element,n)},text:function(t){return"text"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth},empty:function(t){return!t.hasChildNodes()}};function p(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function f(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}for(i in["first","eq","last"].forEach(function(t){d[t].isArrayFilter=!0}),d.nth=d.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d[i]=p(i);for(i in{submit:!0,reset:!0})d[i]=f(i);function m(t,n,i){for(var r=[],s=i&&e.isString(i);(t=t.parentElement)&&9!==t.nodeType;){if(i)if(s){if(_(t,i))break}else if(e.isArrayLike(i)){if(e.inArray(t,i)>-1)break}else if(t==i)break;n&&!_(t,n)||r.push(t)}return r}function g(t,e){for(var n=t.childNodes,i=[],r=0;r<n.length;r++){var t=n[r];1==t.nodeType&&i.push(t)}return e&&(i=a.filter(i,e)),i}function y(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentElement===n&&_(t,e):_(t,e))||i&&t===n)return t;if(t===n)break}while(t=E(t))}return null}function v(t,e){try{return l.call(t.querySelectorAll(e))}catch(t){}return a.query(t,e)}function k(t,e){try{return t.querySelector(e)}catch(t){}var n=a.query(t,e);return n.length>0?n[0]:null}function x(t,e){return e||(e=t,t=document.body),_(t,e)?t:k(t,e)}function b(t,e,n){for(var i=t.childNodes,r=i[0];r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.nextSibling}return null}function w(t,e,n){for(var i=t.childNodes,r=i[i.length-1];r;){if(1==r.nodeType){if(!e||_(r,e))return r;if(n)break}r=r.previousSibling}return null}function _(t,n){if(!n||!t||1!==t.nodeType)return!1;if(e.isString(n)){try{return c.call(t,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(t){}return a.match(t,n)}return e.isArrayLike(n)?e.inArray(t,n)>-1:e.isPlainObject(n)?a.check(t,n):t===n}function C(t,e,n){for(var i=t.nextSibling;i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.nextSibling}return null}function S(t,e){for(var n=t.nextSibling,i=[];n;)1==n.nodeType&&(e&&!_(n,e)||i.push(n)),n=n.nextSibling;return i}function E(t,e){var n=t.host&&t!==document&&t.host.nodeType?t.host:t.parentElement;return!n||e&&!_(n,e)?null:n}function T(t,e,n){for(var i=t.previousSibling;i;){if(1==i.nodeType){if(!e||_(i,e))return i;if(n)break}i=i.previousSibling}return null}function M(t,e){for(var n=t.previousSibling,i=[];n;)1==n.nodeType&&(e&&!_(n,e)||i.push(n)),n=n.previousSibling;return i}function z(t,e){for(var n=t.parentElement.firstChild,i=[];n;)1==n.nodeType&&n!==t&&(e&&!_(n,e)||i.push(n)),n=n.nextSibling;return i}a.divide=function(t){var e,n,i,r,s,a="",o=[];if((n=t.id)&&(a+="#"+n),i=t.classes)for(var l=i.length;l--;)a+="."+i[l].value;if(r=t.attributes)for(var l=0;l<r.length;l++)r[l].operator?a+="["+r[l].key+r[l].operator+JSON.stringify(r[l].value)+"]":a+="["+r[l].key+"]";if(s=t.pseudos)for(l=s.length;l--;)part=s[l],this.pseudos[part.key]?o.push(part):void 0!==part.value&&(a+=":"+part.key+"("+JSON.stringify(part));return(e=t.tag)&&"*"!==e&&(a=e.toUpperCase()+a),a||(a="*"),{nativeSelector:a,customPseudos:o}},a.check=function(t,e,n,i,r){var s,a,o,l,u,h,d,p,f;if(!r){if(s=e.tag){var m=t.nodeName.toUpperCase();if("*"==s){if(m<"@")return!1}else if(m!=(s||"").toUpperCase())return!1}if((a=e.id)&&t.getAttribute("id")!=a)return!1;if(o=e.classes)for(h=o.length;h--;)if(!(p=t.getAttribute("class"))||!o[h].regexp.test(p))return!1;if(l=e.attributes)for(h=l.length;h--;)if((d=l[h]).operator?!d.test(t.getAttribute(d.key)):!t.hasAttribute(d.key))return!1}if(u=e.pseudos)for(h=u.length;h--;)if(d=u[h],f=this.pseudos[d.key]){if((r&&f.isArrayFilter||!r&&!f.isArrayFilter)&&!f(t,n,i,d.value))return!1}else if(!r&&!c.call(t,d.key))return!1;return!0},a.match=function(t,n){var i;if(!(i=e.isString(n)?a.Slick.parse(n):n))return!0;var r,s,o=i.expressions,l=0;for(r=0;s=o[r];r++)if(1==s.length){var c=s[0];if(this.check(t,c))return!0;l++}if(l==i.length)return!1;var u,h=this.query(document,i);for(r=0;u=h[r++];)if(u===t)return!0;return!1},a.filterSingle=function(t,e){var n=o.call(t,function(n,i){return a.check(n,e,i,t,!1)});return n=o.call(n,function(t,i){return a.check(t,e,i,n,!0)})},a.filter=function(t,n){if(!e.isString(n))return a.filterSingle(t,n);var i,r,s=a.Slick.parse(n).expressions,o=[];for(i=0;r=s[i];i++){if(1!=r.length)throw new Error("not supported selector:"+n);var l=r[0],c=a.filterSingle(t,l);o=e.uniq(o.concat(c))}return o},a.combine=function(t,e){var n,i=e.combinator,r=e,s=[];switch(i){case">":s=g(t,r);break;case"+":(n=C(t,r,!0))&&s.push(n);break;case"^":(n=b(t,r,!0))&&s.push(n);break;case"~":s=S(t,r);break;case"++":var c=T(t,r,!0),u=C(t,r,!0);c&&s.push(c),u&&s.push(u);break;case"~~":s=z(t,r);break;case"!":s=m(t,r);break;case"!>":(n=E(t,r))&&s.push(n);break;case"!+":s=T(t,r,!0);break;case"!^":(n=w(t,r,!0))&&s.push(n);break;case"!~":s=M(t,r);break;default:var h=this.divide(e);if(s=l.call(t.querySelectorAll(h.nativeSelector)),h.customPseudos)for(var d=h.customPseudos.length-1;d>=0;d--)s=o.call(s,function(t,e){return a.check(t,{pseudos:[h.customPseudos[d]]},e,s,!1)}),s=o.call(s,function(t,e){return a.check(t,{pseudos:[h.customPseudos[d]]},e,s,!0)})}return s},a.query=function(t,n,i){for(var r,s,o=this.Slick.parse(n),l=[],c=o.expressions,u=0;r=c[u];u++){for(var h,d=[t],p=0;s=r[p];p++)(h=e.map(d,function(t,e){return a.combine(t,s)}))&&(d=h);h&&(l=l.concat(h))}return l};var A=function(){return A};return e.mixin(A,{ancestor:function(t,n,i){var r=i&&e.isString(i);for(;t=t.parentElement;){if(_(t,n))return t;if(i)if(r){if(_(t,i))break}else if(t==i)break}return null},ancestors:m,byId:function(t,e){return(e=e||r.doc()).getElementById(t)},childAt:function(t,n,i){var r=0,a=t.children;i=e.mixin({ignoreHidden:!0,excluding:null,closesting:null},i);for(var o=0;o<a.length;o++){var l=a[o];if((!i.ignoreHidden||"none"!==s.css(l))&&((!i.excluding||!i.excluding.includes(l))&&(!i.closesting||y(l,i.closesting,t,!1)))){if(r===n)return l;r++}}return null},children:g,closest:y,descendant:k,descendants:v,find:x,findAll:function(t,e){e||(e=t,t=document.body);return v(t,e)},firstChild:b,index:function(t,n){var i=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)e.isString(n)?_(t,n)&&i++:e.isFunction(n)&&n(t)&&i++,i++;return i},lastChild:w,matches:_,nextSibling:C,nextSiblings:S,parent:E,previousSibling:T,previousSiblings:M,pseudos:a.pseudos,siblings:z}),t.attach("domx.finder",A)}),define("skylark-domx-finder/main",["./finder"],function(t){return t}),define("skylark-domx-finder",["skylark-domx-finder/main"],function(t){return t}),define("skylark-domx-data/data",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-finder","skylark-domx-noder"],function(t,e,n,i){var r=Array.prototype.map,s=(Array.prototype.filter,e.camelCase),a=e.deserializeValue,o=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var c={option:{get:function(t){var e=t.getAttribute("value");return null!=e?e:(m(t).match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},select:{get:function(t){var e,n,r,s=t.options,a=t.selectedIndex,o="select-one"===t.type,l=o?null:[],c=o?a+1:s.length;for(r=a<0?c:o?a:0;r<c;r++)if((n=s[r]).selected&&!n.disabled&&(!n.parentNode.disabled||!i.nodeName(n.parentNode,"optgroup"))){if(e=g(n),o)return e;l.push(e)}return l},set:function(t,n){for(var i,r,s=t.options,a=e.makeArray(n),o=s.length;o--;)((r=s[o]).selected=e.inArray(c.option.get(r),a)>-1)&&(i=!0);return i||(t.selectedIndex=-1),a}}};function u(t,e,n){if(void 0===n){if("object"==typeof e){for(var i in e)u(t,i,e[i]);return this}return t.getAttribute?t.getAttribute(e):t[e]}return t.setAttribute?t.setAttribute(e,n):t[e]=n,this}function h(t,n){var i=t._$_store;return!i&&n&&(i=t._$_store=function(t){var n={};return e.each(t.attributes||[],function(t,e){0==e.name.indexOf("data-")&&(n[s(e.name.replace("data-",""))]=a(e.value))}),n}(t)),i}function d(t,e,n){var i=h(t,!0);i[s(e)]=n}function p(t,n,i){if(void 0===i){if("object"==typeof n){for(var r in n)d(t,r,n[r]);return this}return function(t,n){if(void 0===n)return h(t,!0);var i=h(t);if(i){if(n in i)return i[n];var r=s(n);if(r in i)return i[r]}var a="data-"+n.replace(o,"-$1").toLowerCase(),l=u(t,a);return e.isString(l)||(l=void 0),l}(t,n)}return d(t,n,i),this}function f(t){t._$_store&&delete t._$_store}function m(t,e){return void 0===e?void 0!==t.textContent?t.textContent:t.innerText:(e=null==e?"":""+e,void 0!==t.textContent?t.textContent=e:t.innerText=e,this)}function g(t,n){var i=c[t.type]||c[t.nodeName.toLowerCase()];if(void 0===n)return i&&"get"in i&&void 0!==(ret=i.get(t,"value"))?ret:(ret=t.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret);null==n?n="":"number"==typeof n?n+="":e.isArray(n)&&(n=e.map(n,function(t){return null==t?"":t+""})),i&&"set"in i&&void 0!==i.set(t,n,"value")||(t.value=n)}function y(){return y}return e.each(["radio","checkbox"],function(){c[this]={set:function(t,n){if(e.isArray(n))return t.checked=e.inArray(g(t),n)>-1}}}),n.pseudos.data=function(t,e,n,i){return!!p(t,i||n[3])},e.mixin(y,{aria:function(t,e,n){return this.attr(t,"aria-"+e,n)},attr:u,cleanData:f,data:p,pluck:function(t,e){return r.call(t,function(t){return t[e]})},prop:function t(e,n,i){if(void 0===i&&"object"==typeof n){for(var r in n)t(e,r,n[r]);return this}n=l[n]||n;return void 0===i?e[n]:(e[n]=i,this)},removeAttr:function(t,e){return e.split(" ").forEach(function(e){!function(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}(t,e)}),this},removeData:function(t,n){if(n){e.isString(n)&&(n=n.split(/\s+/));var i=h(t,!0);n.forEach(function(t){delete i[t]})}else f(t);return this},removeProp:function(t,e){return e.split(" ").forEach(function(e){delete t[e]}),this},text:m,val:g,valHooks:c}),t.attach("domx.data",y)}),define("skylark-domx-query/query",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder"],function(t,e,n,i){var r,s=Array.prototype.some,a=Array.prototype.push,o=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),l=(Array.prototype.map,Array.prototype.filter),c=Array.prototype.forEach,u=Array.prototype.indexOf,h=Array.prototype.sort,d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,p=e.funcArg,f=e.isArrayLike,m=e.isString,g=e.uniq,y=e.isFunction,v=e.type,k=(e.isArray,e.isWindow,e.isDocument,e.isObject);e.isPlainObject,e.compact,e.flatten,e.camelCase,e.dasherize,i.children;function x(t,i,r){return function(r){var s,a=e.map(arguments,function(t){return"function"==(s=v(t))||"object"==s||"array"==s||null==t?t:n.createFragment(t)});return a.length<1?this:(this.each(function(e){t.apply(i,[this,a,e>0])}),this)}}function b(t,n){return function(){var i=o.call(arguments),r=e.map(this,function(e,r){return t.apply(n,[e].concat(i))});return M(g(r))}}function w(t,e,n){return function(i){o.call(arguments);var r=this.map(function(r,s){return s.querySelector?t.apply(e,n?[s]:[s,i]):[]});return n&&i?r.filter(i):r}}function _(t,e,n){return function(i,r){o.call(arguments);var s=this.map(function(s,a){return t.apply(e,n?[a,i]:[a,r,i])});return n&&r?s.filter(r):s}}function C(t,e){return function(){var n=o.call(arguments);return this.each(function(i,r){t.apply(e,[this].concat(n))}),this}}function S(t,n,i){return function(r){return e.isDefined(r)?(c.call(this,function(e,s){var a;a=i?p(e,r,s,i(e)):r,t.apply(n,[e,a])}),this):this[0]?t.apply(n,[this[0]]):void 0}}var E,T=e.klass({klassName:"SkNodeList",init:function(t,r){var s,o,l,c;if(t&&(this.context=r=r||n.doc(),m(t)?(this.selector=t,(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:d.exec(t))?s[1]?(o=n.createFragment(t),e.isPlainObject(r)&&(c=r)):(l=i.byId(s[2],n.ownerDoc(r)))&&(o=[l]):(e.isString(r)&&(r=i.find(r)),o=i.descendants(r,t))):o=!n.isWindow(t)&&f(t)?t:[t]),o&&(a.apply(this,o),c))for(var u in c)e.isFunction(this[u])?this[u](c[u]):this.attr(u,c[u]);return this}}),M=function(){r=function(t){return t instanceof T},init=function(t,e){return new T(t,e)};var t=function(e,n){return y(e)?(t.ready(function(){e(t)}),d):r(e)?e:n&&r(n)&&m(e)?n.find(e):init(e,n)},d=t(document);t.fn=T.prototype,e.mixin(t.fn,{length:0,map:function(n){return t(g(e.map(this,function(t,e){return n.call(t,e,t)})))},slice:function(){return t(o.apply(this,arguments))},forEach:function(){return c.apply(this,arguments)},get:function(t){return void 0===t?o.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return u.apply(this,arguments)},sort:function(){return h.apply(this,arguments)},toArray:function(){return o.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,e){n.remove(e)}),this)},each:function(t){return e.each(this,t),this},filter:function(e){return y(e)?this.not(this.not(e)):t(l.call(this,function(t){return i.matches(t,e)}))},add:function(e,n){return t(g(this.toArray().concat(t(e,n).toArray())))},is:function(t){if(this.length>0){if(e.isString(t))return s.call(this,function(e){return i.matches(e,t)});if(e.isArrayLike(t))return s.call(this,function(n){return e.inArray(n,t)>-1});if(e.isHtmlNode(t))return s.call(this,function(e){return e==t})}return!1},not:function(e){var n=[];if(y(e)&&void 0!==e.call)this.each(function(t,i){e.call(this,t,i)||n.push(this)});else{var i="string"==typeof e?this.filter(e):f(e)&&y(e.item)?o.call(e):t(e);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return t(n)},has:function(e){return this.filter(function(){return k(e)?n.contains(this,e):t(this).find(e).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:w(i.descendants,i),closest:w(i.closest,i),parents:w(i.ancestors,i),parentsUntil:_(i.ancestors,i),parent:w(i.parent,i),children:w(i.children,i),contents:b(n.contents,n),empty:C(n.empty,n),html:S(n.html,n),pluck:function(t){return e.map(this,function(e){return e[t]})},pushStack:function(e){var n=t(e);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n="function"==typeof e;return this.each(function(i){t(this).wrapAll(n?e.call(this,i):e)})},wrapAll:function(e){var n;return this[0]&&("function"==typeof e&&(e=e.call(this[0])),n=t(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(e){return"function"==typeof e?this.each(function(n){t(this).wrapInner(e.call(this,n))}):this.each(function(){var n=t(this),i=n.contents();i.length?i.wrapAll(e):n.append(e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){t(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(e){return this.each(function(){var n=t(this);(void 0===e?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},prevAll:w(i.previousSiblings,i),next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},nextAll:w(i.nextSiblings,i),siblings:w(i.siblings,i),index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])}}),t.fn.detach=t.fn.remove,t.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};n.traverse;return t.fn.after=x(n.after,n),t.fn.prepend=x(n.prepend,n),t.fn.before=x(n.before,n),t.fn.append=x(n.append,n),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(e){for(var i,r=[],s=t(e),o=s.length-1,l=0;l<=o;l++)i=l===o?this:this.clone(!0),t(s[l])[n](i),a.apply(r,i.get());return this.pushStack(r)}}),t}();return(E=M).fn.scrollParent=function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=E(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:E(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(e){var n=t.fn[e];t.fn[e]=function(){var t=n.apply(this,arguments);return t.prevObject=this,t}})}(M),function(t){var s;t.fn.query=t.fn.find,t.fn.place=function(t,s){return e.isString(t)?t=i.descendant(t):r(t)&&(t=t[0]),this.each(function(e,i){switch(s){case"before":n.before(t,i);break;case"after":n.after(t,i);break;case"replace":n.replace(t,i);break;case"only":n.empty(t),n.append(t,i);break;case"first":n.prepend(t,i);break;default:n.append(t,i)}})},t.fn.addContent=function(t,n){return t.template&&(t=e.substitute(t.template,t)),this.append(t)},t.fn.disableSelection=(s="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(s+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return n.reflow(this[0])},t.fn.isBlockNode=function(){return n.isBlockNode(this[0])}}(M),M.fn.plugin=function(t,e){var n=o.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(n))}),r},M.wraps={wrapper_node_operation:x,wrapper_map:b,wrapper_value:S,wrapper_selector:w,wrapper_some_chk:function(t,e){return function(){var n=o.call(arguments);return s.call(this,function(i){return t.apply(e,[i].concat(n))})}},wrapper_selector_until:_,wrapper_every_act_firstArgFunc:function(t,e,n){return function(i){var r=o.call(arguments);return c.call(this,function(s,a){var o=p(s,i,a,n(s));t.apply(e,[s,o].concat(r.slice(1)))}),this}},wrapper_every_act:C,wrapper_name_value:function(t,n,i){return function(r,s){return e.isPlainObject(r)||e.isDefined(s)?(c.call(this,function(e,a){var o;o=i?p(e,s,a,i(e,r)):s,t.apply(n,[e,r,o])}),this):this[0]?t.apply(n,[this[0],r]):void 0}}},t.attach("domx.query",M)}),define("skylark-domx-query/main",["./query","skylark-domx-styler"],function(t,e){return t.fn.style=t.wraps.wrapper_name_value(e.css,e),t.fn.css=t.wraps.wrapper_name_value(e.css,e),t.fn.hasClass=t.wraps.wrapper_some_chk(e.hasClass,e),t.fn.addClass=t.wraps.wrapper_every_act_firstArgFunc(e.addClass,e,e.className),t.fn.removeClass=t.wraps.wrapper_every_act_firstArgFunc(e.removeClass,e,e.className),t.fn.toggleClass=t.wraps.wrapper_every_act_firstArgFunc(e.toggleClass,e,e.className),t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t}),define("skylark-domx-query",["skylark-domx-query/main"],function(t){return t}),define("skylark-domx-velm/velm",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query"],function(t,e,n,i,r){var s=Array.prototype.map,a=Array.prototype.slice,o=e.klass({klassName:"VisualElement",_construct:function(t){e.isString(t)&&(t="<"===(t=e.trim(t)).charAt(0)?n.createFragment(t)[0]:document.getElementById(t)),this._elm=t}});o.prototype.$=o.prototype.query=function(t){return r(t,this._elm)},o.prototype.elm=function(){return this._elm};var l=new o(document.body),c=function(t){return t?new o(t):l};return e.mixin(c,{batch:function(t,e,n){return t.forEach(function(t){var i=t instanceof o?t:c(t);i[e].apply(i,n)}),this},root:new o(document.body),VisualElement:o,partial:function(t,e){var n={};n[t]=e,o.partial(n)},delegate:function(t,n,i){var r={};t.forEach(function(t){var l=t;i&&i[t]&&(l=i[t]),r[t]=function(t,n){return function(){var i=this._elm,r=t.apply(n,[i].concat(a.call(arguments)));if(r){if(r===n)return this;r instanceof HTMLElement?r=new o(r):e.isArrayLike(r)&&(r=s.call(r,function(t){return t instanceof HTMLElement?new o(t):t}))}return r}}(n[l],n)}),o.partial(r)}}),c.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],i),c.find=function(t){return"body"===t?this.root:this.root.descendant(t)},c.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],n),t.attach("domx.velm",c)}),define("skylark-domx-velm/main",["./velm","skylark-domx-styler"],function(t,e){t.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],e);return["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(e){var n=e;t.VisualElement.prototype[n]=function(t){return this.css(e,t),this}}),t}),define("skylark-domx-velm",["skylark-domx-velm/main"],function(t){return t}),define("skylark-domx-data/main",["./data","skylark-domx-velm","skylark-domx-query"],function(t,e,n){return e.delegate(["attr","data","prop","removeAttr","removeData","text","val"],t),n.fn.text=n.wraps.wrapper_value(t.text,t,t.text),n.fn.attr=n.wraps.wrapper_name_value(t.attr,t,t.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(t.removeAttr,t),n.fn.prop=n.wraps.wrapper_name_value(t.prop,t,t.prop),n.fn.removeProp=n.wraps.wrapper_every_act(t.removeProp,t),n.fn.data=n.wraps.wrapper_name_value(t.data,t),n.fn.removeData=n.wraps.wrapper_every_act(t.removeData),n.fn.val=n.wraps.wrapper_value(t.val,t,t.val),t}),define("skylark-domx-data",["skylark-domx-data/main"],function(t){return t}),define("skylark-domx-eventer/eventer",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-finder","skylark-domx-noder","skylark-domx-data"],function(t,e,n,i,r,s){e.mixin;var a=e.each,o=(Array.prototype.slice,e.uid),l=/^([A-Z]|returnValue$|layer[XY]$)/,c={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},u=/complete|loaded|interactive/;function h(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(c,function(i,r){var s=n[i];t[i]=function(){return this[r]=e.returnTrue,s&&s.apply(n,arguments)},t[r]=e.returnFalse})),t}function d(t){if(t){var e=(""+t).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}return{type:null,ns:null}}function p(t){return t&&(e.isFunction(t)||e.isFunction(t.handleEvent))}var f=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],m={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15},g=function(){return function(t,n){e.isString(t)?n=n||{}:t=(n=t||{}).type||"";var i=d(t);t=i.type,n=e.mixin({bubbles:!0,cancelable:!0},n),i.ns&&(n.namespace=i.ns);var r=function(t){var e=m[t];e||(e=0);return f[e]}(t),s=new r(t,n);return e.safeMixin(s,n),h(s)}}();function y(t,n){var i,r={originalEvent:t};for(i in t)"keyIdentifier"===i||l.test(i)||void 0===t[i]||(r[i]=t[i]);return n&&e.mixin(r,n),h(r,t)}var v={},k="onfocusin"in window,x={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"},w=function(t){return b[t]||k&&x[t]||t},_={},C=e.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,n){var s=this._bindings,a={fn:t,options:e.mixin({},n)};s.push(a);var o=this;if(!o._listener){o._listener=function(t){var n=this,s=y(t),a=t._args,l=o._bindings,c=s.namespace;a=e.isDefined(a)?[s].concat(a):[s],s.type=o._event,e.each(l,function(t,l){var u=n;if(s.isImmediatePropagationStopped&&s.isImmediatePropagationStopped())return!1;var h=l.fn,d=l.options||{},p=d.selector,f=d.one,m=d.data;if(!c||c==d.ns||-1!==d.ns.indexOf(c)){if(p){if(!(u=i.closest(s.target,p))||u===n)return;e.mixin(s,{currentTarget:u,liveFired:n})}var g=o._event;if(g in b){var y=s.relatedTarget;if(y&&(y===u||r.contains(u,y)))return}e.isDefined(m)&&(s.data=m),f&&o.remove(h,d),!1===(h.handleEvent?h.handleEvent.apply(h,a):d.ctx?h.apply(d.ctx,a):h.apply(u,a))&&(s.preventDefault(),s.stopPropagation())}})};var l=o._event;o._target.addEventListener?o._target.addEventListener(w(l),o._listener,!1):console.warn("invalid eventer object",o._target)}},remove:function(t,n){var i,r;(n=e.mixin({},n)).ns&&(r=n.ns,i=new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var r=(!t||t===e.fn)&&(!i||i.test(e.options.ns))&&(!n.selector||n.selector==e.options.selector);return!r}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(w(this._event),this._listener,!1),this._listener=null)}}),S=e.klass({init:function(t){this._target=t,this._handler={}},register:function(t,n,i){var r=d(t),t=r.type,s=v[t],a=s&&(s.bindType||s.bindEventName),o=this._handler;void 0===o[t]&&(o[t]=new C(this._target,a||t)),o[t].add(n,e.mixin({ns:r.ns},i))},unregister:function(t,n,i){var r=this._handler,s=d(t);if(t=s.type){var a=r[t];a&&a.remove(n,e.mixin({ns:s.ns},i))}else for(t in r){var a=r[t];a.remove(n,e.mixin({ns:s.ns},i))}}}),E=function(t){var e=o(t),n=_[e];return n||(n=_[e]=new S(t)),n};var T=[],M=e.loop(function(){for(var t=0;t<T.length;t++)A(T[t],"focused");T=[]});function z(t,n,i,r,s,a,o){if(e.isPlainObject(n))return e.each(n,function(e,n){z(t,e,i,r,n,o)}),this;e.isString(i)||p(s)||(o=a,a=s,s=r,r=i,i=void 0),p(r)&&(o=a,a=s,s=r,r=void 0),e.isBoolean(a)&&(o=a,a=void 0),!1===s&&(s=e.returnFalse),"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var l=E(t);return n.forEach(function(t){if("ready"==t)return $(s);l.register(t,s,{data:r,selector:i,ctx:a,one:!!o})}),this}function A(t,e,n){var i;(i=e instanceof Event?e:g(e,n))._args=n;var r=t.dispatchEvent||t.trigger;return r?r.call(t,i):console.warn("The evented parameter is not a eventable object"),this}function $(t){return u.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1),this}M.start();var P=[],I=e.loop(function(){for(var t=0;t<P.length;t++)A(P[t],"resized");P=[]});I.start();var j={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function N(){return N}return n.support.transition&&(v.transitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end}),e.mixin(N,{NativeEvents:m,clear:function(t){return E(t).unregister(),this},create:g,focused:function(t){T.includes(t)||T.push(t)},keys:j,isNativeEvent:function(t){if(e.isString(t))return!!m[t];if(e.isArray(t)){for(var n=0;n<t.length;n++)if(m[t])return!1;return t.length>0}},off:function t(n,i,r,s){if(e.isPlainObject(i))return e.each(i,function(e,i){t(n,e,r,i)}),this;e.isString(r)||p(s)||!1===s||(s=r,r=void 0);!1===s&&(s=e.returnFalse);"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var a=E(n);i&&i.forEach(function(t){a.unregister(t,s,{selector:r})});return this},on:z,one:function(...t){return z(...t,!0),this},proxy:y,ready:$,resized:function(t){P.includes(t)||P.push(t)},shortcuts:function(t){var e=s.data(t,"shortcuts");if(!e){e={},s.data(t,"shortcuts",e);var n=function(t,e){var n=e.metaKey||e.ctrlKey;if(t.ctrl==n&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode))return e.preventDefault(),"keydown"==e.type&&t.fn(e),!0};z(t,"keyup keypress keydown",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var i in e)n(e[i],t)})}return{add:function(t,n){(t.indexOf(",")>-1?t.toLowerCase().split(","):t.toLowerCase().split(" ")).forEach(function(t){var i={fn:n,alt:!1,ctrl:!1,shift:!1};t.split("+").forEach(function(t){switch(t){case"alt":case"ctrl":case"shift":i[t]=!0;break;default:i.charCode=t.charCodeAt(0),i.keyCode=j[t]||t.toUpperCase().charCodeAt(0)}});var r=(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode;e[r]=i})}}},special:v,stop:function(t){window.document.all&&(t.keyCode=0);t.preventDefault&&(t.preventDefault(),t.stopPropagation());return this},trigger:A}),a(m,function(t){N[t]=function(e,n,i,r){return arguments.length>1?this.on(e,t,n,i,r):("focus"==t?e.focus&&e.focus():"blur"==t?e.blur&&e.blur():"click"==t?e.click&&e.click():this.trigger(e,t),this)}}),t.attach("domx.eventer",N)}),define("skylark-domx-eventer/main",["skylark-langx/langx","./eventer","skylark-domx-velm","skylark-domx-query"],function(t,e,n,i){var r=["off","on","one","trigger"];return t.each(e.NativeEvents,function(t){r.push(t)}),n.delegate(r,e),t.each(r,function(t,n){i.fn[n]=i.wraps.wrapper_every_act(e[n],e)}),i.ready=e.ready,e}),define("skylark-domx-eventer",["skylark-domx-eventer/main"],function(t){return t}),define("skylark-slax-runtime/slax",["skylark-langx-ns","skylark-langx-objects","skylark-langx-hoster","skylark-langx-async","skylark-net-http/Xhr","skylark-domx-eventer"],function(skylark,objects,hoster,async,Xhr,eventer){var _config={},_rootUrl="",_baseUrl="",slax={prepare:function(config){var p,slaxRoot,slaxApp;if(config||(config=hoster.global.slaxConfig),!config)for(var scripts=document.getElementsByTagName("script"),i=0,script,slaxDir,src,match;i<scripts.length;)if(script=scripts[i++],(src=script.getAttribute("src"))&&(match=src.match(/(((.*)\/)|^)skylark-slax-runtime([0-9A-Za-z\-]*)\.js(\W|$)/i))){slaxDir=match[3]||"",(src=script.getAttribute("data-slax-config"))?config=eval("({ "+src+" })"):(slaxRoot=script.getAttribute("data-slax-root"),void 0==slaxRoot&&(slaxRoot=slaxDir),slaxApp=script.getAttribute("data-slax-app"));break}if(config)objects.mixin(_config,config),p=async.Deferred.resolve();else{var d=new async.Deferred,p=d.promise;Xhr.get(slaxRoot+"/slax-config.json").then(function(t){if(slaxApp){for(var e,n=0;n<t.apps.length;n++)t.apps[n].name==slaxApp&&(e=slaxRoot+t.apps[n].dir);Xhr.get(e+"/spa.json").then(function(t){objects.mixin(_config,t),d.resolve()})}else objects.mixin(_config,t),d.resolve()})}return p},start:function(){var t=_config;if(t.runtime&&require.config(t.runtime),t.boot){let e=window[t.boot];e(t)}else{var e=function(e,n){var i=e(n=n||t);hoster.global.go=function(t,e){i.go(t,e)},i.prepare().then(function(){i.run()})};t.spaModule?require([t.spaModule],function(t){t._start?t._start().then(function(n){e(t,n)}):e(t)}):e(skylark.spa)}}};return define("slax",[],function(){return slax}),skylark.attach("slax",slax)}),define("skylark-io-caches/caches",["skylark-langx-ns"],function(t){"use strict";let e=t.attach("io.caches");return e.storages=e.storages||{},e}),define("skylark-io-caches/clipboard",["./caches"],function(t){}),define("skylark-io-caches/cookie",["skylark-langx-types","skylark-langx-objects/mixin","skylark-langx-datetimes","./caches"],function(t,e,n,i){"use strict";function r(){return r}return e(r,{get:function(t){return sKey&&this.has(t)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},has:function(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},list:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=unescape(t[e]);return t},remove:function(t,e){t&&this.has(t)&&(document.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(e?"; path="+e:""))},set:function(e,i,r,s,a,o){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){var l=t.type(r);if("number"===l){var c=Date.now();c.setTime(c.getTime()+24*expire*60*60*1e3),r=c}else"string"===l&&(r=new Date(Date.now()+n.parseMilliSeconds(r)));document.cookie=escape(e)+"="+escape(i)+(r?"; domain="+r.toGMTString():"")+(a?"; domain="+a:"")+(s?"; path="+s:"")+(o?"; secure":"")}}}),i.cookie=r}),define("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event","./listener"],function(t,e,n,i,r,s,a){var o=Array.prototype.slice,l=n.compact,c=t.isDefined,u=t.isPlainObject,h=t.isFunction,d=t.isString,p=(t.isEmptyObject,e.mixin);e.safeMixin;function f(t){var e=(""+t).split(".");return{name:e[0],ns:e.slice(1).join(" ")}}var m=new Map,g=a.inherit({_prepareArgs:function(t,e){return e=c(e)?[t].concat(e):[t]},on:function(t,e,n,i,r,s){var a=this,o=this._hub||(this._hub={});if(u(t))return r=i,each(t,function(t,i){a.on(t,e,n,i,r,s)}),this;if(d(e)||h(i)||(r=i,i=n,n=e,e=void 0),h(n)&&(r=i,i=n,n=null),!i)throw new Error("No callback function");if(!h(i))throw new Error("The callback  is not afunction");return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var a=f(t),l=a.name,c=a.ns;(o[l]||(o[l]=[])).push({fn:i,selector:e,data:n,ctx:r,ns:c,one:s})}),this},one:function(t,e,n,i,r){return this.on(t,e,n,i,r,1)},emit:function(t){if(!this._hub)return this;var e=this;d(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var n=o.call(arguments,1);return n=this._prepareArgs(t,n),[t.type||t.name,"all"].forEach(function(i){var r=f(i),s=r.name,a=r.ns,o=e._hub[s];if(o){for(var c=o.length,h=!1,d=0;d<c;d++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var m=o[d];(!a||m.ns&&m.ns.startsWith(a))&&(m.data&&(t.data=p({},m.data,t.data)),2==n.length&&u(n[1])&&(t.data=t.data||{},p(t.data,n[1])),m.fn.apply(m.ctx,n),m.one&&(o[d]=null,h=!0))}h&&(e._hub[i]=l(o))}}),this},queueEmit:function(t){const e=t.type||t;let n=m.get(this);n||(n=new Map,m.set(this,n));const i=n.get(e);n.delete(e),window.clearTimeout(i);const r=window.setTimeout(()=>{0===n.size&&(n=null,m.delete(this)),this.trigger(t)},0);n.set(e,r)},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},off:function(t,e){if(t){var n=this._hub||(this._hub={});return d(t)&&(t=t.split(/\s/)),t.forEach(function(t){var i=f(t),r=i.name,s=i.ns,a=n[r];if(a){var o=[];if(e||s)for(var l=0,c=a.length;l<c;l++)e&&a[l].fn!==e&&a[l].fn._!==e?o.push(a[l]):!s||a[l].ns&&0==a[l].ns.indexOf(s)||o.push(a[l]);o.length?n[r]=o:delete n[r]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return r.Emitter=g}),define("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(t,e,n){"use strict";var i=Array.prototype.slice,r=e.proxy,s=t.makeArray,a=n.result,o=n.mixin;o(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var l=function(){var t=this;this.promise=c(new Promise(function(e,n){t._resolve=e,t._reject=n}))};function c(t){if(t.isResolved)return t;var e=!0,n=!1,i=!1,r=t.then(function(t){return i=!0,e=!1,t},function(t){throw n=!0,e=!1,t});r.isResolved=function(){return i},r.isPending=function(){return e},r.isRejected=function(){return n},r.state=function(){return i?"resolved":n?"rejected":"pending"};var s=[],a=[];return r.then=function(t,e,n){return n&&this.progress(n),c(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}))},r.progress=function(t){return s.forEach(function(e){t(e)}),a.push(t),this},r.pipe=r.then,r.notify=function(t){try{return s.push(t),a.forEach(function(e){return e(t)})}catch(t){this.reject(t)}return this},r}return l.prototype.resolve=function(t){var e=i.call(arguments);return this.resolveWith(null,e)},l.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},l.prototype.notify=function(t){var e=a(this,"promise");return e.notify(t),this},l.prototype.reject=function(t){var e=i.call(arguments);return this.rejectWith(null,e)},l.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},l.prototype.isResolved=function(){var t=a(this,"promise");return t.isResolved()},l.prototype.isRejected=function(){var t=a(this,"promise");return t.isRejected()},l.prototype.state=function(){var t=a(this,"promise");return t.state()},l.prototype.then=function(t,e,n){var i=a(this,"promise");return i.then(t,e,n)},l.prototype.progress=function(t){var e=a(this,"promise");return e.progress(t)},l.prototype.catch=function(t){var e=a(this,"promise");return e.catch(t)},l.prototype.always=function(){var t=a(this,"promise");return t.always.apply(t,arguments),this},l.prototype.done=function(){var t=a(this,"promise");return t.done.apply(t,arguments),this},l.prototype.fail=function(t){var e=a(this,"promise");return e.fail(t),this},l.all=function(t){var e=new l;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),a(e,"promise")},l.first=function(t){return c(Promise.race(t))},l.when=function(t,e,n,i){var s=t&&"function"==typeof t.then,a=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new l).resolve(t);if(!a){var o=new l(t.cancel);t.then(r(o.resolve,o),r(o.reject,o),o.notify),t=o.promise}return e||n||i?t.then(e,n,i):t},l.reject=function(t){var e=new l;return e.reject(t),e.promise},l.immediate=l.resolve=function(t){var e=new l;return e.resolve.apply(e,arguments),e.promise},l.promise=function(t){var e=new l;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},l}),define("skylark-io-caches/local-file-system",["skylark-langx-objects/mixin","skylark-langx-events/Emitter","skylark-langx-async/Deferred","./caches"],function(t,e,n,i){"use strict";var r=window.requestFileSystem||window.webkitRequestFileSystem;window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL,window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;function s(t){var e="";switch(t.code){case FileError.QUOTA_EXCEEDED_ERR:e="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:e="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:e="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:e="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:e="INVALID_STATE_ERR";break;default:e="Unknown Error"}return e}var a=e.inherit({_fs:null,_isPersisted:!0,_cwd:null,init:function(t){this._fs=t,this._cwd=t.root},readfileAsArrayBuffer:function(t,e,n){this._cwd.getFile(t,{},function(t){t.file(function(t){var n=new FileReader;n.onloadend=function(){e(null,this.result)},n.readAsArrayBuffer(t)},n)},n)},readfileAsDataURL:function(t,e,n){this._cwd.getFile(t,{},function(t){t.file(function(t){var n=new FileReader;n.onloadend=function(){e(null,this.result)},n.readAsDataURL(t)},n)},n)},readfileAsText:function(t,e,n){this._cwd.getFile(t,{},function(t){t.file(function(t){var n=new FileReader;n.onloadend=function(){e(null,this.result)},n.readAsText(t)},n)},n)},writefile:function(t,e,n,i){var r=this,s=t.split("/");s=s.slice(0,s.length-1),this.mkdir(s.join("/"),function(){r._cwd.getFile(t,{create:!0},function(t){t.createWriter(function(t){var r=!1;t.onwriteend=function(){if(!r)return r=!0,void this.truncate(this.position);n&&n()},t.onerror=i;var s=e;!s instanceof Blob&&(s=new Blob([e],{type:"text/plain"})),t.write(s)},i)},i)})},rmfile:function(t,e,n){this._cwd.getFile(t,{},function(t){t.remove(function(){e()},n)},n)},readdir:function(t,e,n){this._cwd.getDirectory(t,{},function(t){var i=t.createReader(),r=[];!function t(){i.readEntries(function(n){n.length?(r=r.concat(Array.prototype.slice.call(n).map(function(t){return t.name+(t.isDirectory?"/":"")})),t()):e(null,r)},n)}()},n)},mkdir:function(t,e,n){var i=t.split("/"),r=function(s,a){"."!=a[0]&&""!=a[0]||(a=a.slice(1)),0!=a.length?s.getDirectory(a[0],{create:!0,exclusive:!1},function(s){if(s.isDirectory)a.length&&1!=i.length?r(s,a.slice(1)):e&&e(s);else{var o=new Error(t+" is not a directory");if(!n)throw o;n(o)}},function(t){if(!n)throw t;n(t)}):e(s)};r(this._cwd,i)},rmdir:function(t,e,n){this._cwd.getDirectory(t,{},function(t){t.removeRecursively(function(){e()},n)},n)},copy:function(t,e,n){this._cwd.getFile(t,{},function(t){cwd.getDirectory(e,{},function(e){t.copyTo(e,function(){n()},n)},n)},n)},move:function(t,e,n){this._cwd.getFile(t,{},function(t){cwd.getDirectory(e,{},function(e){t.moveTo(e,function(){n()},n)},n)},n)},chdir:function(t,e){this._cwd.getDirectory(t,{},function(t){cwd=t,fs.onchdir&&fs.onchdir(cwd.fullPath),e()},e)},importFromHost:function(t){for(var e,i=new n,r=0;e=t[r];++r)!function(t){cwd.getFile(e.name,{create:!0,exclusive:!0},function(e){e.createWriter(function(e){e.write(t)},s)},s)}(e);return i.promise},exportToHost:function(){}});return t(a,{isSupported:function(){return!!r},request:function(t,e){t=t||10485760;var i=e?PERSISTENT:TEMPORARY,s=new n;return r(i,t,function(t){var n=new a(t,!!e);s.resolve(n)},function(t){s.reject(t)}),s.promise}}),i.requestLocalFileSystem=a.request,i.LocalFileSystem=a}),define("skylark-io-caches/storages/local",["skylark-langx-objects/mixin","skylark-langx-strings","../caches"],function(t,e,n){"use strict";var i=null;try{i=window.localStorage}catch(t){}function r(){return r}return t(r,{isSupported:function(){return!!i},set:function(t,n){return void 0===n?this.remove(t):(i.setItem(t,e.serializeValue(n)),n)},get:function(t,n){var r=e.deserializeValue(i.getItem(t));return void 0===r?n:r},remove:function(t){i.removeItem(t)},clear:function(){i.clear()},list:function(){for(var t={},e=0;e<i.length;e++)t[key]=i.key(e);return values}}),n.storages.local=r}),define("skylark-io-caches/storages/session",["skylark-langx-objects/mixin","skylark-langx-strings","../caches"],function(t,e,n){"use strict";var i=null;try{i=window.sessiionStorage}catch(t){}return t(function t(){return t},{isSupported:function(){return!!i},set:function(t,n){return void 0===n?this.remove(t):(i.setItem(t,e.serializeValue(n)),n)},get:function(t,n){var r=e.deserializeValue(i.getItem(t));return void 0===r?n:r},remove:function(t){i.removeItem(t)},clear:function(){i.clear()},list:function(){for(var t={},e=0;e<i.length;e++)t[key]=i.key(e);return values}}),n.storages.session=sessionStorage}),define("skylark-io-caches/main",["./caches","./clipboard","./cookie","./local-file-system","./storages/local","./storages/session"],function(t){"use strict";return t}),define("skylark-io-caches",["skylark-io-caches/main"],function(t){return t}),define("skylark-slax-runtime/caches",["./slax","skylark-io-caches"],function(t,e){return t.caches=e}),define("skylark-langx-logging/logging",["skylark-langx-ns"],function(t){return t.attach("langx.logging",{})}),define("skylark-langx-logging/levels",["./logging"],function(t){return t.levels={all:"debug|info|warn|error",off:"",debug:"debug|info|warn|error",info:"info|warn|error",warn:"warn|error",error:"error",DEFAULT:"info"}}),define("skylark-langx-logging/Logger",["skylark-langx-objects","skylark-langx-constructs/klass","./logging","./levels"],function(t,e,n,i){"use strict";let r=[];var s=e({_level:"info",_construct:function(t){this.name=t,this._logByType=(t=>(e,n,s)=>{const a=i[n],o=new RegExp(`^(${a})$`);if("debug"!==e&&s.unshift(e.toUpperCase()+":"),s.unshift(t+":"),r){r.push([].concat(s));const t=r.length-1e3;r.splice(0,t>0?t:0)}if(!window.console)return;let l=window.console[e];l||"debug"!==e||(l=window.console.info||window.console.log),l&&a&&o.test(e)&&l[Array.isArray(s)?"apply":"call"](window.console,s)})(t)},level:function(t){if("string"==typeof t){if(!i.hasOwnProperty(t))throw new Error(`"${t}" in not a valid log level`);this._level=t}return this._level},error:function(...t){this._logByType("error",this._level,t)},warn:function(...t){this._logByType("warn",this._level,t)},debug:function(...t){this._logByType("debug",this._level,t)},info:function(...t){this._logByType("info",this._level,t)},history:function(){return r?[].concat(r):[]},createLogger:function(t){return new s(this.name?this.name+": "+t:t)}});return t.mixin(s.prototype.history,{enable:function(){null===r&&(r=[])},filter:function(t){return(r||[]).filter(e=>new RegExp(`.*${t}.*`).test(e[0]))},clear:function(){r&&(r.length=0)},disable:function(){null!==r&&(r.length=0,r=null)}}),s.root=new s(""),n.Logger=s}),define("skylark-langx-logging/main",["./logging","./Logger"],function(t,e){let n=e.root;return t.debug=function(...t){n.debug(...t)},t.info=function(...t){n.debug(...t)},t.warn=function(...t){n.debug(...t)},t.error=function(...t){n.debug(...t)},t}),define("skylark-langx-logging",["skylark-langx-logging/main"],function(t){return t}),define("skylark-domx-animates/animates",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser"],function(t,e,n){function i(){return i}return e.mixin(i,{off:!1,speeds:{normal:400,fast:200,slow:600},animationName:n.normalizeCssProperty("animation-name"),animationDuration:n.normalizeCssProperty("animation-duration"),animationDelay:n.normalizeCssProperty("animation-delay"),animationTiming:n.normalizeCssProperty("animation-timing-function"),animationEnd:n.normalizeCssEvent("AnimationEnd"),animateBaseClass:"animated"}),t.attach("domx.animates",i)}),define("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(t,e,n,i){"use strict";var r,s=/^(?:body|html)$/i,a=e.toPixel,o=n.offsetParent;function l(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:a(e.borderLeftWidth,t),top:a(e.borderTopWidth,t),right:a(e.borderRightWidth,t),bottom:a(e.borderBottomWidth,t)}}function c(t,e){if(void 0===e)return s.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var n=o(t),i=c(n),r=p(t),a=l(n);return g(t,{top:e.top-i.top-r.top-a.top+(k(n)||0),left:e.left-i.left-r.left-a.left+(v(n)||0)}),this}function u(t,e){return void 0!==e?(c(t,e),x(t,e),this):t==window||t==document.documentElement||t==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect?t.getBoundingClientRect():void 0}function h(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var n="border-box"===i.css(t,"box-sizing"),r={width:e.width,height:e.height};if(n){var s=l(t);void 0!==r.width&&(r.width=r.width+s.left+s.right),void 0!==r.height&&(r.height=r.height+s.top+s.bottom)}else{var a=f(t);void 0!==r.width&&(r.width=r.width-a.left-a.right),void 0!==r.height&&(r.height=r.height-a.top-a.bottom)}return i.css(t,r),this}function d(t){var e=t.documentElement,n=t.body,i=Math.max,r=i(e.scrollWidth,n.scrollWidth),s=i(e.clientWidth,n.clientWidth),a=i(e.offsetWidth,n.offsetWidth),o=i(e.scrollHeight,n.scrollHeight),l=i(e.clientHeight,n.clientHeight),c=i(e.offsetHeight,n.offsetHeight);return{width:r<a?s:r,height:o<c?l:o}}function p(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:a(e.marginLeft),top:a(e.marginTop),right:a(e.marginRight),bottom:a(e.marginBottom)}}function f(t){if(n.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:a(e.paddingLeft),top:a(e.paddingTop),right:a(e.paddingRight),bottom:a(e.paddingBottom)}}function m(t,e){if(void 0===e){var n=t.getBoundingClientRect(),i=t.ownerDocument.defaultView;return{left:n.left+i.pageXOffset,top:n.top+i.pageYOffset}}var r=o(t),s=m(r),a=p(t),c=l(r);return g(t,{top:e.top-s.top-a.top-c.top,left:e.left-s.left-a.left-c.left}),this}function g(t,e){if(void 0==e){var n=o(t),r=c(t),s=c(n),a=p(t),u=l(n);return{top:r.top-s.top-u.top-a.top,left:r.left-s.left-u.left-a.left}}var n=o(t),h={top:e.top,left:e.left};return"static"==i.css(t,"position")&&(h.position="relative"),i.css(t,h),this}function y(t,e){if(void 0===e){var n=o(t),i=u(t),r=c(n),s=(p(t),l(n));return{top:i.top-r.top-s.top,left:i.left-r.left-s.left,width:i.width,height:i.height}}return g(t,e),x(t,e),this}function v(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n="scrollLeft"in t;return void 0===e?n?t.scrollLeft:t.pageXOffset:(n?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function k(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n="scrollTop"in t;return void 0===e?n?t.scrollTop:t.pageYOffset:(n?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function x(t,n){if(void 0==n)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?d(document):{width:t.offsetWidth,height:t.offsetHeight};var r="border-box"===i.css(t,"box-sizing"),s={width:n.width,height:n.height};if(!r){var a=f(t),o=l(t);void 0!==s.width&&""!==s.width&&null!==s.width&&(s.width=s.width-a.left-a.right-o.left-o.right),void 0!==s.height&&""!==s.height&&null!==s.height&&(s.height=s.height-a.top-a.bottom-o.top-o.bottom)}return i.css(t,s),this}function b(t){return u(t=t||window)}function w(){return w}return e.mixin(w,{borderExtents:l,boundingPosition:c,boundingRect:u,clientHeight:function(t,e){return void 0==e?h(t).height:h(t,{height:e})},clientSize:h,clientWidth:function(t,e){return void 0==e?h(t).width:(h(t,{width:e}),this)},contentRect:function(t){var e=h(t),n=f(t);return{left:n.left,top:n.top,width:e.width-n.left-n.right,height:e.height-n.top-n.bottom}},getDocumentSize:d,hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},height:function(t,e){return void 0==e?x(t).height:(x(t,{height:e}),this)},inview:function(t,e){var n=function(t,e){var n={};return e=+e||0,n.width=(n.right=t.right+e)-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e),n}(u(t),e),i=b();return!!n&&n.bottom>=0&&n.right>=0&&n.top<=i.height&&n.left<=i.width},marginExtents:p,marginRect:function(t){var e=y(t),n=p(t);return{left:e.left,top:e.top,width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}},marginSize:function(t){var e=x(t),n=p(t);return{width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}},offsetParent:o,paddingExtents:f,pagePosition:m,pageRect:function(t,e){if(void 0===e){var n=t.getBoundingClientRect(),i=t.ownerDocument.defaultView;return{left:n.left+i.pageXOffset,top:n.top+i.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}}return m(t,e),x(t,e),this},relativePosition:g,relativeRect:y,scrollbarWidth:function(){if(void 0!==r)return r;var t,e,s=n.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],a=s.childNodes[0];n.append(document.body,s),t=a.offsetWidth,i.css(s,"overflow","scroll"),e=a.offsetWidth,t===e&&(e=s[0].clientWidth);return n.remove(s),r=t-e},scrollIntoView:function(t,e){var n,i,r,s,a,o,l=t.parentNode,c=function(t,e){var n,i,r=t;n=i=0;for(;r&&r!=e&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}(t,l);n=c.x,i=c.y,r=t.offsetWidth,s=t.offsetHeight,a=l.clientWidth,o=l.clientHeight,"end"==e?(n-=a-r,i-=o-s):"center"==e&&(n-=a/2-r/2,i-=o/2-s/2);return l.scrollLeft=n,l.scrollTop=i,this},scrollLeft:v,scrollTop:k,scrollBy:function(t,e,n){t.scrollLeft+=e,t.scrollTop+=n},size:x,testAxis:function(t){var e=t.offsetTop,n=t.offsetLeft,i=t.offsetWidth,r=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;var s={x:0,y:0};e<window.pageYOffset?s.y=e-window.pageYOffset:e+r>window.pageYOffset+window.innerHeight&&(s.y=e+r-(window.pageYOffset+window.innerHeight));n<window.pageXOffset?s.x=n-window.pageXOffset:n+i>window.pageXOffset+window.innerWidth&&(s.x=n+i-(window.pageXOffset+window.innerWidth));return s},viewportSize:b,width:function(t,e){return void 0==e?x(t).width:(x(t,{width:e}),this)}}),t.attach("domx.geom",w)}),define("skylark-domx-geom/posit",["skylark-langx/langx","skylark-domx-noder","skylark-domx-styler","./geom"],function(t,e,n,i){"use strict";var r=Math.max,s=Math.abs,a=/left|center|right/,o=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/;function h(t,e,n){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?n/100:1)]}function d(t,e){return parseInt(n.css(t,e),10)||0}var p={fit:{left:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,o=t.left-e.collisionPosition.marginLeft,l=s-o,c=o+e.collisionWidth-a-s;e.collisionWidth>a?l>0&&c<=0?(n=t.left+l+e.collisionWidth-a-s,t.left+=l-n):t.left=c>0&&l<=0?s:l>c?s+a-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-o,t.left)},top:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,o=t.top-e.collisionPosition.marginTop,l=s-o,c=o+e.collisionHeight-a-s;e.collisionHeight>a?l>0&&c<=0?(n=t.top+l+e.collisionHeight-a-s,t.top+=l-n):t.top=c>0&&l<=0?s:l>c?s+a-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-o,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,a=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-o-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+d+p+f+e.collisionWidth-o-a)<0||n<s(u))&&(t.left+=d+p+f):h>0&&((i=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||s(i)<h)&&(t.left+=d+p+f)},top:function(t,e){var n,i,r=e.within,a=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-o-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];u<0?((i=t.top+p+f+m+e.collisionHeight-o-a)<0||i<s(u))&&(t.top+=p+f+m):h>0&&((n=t.top-e.collisionPosition.marginTop+p+f+m-l)>0||s(n)<h)&&(t.top+=p+f+m)}},flipfit:{left:function(){p.flip.left.apply(this,arguments),p.fit.left.apply(this,arguments)},top:function(){p.flip.top.apply(this,arguments),p.fit.top.apply(this,arguments)}}};return i.posit=function(u,f){var m,g,y,v,k,x,b=(f=t.extend({},f)).of,w=(E=f.within,T=E||window,M=e.isWindow(T),z=!!T&&9===T.nodeType,A=!M&&!z,$=i.marginSize(T),{element:T,isWindow:M,isDocument:z,offset:A?i.pagePosition(E):{left:0,top:0},scrollLeft:i.scrollLeft(T),scrollTop:i.scrollTop(T),width:$.width,height:$.height}),_=function(t){var e=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-x"),r=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-y"),s="scroll"===e||"auto"===e&&t.width<i.scrollWidth(t.element);return{width:"scroll"===r||"auto"===r&&t.height<i.scrollHeight(t.element)?i.scrollbarWidth():0,height:s?i.scrollbarWidth():0}}(w),C=(f.collision||"flip").split(" "),S={};var E,T,M,z,A,$;P=b,x=9===P.nodeType?{size:size(P),offset:{top:0,left:0}}:e.isWindow(P)?{size:i.size(P),offset:{top:i.scrollTop(P),left:i.scrollLeft(P)}}:P.preventDefault?{size:{width:0,height:0},offset:{top:P.pageY,left:P.pageX}}:{size:i.size(P),offset:i.pagePosition(P)},b.preventDefault&&(f.at="left top");var P;g=x.size.width,y=x.size.height,v=x.offset,k=t.extend({},v),t.each(["my","at"],function(){var t,e,n=(f[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=l.exec(n[0]),e=l.exec(n[1]),S[this]=[t?t[0]:0,e?e[0]:0],f[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===C.length&&(C[1]=C[0]);"right"===f.at[0]?k.left+=g:"center"===f.at[0]&&(k.left+=g/2);"bottom"===f.at[1]?k.top+=y:"center"===f.at[1]&&(k.top+=y/2);return m=h(S.at,g,y),k.left+=m[0],k.top+=m[1],function(e){var n,a,o=i.marginSize(e),l=o.width,c=o.height,u=d(e,"marginLeft"),x=d(e,"marginTop"),E=l+u+d(e,"marginRight")+_.width,T=c+x+d(e,"marginBottom")+_.height,M=t.extend({},k),z=h(S.my,o.width,o.height);"right"===f.my[0]?M.left-=l:"center"===f.my[0]&&(M.left-=l/2),"bottom"===f.my[1]?M.top-=c:"center"===f.my[1]&&(M.top-=c/2),M.left+=z[0],M.top+=z[1],n={marginLeft:u,marginTop:x},t.each(["left","top"],function(t,i){p[C[t]]&&p[C[t]][i](M,{targetWidth:g,targetHeight:y,elemWidth:l,elemHeight:c,collisionPosition:n,collisionWidth:E,collisionHeight:T,offset:[m[0]+z[0],m[1]+z[1]],my:f.my,at:f.at,within:w,elem:e})}),f.using&&(a=function(t){var n=v.left-M.left,i=n+g-l,a=v.top-M.top,o=a+y-c,u={target:{element:b,left:v.left,top:v.top,width:g,height:y},element:{element:e,left:M.left,top:M.top,width:l,height:c},horizontal:i<0?"left":n>0?"right":"center",vertical:o<0?"top":a>0?"bottom":"middle"};g<l&&s(n+i)<g&&(u.horizontal="center"),y<c&&s(a+o)<y&&(u.vertical="middle"),r(s(n),s(i))>r(s(a),s(o))?u.important="horizontal":u.important="vertical",f.using.call(this,t,u)}),i.pagePosition(e,t.extend(M,{using:a}))}(u)}}),define("skylark-domx-geom/scrollToTop",["skylark-langx/langx","skylark-domx-styler","./geom"],function(t,e,n){return n.scrollToTop=function(e,n,i,r){var s=parseInt(e.scrollTop),a=0,o=1e3*i/5,l=parseInt(n),c=setInterval(function(){++a<=o&&(e.scrollTop=(l-s)/o*a+s),a>=o+1&&(clearInterval(c),r&&t.debounce(r,1e3)())},5);return this}}),define("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query","./posit","./scrollToTop"],function(t,e,n,i){return n.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","marginRect","marginSize","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","pageSize","width"],e,{pageSize:"size"}),i.fn.offset=i.wraps.wrapper_value(e.pagePosition,e,e.pagePosition),i.fn.scrollTop=i.wraps.wrapper_value(e.scrollTop,e),i.fn.scrollLeft=i.wraps.wrapper_value(e.scrollLeft,e),i.fn.position=function(n){if(!this.length)return this;if(n)return n.of&&n.of.length&&((n=t.clone(n)).of=n.of[0]),this.each(function(){e.posit(this,n)});var i=this[0];return e.relativePosition(i)},i.fn.offsetParent=i.wraps.wrapper_map(e.offsetParent,e),i.fn.pageSize=i.wraps.wrapper_value(e.size,e),i.fn.width=i.wraps.wrapper_value(e.width,e,e.width),i.fn.height=i.wraps.wrapper_value(e.height,e,e.height),i.fn.clientSize=i.wraps.wrapper_value(e.clientSize,e.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});i.fn["outer"+n]=function(n,i){if(arguments.length?"boolean"!=typeof n&&(i=n,n=!1):(n=!1,i=void 0),void 0===i){var r=this[0];if(!r)return;var s=e.size(r);if(n){var a=e.marginExtents(r);s.width=s.width+a.left+a.right,s.height=s.height+a.top+a.bottom}return"width"===t?s.width:s.height}return this.each(function(r,s){var a={},o=e.marginExtents(s);"width"===t?(a.width=i,n&&(a.width=a.width-o.left-o.right)):(a.height=i,n&&(a.height=a.height-o.top-o.bottom)),e.size(s,a)})}}),i.fn.innerWidth=i.wraps.wrapper_value(e.clientWidth,e,e.clientWidth),i.fn.innerHeight=i.wraps.wrapper_value(e.clientHeight,e,e.clientHeight),e}),define("skylark-domx-geom",["skylark-domx-geom/main"],function(t){return t}),define("skylark-domx-animates/animation",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./animates"],function(t,e,n,i,r,s,a){var o=a.animationName,l=a.animationDuration,c=a.animationTiming,u=a.animationDelay,h=a.animationEnd,d={};return d[o]=d[l]=d[u]=d[c]="",a.animation=function(e,n,i,u,d,p){var f={};t.isPlainObject(i)&&(u=i.easing,d=i.complete,p=i.delay,i=i.duration);t.isString(i)&&(i=a.speeds[i]);void 0===i&&(i=a.speeds.normal);i/=1e3,t.isFunction(u)?(d=u,eace="swing"):u=u||"swing";p?p/=1e3:p=0;f[o]=n,f[l]=i+"s",f[c]=u,i>0&&s.on(e,h,d);return e.clientLeft,r.css(e,f),this}}),define("skylark-domx-animates/animate",["skylark-langx/langx","skylark-domx-styler","skylark-domx-eventer","./animates"],function(t,e,n,i){return i.animate=function(t,r){i.animateBaseClass&&(r=i.animateBaseClass+" "+r);return e.addClass(t,r),n.one(t,i.animationEnd,function(){e.removeClass(t,r)}),this}}),define("skylark-domx-animates/main",["./animates","./animation","./animate"],function(t){return t}),define("skylark-domx-animates",["skylark-domx-animates/main"],function(t){return t}),define("skylark-domx/animates",["skylark-domx-animates"],function(t){return t}),define("skylark-domx/browser",["skylark-domx-browser"],function(t){"use strict";return t}),define("skylark-domx-css/css",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder"],function(t,e,n){"use strict";var i,r=document.getElementsByTagName("head")[0],s=0,a={},o={},l=p(),c=o[l],u="cssRules"in c?"cssRules":"rules",h=c.deleteRule||c.removeRule;if(c.insertRule){var d=c.insertRule;i=function(t,e,n){d.call(this,t+"{"+e+"}",n)}}else i=c.addRule;function p(t,i){var a,l={type:"text/css"},c=s++;return(i=i||{}).media&&(l.media=i.media),a=t?n.create("link",e.mixin(l,{rel:"stylesheet",async:!1})):n.createElement("style",l),n.append(r,a),o[c]={id:c,node:a},c}function f(t,n){var i=o[t];return e.isNumber(n)?h.call(i,n):e.each(i[u],function(t,e){if(n===e)return h.call(i,t),!1}),this}function m(t,i){var r,s=o[t];return r=e.isString(i)?i:y(i),n.append(s.node,n.createTextNode(r)),this}function g(t){return t.startsWith("@")}function y(t){var n=function(t,e,n){return t&&(g(t)?n+=1:e=t+" "+e),{name:e,depth:n}},i=function(t,r,s){var a="",o=g(t);if(g(t))e.isString(r)?a=v.SPACE.repeat(s)+t.trim()+' "'+r.trim()+' ";\n':(a+=v.SPACE.repeat(s)+t.trim()+" {\n",a+=i("",r,s+1),a+=v.SPACE.repeat(s)+" }\n");else if(e.isString(r))a=v.SPACE.repeat(s)+t.trim(),a=o?a+' "'+r.trim()+' ";\n':a+": "+r.trim()+";\n";else if(e.isArray(r))for(var l=0;l<r.length;l++)a+=i(t,r[l],s);else{if(t){for(var l in a+=v.SPACE.repeat(s)+t.trim()+" {\n",r){var c=r[l];e.isString(c)&&(a+=i(l,c,s+1))}a+=v.SPACE.repeat(s)+"}\n"}for(var l in r){var c=r[l];if(!e.isString(c)){var u=n(t,l,s);a+=i(u.name,c,u.depth)}}}return a};return i("",t,0)}function v(){return v}return e.mixin(v,{SPACE:"\t",addRules:function(t){return this.addRules(l,t)},addSheetRules:m,createStyleSheet:function(t,e){e||(e={});var n=p(!1,e);t&&m(n,t);return n},deleteSheetRule:f,deleteRule:function(t){return f(l,t),this},insertRule:function(t,e,n){return this.insertSheetRule(l,t,e,n)},insertSheetRule:function(t,e,n,r){if(!e||!n)return-1;var s=o[t];return r=r||s[u].length,i.call(s,e,n,r)},loadStyleSheet:function(t,n,i,r){e.isFunction(n)&&(r=i,i=n,n={});var s=a[t];if(!s){var l=p(!0,n);s=a[t]=o[l],e.mixin(s,{state:0,url:t,deferred:new e.Deferred});var c=s.node;startTime=(new Date).getTime(),c.onload=function(){s.state=1,s.deferred.resolve(s.id)},c.onerror=function(t){s.state=-1,s.deferred.reject(t)},c.href=s.url}(i||r)&&s.deferred.promise.then(i,r);return s.id},removeStyleSheet:function(t){if(t===l)throw new Error("The default stylesheet can not be deleted");var e=o[t];return delete o[t],n.remove(e.node),this},toString:y}),t.attach("domx.css",v)}),define("skylark-domx-css/main",["./css"],function(t){return t}),define("skylark-domx-css",["skylark-domx-css/main"],function(t){return t}),define("skylark-domx/css",["skylark-domx-css"],function(t){"use strict";return t}),define("skylark-domx/data",["skylark-domx-data"],function(t){return t}),define("skylark-domx/eventer",["skylark-domx-eventer"],function(t){return t}),define("skylark-domx/finder",["skylark-domx-finder"],function(t){return t}),define("skylark-domx-fx/fx",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach("domx.fx",n)}),define("skylark-domx-transits/transits",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach("domx.transits",n)}),define("skylark-domx-transits/transit",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./transits"],function(t,e,n,i,r,s,a){var o,l,c,u,h=e.normalizeCssEvent("TransitionEnd"),d=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,p=e.css3PropPrefix+"transform",f={};return f[o=e.normalizeCssProperty("transition-property")]=f[l=e.normalizeCssProperty("transition-duration")]=f[u=e.normalizeCssProperty("transition-delay")]=f[c=e.normalizeCssProperty("transition-timing-function")]="",a.transit=function(e,n,m,g,y,v){var k,x,b,w={},_=[],C="",S=this,E=!1,T=!1;t.isPlainObject(m)&&(g=m.easing,y=m.complete,v=m.delay,m=m.duration);t.isString(m)&&(m=a.speeds[m]);void 0===m&&(m=a.speeds.normal);m/=1e3,a.off&&(m=0);t.isFunction(g)?(y=g,eace="swing"):g=g||"swing";v?v/=1e3:v=0;for(k in n){var M=n[k];if(d.test(k))C+=k+"("+M+") ";else{if("scrollTop"===k&&(T=!0),"clip"==k&&t.isPlainObject(M)){if(w[k]="rect("+M.top+"px,"+M.right+"px,"+M.bottom+"px,"+M.left+"px)","auto"==r.css(e,"clip")){var z=i.size(e);r.css(e,"clip","rect(0px,"+z.width+"px,"+z.height+"px,0px)"),!0}}else w[k]=M;_.push(t.dasherize(k))}}x=h,C&&(w[p]=C,_.push(p));m>0&&(w[o]=_.join(", "),w[l]=m+"s",w[u]=v+"s",w[c]=g);b=function(t){if(E=!0,t){if(t.target!==t.currentTarget)return;s.off(t.target,x,b)}else s.off(e,x,b);r.css(e,f),y&&y.call(this)},m>0&&(s.on(e,x,b),t.debounce(function(){E||b.call(S)},1e3*(m+v)+25)());e.clientLeft,r.css(e,w),m<=0&&t.debounce(function(){E||b.call(S)},0)();T&&i.scrollToTop(e,n.scrollTop,m,y);return this}}),define("skylark-domx-fx/animate",["skylark-langx/langx","skylark-domx-transits/transit","skylark-domx-animates/animation","./fx"],function(t,e,n,i){return i.animate=function(i,r,s,a,o,l){return t.isString(r)?n(i,r,s,a,o,l):e(i,r,s,a,o,l)}}),define("skylark-domx-transits/bounce",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,i,r){return i.bounce=function(i,s,a){var o,l,c,u,h=s.mode,d="hide"===h,p="show"===h,f=s.direction||"up",m=s.distance,g=s.times||5,y=2*g+(p||d?1:0),v=s.duration/y,k=s.easing,x="up"===f||"down"===f?"top":"left",b="up"===f||"left"===f,w=0,_=t.Deferred,C=[];if(c=n.css(i,x),!m){var S=e.size(i);m=("top"===x?S.height:S.width)/3}u=e.relativePosition(i)[x],p&&((l={opacity:1})[x]=c,n.css(i,"opacity",0),n.css(i,x,u+(b?2*-m:2*m)),C.push(E(i,l,v,k)));d&&(m/=Math.pow(2,g-1));function E(t,e,n,i){return function(){var s=new _;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for((l={})[x]=c;w<g;w++)(o={})[x]=u+(b?-m:m),C.push(E(i,o,v,k)),C.push(E(i,l,v,k)),m=d?2*m:m/2;d&&((o={opacity:0})[x]=u+(b?-1*m:m),C.push(E(i,o,v,k)));return C.push(a),C.reduce(function(t,e,n,i){return t.then(e)},_.resolve()),this}}),define("skylark-domx-transits/emulate-transition-end",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","./transits"],function(t,e,n,i){return i.emulateTransitionEnd=function(t,i){var r=!1;n.one(t,"transitionEnd",function(){r=!0});return setTimeout(function(){r||n.trigger(t,e.support.transition.end)},i),this}}),define("skylark-domx-transits/show",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,i){return n.show=function(n,r,s){e.show(n),r&&(!s&&t.isFunction(r)&&(s=r,r="normal"),e.css(n,"opacity",0),i(n,{opacity:1,scale:"1,1"},r,s));return this}}),define("skylark-domx-transits/hide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,i){return n.hide=function(n,r,s){r?(!s&&t.isFunction(r)&&(s=r,r="normal"),i(n,{opacity:0,scale:"0,0"},r,function(){e.hide(n),s&&s.call(n)})):e.hide(n);return this}}),define("skylark-domx-transits/explode",["skylark-langx/langx","skylark-domx-styler","skylark-domx-geom","skylark-domx-noder","skylark-domx-query","./transits","./transit","./show","./hide"],function(t,e,n,i,r,s,a,o,l){return s.explode=function(t,i,s){e.show(t),e.css(t,"visibility","hidden");var a,o,l,c,u,h=i.pieces?Math.round(Math.sqrt(i.pieces)):3,d=h,p="show"===i.mode,f=n.pagePosition(t),m=n.marginSize(t),g=Math.ceil(m.width/d),y=Math.ceil(m.height/h),v=[];function k(){v.push(this),v.length===h*d&&(e.css(t,{visibility:"visible"}),r(v).remove(),s())}for(var x=0;x<h;x++)for(l=f.top+x*y,u=x-(h-1)/2,a=0;a<d;a++)o=f.left+a*g,c=a-(d-1)/2,r(t).clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*g,top:-x*y}).parent().addClass(i.explodeClass||"ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:y,left:o+(p?c*g:0),top:l+(p?u*y:0),opacity:p?0:1}).transit({left:o+(p?0:c*g),top:l+(p?0:u*y),opacity:p?1:0},i.duration||500,i.easing,k);return this}}),define("skylark-domx-transits/fade",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,i){return n.fade=function(e,n,r,s){t.isFunction(r)&&(s=r,r={});return i(e,{opacity:n},(r=r||{}).duration,r.easing,s),this}}),define("skylark-domx-transits/fade-in",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(t,e,n,i){return n.fadeIn=function(t,n,r){var s=e.css(t,"opacity");s>0?e.css(t,"opacity",0):s=1;return e.show(t),i(t,s,n,r),this}}),define("skylark-domx-transits/fade-out",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(t,e,n,i){return n.fadeOut=function(t,e,n){return i(t,0,e,n),this}}),define("skylark-domx-transits/fade-toggle",["skylark-langx/langx","skylark-domx-styler","./transits","./fade-in","./fade-out"],function(t,e,n,i,r){return n.fadeToggle=function(t,n,s,a){e.isInvisible(t)?i(t,n,s,a):r(t,n,s,a);return this}}),define("skylark-domx-transits/pulsate",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,i,r){return i.pulsate=function(e,i,s){var a=i.mode,o="show"===a||!a,l=o||"hide"===a,c=2*(i.times||5)+(l?1:0),u=i.duration/c,h=0,d=1;(o||n.isInvisible(e))&&(n.css(e,"opacity",0),n.show(e),h=1);var p=t.Deferred,f=[];function m(t,e,n,i){return function(){var s=new p;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for(;d<c;d++)f.push(m(e,{opacity:h},u,i.easing)),h=1-h;return f.push(m(e,{opacity:h},u,i.easing)),f.push(s),f.reduce(function(t,e,n,i){return t.then(e)},p.resolve()),this}}),define("skylark-domx-transits/shake",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(t,e,n,i,r){return i.shake=function(n,i,s){var a=1,o=i.direction||"left",l=i.distance||20,c=i.times||3,u=2*c+1,h=Math.round(i.duration/u),d="up"===o||"down"===o?"top":"left",p="up"===o||"left"===o,f={},m={},g={},y={},v=t.Deferred;function k(t,e,n,i){return function(){var s=new v;return r(t,e,n,i,function(){s.resolve()}),s.promise}}for(start=e.relativePosition(n)[d],funcs=[],f[d]=start,m[d]=start+(p?-1:1)*l,g[d]=m[d]+(p?1:-1)*l*2,y[d]=g[d]+(p?-1:1)*l*2,funcs.push(k(n,m,h,i.easing));a<c;a++)funcs.push(k(n,g,h,i.easing)),funcs.push(k(n,y,h,i.easing));return funcs.push(k(n,f,h/2,i.easing)),funcs.push(s),funcs.reduce(function(t,e,n,i){return t.then(e)},v.resolve()),this}}),define("skylark-domx-transits/slide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(t,e,n,i){return n.slide=function(r,s,a){t.isFunction(s)&&(a=s,s={});var o=(s=s||{}).direction||"down",l="up"===o||"left"===o,c="up"===o||"down"===o,u=s.duration||n.speeds.normal,h=e.css(r,"position");if(l){if(e.isInvisible(r))return this}else e.show(r),e.css(r,{position:"absolute",visibility:"hidden"});if(c){var d=e.css(r,"margin-top"),p=e.css(r,"margin-bottom"),f=e.css(r,"padding-top"),m=e.css(r,"padding-bottom"),g=e.css(r,"height");l?(e.css(r,{visibility:"visible",overflow:"hidden",height:g,marginTop:d,marginBottom:p,paddingTop:f,paddingBottom:m}),i(r,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:u,queue:!1,complete:function(){e.hide(r),e.css(r,{visibility:"visible",overflow:"hidden",height:g,marginTop:d,marginBottom:p,paddingTop:f,paddingBottom:m}),a&&a.apply(r)}})):(e.css(r,{position:h,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),i(r,{height:g,marginTop:d,marginBottom:p,paddingTop:f,paddingBottom:m},{duration:u,complete:function(){a&&a.apply(r)}}))}else{var y=e.css(r,"margin-left"),v=e.css(r,"margin-right"),k=e.css(r,"padding-left"),x=e.css(r,"padding-right"),b=e.css(r,"width");l?(e.css(r,{visibility:"visible",overflow:"hidden",width:b,marginLeft:y,marginRight:v,paddingLeft:k,paddingRight:x}),i(r,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:u,queue:!1,complete:function(){e.hide(r),e.css(r,{visibility:"visible",overflow:"hidden",width:b,marginLeft:y,marginRight:v,paddingLeft:k,paddingRight:x}),a&&a.apply(r)}})):(e.css(r,{position:h,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),i(r,{width:b,marginLeft:y,marginRight:v,paddingLeft:k,paddingRight:x},{duration:u,complete:function(){a&&a.apply(r)}}))}return this}}),define("skylark-domx-transits/slide-down",["./transits","./slide"],function(t,e){return t.slideDown=function(t,n,i){return e(t,{direction:"down",duration:n},i)}}),define("skylark-domx-transits/slide-up",["./transits","./slide"],function(t,e){return t.slideUp=function(t,n,i){return e(t,{direction:"up",duration:n},i)}}),define("skylark-domx-transits/slide-toggle",["skylark-langx/langx","skylark-domx-geom","./transits","./slide-down","./slide-up"],function(t,e,n,i,r){return n.slideToggle=function(t,n,s){0==e.height(t)?i(t,n,s):r(t,n,s);return this}}),define("skylark-domx-transits/throb",["skylark-langx/langx","skylark-domx-styler","skylark-domx-noder","./transits","./transit"],function(t,e,n,i,r){return i.throb=function(t,i){(i=i||{}).text,i.style;var r,s=i.time,a=i.callback,o=n.createElement("div",{class:i.className||"throbber"}),l=function(){r&&(clearTimeout(r),r=null),o&&(n.remove(o),o=null)};i.style&&e.css(o,i.style);var c=i.content||'<span class="throb"></span>';n.html(o,c),t.appendChild(o),s&&(r=setTimeout(function(){l(),a&&a()},s));return{throbber:o,remove:l,update:function(t){t&&t.text&&o&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-transits/toggle",["skylark-langx/langx","skylark-domx-styler","./transits","./show","./hide"],function(t,e,n,i,r){return n.toggle=function(t,n,s){e.isInvisible(t)?i(t,n,s):r(t,n,s);return this}}),define("skylark-domx-transits/main",["./transits","skylark-domx-velm","skylark-domx-query","./transit","./bounce","./emulate-transition-end","./explode","./fade-in","./fade-out","./fade","./fade-toggle","./hide","./pulsate","./shake","./show","./slide","./slide-down","./slide-toggle","./slide-up","./throb","./toggle"],function(t,e,n){return e.delegate(["transit","emulateTransitionEnd","fadeIn","fadeOut","fade","fadeToggle","hide","scrollToTop","slideDown","slideToggle","slideUp","show","toggle"],t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.transit=n.wraps.wrapper_every_act(t.transit,t),n.fn.emulateTransitionEnd=n.wraps.wrapper_every_act(t.emulateTransitionEnd,t),n.fn.show=n.wraps.wrapper_every_act(t.show,t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.toogle=n.wraps.wrapper_every_act(t.toogle,t),n.fn.fadeTo=n.wraps.wrapper_every_act(t.fadeTo,t),n.fn.fadeIn=n.wraps.wrapper_every_act(t.fadeIn,t),n.fn.fadeOut=n.wraps.wrapper_every_act(t.fadeOut,t),n.fn.fadeToggle=n.wraps.wrapper_every_act(t.fadeToggle,t),n.fn.slideDown=n.wraps.wrapper_every_act(t.slideDown,t),n.fn.slideToggle=n.wraps.wrapper_every_act(t.slideToggle,t),n.fn.slideUp=n.wraps.wrapper_every_act(t.slideUp,t),t}),define("skylark-domx-transits",["skylark-domx-transits/main"],function(t){return t}),define("skylark-domx-fx/bounce",["skylark-domx-transits","./fx"],function(t,e){return e.bounce=t.bounce}),define("skylark-domx-fx/emulateTransitionEnd",["skylark-domx-transits","./fx"],function(t,e){return e.emulateTransitionEnd=t.emulateTransitionEnd}),define("skylark-domx-fx/explode",["skylark-domx-transits","./fx"],function(t,e){return e.explode=t.explode}),define("skylark-domx-fx/fadeIn",["skylark-domx-transits","./fx"],function(t,e){return e.fadeIn=t.fadeIn}),define("skylark-domx-fx/fadeOut",["skylark-domx-transits","./fx"],function(t,e){return e.fadeOut=t.fadeOut}),define("skylark-domx-fx/fade",["skylark-domx-transits","./fx"],function(t,e){return e.fade=t.fade}),define("skylark-domx-fx/fadeToggle",["skylark-domx-transits","./fx"],function(t,e){return e.fadeToggle=t.fadeToggle}),define("skylark-domx-fx/hide",["skylark-domx-transits","./fx"],function(t,e){return e.hide=t.hide}),define("skylark-domx-fx/pulsate",["skylark-domx-transits","./fx"],function(t,e){return e.pulsate=t.pulsate}),define("skylark-domx-fx/shake",["skylark-domx-transits","./fx"],function(t,e){return e.shake=t.shake}),define("skylark-domx-fx/show",["skylark-domx-transits","./fx"],function(t,e){return e.show=t.show}),define("skylark-domx-fx/slide",["skylark-domx-transits","./fx"],function(t,e){return e.slide=function(t,n,i){langx.isFunction(n)&&(i=n,n={});var r=(n=n||{}).direction||"down",s="up"===r||"left"===r,a="up"===r||"down"===r,o=n.duration||e.speeds.normal,l=styler.css(t,"position");if(s){if(styler.isInvisible(t))return this}else styler.show(t),styler.css(t,{position:"absolute",visibility:"hidden"});if(a){var c=styler.css(t,"margin-top"),u=styler.css(t,"margin-bottom"),h=styler.css(t,"padding-top"),d=styler.css(t,"padding-bottom"),p=styler.css(t,"height");s?(styler.css(t,{visibility:"visible",overflow:"hidden",height:p,marginTop:c,marginBottom:u,paddingTop:h,paddingBottom:d}),animate(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:o,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:"visible",overflow:"hidden",height:p,marginTop:c,marginBottom:u,paddingTop:h,paddingBottom:d}),i&&i.apply(t)}})):(styler.css(t,{position:l,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),animate(t,{height:p,marginTop:c,marginBottom:u,paddingTop:h,paddingBottom:d},{duration:o,complete:function(){i&&i.apply(t)}}))}else{var f=styler.css(t,"margin-left"),m=styler.css(t,"margin-right"),g=styler.css(t,"padding-left"),y=styler.css(t,"padding-right"),v=styler.css(t,"width");s?(styler.css(t,{visibility:"visible",overflow:"hidden",width:v,marginLeft:f,marginRight:m,paddingLeft:g,paddingRight:y}),animate(t,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:o,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:"visible",overflow:"hidden",width:v,marginLeft:f,marginRight:m,paddingLeft:g,paddingRight:y}),i&&i.apply(t)}})):(styler.css(t,{position:l,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),animate(t,{width:v,marginLeft:f,marginRight:m,paddingLeft:g,paddingRight:y},{duration:o,complete:function(){i&&i.apply(t)}}))}return this}}),define("skylark-domx-fx/slideDown",["skylark-domx-transits","./fx"],function(t,e){return e.slideDown=function(t,e,n){return slide(t,{direction:"down",duration:e},n)}}),define("skylark-domx-fx/slideToggle",["skylark-domx-transits","./fx"],function(t,e){return e.slideToggle=function(t,e,n){0==geom.height(t)?slideDown(t,e,n):slideUp(t,e,n);return this}}),define("skylark-domx-fx/slideUp",["skylark-domx-transits","./fx"],function(t,e){return e.slideUp=function(t,e,n){return slide(t,{direction:"up",duration:e},n)}}),define("skylark-domx-fx/throb",["skylark-domx-transits","./fx"],function(t,e){return e.throb=function(t,e){(e=e||{}).text,e.style;var n,i=e.time,r=e.callback,s=noder.createElement("div",{class:e.className||"throbber"}),a=function(){n&&(clearTimeout(n),n=null),s&&(noder.remove(s),s=null)};e.style&&styler.css(s,e.style);var o=e.content||'<span class="throb"></span>';noder.html(s,o),t.appendChild(s),i&&(n=setTimeout(function(){a(),r&&r()},i));return{throbber:s,remove:a,update:function(t){t&&t.text&&s&&(textNode.nodeValue=t.text)}}}}),define("skylark-domx-fx/toggle",["skylark-domx-transits","./fx"],function(t,e){return e.toggle=function(t,e,n){styler.isInvisible(t)?show(t,e,n):hide(t,e,n);return this}}),define("skylark-domx-fx/main",["./fx","./animate","./bounce","./emulateTransitionEnd","./explode","./fadeIn","./fadeOut","./fade","./fadeToggle","./hide","./pulsate","./shake","./show","./slide","./slideDown","./slideToggle","./slideUp","./throb","./toggle"],function(t){return t}),define("skylark-domx-fx",["skylark-domx-fx/main"],function(t){return t}),define("skylark-domx/fx",["skylark-domx-fx"],function(t){return t}),define("skylark-domx/geom",["skylark-domx-geom"],function(t){return t}),define("skylark-domx-iframes/iframes",["skylark-langx-ns"],function(t){return t.attach("domx.iframes")}),define("skylark-domx-iframes/create",["skylark-domx-noder","./iframes"],function(t,e){"use strict";return e.create=function(e,n){let i={},r={};(e=e||{}).id&&(i.id=e.id);e.url&&(i.src=e.url);e.style&&(i.style=e.style);e.onload&&(i.onload=e.onload);e.onerror&&(i.onload=e.onerror);e.className&&(i.className=e.className);e.sandbox&&(r.sandbox=e.sandbox);e.frameBorder&&(r.frameBorder=e.frameBorder);e.name&&(r.name=e.name);let s=t.create("iframe",i,r,n);e.contentWindowName&&(s.contentWindow.name=e.contentWindowName);return s}}),define("skylark-domx-iframes/hook-sizing",["skylark-domx-eventer","./iframes"],function(t,e){"use strict";return e.hookSizing=function(e){t.on(window,"message",function(t){t||(t=window.event);e.style.height=1*t.data.height+2+"px"})}}),define("skylark-domx-iframes/load-real",["skylark-domx-noder","skylark-domx-data","./iframes","./hook-sizing"],function(t,e,n,i){return n.loadReal=function(n,i){i=i||{};var r=t.clone(n),s=i.url;s||(s=e.attr(r,i.urlAttrName||"data-url"));s=s.split("&")[0],e.prop(r,"src",s),e.prop(r,"_src",s),t.replace(r,ifame)}}),define("skylark-domx-iframes/lazy-load",["skylark-domx-eventer","skylark-domx-data","skylark-domx-geom","./iframes","./load-real"],function(t,e,n,i,r){var s;function a(){s||(s=[],t.on(window,"scroll",function(){!function(){var t=0,e=[];for(t=0;t<s.length;t++)n.inview(s[t],400)&&e.unshift({iframe:s[t],i:t});for(t=e.length-1;t>=0;t--)s.splice(e[t].i,1),r(e[t].iframe)}()}))}return i.lazyLoad=function(t,n){a(),(n=n||{}).url&&e.attr(t,n.urlAttrName||"data-url",n.url);n.holdingUrl&&e.prop(t,"src",n.holdingUrl);s.push(t)}}),define("skylark-domx-iframes/replace",["skylark-langx-urls/get-query","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","./iframes","./create","./load-real","./lazy-load"],function(t,e,n,i,r,s,a,o){"use strict";return r.replace=function(r,l){l=l||{};s({className:r.className,id:r.id,style:{border:"1px solid #aaa"}});var c=l.url||r.href,u=l.size||t(r.search),h=l.holdingUrl;i.css(iframe,"width",u.width||"100%"),i.css(iframe,"minHeight",u.height||"300px"),u.height&&i.css(iframe,"maxHeight",u.height);n.inview(r,100)?a(iframe,{url:c}):o(iframe,{url:c,holdingUrl:h});e.replace(iframe,r)}}),define("skylark-domx-iframes/main",["./iframes","./create","./lazy-load","./load-real","./replace"],function(){}),define("skylark-domx-iframes",["skylark-domx-iframes/main"],function(t){return t}),define("skylark-domx/iframes",["skylark-domx-iframes"],function(t){return t}),define("skylark-domx-lists/lists",["skylark-langx-ns","skylark-domx-query","skylark-domx-data","skylark-domx-geom","skylark-domx-finder","skylark-domx-noder","skylark-domx-styler"],function(t){return t.attach("domx.lists")}),define("skylark-domx-lists/multitier",["skylark-langx","skylark-domx-query","./lists"],function(t,e,n){"use strict";return n.multitier=function(n,i){var r=(i=t.mixin({classes:{active:"active",collapse:"collapse",in:"in"},selectors:{item:"li",sublist:"ul",hasSublist:":has(ul)",handler:" > a"},mode:"",levels:2,togglable:!1,multiExpand:!1},i,!0)).selectors.item,s=e(r,n),a=i.classes.active,o="."+a,l=(i.mode,i.selectors.sublist),c=i.togglable,u=i.multiExpand,h=i.selectors.handler,d=i.classes.collapse,p=i.classes.in,f=i.show||function(t){t.addClass(p)},m=i.hide||function(t){t.addClass(d).removeClass(p)};i.toggle;s.find(h).on("click.multitier",function(t){t.preventDefault();let n,s=e(this).closest(r);u||(n=s.siblings().removeClass(a).children(l))&&m(n);let o=s.hasClass(a);o&&!c||(n=s.children(i.selectors.sublist),o?(s.removeClass(a),m(n)):(s.addClass(a),f(n)))}),m(s.has(l).children(l)),f(s.filter(o).has(l).children(l))}}),define("skylark-domx-lists/main",["./lists","./multitier"],function(t){return t}),define("skylark-domx-lists",["skylark-domx-lists/main"],function(t){return t}),define("skylark-domx/lists",["skylark-domx-lists"],function(t){return t}),define("skylark-domx/noder",["skylark-domx-noder"],function(t){return t}),define("skylark-domx/styler",["skylark-domx-styler"],function(t){return t}),define("skylark-domx/query",["skylark-domx-query","./data","./eventer","./fx","./geom","./styler"],function(t){return t}),define("skylark-domx-transforms/transforms",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-data","skylark-domx-styler"],function(t,e,n,i,r){var s=n.normalizeCssProperty("transform");function a(t,e){return t>0&&t>-e?e:t<0&&t<e?-e:0}function o(t,e){var n,i,a,o,l,c=(n=e.radian,i=e.y,a=e.x,o=Math.cos(n),l=Math.sin(n),{M11:o*i,M12:-l*a,M21:l*i,M22:o*a});r.css(t,s,"matrix("+c.M11.toFixed(16)+","+c.M21.toFixed(16)+","+c.M12.toFixed(16)+","+c.M22.toFixed(16)+", 0, 0)")}function l(t,e){if(!e)return(e=i.data(t,"transform")||{}).radian=e.radian||0,e.x=e.x||1,e.y=e.y||1,e.zoom=e.zoom||1,e;i.data(t,"transform",e)}var c={vertical:function(t){t.radian=Math.PI-t.radian,t.y*=-1},horizontal:function(t){t.radian=Math.PI-t.radian,t.x*=-1},rotate:function(t,e){t.radian=e*Math.PI/180},left:function(t){t.radian-=Math.PI/2},right:function(t){t.radian+=Math.PI/2},scale:function(t,e){var n=a(t.y,e),i=a(t.x,e);n&&i&&(t.y+=n,t.x+=i)},zoomin:function(t){c.scale(t,.1)},zoomout:function(t){c.scale(t,-.1)}};function u(){return u}return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout"].forEach(function(t){var n;u[t]=(n=c[t],function(){var t=e.makeArray(arguments),i=t.shift(),r=l(i);t.unshift(r),n.apply(this,t),o(i,r),l(i,r)})}),e.mixin(u,{reset:function(t){var e={x:1,y:1,radian:0};o(t,e),l(t,e)},matrix:function(t){var e="";do{var n=r.css(t,"transform");n&&"none"!==n&&(e=n+" "+e)}while(t=t.parentElement);if(window.DOMMatrix)return new DOMMatrix(e);if(window.WebKitCSSMatrix)return new WebKitCSSMatrix(e);if(window.CSSMatrix)return new CSSMatrix(e)}}),t.attach("domx.transforms",u)}),define("skylark-domx-transforms/main",["./transforms"],function(t){return t}),define("skylark-domx-transforms",["skylark-domx-transforms/main"],function(t){return t}),define("skylark-domx/transforms",["skylark-domx-transforms"],function(t){return t}),define("skylark-domx/transits",["skylark-domx-transits"],function(t){return t}),define("skylark-domx/velm",["skylark-domx-velm","./data","./eventer","./fx","./geom","./styler"],function(t){return t}),define("skylark-domx/main",["./animates","./browser","./css","./data","./eventer","./finder","./fx","./geom","./iframes","./lists","./noder","./query","./styler","./transforms","./transits","./velm"],function(t,e,n,i,r,s,a,o,l,c,u,h,d,p,f,m){return{animates:t,browser:e,css:n,data:i,eventer:r,finder:s,geom:o,lists:c,noder:u,iframes:l,query:h,styler:d,transforms:p,transits:f,velm:m}}),define("skylark-domx",["skylark-domx/main"],function(t){return t}),define("skylark-domx-files/files",["skylark-langx/skylark"],function(t){var e=function(){return e};return t.attach("domx.files",e)}),define("skylark-io-diskfs/diskfs",["skylark-langx/skylark"],function(t){var e=function(){return e};return t.attach("storages.diskfs",e)}),define("skylark-io-diskfs/webentry",["skylark-langx-arrays","skylark-langx-async/deferred","./diskfs"],function(t,e,n){var i=Array.prototype.concat,r=function(){function n(t,n){var i=new e,s=function(t){i.reject(t)};if(n=n||"",t.isFile)t.file(function(t){t.relativePath=n,i.resolve(t)},s);else if(t.isDirectory){var a=t.createReader();a.readEntries(function(e){r(e,n+t.name+"/").then(function(t){i.resolve(t)}).catch(s)},s)}else i.resolve([]);return i.promise}function r(r,s){return e.all(t.map(r,function(t){return n(t,s)})).then(function(){return i.apply([],arguments)})}return{one:n,all:r}}();return n.webentry=r}),define("skylark-domx-files/dropzone",["skylark-langx/arrays","skylark-langx/deferred","skylark-domx-styler","skylark-domx-eventer","skylark-domx-velm","skylark-domx-query","skylark-io-diskfs/webentry","./files"],function(t,e,n,i,r,s,a,o){function l(e,r){var s=(r=r||{}).hoverClass||"hover",o=r.dropped,l=0;return i.on(e,"dragenter",function(t){t.dataTransfer&&t.dataTransfer.types.indexOf("Files")>-1&&(i.stop(t),l++,n.addClass(e,s))}),i.on(e,"dragover",function(t){t.dataTransfer&&t.dataTransfer.types.indexOf("Files")>-1&&i.stop(t)}),i.on(e,"dragleave",function(t){t.dataTransfer&&t.dataTransfer.types.indexOf("Files")>-1&&0==--l&&n.removeClass(e,s)}),i.on(e,"drop",function(r){if(r.dataTransfer&&r.dataTransfer.types.indexOf("Files")>-1&&(n.removeClass(e,s),i.stop(r),o)){var l=r.dataTransfer.items;l&&l.length&&(l[0].webkitGetAsEntry||l[0].getAsEntry)?a.all(t.map(l,function(t){return t.webkitGetAsEntry?t.webkitGetAsEntry():t.getAsEntry()})).then(o):o(r.dataTransfer.files)}}),this}return o.dropzone=l,r.delegate(["dropzone"],o),s.fn.dropzone=s.wraps.wrapper_every_act(o.dropzone,o),l}),define("skylark-domx-files/pastezone",["skylark-langx/objects","skylark-domx-eventer","skylark-domx-velm","skylark-domx-query","./files"],function(t,e,n,i,r){function s(n,i){(i=i||{}).hoverClass;var r=i.pasted;return e.on(n,"paste",function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i=[];n&&n.length&&t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.push(n)}),r&&i.length&&r(i)}),this}return r.pastezone=s,n.delegate(["pastezone"],r),i.fn.pastezone=i.wraps.wrapper_every_act(r.pastezone,r),s}),define("skylark-io-diskfs/select",["./diskfs"],function(t){var e,n=1/0;return t.select=function(t){var i=(t=t||{}).directory||!1,r=t.multiple||!1,s=t.accept||"",a=t.title||"",o=t.picked;if(!e){var l=e=document.createElement("input");l.type="file",l.style.position="fixed",l.style.left=0,l.style.top=0,l.style.opacity=.001,document.body.appendChild(l)}function c(t){for(var e=t.length;e--;)t[e].size>n&&t.splice(e,1);o(t)}e.onchange=function(t){var n=t.target.webkitEntries||t.target.entries;n&&n.length?webentry.all(n).then(function(t){c(t)}):c(Array.prototype.slice.call(t.target.files)),e.value="",e.onchange=null},e.multiple=r,e.accept=s,e.title=a,e.webkitdirectory=i,e.click()}}),define("skylark-domx-files/picker",["skylark-langx/objects","skylark-domx-eventer","skylark-domx-velm","skylark-domx-query","skylark-io-diskfs/select","./files"],function(t,e,n,i,r,s){function a(t,n){return e.on(t,"click",function(t){t.preventDefault(),r(n)}),this}return s.picker=a,n.delegate(["picker"],s),i.fn.picker=i.wraps.wrapper_every_act(s.picker,s),a}),define("skylark-domx-files/main",["./files","./dropzone","./pastezone","./picker"],function(t){return t}),define("skylark-domx-files",["skylark-domx-files/main"],function(t){return t}),define("skylark-domx-images/images",["skylark-langx/skylark"],function(t){return t.attach("domx.images",function t(){return t})}),define("skylark-domx-images/is-completed",["./images"],function(t){return t.isCompleted=function(t){return t.complete&&void 0!==t.naturalWidth}}),define("skylark-domx-images/is-loaded",["./images"],function(t){return t.isLoaded=function(t){return t.complete&&0!==t.naturalWidth}}),define("skylark-domx-images/watch",["skylark-langx/langx","skylark-domx-eventer","./images","./is-completed","./is-loaded"],function(t,e,n,i,r){return n.watch=function(n){t.isArray(n)||(n=[n]);var s=n.length,a=0,o=0,l=0,c=new t.Deferred;function u(){c.resolve({total:s,successed:o,failered:l,imgs:n})}function h(t,e){a++,e?o++:l++,c.progress({img:t,isLoaded:e,progressed:a,total:s,imgs:n}),a==s&&u()}return t.defer(function(){n.length?n.forEach(function(t){i(t)?h(t,r(t)):e.on(t,{load:function(){h(t,!0)},error:function(){h(t,!1)}})}):u()}),c.promise.totalCount=s,c.promise}}),define("skylark-domx-images/loaded",["skylark-domx-finder","./images","./watch"],function(t,e,n){return e.loaded=function(e,i){var r=[];function s(t){var e=/url\((['"])?(.*?)\1\)/gi.exec(styler.css(t,"background-image")),n=e&&e[2];if(n){var i=new Image;i.src=n,r.push(i)}}if(i=i||{},"IMG"==e.nodeName)r.push(e);else{for(var a=t.findAll(e,"img"),o=0;o<a.length;o++)r.push(a[o]);if(!0===i.background)s(e);else if("string"==typeof i.background){var l=t.findAll(e,i.background);for(o=0;o<l.length;o++)s(l[o])}}return n(r)}}),define("skylark-domx-images/preload",["skylark-langx/langx","./images","./watch"],function(t,e,n){return e.preload=function(e,i){t.isString(e)&&(e=[e]);var r=[];return e.forEach(function(t){var e=new Image;e.src=t,r.push(e)}),n(r)}}),define("skylark-domx-images/transform",["skylark-domx-transforms","./images"],function(t,e){function n(t,e){}return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(e){n[e]=t[e]}),e.transform=n}),define("skylark-domx-images/viewer",["skylark-langx/langx","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-transforms","./images"],function(t,e,n,i,r,s){return s.viewer=function(s,a){var o,l={},c=n.clientSize(s),u=a.loaded;a.failered;function h(){i.css(o,{top:(c.height-o.offsetHeight)/2+"px",left:(c.width-o.offsetWidth)/2+"px"}),r.reset(o),i.css(o,{visibility:"visible"}),u&&u()}function d(){}function p(t){o.style.visibility="hidden",o.src=t}!function(){"relative"!=(l=i.css(s,["position","overflow"])).position&&"absolute"!=l.position&&i.css(s,"position","relative");i.css(s,"overflow","hidden"),o=new Image,i.css(o,{position:"absolute",border:0,padding:0,margin:0,width:"auto",height:"auto",visibility:"hidden"}),o.onload=h,o.onerror=d,e.append(s,o),a.url&&p(a.url)}();var f={load:p,dispose:function(){e.remove(o),i.css(s,l),o=o.onload=o.onerror=null}};return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(e){f[e]=function(){var n=t.makeArray(arguments);n.unshift(o),r[e].apply(null,n)}}),f}}),define("skylark-domx-images/main",["skylark-domx-query","skylark-domx-velm","./images","./is-completed","./is-loaded","./loaded","./preload","./transform","./viewer","./watch"],function(t,e,n,i,r,s,a,o,l,c){return e.delegate(["imageIsCompleted","imageIsLoaded","imageLoaded","imageViewer"],n,{imageIsCompleted:"isCompleted",imageIsLoaded:"isLoaded",imageLoaded:"loaded",imageViewer:"viewer"}),n}),define("skylark-domx-images",["skylark-domx-images/main"],function(t){return t}),define("skylark-domx-i18n/i18n",["skylark-langx/skylark","skylark-domx-query","skylark-domx-data","skylark-domx-styler"],function(t){return t.attach("domx.i18n",{escape:function(t){return"string"==typeof t?t.replace(/\[\[/g,"&lsqb;&lsqb;").replace(/\]\]/g,"&rsqb;&rsqb;"):t},unescape:function(t){return"string"==typeof t?t.replace(/&lsqb;|\\\[/g,"[").replace(/&rsqb;|\\\]/g,"]"):t},compile:function(){var t=Array.prototype.slice.call(arguments,0).map(function(t){return String(t).replace(/%/g,"&#37;").replace(/,/g,"&#44;")});return"[["+t.join(", ")+"]]"}})}),define("skylark-domx-i18n/Translator",["skylark-langx/langx","./i18n"],function(t,e){var n=Object.freeze({amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830});function i(e){return t.escapeHTML((i=String(e).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),String(i).replace(/&#(\d+);?/g,function(t,e){return String.fromCharCode(e)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(t,e){return String.fromCharCode(parseInt(e,16))}).replace(/&([^;\W]+;?)/g,function(t,e){var i=e.replace(/;$/,""),r=n[e]||e.match(/;$/)&&n[i];return"number"==typeof r?String.fromCharCode(r):"string"==typeof r?r:t})));var i}var r=function(){console.warn.apply(console,arguments)};Object.assign||jQuery.extend;function s(t,e){if(!t)throw new TypeError("Parameter `language` must be a language string. Received "+t+(""===t?"(empty string)":""));this.modules=Object.keys(s.moduleFactories).map(function(e){var n=s.moduleFactories[e];return[e,n(t)]}).reduce(function(t,e){var n=e[0],module=e[1];return t[n]=module,t},{}),this.lang=t,this.translations={},this.load=e}return s.prototype.translate=function(t){var e=new RegExp("[a-zA-Z0-9\\-_.\\/]"),n=new RegExp("[^a-zA-Z0-9\\-_.\\/\\]]"),i=0,r=0,s=t.length,a=[],o=!1;function l(t){for(var e=t.length,n=[],i=0,r=0,s=0;i+2<=e;)"["===t[i]&&"["===t[i+1]?(s+=1,i+=1):"]"===t[i]&&"]"===t[i+1]?(s-=1,i+=1):0===s&&","===t[i]&&"\\"!==t[i-1]&&(n.push(t.slice(r,i).trim()),r=i+=1),i+=1;return n.push(t.slice(r,i+1).trim()),n}for(i=t.indexOf("[[",i);i+2<=s&&-1!==i;){a.push(t.slice(r,i)),r=i+=2,o=!0;for(var c,u,h=0,d=!1,p=!1,f=!1,m=!1;i+2<=s;)if(c=t[i],u=t[i+1],!d&&e.test(c))d=!0,i+=1;else if(d&&!p&&":"===c)p=!0,i+=1;else if(p&&!f&&e.test(c))f=!0,i+=1;else if(f&&!m&&","===c)m=!0,i+=1;else if(d&&p&&f&&m||!n.test(c))if("["===c&&"["===u)h+=1,i+=2;else if("]"===c&&"]"===u){if(0===h){var g=t.slice(r,i),y=l(g),v=y[0],k=y.slice(1),x="";k&&k.length&&(x=this.translate(g)),a.push(this.translateKey(v,k,x)),r=i+=2,o=!1;break}h-=1,i+=2}else i+=1;else{if(i+=1,r-=2,o=!1,!(h>0))break;h-=1}i=t.indexOf("[[",i)}var b=t.slice(r);return o&&(b=this.translate(b)),a.push(b),Promise.all(a).then(function(t){return t.join("")})},s.prototype.translateKey=function(t,e,n){var s=this,a=t.split(":",2),o=a[0],l=a[1];if(s.modules[o])return Promise.resolve(s.modules[o](l,e));if(o&&!l)return r('Missing key in translation token "'+t+'"'),Promise.resolve("[["+o+"]]");var c=this.getTranslation(o,l);return c.then(function(a){if(!a)return r('Missing translation "'+t+'"'),n||l;var o=e.map(function(t){return s.translate(i(t))});return Promise.all(o).then(function(t){var e=a;return t.forEach(function(t,n){var i=t.replace(/%(?=\d)/g,"&#37;").replace(/\\,/g,"&#44;");e=e.replace(new RegExp("%"+(n+1),"g"),i)}),e})})},s.prototype.getTranslation=function(t,e){var n;return t?(this.translations[t]=this.translations[t]||this.load(this.lang,t).catch(function(){return{}}),n=this.translations[t]):(r("[translator] Parameter `namespace` is "+t+(""===t?"(empty string)":"")),n=Promise.resolve({})),e?n.then(function(t){return t&&t[e]}):n},s.prototype.translateInPlace=function(t,e){e=e||["placeholder","title"];var n=function(t){var e=[];return function t(n){if(3===n.nodeType)e.push(n);else for(var i=0,r=n.childNodes,s=r.length;i<s;i+=1)t(r[i])}(t),e}(t),i=n.map(function(t){return t.nodeValue}).join("  ||  "),r=e.reduce(function(e,n){var i=Array.prototype.map.call(t.querySelectorAll("["+n+'*="[["]'),function(t){return[n,t]});return e.concat(i)},[]),s=r.map(function(t){return t[1].getAttribute(t[0])}).join("  ||  ");return Promise.all([this.translate(i),this.translate(s)]).then(function(t){var e=t[0],i=t[1];e&&e.split("  ||  ").forEach(function(t,e){$(n[e]).replaceWith(t)}),i&&i.split("  ||  ").forEach(function(t,e){r[e][1].setAttribute(r[e][0],t)})})},s.getLanguage=function(){return"en-GB"},s.create=function(t){return t||(t=s.getLanguage()),s.cache[t]=s.cache[t]||new s(t),s.cache[t]},s.cache={},s.registerModule=function(t,e){s.moduleFactories[t]=e,Object.keys(s.cache).forEach(function(n){var i=s.cache[n];i.modules[t]=e(i.lang)})},s.moduleFactories={},s.removePatterns=function(t){for(var e,n=t.length,i=0,r=0,s=0,a="";i<n;)"[["===(e=t.slice(i,i+2))?(0===s&&(a+=t.slice(r,i)),s+=1,i+=2):"]]"===e?(i+=2,0===(s-=1)&&(r=i)):i+=1;return a+=t.slice(r,i)},e.Translator=s}),define("skylark-domx-i18n/translate",["./i18n","./Translator"],function(t,e){return t.translate=function(t,n,i){var r=i,s=n;"function"==typeof n&&(r=n,s=null);if(!("string"==typeof t||t instanceof String)||""===t)return r("");return e.create(s).translate(t).then(function(t){return r&&setTimeout(r,0,t),t},function(t){console.warn("Translation failed: "+t.stack)})}}),define("skylark-domx-i18n/prepareDom",["skylark-domx-query","./i18n","./translate"],function(t,e,n){return e.prepareDOM=function(){n("[[language:dir]]",function(e){e&&!t("html").attr("data-dir")&&t("html").css("direction",e).attr("data-dir",e)})}}),define("skylark-domx-i18n/addTranslation",["skylark-domx-query","./i18n","./Translator"],function(t,e,n){return e.addTranslation=function(t,e,i){n.create(t).getTranslation(e).then(function(t){assign(t,i)})}}),define("skylark-domx-i18n/getTranslations",["skylark-domx-query","./i18n","./Translator"],function(t,e,n){return e.getTranslations=function(t,e,i){i=i||function(){},n.create(t).getTranslation(e).then(i)}}),define("skylark-domx-i18n/main",["./i18n","./Translator","./prepareDom","./translate","./addTranslation","./getTranslations"],function(t){return t}),define("skylark-domx-i18n",["skylark-domx-i18n/main"],function(t){return t}),define("skylark-domx-plugins-base/plugins",["skylark-langx-ns"],function(t){"use strict";return t.attach("domx.plugins",{pluginKlasses:{},shortcuts:{}})}),define("skylark-domx-plugins-base/plugin",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-funcs","skylark-langx-events/Emitter","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-query","skylark-domx-velm","./plugins"],function(t,e,n,i,r,s,a,o,l,c,u,h,d,p,f){"use strict";Array.prototype.slice,Array.prototype.concat;function m(t){return t.hasOwnProperty("superclass")?t.superclass:Object.getPrototypeOf(t)}var g=r.inherit({klassName:"Plugin",_construct:function(t,e){this._elm=t,this._initOptions(e)},_initOptions:function(t){var e=this.constructor,i=e.cache=e.hasOwnProperty("cache")?e.cache:{},r=i.defaults;if(!r){var s=[];do{if(s.unshift(e),e===g)break;e=m(e)}while(e);r=i.defaults={};for(var a=0;a<s.length;a++)(e=s[a]).prototype.hasOwnProperty("options")&&n.mixin(r,e.prototype.options,!0),e.hasOwnProperty("options")&&n.mixin(r,e.options,!0)}return Object.defineProperty(this,"options",{value:n.mixin({},r,t,!0)}),this.options},destroy:function(){this._destroy(),this.unlistenTo(),a.removeData(this._elm,this.pluginName)},_destroy:i.noop,_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},elmx:function(t){return t?p(t):(this._velm||(this._velm=p(this._elm)),this._velm)},$:function(t){return t?d(t,this._elm):(this._$elm||(this._$elm=d(this._elm)),this._$elm)},option:function(t,e){var i,r,s,a=t;if(0===arguments.length)return n.mixin({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=n.mixin({},this.options[t]),s=0;s<i.length-1;s++)r[i[s]]=r[i[s]]||{},r=r[i[s]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=e}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},getUID:function(t){t=t||"plugin";do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},elm:function(){return this._elm}});return f.Plugin=g}),define("skylark-domx-plugins-base/instantiate",["skylark-domx-data","./plugins","./plugin"],function(t,e,n){"use strict";var i=e.pluginKlasses;function r(e,n,r){var s=n.split(":"),a=s[1];n=s[0],a||(a=n);var o=t.data(e,a);if("instance"===r)return o;if("destroy"===r){if(!o)throw new Error("The plugin instance is not existed");o.destroy(),o=void 0}else if(o)r&&o.reset(r);else{if(void 0!==r&&"object"!=typeof r)throw new Error("The options must be a plain object");var l=i[n];o=new l(e,r),t.data(e,a,o)}return o}return n.instantiate=function(t,e){return r(t,this.prototype.pluginName,e)},e.instantiate=r}),define("skylark-domx-plugins-base/shortcutter",["skylark-langx-types","./plugins","./instantiate"],function(t,e,n){"use strict";var i=Array.prototype.slice;return e.shortcutter=function(e,r){return function(s,a){var o=n(s,e,"instance");if("instance"===a)return o||null;if(!o&&(o=n(s,e,"object"==typeof a&&a||{}),"string"!=typeof a))return this;if(a){var l=i.call(arguments,1);if(r)return r.apply(o,l);if("string"==typeof a){var c=a;if(!o)throw new Error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+c+"'");if(!t.isFunction(o[c])||"_"===c.charAt(0))throw new Error("no such method '"+c+"' for "+e+" plugin instance");l=i.call(l,1);var u=o[c].apply(o,l);return u==o&&(u=void 0),u}}}}}),define("skylark-domx-plugins-base/register",["skylark-langx-types","skylark-domx-query","skylark-domx-velm","./plugins","./shortcutter"],function(t,e,n,i,r){"use strict";var s=Array.prototype.slice,a=i.pluginKlasses,o=i.shortcuts;return i.register=function(i,l,c,u){var h=i.prototype.pluginName;if(a[h]=i,l){c&&t.isFunction(c)&&(u=c,c=null),c&&(h=h+":"+c);var d=o[l]=r(h,u);e.fn[l]=function(t){var e=this;if(this.length||"instance"!==t){var n=s.call(arguments);this.each(function(){var t=s.call(n);t.unshift(this);var i=d.apply(void 0,t);void 0!==i&&(e=i)})}else e=void 0;return e},n.partial(l,function(t){var e=d(this._elm,t);return void 0===e&&(e=this),e})}}}),define("skylark-domx-plugins-base/main",["skylark-domx-query","skylark-domx-velm","./plugins","./instantiate","./plugin","./register","./shortcutter"],function(t,e,n,i,r,s,a){"use strict";var o=Array.prototype.slice;return t.fn.plugin=function(t,e){var n,r=o.call(arguments,1),s=this;return this.each(function(){n=i.apply(s,[this,t].concat(r))}),n},e.partial("plugin",function(t,e){var n=o.call(arguments,1);return i.apply(this,[this._elm,t].concat(n))}),n}),define("skylark-domx-plugins-base",["skylark-domx-plugins-base/main"],function(t){return t}),define("skylark-domx-plugins-colors/colors",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.colores={}}),define("skylark-domx-plugins-popups/popups",["skylark-langx-ns","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base/plugins"],function(t,e,n,i){var r=[];return i.popups={around:function(t){var n=e.size(popup),i=n.width,r=n.height,s=e.height(t),a=t.ownerDocument,o=a.documentElement,l=o.clientWidth+e.scrollLeft(a),c=o.clientHeight+e.scrollTop(a),u=e.pagePosition(t),h=u.left,d=u.top;return d+=s,h-=Math.min(h,h+i>l&&l>i?Math.abs(h+i-l):0),{top:d-=Math.min(d,d+r>c&&c>r?Math.abs(r+s-0):0),bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}},open:function(t,e){e.around;let i=n(t);i.show().removeAttr("aria-hidden").position(e.position),r.push({popup:i[0]})},close:function(t){var e=0;if(t){t=n(t)[0];for(var i=r.length-1;i>=0;i--)if(r[i].popup==t){e=r.length-i;break}}else e=r.length;for(var i=0;i<e;i++){var s=r.pop(),a=n(s.popup);a.hide().attr("aria-hidden","true")}}}}),define("skylark-domx-plugins-popups/calc-offset",["skylark-domx-geom","./popups"],function(t,e){return e.calcOffset=function(e,n){var i=t.size(e),r=i.width,s=i.height,a=t.height(n),o=e.ownerDocument,l=o.documentElement,c=l.clientWidth+t.scrollLeft(o),u=l.clientHeight+t.scrollTop(o),h=t.pagePosition(n),d=h.left,p=h.top;return p+=a,d-=Math.min(d,d+r>c&&c>r?Math.abs(d+r-c):0),{top:p-=Math.min(p,p+s>u&&u>s?Math.abs(s+a-0):0),bottom:h.bottom,left:d,right:h.right,width:h.width,height:h.height}}}),define("skylark-domx-plugins-popups/dropdown",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./popups"],function(t,e,n,i,r,s,a,o){"use strict";var l=".dropdown-backdrop",c='[data-toggle="dropdown"]',u=a.Plugin.inherit({klassName:"Dropdown",pluginName:"lark.popups.dropdown",options:{selectors:{toggler:'[data-toggle="dropdown"],.dropdown-menu'}},_construct:function(t,e){this.overrided(t,e);var n=this.$element=s(this._elm);n.on("click.dropdown",this.toggle),n.on("keydown.dropdown",this.options.selectors.toggler,this.keydown)},toggle:function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var i=h(e),r=i.hasClass("open");if(d(),!r){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",d);var a={relatedTarget:this};if(i.trigger(t=n.create("show.dropdown",a)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(n.create("shown.dropdown",a))}return!1}},keydown:function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=h(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(c).trigger("focus"),e.trigger("click");var r=n.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var a=r.index(t.target);38==t.which&&a>0&&a--,40==t.which&&a<r.length-1&&a++,~a||(a=0),r.eq(a).trigger("focus")}}}}});function h(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&s(e);return n&&n.length?n:t.parent()}function d(t){t&&3===t.which||(s(l).remove(),s(c).each(function(){var e=s(this),r=h(e),a={relatedTarget:this};r.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&i.contains(r[0],t.target)||(r.trigger(t=n.create("hide.dropdown",a)),t.isDefaultPrevented()||(e.attr("aria-expanded","false"),r.removeClass("open").trigger(n.create("hidden.dropdown",a)))))}))}return s(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}),a.register(u),o.Dropdown=u}),define("skylark-domx-plugins-popups/comboBox",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./popups","./dropdown"],function(t,e,n,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:"ComboBox",pluginName:"lark.popups.combobox",options:{autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function(t,e,n){var i=0;n.$dropMenu.find(".empty-indicator").remove(),t.each(function(t){var n=s(this),r=s(this).text().trim();n.removeClass(),r===e?(n.addClass("text-success"),i++):r.substr(0,e.length)===e?(n.addClass("text-info"),i++):n.addClass("hidden")}),0===i&&n.$dropMenu.append('<li class="empty-indicator text-muted"><em>No Matches</em></li>')}},_construct:function(e,n){this.overrided(e,n),this.$element=this.$(),this.$dropMenu=this.$element.find(".dropdown-menu"),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.$button.plugin("lark.popups.dropdown"),this.$inputGroupBtn=this.$element.find(".input-group-btn"),this.$element.on("click.lark","a",t.proxy(this.itemclicked,this)),this.$element.on("change.lark","input",t.proxy(this.inputchanged,this)),this.$element.on("shown.bs.dropdown",t.proxy(this.menuShown,this)),this.$input.on("keyup.lark",t.proxy(this.keypress,this)),this.setDefaultSelection();var i=this.$dropMenu.children("li");0===i.length&&this.$button.addClass("disabled"),this.options.filterOnKeypress&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this)},_destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){s(this).attr("value",s(this).val())}),this.$element[0].outerHTML},doSelect:function(t){void 0!==t[0]?(this.$element.find("li.selected:first").removeClass("selected"),this.$selectedItem=t,this.$selectedItem.addClass("selected"),this.$input.val(this.$selectedItem.text().trim())):(this.$selectedItem=null,this.$element.find("li.selected:first").removeClass("selected"))},clearSelection:function(){this.$selectedItem=null,this.$input.val(""),this.$dropMenu.find("li").removeClass("selected")},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var t=this.$element.outerWidth();this.$dropMenu.outerWidth(t)},selectedItem:function(){var e=this.$selectedItem,n={};if(e){var i=this.$selectedItem.text().trim();n=t.mixin({text:i},this.$selectedItem.data())}else n={text:this.$input.val().trim(),notFound:!0};return n},selectByText:function(t){var e=s([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||s(this).text()||"").trim().toLowerCase()===(t||"").trim().toLowerCase())return e=s(this),!1}),this.doSelect(e)},selectByValue:function(t){var e='li[data-value="'+t+'"]';this.selectBySelector(e)},selectByIndex:function(t){var e="li:eq("+t+")";this.selectBySelector(e)},selectBySelector:function(t){var e=this.$element.find(t);this.doSelect(e)},setDefaultSelection:function(){var t="li[data-selected=true]:first",e=this.$element.find(t);e.length>0&&(this.selectBySelector(t),e.removeData("selected"),e.removeAttr("data-selected"))},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(t){this.$selectedItem=s(t.target).parent(),this.$input.val(this.$selectedItem.text().trim()).trigger("change",{synthetic:!0});var e=this.selectedItem();this.$element.trigger("changed.lark",e),t.preventDefault(),this.$element.find(".dropdown-toggle").focus()},keypress:function(t){var e=38===t.which||40===t.which||37===t.which||39===t.which;if(this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass("open")&&(this.$button.plugin("lark.popups.dropdown").toggle(),this.$input.focus()),13===t.which){t.preventDefault();var n=this.$dropMenu.find("li.selected").text().trim();n.length>0?this.selectByText(n):this.selectByText(this.$input.val()),this.$inputGroupBtn.removeClass("open")}else if(27===t.which)t.preventDefault(),this.clearSelection(),this.$inputGroupBtn.removeClass("open");else if(this.options.showOptionsOnKeypress&&(40===t.which||38===t.which)){t.preventDefault();var i=this.$dropMenu.find("li.selected");i.length>0&&(i=40===t.which?i.next(":not(.hidden)"):i.prev(":not(.hidden)")),0===i.length&&(i=40===t.which?this.$dropMenu.find("li:not(.hidden):first"):this.$dropMenu.find("li:not(.hidden):last")),this.doSelect(i)}this.options.filterOnKeypress&&!e&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this),this.previousKeyPress=t.which},inputchanged:function(t,e){var n=s(t.target).val();if(e&&e.synthetic)this.selectByText(n);else{this.selectByText(n);var i=this.selectedItem();0===i.text.length&&(i={text:n}),this.$element.trigger("changed.lark",i)}}});return c.prototype.getValue=c.prototype.selectedItem,a.register(c),o.ComboBox=c}),define("skylark-domx-plugins-popups/select-list",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./popups","./dropdown"],function(t,e,n,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:"SelectList",pluginName:"lark.popups.selectlist",options:{emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'},_construct:function(e,n){this.overrided(e,n),this.$element=this.$(),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$button.plugin("lark.popups.dropdown"),this.$element.on("click.selectlist",".dropdown-menu a",t.proxy(this.itemClicked,this)),this.setDefaultSelection(),"auto"!==this.options.resize&&"auto"!==this.$element.attr("data-resize")||this.resize();var i=this.$dropdownMenu.children("li");0===i.length&&(this.disable(),this.doSelect(s(this.options.emptyLabelHTML))),this.$element.on("shown.dropdown",function(){var t=s(this);s(document).on("keypress.selectlist",function(e){var n=String.fromCharCode(e.which);t.find("li").each(function(t,e){if(s(e).text().charAt(0).toLowerCase()===n)return s(e).children("a").focus(),!1})})}),this.$element.on("hide.dropdown",function(){s(document).off("keypress.selectlist")})},_destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(t){var e;this.$selectedItem=e=t,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(s(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){e.is(s(this))?s(this).attr("data-selected",!0):s(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(t){this.$element.trigger("clicked.selectlist",this.$selectedItem),t.preventDefault(),s(t.currentTarget).parent("li").is(".disabled, :disabled")||(s(t.target).parent().is(this.$selectedItem)||this.itemChanged(t),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(t){this.doSelect(s(t.target).closest("li"));var e=this.selectedItem();this.$element.trigger("changed.selectlist",e)},resize:function(){var t=0,e=0,n=s("<div/>").addClass("selectlist-sizer");Boolean(s(document).find("html").hasClass("fuelux"))?s(document.body).append(n):s(".fuelux:first").append(n),n.append(this.$element.clone()),this.$element.find("a").each(function(){n.find(".selected-label").text(s(this).text()),e=n.find(".selectlist").outerWidth(),(e+=n.find(".sr-only").outerWidth())>t&&(t=e)}),t<=1||(this.$button.css("width",t),this.$dropdownMenu.css("width",t),n.remove())},selectedItem:function(){var e=this.$selectedItem.text();return t.mixin({text:e},this.$selectedItem.data())},selectByText:function(t){var e=s([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||s(this).text()||"").toLowerCase()===(t||"").toLowerCase())return e=s(this),!1}),this.doSelect(e)},selectByValue:function(t){var e='li[data-value="'+t+'"]';this.selectBySelector(e)},selectByIndex:function(t){var e="li:eq("+t+")";this.selectBySelector(e)},selectBySelector:function(t){var e=this.$element.find(t);this.doSelect(e)},setDefaultSelection:function(){var t=this.$element.find("li[data-selected=true]").eq(0);0===t.length&&(t=this.$element.find("li").has("a").eq(0)),this.doSelect(t)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}});return c.prototype.getValue=c.prototype.selectedItem,a.register(c),o.SelectList=c}),define("skylark-domx-plugins-popups/main",["./popups","./calc-offset","./dropdown","./comboBox","./select-list"],function(t){return t}),define("skylark-domx-plugins-popups",["skylark-domx-plugins-popups/main"],function(t){return t}),define("skylark-graphics-colors/colors",["skylark-langx-ns"],function(t){return t.attach("graphics.colors",{})}),define("skylark-graphics-colors/_names",[],function(){return{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"}}),define("skylark-graphics-colors/_hexNames",["./_names"],function(t){return function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(t)}),define("skylark-graphics-colors/_conversion",["skylark-langx-strings","./_names"],function(t,e){var n=Math,i=n.round,r=n.min,s=n.max;n.random;function a(t){return 1==t.length?"0"+t:""+t}function o(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=r(e,s(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),n.abs(t-e)<1e-6?1:t%e/parseFloat(e)}var l,c,u,h=(c="[\\s|\\(]+("+(l="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+l+")[,|\\s]+("+l+")\\s*\\)?",u="[\\s|\\(]+("+l+")[,|\\s]+("+l+")[,|\\s]+("+l+")[,|\\s]+("+l+")\\s*\\)?",{rgb:new RegExp("rgb"+c),rgba:new RegExp("rgba"+u),hsl:new RegExp("hsl"+c),hsla:new RegExp("hsla"+u),hsv:new RegExp("hsv"+c),hsva:new RegExp("hsva"+u),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex3s:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6s:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8s:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function d(t){return parseInt(t,16)}return{bound01:o,rgbToRgb:function(t,e,n){return{r:255*o(t,255),g:255*o(e,255),b:255*o(n,255)}},rgbToHsl:function(t,e,n){t=o(t,255),e=o(e,255),n=o(n,255);var i,a,l=s(t,e,n),c=r(t,e,n),u=(l+c)/2;if(l==c)i=a=0;else{var h=l-c;switch(a=u>.5?h/(2-l-c):h/(l+c),l){case t:i=(e-n)/h+(e<n?6:0);break;case e:i=(n-t)/h+2;break;case n:i=(t-e)/h+4}i/=6}return{h:i,s:a,l:u}},hslToRgb:function(t,e,n){var i,r,s;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=o(t,360),e=o(e,100),n=o(n,100),0===e)i=r=s=n;else{var l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=a(c,l,t+1/3),r=a(c,l,t),s=a(c,l,t-1/3)}return{r:255*i,g:255*r,b:255*s}},rgbToHsv:function(t,e,n){t=o(t,255),e=o(e,255),n=o(n,255);var i,a,l=s(t,e,n),c=r(t,e,n),u=l,h=l-c;if(a=0===l?0:h/l,l==c)i=0;else{switch(l){case t:i=(e-n)/h+(e<n?6:0);break;case e:i=(n-t)/h+2;break;case n:i=(t-e)/h+4}i/=6}return{h:i,s:a,v:u}},hsvToRgb:function(t,e,i){t=6*o(t,360),e=o(e,100),i=o(i,100);var r=n.floor(t),s=t-r,a=i*(1-e),l=i*(1-s*e),c=i*(1-(1-s)*e),u=r%6;return{r:255*[i,l,a,a,c,i][u],g:255*[c,i,i,l,a,a][u],b:255*[a,a,c,i,i,l][u]}},rgbToHex:function(t,e,n,r){var s=[a(i(t).toString(16)),a(i(e).toString(16)),a(i(n).toString(16))];if(r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1))return s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0);return s.join("")},rgbaToHex:function(t,e,n,r){return[a((s=r,Math.round(255*parseFloat(s)).toString(16))),a(i(t).toString(16)),a(i(e).toString(16)),a(i(n).toString(16))].join("");var s},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},strToRgb:function(n){n=t.trim(n).toLowerCase();var i,r=!1;if(e[n])n=e[n],r=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};if(i=h.rgb.exec(n))return{r:i[1],g:i[2],b:i[3]};if(i=h.rgba.exec(n))return{r:i[1],g:i[2],b:i[3],a:i[4]};if(i=h.hsl.exec(n))return{h:i[1],s:i[2],l:i[3]};if(i=h.hsla.exec(n))return{h:i[1],s:i[2],l:i[3],a:i[4]};if(i=h.hsv.exec(n))return{h:i[1],s:i[2],v:i[3]};if(i=h.hsva.exec(n))return{h:i[1],s:i[2],v:i[3],a:i[4]};if((i=h.hex8.exec(n))||(i=h.hex8s.exec(n)))return{a:(s=i[1],d(s)/255),r:d(i[2]),g:d(i[3]),b:d(i[4]),format:r?"name":"hex8"};var s;if((i=h.hex6.exec(n))||(i=h.hex6s.exec(n)))return{r:d(i[1]),g:d(i[2]),b:d(i[3]),format:r?"name":"hex"};if((i=h.hex3.exec(n))||(i=h.hex3s.exec(n)))return{r:d(i[1]+""+i[1]),g:d(i[2]+""+i[2]),b:d(i[3]+""+i[3]),format:r?"name":"hex"};return!1}}}),define("skylark-graphics-colors/color",["skylark-langx-types","skylark-langx-klass","./colors","./_names","./_hexNames","./_conversion"],function(t,e,n,i,r,s){var a=Math,o=a.round,l=a.min,c=a.max,u=a.random;function h(t){return l(1,c(0,t))}var d=e({init:function(e,n){n=n||{},t.isString(e)&&(e=s.hexToRgb(e)),this._r=e.r,this._g=e.g,this._b=e.b,this._a=t.isDefined(e.a)?e.a:1,this._roundA=o(1e3*this._a)/1e3,this._format=n.format||e.format,this._gradientType=n.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b))},isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=function(t){t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1);return t}(t),this._roundA=o(1e3*this._a)/1e3,this},toHsv:function(){var t=s.rgbToHsv(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=s.rgbToHsv(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),i=o(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=s.rgbToHsl(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s.rgbToHsl(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),i=o(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return s.rgbToHex(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return s.rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*s.bound01(this._r,255))+"%",g:o(100*s.bound01(this._g,255))+"%",b:o(100*s.bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*s.bound01(this._r,255))+"%, "+o(100*s.bound01(this._g,255))+"%, "+o(100*s.bound01(this._b,255))+"%)":"rgba("+o(100*s.bound01(this._r,255))+"%, "+o(100*s.bound01(this._g,255))+"%, "+o(100*s.bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(r[s.rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+s.rgbaToHex(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=d(t);n=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toNumber:function(){return this._r<<16^this._g<<8^this._b<<0},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return r?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},lighten:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.l+=t/100,e.l=h(e.l),d.fromHsl(e)},brighten:function(t){t=0===t?0:t||10;var e=this.toRgb();return e.r=c(0,l(255,e.r-o(-t/100*255))),e.g=c(0,l(255,e.g-o(-t/100*255))),e.b=c(0,l(255,e.b-o(-t/100*255))),new d(e)},darken:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.l-=t/100,e.l=h(e.l),d.fromHsl(e)},desaturate:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.s-=t/100,e.s=h(e.s),d.fromHsl(e)},saturate:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.s+=t/100,e.s=h(e.s),d.fromHsl(e)},greyscale:function(){return this.desaturate(100)},spin:function(t){var e=this.toHsl(),n=(o(e.h)+t)%360;return e.h=n<0?360+n:n,d.fromHsl(e)},analogous:function(t,e){t=t||6,e=e||30;var n=this.toHsl(),i=360/e,r=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,r.push(d.fromHsl(n));return r},complement:function(){var t=this.toHsl();return t.h=(t.h+180)%360,d.fromHsl(t)},monochromatic:function(t){t=t||6;for(var e=this.toHsv(),n=e.h,i=e.s,r=e.v,s=[],a=1/t;t--;)s.push(d.fromHsv({h:n,s:i,v:r})),r=(r+a)%1;return s},splitcomplement:function(){var t=this.toHsl(),e=t.h;return[this,d.fromHsl({h:(e+72)%360,s:t.s,l:t.l}),d.fromHsl({h:(e+216)%360,s:t.s,l:t.l})]},triad:function(){var t=this.toHsl(),e=t.h;return[this,d.fromHsl({h:(e+120)%360,s:t.s,l:t.l}),d.fromHsl({h:(e+240)%360,s:t.s,l:t.l})]},tetrad:function(){var t=this.toHsl(),e=t.h;return[this,d.fromHsl({h:(e+90)%360,s:t.s,l:t.l}),d.fromHsl({h:(e+180)%360,s:t.s,l:t.l}),d.fromHsl({h:(e+270)%360,s:t.s,l:t.l})]},mix:function(t,e){e=0===e?0:e||50;var n,i=this.toRgb(),r=t.toRgb(),s=e/100,a=2*s-1,o=r.a-i.a,l=1-(n=((n=a*o==-1?a:(a+o)/(1+a*o))+1)/2),c={r:r.r*n+i.r*l,g:r.g*n+i.g*l,b:r.b*n+i.b*l,a:r.a*s+i.a*(1-s)};return new d(c)},isValid:function(){return!0}});function p(t){return t<=1&&(t=100*t+"%"),t}return d.equals=function(t,e){return!(!t||!e)&&(t=d.parse(t),e=d.parse(e),t.toRgbString()==e.toRgbString())},d.random=function(){return d.fromRatio({r:u(),g:u(),b:u()})},d.fromRgba=function(t,e,n,i){return new d({r:t,g:e,b:n,a:i})},d.fromRgb=function(t,e,n){return new d({r:t,g:e,b:n})},d.fromHsl=function(t,e,n,i){var r=s.hslToRgb(t,e,n);return new d(r)},d.fromHsv=function(t,e,n,i){var r=s.hsvToRgb(t,e,n);return new d(r)},d.parse=function(t){if(t instanceof d)return t;var e={r:0,g:0,b:0},n=1,i=!1,r=!1;return"string"==typeof t&&(t=s.strToRgb(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=s.rgbToRgb(t.r,t.g,t.b),i=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=p(t.s),t.v=p(t.v),e=s.hsvToRgb(t.h,t.s,t.v),i=!0,r="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=p(t.s),t.l=p(t.l),e=s.hslToRgb(t.h,t.s,t.l),i=!0,r="hsl"),t.hasOwnProperty("a")&&(n=t.a)),new d({ok:i,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n},{format:t.format||r})},n.Color=d}),define("skylark-domx-plugins-colors/helper",["skylark-domx-browser","skylark-domx-query","skylark-graphics-colors/color"],function(t,e,n){t.isIE;return{paletteTemplate:function(t,i,r,s){for(var a=[],o=0;o<t.length;o++){var l=t[o];if(l){var c=n.parse(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=n.equals(i,l)?" sp-thumb-active":"";var h=c.toString(s.preferredFormat||"rgb"),d="background-color:"+c.toRgbString();a.push('<span title="'+h+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{a.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",s.texts.noColorSelectedText)).html())}}return"<div class='sp-cf "+r+"'>"+a.join("")+"</div>"}}}),define("skylark-domx-plugins-colors/indicator",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-eventer","skylark-domx-finder","skylark-domx-query","skylark-domx-plugins-base"],function(t,e,n,i,r,s,a,o){var l=o.Plugin.inherit({klassName:"Indicator",pluginName:"lark.colors.indicator",options:{},_construct:function(t,e){o.Plugin.prototype._construct.call(this,t,e),this.listenTo(this.elmx(),"mousedown",t=>{this._start(t)})},_move:function(t){if(this._dragging){var e=this._offset,n=t.pageX,i=t.pageY,r=this._maxWidth,s=this._maxHeight,a=Math.max(0,Math.min(n-e.left,r)),o=Math.max(0,Math.min(i-e.top,s)),l=this.options.onmove;l&&l.apply(this._elm,[a,o,t])}},_start:function(t){var e=t.which?3==t.which:2==t.button;if(!e&&!this._dragging){var n=this.options.onstart;if(!n||!1!==n.apply(this._elm,arguments)){this._dragging=!0;var i=this.$();this._maxHeight=i.height(),this._maxWidth=i.width(),this._offset=i.offset();var s=this.$(document);this.listenTo(s,{mousemove:t=>{this._move(t)},mouseup:t=>{this._stop(t)}}),s.find("body").addClass("sp-dragging"),this._move(t),r.stop(t)}}},_stop:function(t){var e=this.$(document);this._dragging&&(this.unlistenTo(e),e.find("body").removeClass("sp-dragging"),onstop=this.options.onstop,onstop&&this._delay(function(){onstop.apply(this._elm,arguments)})),this._dragging=!1}});return o.register(l),l}),define("skylark-domx-plugins-colors/color-picker",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","skylark-graphics-colors/color","./colors","./helper","./indicator"],function(t,e,n,i,r,s,a,o,l,c,u,h){"use strict";var d=o.Plugin.inherit({klassName:"ColorPicker",pluginName:"lark.colors.picker",options:{selectors:{dragger:".sp-color",dragHelper:".sp-dragger",slider:".sp-hue",slideHelper:".sp-slider",alphaSliderInner:".sp-alpha-inner",alphaSlider:".sp-alpha",alphaSlideHelper:".sp-alpha-handle",textInput:".sp-input",initialColorContainer:".sp-initial",cancelButton:".sp-cancel",clearButton:".sp-clear",chooseButton:".sp-choose"},draggingClass:"sp-dragging",texts:{cancelText:"cancel",chooseText:"choose",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected"},states:{showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},preferredFormat:"hex",color:!1},_drawInitial:function(){var t=this.options;if(this.stating("showInitial")){var e=this._initialColor,n=this.current();this.$initialColorContainer.html(u.paletteTemplate([e,n],n,"sp-palette-row-initial",t))}},_updateHelperLocations:function(){var t=this._currentSaturation,e=this._currentValue;if(this.stating("allowEmpty")&&this._isEmpty)this.$alphaSlideHelper.hide(),this.$slideHelper.hide(),this.$dragHelper.hide();else{this.$alphaSlideHelper.show(),this.$slideHelper.show(),this.$dragHelper.show();var n=t*this._dragWidth,i=this._dragHeight-e*this._dragHeight;n=Math.max(-this._dragHelperHeight,Math.min(this._dragWidth-this._dragHelperHeight,n-this._dragHelperHeight)),i=Math.max(-this._dragHelperHeight,Math.min(this._dragHeight-this._dragHelperHeight,i-this._dragHelperHeight)),this.$dragHelper.css({top:i+"px",left:n+"px"});var r=this._currentAlpha*this._alphaWidth;this.$alphaSlideHelper.css({left:r-this._alphaSlideHelperWidth/2+"px"});var s=this._currentHue*this._slideHeight;this.$slideHelper.css({top:s-this._slideHelperHeight+"px"})}},_updateOriginalInput:function(t){var e=this.current();l.equals(e,this._colorOnShow);e&&(e.toString(this._currentPreferredFormat),this.emit("picked",e))},_updateUI:function(){this.options;this._dragWidth=this.$dragger.width(),this._dragHeight=this.$dragger.height(),this._dragHelperHeight=this.$dragHelper.height(),this._slideWidth=this.$slider.width(),this._slideHeight=this.$slider.height(),this._slideHelperHeight=this.$slideHelper.height(),this._alphaWidth=this.$alphaSlider.width(),this._alphaSlideHelperWidth=this.$alphaSlideHelper.width(),this.$textInput.removeClass("sp-validation-error"),this._updateHelperLocations();var t=l.parse({h:360*this._currentHue,s:1,v:1});this.$dragger.css("background-color",t.toHexString());var n=this._currentPreferredFormat;this._currentAlpha<1&&(0!==this._currentAlpha||"name"!==n)&&("hex"!==n&&"hex3"!==n&&"hex6"!==n&&"name"!==n||(n="rgb"));var i=this.current(),r="";if(!i&&this.stating("allowEmpty"));else{var s=i.toHexString();i.toRgbString();if(this.stating("showAlpha")){var a=i.toRgb();a.a=0;var o=l.parse(a).toRgbString(),c="linear-gradient(left, "+o+", "+s+")";e.isIE?this.$alphaSliderInner.css("filter",l.parse(o).toFilter({gradientType:1},s)):(this.$alphaSliderInner.css("background","-webkit-"+c),this.$alphaSliderInner.css("background","-moz-"+c),this.$alphaSliderInner.css("background","-ms-"+c),this.$alphaSliderInner.css("background","linear-gradient(to right, "+o+", "+s+")"))}r=i.toString(n)}this.stating("showInput")&&this.$textInput.val(r),this.stating("showPalette")&&this._drawPalette(),this._drawInitial()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){o.Plugin.prototype._construct.call(this,t,e);var n=this.$el=this.$(),i=this.options,r=(i.theme,this.$dragger=n.find(i.selectors.dragger),this.$dragHelper=n.find(i.selectors.dragHelper),this.$slider=n.find(i.selectors.slider),this.$slideHelper=n.find(i.selectors.slideHelper),this.$alphaSliderInner=n.find(i.selectors.alphaSliderInner),this.$alphaSlider=n.find(i.selectors.alphaSlider),this.$alphaSlideHelper=n.find(i.selectors.alphaSlideHelper),this.$textInput=n.find(i.selectors.textInput),this.$initialColorContainer=n.find(i.selectors.initialColorContainer),this.$cancelButton=n.find(i.selectors.cancelButton),this.$clearButton=n.find(i.selectors.clearButton),this.$chooseButton=n.find(i.selectors.chooseButton),this._initialColor=i.color);this._currentPreferredFormat=i.preferredFormat,this._isEmpty=!r;this._init()},_init:function(){var t=this,n=this.options;function i(){(t._dragHeight<=0||t._dragWidth<=0||t._slideHeight<=0)&&t.reflow(),t._isDragging=!0,t.$el.addClass(t.options.draggingClass),t._shiftMovementDirection=null}function a(){t._isDragging=!1,t.$el.removeClass(t.options.draggingClass)}function o(){t._updateOriginalInput(),t._updateUI()}function c(){var e=t.$textInput.val();if(null!==e&&""!==e||!t._allowEmpty){var n=l.parse(e);n.isValid()?(t.current(n),o()):t.$textInput.addClass("sp-validation-error")}else t.current(null),o()}this._applyOptions(),this.$textInput.change(c),this.$textInput.on("paste",function(){setTimeout(c,1)}),this.$textInput.keydown(function(t){13==t.keyCode&&c()}),this.$cancelButton.text(n.texts.cancelText),this.listenTo(this.$cancelButton,"click",function(e){s.stop(e),t.revert(),t.emit("canceled")}),this.$clearButton.attr("title",n.texts.clearText),this.listenTo(this.$clearButton,"click",function(e){s.stop(e),t._isEmpty=!0,o()}),this.$chooseButton.text(n.texts.chooseText),this.listenTo(this.$chooseButton,"click",function(e){s.stop(e),t._updateOriginalInput(!0),t.emit("choosed")}),this.$alphaSlider.plugin("lark.colors.indicator",{onmove:function(e,n,i){t._currentAlpha=e/t._alphaWidth,t._isEmpty=!1,i.shiftKey&&(t._currentAlpha=Math.round(10*t._currentAlpha)/10),o()},onstart:i,onstop:a}),this.$slider.plugin("lark.colors.indicator",{onmove:function(e,n,i){t._currentHue=parseFloat(n/t._slideHeight),t._isEmpty=!1,t.stating("showAlpha")||(t._currentAlpha=1),o()},onstart:i,onstop:a}),this.$dragger.plugin("lark.colors.indicator",{onmove:function(e,n,i){if(i.shiftKey){if(!t._shiftMovementDirection){var r=t._currentSaturation*t._dragWidth,s=t._dragHeight-t._currentValue*t._dragHeight,a=Math.abs(e-r)>Math.abs(n-s);t._shiftMovementDirection=a?"x":"y"}}else t._shiftMovementDirection=null;var l=!t._shiftMovementDirection||"x"===t._shiftMovementDirection,c=!t._shiftMovementDirection||"y"===t._shiftMovementDirection;l&&(t._currentSaturation=parseFloat(e/t._dragWidth)),c&&(t._currentValue=parseFloat((t._dragHeight-n)/t._dragHeight)),t._isEmpty=!1,t.stating("showAlpha")||(t._currentAlpha=1),o()},onstart:i,onstop:a}),this.current(this._initialColor),t._updateUI();var u=e.isIE?"mousedown.ColorPicker":"click.ColorPicker touchstart.ColorPicker";this.$initialColorContainer.on(u,".sp-thumb-el:nth-child(1)",{ignore:!0},function(e){e.data&&e.data.ignore,t.current(r(e.target).closest(".sp-thumb-el").data("color")),o();return!1})},revert:function(){this.current(this._initialColor,!0),this._updateOriginalInput(!0)},current:function(t){if(void 0===t)return this._allowEmpty&&this._isEmpty?null:l.parse({h:360*this._currentHue,s:this._currentSaturation,v:this._currentValue,a:Math.round(1e3*this._currentAlpha)/1e3});var e,n;l.equals(t,this.current())?this._updateUI():(!t&&this.stating("allowEmpty")?this._isEmpty=!0:(this._isEmpty=!1,e=l.parse(t),n=e.toHsv(),this._currentHue=n.h%360/360,this._currentSaturation=n.s,this._currentValue=n.v,this._currentAlpha=n.a),this._updateUI())},_applyStates:function(){var t=this._states;this.$el.toggleClass("sp-input-disabled",!t.showInput).toggleClass("sp-clear-enabled",!!t.allowEmpty).toggleClass("sp-alpha-enabled",t.showAlpha).toggleClass("sp-buttons-disabled",!t.showButtons).toggleClass("sp-initial-disabled",!t.showInitial),t.allowEmpty||this.$clearButton.hide(),this._dragWidth=this.$dragger.width(),this._dragHeight=this.$dragger.height(),this._dragHelperHeight=this.$dragHelper.height(),this._slideWidth=this.$slider.width(),this._slideHeight=this.$slider.height(),this._slideHelperHeight=this.$slideHelper.height(),this._alphaWidth=this.$alphaSlider.width(),this._alphaSlideHelperWidth=this.$alphaSlideHelper.width()},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this._updateHelperLocations()}});return o.register(d),c.ColorPicker=d}),define("skylark-domx-plugins-colors/color-palette",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-fx","skylark-domx-plugins-base","skylark-graphics-colors/color","./colors","./helper"],function(t,e,n,i,r,s,a,o,l,c,u,h,d){"use strict";e.noop;var p=c.Plugin.inherit({klassName:"ColorPalette",pluginName:"lark.colors.palette",options:{selectors:{},texts:{},states:{showSelectionPalette:!0},palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[]},_addColorToSelectionPalette:function(t){if(this.stating("showSelectionPalette")){var n=u.parse(t).toRgbString();if(!this._paletteLookup[n]&&-1===e.inArray(n,this._selectionPalette))for(this._selectionPalette.push(n);this._selectionPalette.length>this._maxSelectionSize;)this._selectionPalette.shift()}},getUniqueSelectionPalette:function(){var t=[],e=this.options;if(this.stating("showPalette"))for(var n=0;n<this._selectionPalette.length;n++){var i=u.parse(this._selectionPalette[n]).toRgbString();this._paletteLookup[i]||t.push(this._selectionPalette[n])}return t.reverse().slice(0,e.maxSelectionSize)},_drawPalette:function(){var t=this.options,n=this.current(),i=e.map(this._paletteArray,function(e,i){return d.paletteTemplate(e,n,"sp-palette-row sp-palette-row-"+i,t)});this._selectionPalette&&i.push(d.paletteTemplate(this.getUniqueSelectionPalette(),n,"sp-palette-row sp-palette-row-selection",t)),this.$el.html(i.join(""))},_updateUI:function(){this._drawPalette()},_applyOptions:function(){var t=this.options;if(this._states={showSelectionPalette:t.showSelectionPalette},t.palette)for(var n=this._palette=t.palette.slice(0),i=this._paletteArray=e.isArray(n[0])?n:[n],r=this._paletteLookup={},s=0;s<i.length;s++)for(var a=0;a<i[s].length;a++){var o=u.parse(i[s][a]).toRgbString();r[o]=!0}this._applyStates()},_construct:function(t,e){c.Plugin.prototype._construct.call(this,t,e),this.$el=this.$(),this._init()},_init:function(){var t=this,e=this.options;this._initialColor=e.color,this._selectionPalette=e.selectionPalette.slice(0);this._applyOptions(),this._initialColor?(this.current(this._initialColor),t._addColorToSelectionPalette(this._initialColor)):this._updateUI();var i=n.isIE?"mousedown.palette":"click.palette touchstart.palette";this.$el.on(i,".sp-thumb-el",function(e){return t.current(s(e.target).closest(".sp-thumb-el").data("color")),t.emit("selected",t.current()),!1})},_applyStates:function(){},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this._drawPalette()},current:function(t){if(void 0===t)return this._current;this._current=t,this._updateUI()}});return c.register(p),h.ColorPalette=p}),define("skylark-domx-plugins-colors/Color-pane",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-fx","skylark-domx-plugins-base","skylark-domx-plugins-popups","skylark-graphics-colors/color","./colors","./color-picker","./color-palette"],function(t,e,n,i,r,s,a,o,l,c,u,h,d,p){"use strict";var f=l.Plugin.inherit({klassName:"ColorPane",pluginName:"lark.colors.pane",options:{selectors:{pickerContainer:".sp-picker-container",toggleButton:".sp-palette-toggle",paletteContainer:".sp-palette"},draggingClass:"sp-dragging",texts:{togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected"},states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},color:!1,maxSelectionSize:7},_updateUI:function(){this.stating("showPalette")&&this.palette._updateUI(),this.picker._updateUI()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,togglePaletteOnly:t.states.togglePaletteOnly,showPalette:t.states.showPalette,showPaletteOnly:t.states.showPaletteOnly,showSelectionPalette:t.showSelectionPalette,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){l.Plugin.prototype._construct.call(this,t,e);var n=this.$el=this.$(),i=this.options,r=(i.theme,this.$pickerContainer=n.find(i.selectors.pickerContainer)),s=this.$paletteContainer=n.find(i.selectors.paletteContainer),a=(this.$toggleButton=n.find(i.selectors.toggleButton),this._initialColor=i.color);this._isEmpty=!a;s[0]&&(this.palette=p.instantiate(s[0],{selectionPalette:i.selectionPalette,color:i.color,palette:i.palette,selectionPalette:i.selectionPalette})),r[0]&&(this.picker=d.instantiate(r[0],{color:i.color,states:{showInput:i.states.showInput,allowEmpty:i.states.allowEmpty,showButtons:i.states.showButtons,showInitial:i.states.showInitial,showAlpha:i.states.showAlpha}}),this.listenTo(this.picker,"canceled",t=>{this.emit("canceled")}),this.listenTo(this.picker,"choosed",t=>{this.emit("choosed")}),this.listenTo(this.picker,"picked",(t,e)=>{this.emit("picked",e)})),this._init()},_init:function(){var t=this;this.options;e.isIE&&this.$container.find("*:not(input)").attr("unselectable","on"),this._applyOptions(),this.listenTo(this.$toggleButton,"click",function(e){s.stop(e),t.stating("showPaletteOnly",!t.stating("showPaletteOnly"))}),this.listenTo(this.palette,"selected",function(e,n){t.picker.current(n)})},revert:function(){this.set(this._colorOnShow,!0),this._updateOriginalInput(!0)},get:function(){return this.picker.current()},set:function(t){this.picker.current(t),this.palette.current(t)},_applyStates:function(){var t=this._states;t.showPaletteOnly&&(t.showPalette=!0),this.$toggleButton.text(t.showPaletteOnly?this.option("texts.togglePaletteMoreText"):this.option("texts.togglePaletteLessText")),this.$el.toggleClass("sp-input-disabled",!t.showInput).toggleClass("sp-clear-enabled",!!t.allowEmpty).toggleClass("sp-alpha-enabled",t.showAlpha).toggleClass("sp-buttons-disabled",!t.showButtons).toggleClass("sp-palette-buttons-disabled",!t.togglePaletteOnly).toggleClass("sp-palette-disabled",!t.showPalette).toggleClass("sp-palette-only",t.showPaletteOnly).toggleClass("sp-initial-disabled",!t.showInitial),t.showPaletteOnly&&this.$el.css("left","-="+(this.$pickerContainer.outerWidth(!0)+5))},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this.stating("showPalette")&&this.palette.reflow(),this.picker.reflow()}});return l.register(f),h.ColorPane=f}),define("skylark-domx-plugins-colors/color-box",["skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","skylark-domx-plugins-popups","skylark-graphics-colors/color","./colors","./Color-pane"],function(t,e,n,i,r,s,a,o,l,c,u){"use strict";var h=a.Plugin.inherit({klassName:"ColorBox",pluginName:"lark.colors.box",options:{pane:{states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},maxSelectionSize:7,palette:void 0,selectionPalette:void 0},color:!1},_updateUI:function(){var t=this.get();if(this.$previewElement.removeClass("sp-clear-display"),this.$previewElement.css("background-color","transparent"),!t&&this.stating("allowEmpty"))this.$previewElement.addClass("sp-clear-display");else{t.toHexString();var e=t.toRgbString();this.$previewElement.css("background-color",e),t.toString()}this.pane._updateUI()},_applyOptions:function(){this.reflow()},_construct:function(e,n){a.Plugin.prototype._construct.call(this,e,n),this.$el=this.$();var r=this.options,s=this.$pane=i(r.pane.template);this.$previewElement=this.$el.find(".sp-preview-inner");s[0]&&(this.pane=u.instantiate(s[0],t.mixin({color:r.color},r.pane))),this._init()},_init:function(){var t=this;this.options;this._applyOptions();var e=!1;function n(){e&&(e=!1,t.$pane.hide())}this.$pane.hide(),this.listenTo(this.$el,"click touchstart",function(i){e?n():function(){if(e)return;e=!0,t.$pane.show(),t.reflow(),t._updateUI()}(),r.stop(i)}),this.listenTo(this.pane,"picked",(t,e)=>{this.$previewElement.css("background-color",e.toRgbString())}),this.listenTo(this.pane,"canceled choosed",t=>{n()})},revert:function(){this.pane.revert()},get:function(){return this.pane.get()},set:function(t){this.pane.set(t)},reflow:function(){this.$pane.css("position","absolute"),this.$pane.offset(o.calcOffset(this.$pane[0],this.$el[0])),this.pane.reflow()}});return a.register(h),c.ColorBox=h}),define("skylark-domx-plugins-colors/color-pane",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-finder","skylark-domx-query","skylark-domx-eventer","skylark-domx-styler","skylark-domx-fx","skylark-domx-plugins-base","skylark-domx-plugins-popups","skylark-graphics-colors/color","./colors","./color-picker","./color-palette"],function(t,e,n,i,r,s,a,o,l,c,u,h,d,p){"use strict";var f=l.Plugin.inherit({klassName:"ColorPane",pluginName:"lark.colors.pane",options:{selectors:{pickerContainer:".sp-picker-container",toggleButton:".sp-palette-toggle",paletteContainer:".sp-palette"},draggingClass:"sp-dragging",texts:{togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected"},states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},color:!1,maxSelectionSize:7},_updateUI:function(){this.stating("showPalette")&&this.palette._updateUI(),this.picker._updateUI()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,togglePaletteOnly:t.states.togglePaletteOnly,showPalette:t.states.showPalette,showPaletteOnly:t.states.showPaletteOnly,showSelectionPalette:t.showSelectionPalette,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){l.Plugin.prototype._construct.call(this,t,e);var n=this.$el=this.$(),i=this.options,r=(i.theme,this.$pickerContainer=n.find(i.selectors.pickerContainer)),s=this.$paletteContainer=n.find(i.selectors.paletteContainer),a=(this.$toggleButton=n.find(i.selectors.toggleButton),this._initialColor=i.color);this._isEmpty=!a;s[0]&&(this.palette=p.instantiate(s[0],{selectionPalette:i.selectionPalette,color:i.color,palette:i.palette,selectionPalette:i.selectionPalette})),r[0]&&(this.picker=d.instantiate(r[0],{color:i.color,states:{showInput:i.states.showInput,allowEmpty:i.states.allowEmpty,showButtons:i.states.showButtons,showInitial:i.states.showInitial,showAlpha:i.states.showAlpha}}),this.listenTo(this.picker,"canceled",t=>{this.emit("canceled")}),this.listenTo(this.picker,"choosed",t=>{this.emit("choosed")}),this.listenTo(this.picker,"picked",(t,e)=>{this.emit("picked",e)})),this._init()},_init:function(){var t=this;this.options;e.isIE&&this.$container.find("*:not(input)").attr("unselectable","on"),this._applyOptions(),this.listenTo(this.$toggleButton,"click",function(e){s.stop(e),t.stating("showPaletteOnly",!t.stating("showPaletteOnly"))}),this.listenTo(this.palette,"selected",function(e,n){t.picker.current(n)})},revert:function(){this.set(this._colorOnShow,!0),this._updateOriginalInput(!0)},get:function(){return this.picker.current()},set:function(t){this.picker.current(t),this.palette.current(t)},_applyStates:function(){var t=this._states;t.showPaletteOnly&&(t.showPalette=!0),this.$toggleButton.text(t.showPaletteOnly?this.option("texts.togglePaletteMoreText"):this.option("texts.togglePaletteLessText")),this.$el.toggleClass("sp-input-disabled",!t.showInput).toggleClass("sp-clear-enabled",!!t.allowEmpty).toggleClass("sp-alpha-enabled",t.showAlpha).toggleClass("sp-buttons-disabled",!t.showButtons).toggleClass("sp-palette-buttons-disabled",!t.togglePaletteOnly).toggleClass("sp-palette-disabled",!t.showPalette).toggleClass("sp-palette-only",t.showPaletteOnly).toggleClass("sp-initial-disabled",!t.showInitial),t.showPaletteOnly&&this.$el.css("left","-="+(this.$pickerContainer.outerWidth(!0)+5))},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this.stating("showPalette")&&this.palette.reflow(),this.picker.reflow()}});return l.register(f),h.ColorPane=f}),define("skylark-domx-plugins-colors/colorer",["skylark-langx/langx","skylark-domx-data","skylark-domx-query","./colors","./color-box","./color-pane"],function(t,e,n,i,r,s){var a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),o=["<div class='sp-container'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>","</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("");function l(e,i){var l=(i=t.mixin({color:!1,flat:!1,appendTo:"body",maxSelectionSize:7,preferredFormat:!1,containerClassName:"",replacerClassName:"",theme:"sp-light",offset:null,pane:{}},i)).theme,c=i.flat,u=i.appendTo,h=n(e),d=n(o,e.ownerDocument).addClass(l),p=h.is("input"),f=(p&&h.attr("type"),this._shouldReplace=p&&!c),m=f?n(a).addClass(l).addClass(i.className).addClass(i.replacerClassName):n([]);if(delete i.flat,delete i.appendTo,i.color=i.color||p&&h.val(),f&&h.after(m).hide(),d.toggleClass("sp-flat",c).addClass(i.containerClassName),c){h.after(d).hide();var g=new s(d[0],i);return i.picked&&g.on("picked",i.picked),i.choosed&&g.on("choosed",i.choosed),i.canceled&&g.on("canceled",i.canceled),d.show(),g}var y="parent"===u?h.parent():n(u);return 1!==y.length&&(y=n("body")),y.append(d),i.pane.template=d,new r(m[0],i)}return n.fn.colorer=function(t){var n=this[0];if(n){var i=e.data(n,"domx.colorer");return i||(i=l(n,t),e.data(n,"domx.colorer",i)),i}},i.colorer=l}),define("skylark-domx-plugins-colors/drag",[],function(){var t={obj:null,gradx:null,init:function(e,n,i,r,s,a,o,l,c,u){e.onmousedown=t.start,e.hmode=!o,e.vmode=!l,e.root=n&&null!=n?n:e,e.hmode&&isNaN(parseInt(e.root.style.left))&&(e.root.style.left="0px"),!e.hmode&&isNaN(parseInt(e.root.style.right))&&(e.root.style.right="0px"),e.minX=void 0!==i?i:null,e.minY=void 0!==s?s:null,e.maxX=void 0!==r?r:null,e.maxY=void 0!==a?a:null,e.xMapper=c||null,e.yMapper=u||null,e.root.onDragStart=new Function,e.root.onDragEnd=new Function,e.root.onDrag=new Function},start:function(e){t.gradx.current_slider_id="#"+this.id;var n=t.obj=this;e=t.fixE(e);var i=parseInt(n.vmode?n.root.style.top:n.root.style.bottom),r=parseInt(n.hmode?n.root.style.left:n.root.style.right);return n.root.onDragStart(r,i),n.lastMouseX=e.clientX,n.lastMouseY=e.clientY,n.hmode?(null!=n.minX&&(n.minMouseX=e.clientX-r+n.minX),null!=n.maxX&&(n.maxMouseX=n.minMouseX+n.maxX-n.minX)):(null!=n.minX&&(n.maxMouseX=-n.minX+e.clientX+r),null!=n.maxX&&(n.minMouseX=-n.maxX+e.clientX+r)),n.vmode?(null!=n.minY&&(n.minMouseY=e.clientY-i+n.minY),null!=n.maxY&&(n.maxMouseY=n.minMouseY+n.maxY-n.minY)):(null!=n.minY&&(n.maxMouseY=-n.minY+e.clientY+i),null!=n.maxY&&(n.minMouseY=-n.maxY+e.clientY+i)),document.onmousemove=t.drag,document.onmouseup=t.end,!1},drag:function(e){e=t.fixE(e);var n=t.obj;t.gradx.update_style_array(),t.gradx.apply_style(t.gradx.panel,t.gradx.get_style_value());var i=t.gradx.gx("#"+n.id).css("left");parseInt(i)>60&&parseInt(i)<390&&t.gradx.gx("#gradx_slider_info").css("left",i).show();var r=t.gradx.gx("#"+n.id).css("backgroundColor"),s=t.gradx.get_rgb_obj(r);t.gradx.cp.colorer().set(s);var a,o,l=e.clientY,c=e.clientX,u=parseInt(n.vmode?n.root.style.top:n.root.style.bottom),h=parseInt(n.hmode?n.root.style.left:n.root.style.right);return null!=n.minX&&(c=n.hmode?Math.max(c,n.minMouseX):Math.min(c,n.maxMouseX)),null!=n.maxX&&(c=n.hmode?Math.min(c,n.maxMouseX):Math.max(c,n.minMouseX)),null!=n.minY&&(l=n.vmode?Math.max(l,n.minMouseY):Math.min(l,n.maxMouseY)),null!=n.maxY&&(l=n.vmode?Math.min(l,n.maxMouseY):Math.max(l,n.minMouseY)),a=h+(c-n.lastMouseX)*(n.hmode?1:-1),o=u+(l-n.lastMouseY)*(n.vmode?1:-1),n.xMapper?a=n.xMapper(u):n.yMapper&&(o=n.yMapper(h)),t.obj.root.style[n.hmode?"left":"right"]=a+"px",t.obj.lastMouseX=c,t.obj.lastMouseY=l,t.obj.root.onDrag(a,o),!1},end:function(){document.onmousemove=null,document.onmouseup=null,t.obj.root.onDragEnd(parseInt(t.obj.root.style[t.obj.hmode?"left":"right"]),parseInt(t.obj.root.style[t.obj.vmode?"top":"bottom"])),t.obj=null},fixE:function(t){return void 0===t&&(t=window.event),void 0===t.layerX&&(t.layerX=t.offsetX),void 0===t.layerY&&(t.layerY=t.offsetY),t}};return t}),define("skylark-domx-plugins-colors/gradienter",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-eventer","skylark-domx-finder","skylark-domx-query","skylark-domx-plugins-base","skylark-graphics-colors/color","./colors","./colorer","./drag"],function(t,e,n,i,r,s,a,o,l,c,u){"use strict";void 0===s.fn.draggable&&(s.fn.draggable=function(){var t=document.getElementById(this.attr("id"));return t.style.top="121px",u.init(t,null,26,426,86,86),this});return l.Gradienter=function(e,n){var i={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(t,e){}},r=u.gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=s},add_event:function(t,e,n){var i,r,s;r=e,s=n,(i=t).attachEvent?i.attachEvent("on"+r,function(){s.call(i)}):i.addEventListener&&i.addEventListener(r,s,!1)},get_random_position:function(){var t;do{t=parseInt(100*Math.random())}while(this.rand_pos.indexOf(t)>-1);return this.rand_pos.push(t),t},get_random_rgb:function(){var t,e,n,i;do{t=parseInt(255*Math.random()),e=parseInt(255*Math.random()),n=parseInt(255*Math.random()),i="rgb("+t+", "+e+", "+n+")"}while(this.rand_RGB.indexOf(i)>-1);return this.rand_RGB.push(i),i},update_target:function(t){if(this.targets.length>0){var e,n,i,s=this.targets.length,a=t.length;for(e=0;e<s;e++)for(i=r.gx(this.targets[e]),n=0;n<a;n++)i.css("background-image",t[n])}},apply_style:function(t,e){var n="linear";if("linear"!=r.type&&(n="radial"),e.indexOf(this.direction)>-1)var i=["-webkit-"+n+"-gradient("+e+")","-moz-"+n+"-gradient("+e+")","-ms-"+n+"-gradient("+e+")","-o-"+n+"-gradient("+e+")",n+"-gradient("+e+")"];else i=[e];for(var s=i.length,a="";s>0;)s--,t.css("background",i[s]),a+="background: "+i[s]+";\n";this.change(this.sliders,i),this.update_target(i),r.gx("#gradx_code").html(a)},apply_default_styles:function(){this.update_style_array();var t=this.get_style_value();this.apply_style(this.panel,t)},update_style_array:function(){this.sliders=[];var t,e,n,i,s=r.slider_ids.length;for(t=0;t<s;t++)i="#"+r.slider_ids[t],e=parseInt(r.gx(i).css("left")),n=parseInt(e/r.container_width*100),n-=6,r.sliders.push([r.gx(i).css("background-color"),n]);this.sliders.sort(function(t,e){return t[1]>e[1]?1:-1})},get_style_value:function(){var t=r.slider_ids.length;if(1===t)e=this.sliders[0][0];else{for(var e="",n="",i=0;i<t;i++)""==this.sliders[i][1]?e+=n+this.sliders[i][0]:(this.sliders[i][1]>100&&(this.sliders[i][1]=100),e+=n+(this.sliders[i][0]+" ")+this.sliders[i][1]+"%"),n=" , ";e="linear"==this.type?this.direction+" , "+e:this.direction+" , "+this.type+" "+this.shape+" , "+e}return e},get_rgb_obj:function(t){return t=(t=(t=t.split("("))[1]).split(","),{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2])}},load_info:function(t){var e="#"+t.id;if(this.current_slider_id=e,this.slider_ids.indexOf(t.id)>-1){var n=r.gx(e).css("backgroundColor"),i=this.get_rgb_obj(n),s=r.gx(e).css("left");parseInt(s)>26&&parseInt(s)<426&&r.gx("#gradx_slider_info").css("left",s).show(),this.set_colorpicker(i),console.log(i)}},add_slider:function(t){var e,n,i,s;0===t.length&&(t=[{color:r.get_random_rgb(),position:r.get_random_position()},{color:r.get_random_rgb(),position:r.get_random_position()}]);var a=t;for(i in a){if(void 0===a[i].position)break;var o=26;s=parseInt(a[i].position*this.container_width/100)+o+"px",e="gradx_slider_"+this.slider_index,this.sliders.push([a[i].color,a[i].position]),this.slider_ids.push(e),n="<div class='gradx_slider' id='"+e+"'></div>",r.gx("#gradx_start_sliders_"+this.id).append(n),r.gx("#"+e).css("backgroundColor",a[i].color).css("left",s),this.slider_index++}for(var l=0,c=this.slider_ids.length;l<c;l++)r.gx("#"+this.slider_ids[l]).draggable({containment:"parent",axis:"x",start:function(){r.jQ_present&&(r.current_slider_id="#"+r.gx(this).attr("id"))},drag:function(){r.update_style_array(),r.apply_style(r.panel,r.get_style_value());var t=r.gx(r.current_slider_id).css("left");parseInt(t)>26&&parseInt(t)<426&&r.gx("#gradx_slider_info").css("left",t).show();var e=r.gx(r.current_slider_id).css("backgroundColor"),n=r.get_rgb_obj(e);r.cp.colorer().set(n)}}).click(function(){return r.load_info(this),!1})},set_colorpicker:function(t){r.cp.colorer({picked:function(t,e){if(0!=r.current_slider_id){var n=e.toRgbString();r.gx(r.current_slider_id).css("background-color",n),r.update_style_array(),r.apply_style(r.panel,r.get_style_value())}},choosed:function(t){r.gx("#gradx_slider_info").hide()},canceled:function(t){r.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!0,color:t,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(t){for(var e,n,i=t.length,r="",s=0;s<i;s++)e=(e=t[s].split(" "))[0],n=s<2?e[1]:"",e=e.replace("-"," "),r+="<option value="+t[s]+" "+n+">"+e+"</option>";return r},generate_radial_options:function(){var t;t=["horizontal-center disabled","center selected","left","right"],r.gx("#gradx_gradient_subtype").html(r.generate_options(t)),t=["vertical-center disabled","center selected","top","bottom"],r.gx("#gradx_gradient_subtype2").html(r.generate_options(t)).show()},generate_linear_options:function(){var t;t=["horizontal-center disabled","left selected","right","top","bottom"],r.gx("#gradx_gradient_subtype").html(r.generate_options(t)),r.gx("#gradx_gradient_subtype2").hide()},destroy:function(){var t={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(t,e){}};for(var e in t)r[e]=t[e]},load_gradx:function(t,e){this.me=r.gx(t),this.id=t.replace("#",""),t=this.id,this.current_slider_id=!1;var n="<div class='gradx'>\n<div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i>add</div>\n<div class='gradx_slectboxes'>\n<select id='gradx_gradient_type' class='gradx_gradient_type'>\n    <option value='linear'>Linear</option>\n    <option value='circle'>Radial - Circle</option>\n    <option value='ellipse'>Radial - Ellipse</option>\n</select>\n<select id='gradx_gradient_subtype' class='gradx_gradient_type'>\n    <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n    <option value='left' selected>Left</option>\n    <option value='right'>Right</option>\n    <option value='top'>Top</option>\n    <option value='bottom'>Bottom</option>\n</select>\n<select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\n</select>\n<select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\n</select>\n</div>\n<div class='gradx_container' id='gradx_"+t+"'>\n    <div id='gradx_stop_sliders_"+t+"'></div>\n    <div class='gradx_panel' id='gradx_panel_"+t+"'></div>\n    <div class='gradx_start_sliders' id='gradx_start_sliders_"+t+"'>\n        <div class='cp-default' id='gradx_slider_info'>\n            <div id='gradx_slider_controls'>\n                <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\n            </div>\n            <div id='gradx_slider_content'></div>\n        </div> \n    </div>\n</div>\n<div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\n<div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\n<textarea class='gradx_code' id='gradx_code'></textarea>\n</div>";this.me.html(n);var i="";if(i=r.generate_options(["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"]),r.gx("#gradx_radial_gradient_size").html(i),this.container=r.gx("#gradx_"+t),this.panel=r.gx("#gradx_panel_"+t),this.container_width=400,this.add_slider(e),r.add_event(document,"click",function(){if(!r.slider_hovered[t])return r.gx("#gradx_slider_info").hide(),!1}),r.gx("#gradx_add_slider").click(function(){r.add_slider([{color:r.get_random_rgb(),position:r.get_random_position()}]),r.update_style_array(),r.apply_style(r.panel,r.get_style_value())}),r.cp=r.gx("#gradx_slider_content"),r.set_colorpicker("blue"),r.gx("#gradx_delete_slider").click(function(){r.gx(r.current_slider_id).remove(),r.gx("#gradx_slider_info").hide();for(var t=r.current_slider_id.replace("#",""),e=0;e<r.slider_ids.length;e++)r.slider_ids[e]==t&&r.slider_ids.splice(e,1);r.update_style_array(),r.apply_style(r.panel,r.get_style_value()),r.current_slider_id=!1}),r.gx("#gradx_code").focus(function(){var t=r.gx(this);t.select(),t.mouseup(function(){return t.off("mouseup"),!1})}),r.gx("#gradx_gradient_type").change(function(){var t=r.gx(this).val();"linear"!==t?r.generate_radial_options():(r.generate_linear_options(),r.gx("#gradx_gradient_subtype").val("left")),r.type=t,r.direction=r.gx("#gradx_gradient_subtype").val(),r.apply_style(r.panel,r.get_style_value())}),"linear"!==this.type){var s;if(r.gx("#gradx_gradient_type").val(this.type),r.generate_radial_options(),"left"!==this.direction)s=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "),a=s[0],o=s[1],r.gx("#gradx_gradient_subtype").val(a),r.gx("#gradx_gradient_subtype2").val(o);else var a=r.gx("#gradx_gradient_subtype").val(),o=r.gx("#gradx_gradient_subtype2").val();r.direction=a+" "+o,r.apply_style(r.panel,r.get_style_value())}else"left"!==this.direction&&r.gx("#gradx_gradient_subtype").val(this.direction);r.gx("#gradx_gradient_subtype").change(function(){if("linear"===r.type)r.direction=r.gx(this).val();else{var t=r.gx(this).val(),e=r.gx("#gradx_gradient_subtype2").val();r.direction=t+" "+e}r.apply_style(r.panel,r.get_style_value())}),r.gx("#gradx_gradient_subtype2").change(function(){var t=r.gx("#gradx_gradient_subtype").val(),e=r.gx(this).val();r.direction=t+" "+e,r.apply_style(r.panel,r.get_style_value())}),r.gx("#gradx_radial_gradient_size").change(function(){r.shape=r.gx(this).val(),r.apply_style(r.panel,r.get_style_value())}),r.gx("#gradx_show_code").click(function(){r.code_shown?(r.code_shown=!1,r.gx("#gradx_show_code span").text("show the code"),r.gx("#gradx_code").hide()):(r.gx("#gradx_show_code span").text("hide the code"),r.gx("#gradx_code").show(),r.code_shown=!0)}),r.code_shown&&(r.gx("#gradx_show_code span").text("hide the code"),r.gx("#gradx_code").show()),r.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){r.slider_hovered[t]=!1}),r.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){r.slider_hovered[t]=!0})}};for(var a in r.load_jQ(),t.mixin(i,n),i)r[a]=i[a];r.load_gradx(e,r.sliders),r.apply_default_styles()}}),define("skylark-domx-plugins-colors/main",["skylark-domx-query","./colors","./colorer","./color-palette","./color-picker","./color-pane","./gradienter"],function(t,e,n){return e}),define("skylark-domx-plugins-colors",["skylark-domx-plugins-colors/main"],function(t){return t}),define("skylark-domx-plugins-groups/groups",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.groups={}}),define("skylark-domx-plugins-groups/group",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups"],function(t,e,n,i,r){"use strict";var s=i.Plugin.inherit({klassName:"Group",pluginName:"lark.groups.group",options:{classes:{},selectors:{},item:{template:'<span><i class="glyphicon"></i><a href="javascript: void(0);"></a> </span>',selector:"li",selectable:!1,multiSelect:!1,classes:{base:"item",selected:"selected",active:"active"}}},selected:null,_construct:function(t,e){this.overrided(t,e);var i=this,r=this._velm=n(this._elm),s=this.options.item.selector;r.on("click",s,function(){var t=n(this);if(!t.hasClass("disabled")){let t=i.getItemValue(this);i.setActiveItem(t),i.options.item.selectable&&(i.options.item.multiSelect?i.toggleSelectOneItem(t):(i.clearSelectedItems(),i.selectOneItem(t)))}return!1}),this.resetItems()},resetItems:function(){this._$items=this._velm.$(this.options.item.selector)},findItem:function(n){return(t.isNumber(n)?this._$items.eq(n):t.isString(n)?this._$items.filter('[data-value="'+n+'"]'):e(n))[0]},getItems:function(){return this._$items},getItemValue:function(t){let n=e(t),i=n.data("value");return void 0===i&&(i=this._$items.index(n[0])),i},getItemsCount:function(){return this._$items.size()},getItemIndex:function(t){return this._$items.index(t)},isSelectedItem:function(t){return e(this.findItem(t)).hasClass(this.options.item.classes.selected)},selectOneItem:function(t){e(this.findItem(t)).addClass(this.options.item.classes.selected)},unselectOneItem:function(t){e(this.findItem(t)).removeClass(this.options.item.classes.selected)},clearSelectedItems:function(){let t=this.options.item.classes.selected;this._$items.filter(`.${t}`).removeClass(t)},getSelectedItemValues:function(){let t=this.options.item.classes.selected;return this._$items.filter(`.${t}`).map(t=>this.getItemValue(t))},getSelectedItems:function(){let t=this.options.item.classes.selected;return this._$items.filter(`.${t}`)},getActiveItem:function(){let t=this.options.item.classes.active,e=this._$items.filter(`.${t}`);return e[0]||null},setActiveItem:function(t){let n=this.getActiveItem(),i=this.findItem(t);if(i!=n){let t=this.options.item.classes.active;e(n).removeClass(t),e(i).addClass(t)}},getSelectedItem:function(){let t=this.getSelectedItems();return t[0]||null},toggleSelectOneItem:function(t){this.isSelectedItem(t)?this.unselectOneItem(t):this.selectOneItem(t)},renderItemHtml:function(e){if(!this._renderItemHtml){let e=this.options.item.template;t.isString(e)?this._renderItemHtml=t.template(e):t.isFunction(e)&&(this._renderItemHtml=e)}return this._renderItemHtml(e)}});return i.register(s),r.Group=s}),define("skylark-domx-plugins-groups/_carousel/indicators",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","../groups"],function(t,e,n,i,r,s,a){var o=s.Plugin.inherit({klassName:"Indicators",pluginName:"lark.groups.carousel.indicators",options:{thumbnail:!0,indicator:{template:"<li/>",indexAttrName:"data-index",selector:"> li",classes:{active:"active"}}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e),this._velm=this.elmx(),this.$indicators=this._velm.query(this.options.indicator.selector),this._velm.on("click",`[${this.options.indicator.indexAttrName}]`,t=>{var e=i(t.target),n=e.attr(this.options.indicator.indexAttrName);this.options.carousel.jump(n),t.preventDefault()})},createIndicator:function(e){return this._renderIndicatorHtml||(this._renderIndicatorHtml=t.template(this.options.indicator.template)),i(this._renderIndicatorHtml(e))[0]},addIndicator:function(t,e){var n=this.createIndicator(e);n.setAttribute("data-index",t),this._velm.append(n),this.$indicators=this.$indicators.add(n)},clearIndicators:function(){this.$indicators.remove()},setActiveIndicator:function(t){if(this.$indicators){let e=this.options.indicator.classes.active;this.activeIndicator&&this.activeIndicator.removeClass(e),this.activeIndicator=i(this.$indicators[t]),this.activeIndicator.addClass(e)}}});return o}),define("skylark-domx-plugins-groups/_carousel/mode-slide",["skylark-langx/langx","skylark-langx-events","skylark-domx-eventer"],function(t,e,n){"use strict";var i=e.Emitter.inherit({_construct:function(t){this.carsouel=t},jump:function(t,e,n,i){let r=this.carsouel,s=(r.elmx(),r.options,r.$(r.findItem(e))),a=r.$(r.findItem(t)),o=r.interval,l="next"==n?"left":"right";return o&&r.pause(),a.addClass(n),a.reflow(),s.addClass(l),a.addClass(l),a.one("transitionEnd",function(){a.removeClass([n,l].join(" ")),s.removeClass(l),i()}).emulateTransitionEnd(),o&&r.cycle(),this}});return i}),define("skylark-domx-plugins-interact/interact",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.interact={}}),define("skylark-domx-plugins-interact/rotatable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,n,i,r,s,a,o){r.on,r.off,n.attr,n.removeAttr,i.pagePosition,s.addClass,i.height,Array.prototype.some,Array.prototype.map;function l(t,e,n){n>180&&(n=180),n<0&&(n=0),t.style.transform="rotateX("+-n+"deg) rotateY("+e+"deg)"}var c=a.Plugin.inherit({klassName:"Rotatable",pluginName:"lark.interact.rotatable",_construct:function(n,a){this.overrided(n,a);var o,c,u,h,d=(a=this.options).handle||n,p=a.document||document,f=a.starting,m=a.started,g=a.moving,y=a.stopped,v=0,k=10,x=0,b=0,w=function(t){x=t.deltaX=t.clientX-c,b=t.deltaY=t.clientY-u,c=t.clientX,u=t.clientY,l(n,v+=.1*x,k+=.1*b),t.preventDefault(),g&&g(t)},_=function(t){r.off(p,"pointermove",w).off(p,"pointerup",_),h=setInterval(function(){b*=.95,l(n,v+=.1*(x*=.95),k+=.1*x),Math.abs(x)<.5&&Math.abs(b)<.5&&clearInterval(h)},17),e.remove(o),y&&y(t)};r.on(d,"pointerdown",function(n){if("mouse"==n.pointerType&&0!==n.button)return _(n);var a,l=i.getDocumentSize(p);if(f){var v=f(n);if(!1===v)return;t.isPlainObject(v)&&(v.started&&(m=v.started),v.moving&&(g=v.moving),v.stopped&&(y=v.stopped))}n.preventDefault(),n.button,c=n.clientX,u=n.clientY,a=s.css(d,"cursor"),o=e.createElement("div"),s.css(o,{position:"absolute",top:0,left:0,width:l.width,height:l.height,zIndex:2147483647,opacity:1e-4,cursor:a}),e.append(p.body,o),clearInterval(h),r.on(p,"pointermove",w).on(p,"pointerup",_),m&&m(n)}),this._handleEl=d},remove:function(){r.off(this._handleEl)}});return a.register(c,"rotatable"),o.Rotatable=c}),define("skylark-domx-plugins-interact/scalable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact"],function(t,e,n,i,r,s,a,o,l){r.on,r.off,n.attr,n.removeAttr,i.pagePosition,s.addClass,i.height,Array.prototype.some,Array.prototype.map;function c(t,e){a(t).forEach(function(t){let n=a(t);var i=n.data("originalTransform");i||(i=n.css("transform"),n.data("originalTransform",i)),n.css("transform",i+" translateZ("+e+"px")})}var u=o.Plugin.inherit({klassName:"Scalable",pluginName:"lark.interact.scalable",_construct:function(t,e){this.overrided(t,e);let n=this.options.radius||0,i=this.options.targets||t;r.on(t,"mousewheel",function(t){var e=t.wheelDelta/20||-t.detail;c(i,n+=e)}),c(i,n)}});return o.register(u,"scalable"),l.Scalable=u}),define("skylark-domx-plugins-groups/_carousel/mode-rotate",["skylark-langx/langx","skylark-langx-events","skylark-domx-eventer","skylark-domx-query","skylark-domx-styler","skylark-domx-plugins-interact/rotatable","skylark-domx-plugins-interact/scalable"],function(t,e,n,i,r,s,a){"use strict";var o=e.Emitter.inherit({options:{},_construct:function(t){this.carsouel=t,this.resetItems(),this._$threedContainer=t.$(`.${t.options.modes.rotate.classes.threedContainer}`),this._rotatable=new s(this._$threedContainer[0],{starting:function(e){return 0==i(e.target).closest(t.options.item.selector).length},started:function(){},stopped:function(){}}),this._scalable=new a(this._$threedContainer[0],{radius:t.options.modes.rotate.radius,targets:t.getItems()}),this._start=0},resetItems:function(t){let e=this.carsouel.getItems();if(e){let t=this._itemsCount=e.length,i=this._deltaDeg=360/t;for(var n=0;n<t;n++)r.css(e[n],{transform:"rotateY("+n*i+"deg)"})}},jump:function(t,e,n,i){let r=this.carsouel,s=(r.elmx(),r.options,r.$(r.findItem(e)),r.$(r.findItem(t)));s.addClass(n),s.reflow();let a=r._$itemsContainer;return a.one("transitionEnd",function(){s.removeClass(n),i()}).css("transform","rotateY("+t*this._deltaDeg+"deg)").emulateTransitionEnd(),this}});return o}),define("skylark-domx-plugins-groups/_carousel/mode-coverflow",["skylark-langx/langx","skylark-langx-events","skylark-domx-query"],function(t,e,n){"use strict";var i=e.Emitter.inherit({_construct:function(t){this.carsouel=t,this._itemOffsets=[],this._currentIndex=-1;let e=this.carsouel.options.modes.coverflow.classes;this._classRemover=new RegExp("\\b("+e.itemCurrent+"|"+e.itemPast+"|"+e.itemFuture+")(.*?)(\\s|$)","g"),this._whiteSpaceRemover=new RegExp("\\s\\s+","g"),this.resetItems()},resetItems:function(){let t=this.carsouel.options.modes.coverflow.classes,e=this.carsouel._$itemsContainer,i=this.carsouel.getItems(),r=this.carsouel.options.modes.coverflow.spacing;e.css("transition","none"),i.css("transition","none"),i.each((e,i)=>{let s=n(i);s.attr("class",function(t,e){return e&&e.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")}),s.children("."+t.itemContent).length||s.wrapInner('<div class="'+t.itemContent+'" />');let a=s.outerWidth();0!==r&&s.css("margin-right",a*r+"px")}),this._itemOffsets=[];let s=e.width();var a,o;e.height((o=0,i.each(function(){(a=n(this).height())>o&&(o=a)}),o)),i.each((t,e)=>{let i,r,a=n(e);i=a.outerWidth(),r=a.position().left,this._itemOffsets[t]=-1*(r+i/2-s/2)}),setTimeout(function(){e.css("transition",""),i.css("transition","")},1)},center:function(t){if(void 0!==t?this._currentIndex=t:t=this._currentIndex,t>=0){var e,i,r,s=this.carsouel.options.modes.coverflow.classes,a=this.carsouel._$itemsContainer,o=this.carsouel.getItems(),l=o.length;o.each((a,o)=>{e=n(o),i=" ",a===t?(i+=s.itemCurrent,r=l+1):a<t?(i+=s.itemPast+" "+s.itemPast+"-"+(t-a),r=l-(t-a)):(i+=s.itemFuture+" "+s.itemFuture+"-"+(a-t),r=l-(a-t)),e.css("z-index",r).attr("class",(t,e)=>e&&e.replace(this._classRemover,"").replace(this._whiteSpaceRemover," ")+i)}),a.css("transform","translateX("+this._itemOffsets[t]+"px)")}},jump:function(t,e,n,i){var r=this.carsouel._$itemsContainer;return this.center(t),r.one("transitionEnd",function(){i()}).emulateTransitionEnd(),this}});return i}),define("skylark-domx-plugins-groups/carousel",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups","./group","./_carousel/indicators","./_carousel/mode-slide","./_carousel/mode-rotate","./_carousel/mode-coverflow"],function(t,e,n,i,r,s,a,o,l,c,u,h){"use strict";var d=o.inherit({klassName:"Carousel",pluginName:"lark.groups.carousel",options:{classes:{display:"display",single:"single",leftEdge:"left",rightEdge:"right",cycling:"cycling",controls:"controls"},cycle:{interval:5e3,pause:"hover"},loop:!0,wrap:!0,keyboard:!0,controls:{selectors:{toggle:".toggle",prev:".prev",next:".next",close:".close",cycleStop:".cycle-stop"}},indicators:{indicator:{template:"<li/>",indexAttrName:"data-index"}},selectors:{itemsContainer:".items",indicatorsContainer:".indicators"},item:{selector:".item",classes:{base:"item"}},data:{},mode:"slide",modes:{slide:{classes:{base:"slide"}},rotate:{classes:{base:"rotate",threedContainer:"items-container"},radius:240},coverflow:{classes:{base:"coverflow",itemPast:"past",itemFuture:"future",itemCurrent:"current",itemContent:"content"},spacing:-.6}},onjumped:null,onjumping:null},_construct:function(e,i){o.prototype._construct.call(this,e,i),this.options.item.selectable=!0,this.options.item.multiSelect=!1,this._$elm=this.$(),this._$itemsContainer=this._$elm.find(this.options.selectors.itemsContainer);let r=this._$elm.find(this.options.selectors.indicatorsContainer);r.length>0&&(this._indicators=new l(r[0],t.mixin({carousel:this,active:0},this.options.indicators)),this._indicators.setActiveIndicator(0)),this.paused=null,this.moving=null,this.interval=null,this.$active=null,this.options.cycle.interval>0?this.cycle(!0):this.cycle(!1);this.options.keyboard&&this._$elm.on("keydown.lark.carousel",t.proxy(this.keydown,this)),"hover"==this.options.cycle.pause&&!("ontouchstart"in document.documentElement)&&this._$elm.on("mouseenter.lark.carousel",t=>{this.pause(!0)}).on("mouseleave.lark.carousel",t=>{this.pause(!1)}),this._$elm.find(this.options.controls.selectors.prev).on("click",t=>{this.prev(),n.stop(t)}),this._$elm.find(this.options.controls.selectors.next).on("click",t=>{this.next(),n.stop(t)}),this._$elm.find(this.options.controls.selectors.cycleStop).on("click",t=>{this.cycle(!this.cycled),n.stop(t)}),this.options.data.items&&this.addItems(this.options.data.items),this._mode=new p[this.options.mode](this);let s=this.options.start;void 0!==s&&("center"===s&&(s=Math.floor(this.getItemsCount()/2)),this.jump(s)),this.options.onjumped&&this.on("jumped",this.options.onjumped),this.options.onjumping&&this.on("jumping",this.options.onjumping)},changeMode:function(t){if(t==this.options.mode)return;this.options.mode=t,this._mode&&this._mode.dispose&&this._mode.dispose(),this._mode=null,this.clearItems(),this.$().removeClass("slide rotate coverflow").addClass(this.options.modes[t].classes.base),this.$items,this.addItems(this.options.data.items),this._mode=new p[this.options.mode](this);let e=this.options.start;void 0!==e&&("center"===e&&(e=Math.floor(this.getItemsCount()/2)),this.jump(e))},keydown:function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},cycle:function(e){return t.isDefined(e)&&(this.cycled=!!e,this.cycled?this._velm.addClass(this.options.classes.cycling):this._velm.removeClass(this.options.classes.cycling)),this.interval&&clearInterval(this.interval),this.options.cycle.interval&&this.cycled&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.cycle.interval)),this},getItemForDirection:function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this._$items.length-1;if(i&&!this.options.wrap)return e;var r="prev"==t?-1:1,s=(n+r)%this._$items.length;return this._$items.eq(s)},setActiveItem:function(t){o.prototype.setActiveItem.call(this,t),this._indicators&&this._indicators.setActiveIndicator(t)},jump:function(t){if(this.jumping)return;let e=this.getItemsCount();if(e<=1)return;let i,r,s=this.getActiveItem(),a=s?this.getItemIndex(s):-1;if("prev"===t?(r=t,a>0?i=a-1:this.options.loop&&(i=e-1)):"next"===t?(r=t,a<e-1?i=a+1:this.options.loop&&(i=0)):"number"==typeof t?i=t:"string"==typeof t?i=parseInt(t):void 0!==t&&(i=this.getItemIndex(t)),!(i<0||i==a)){r||(r=i>a?"next":"prev"),this.jumping=!0;var o=n.create("jumping.lark.carousel",{toIndex:i,currentIndex:a,type:r});if(this.trigger(o),!o.isDefaultPrevented())return this._mode.jump(i,a,r,()=>{this.setActiveItem(i);var t=n.create("jumped.lark.carousel",{toIndex:i,currentIndex:a,type:r});setTimeout(()=>{this.trigger(t)},0),this.jumping=!1}),this;this.jumping=!1}},pause:function(e){return t.isUndefined(e)&&(e=!0),this.paused=!!e,this.cycle(),this},next:function(){return this.jump("next")},prev:function(){return this.jump("prev")},resetItems:function(){o.prototype.resetItems.call(this),this._mode&&this._mode.resetItems&&this._mode.resetItems()},addItems:function(t){let e=this.getItemsCount();for(var n=0;n<t.length;n++)this.addItem(e++,t[n]);this.resetItems()},addItem:function(t,e){let n=this.renderItemHtml(e),r=this.options.item.classes.base,s=i(n);r&&s.addClass(r),this._$itemsContainer&&this._$itemsContainer.append(s),this._indicators&&this._indicators.addIndicator(t,e)},clearItems:function(){this._$itemsContainer&&this._$itemsContainer.attr("style",""),this._$items.remove(),this._$items=i(),this._indicators&&this._indicators.clearIndicators()}}),p=d.modes={slide:c,rotate:u,coverflow:h};return s.register(d),a.Carousel=d}),define("skylark-domx-plugins-toggles/toggles",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.toggles={}}),define("skylark-domx-plugins-toggles/collapse",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-query","skylark-domx-plugins-base","./toggles"],function(t,e,n,i,r,s){"use strict";var a=r.Plugin.inherit({klassName:"Collapse",pluginName:"lark.toggles.collapse",options:{toggle:!0},_construct:function(t,e){this.overrided(t,e),this.$element=this.$(),this.transitioning=null,this.options.toggle&&this.toggle()},dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=n.create("show.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.collapse")};if(!e.support.transition)return s.call(this);var o=t.camelCase(["scroll",r].join("-"));this.$element.one("transitionEnd",t.proxy(s,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[r](this.$element[0][o])}}},hide:function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=n.create("hide.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.collapse")};if(!e.support.transition)return s.call(this);this.$element[r](0).one("transitionEnd",t.proxy(s,this)).emulateTransitionEnd(a.TRANSITION_DURATION)}}},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}});return a.TRANSITION_DURATION=350,r.register(a),s.Collapse=a}),define("skylark-domx-plugins-groups/linear",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","skylark-domx-plugins-toggles/collapse","./groups","./group"],function(t,e,n,i,r,s,a){"use strict";var o=a.inherit({klassName:"Linear",pluginName:"lark.groups.linear",options:{item:{selectable:!0},data:{}},_construct:function(t,e){this.overrided(t,e),this.options.data.items&&this.addItems(this.options.data.items)}});return i.register(o),s.Linear=o}),define("skylark-domx-plugins-dnd/dnd",["skylark-domx-plugins-base/plugins"],function(t){return t.dnd={}}),define("skylark-domx-plugins-dnd/manager",["./dnd","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler"],function(t,e,n,i,r,s,a,o){a.on,a.off,i.attr,i.removeAttr,s.pagePosition,o.addClass,s.height;var l=t.Manager=e.Evented.inherit({klassName:"Manager",init:function(){},prepare:function(t){var e=a.create("preparing",{dragSource:t.dragSource,dragHandle:t.dragHandle});t.trigger(e),t.dragSource=e.dragSource},start:function(t,n){var i=s.pagePosition(t.dragSource);this.draggingOffsetX=parseInt(n.pageX-i.left),this.draggingOffsetY=parseInt(n.pageY-i.top);var r=a.create("started",{elm:t.elm,dragSource:t.dragSource,dragHandle:t.dragHandle,ghost:null,transfer:{}});t.trigger(r),this.dragging=t,t.draggingClass&&o.addClass(t.dragSource,t.draggingClass),this.draggingGhost=r.ghost,this.draggingGhost||(this.draggingGhost=t.elm),this.draggingTransfer=r.transfer,this.draggingTransfer&&e.each(this.draggingTransfer,function(t,e){n.dataTransfer.setData(t,e)}),n.dataTransfer.setDragImage(this.draggingGhost,this.draggingOffsetX,this.draggingOffsetY),n.dataTransfer.effectAllowed="copyMove";var l=a.create("dndStarted",{elm:r.elm,dragSource:r.dragSource,dragHandle:r.dragHandle,ghost:r.ghost,transfer:r.transfer});this.trigger(l)},over:function(){},end:function(t){var e=this.dragging;e&&e.draggingClass&&o.removeClass(e.dragSource,e.draggingClass);var n=a.create("dndEnded",{});this.trigger(n),this.dragging=null,this.draggingTransfer=null,this.draggingGhost=null,this.draggingOffsetX=null,this.draggingOffsetY=null}}),c=new l;return c}),define("skylark-domx-plugins-dnd/draggable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(t,e,n,i,r,s,a,o,l,c){s.on,s.off,n.attr,n.removeAttr,r.pagePosition,a.addClass,r.height;var u=o.Plugin.inherit({klassName:"Draggable",pluginName:"lark.dnd.draggable",options:{draggingClass:"dragging"},_construct:function(e,r){this.overrided(e,r);var a=this,r=this.options;a.draggingClass=r.draggingClass,["preparing","started","ended","moving"].forEach(function(e){t.isFunction(r[e])&&a.on(e,r[e])}),s.on(e,{mousedown:function(t){var e=a.options;e.handle&&(a.dragHandle=i.closest(t.target,e.handle),!a.dragHandle)||(e.source?a.dragSource=i.closest(t.target,e.source):a.dragSource=a._elm,c.prepare(a),a.dragSource&&n.attr(a.dragSource,"draggable","true"))},mouseup:function(t){a.dragSource&&(a.dragSource=null,a.dragHandle=null)},dragstart:function(t){n.attr(a.dragSource,"draggable","false"),c.start(a,t)},dragend:function(t){s.stop(t),c.dragging&&c.end(!1)}})}});return o.register(u,"draggable"),l.Draggable=u}),define("skylark-domx-plugins-dnd/droppable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./dnd","./manager"],function(t,e,n,i,r,s,a,o,l,c){s.on,s.off,n.attr,n.removeAttr,r.pagePosition,a.addClass,r.height;var u=o.Plugin.inherit({klassName:"Droppable",pluginName:"lark.dnd.droppable",options:{draggingClass:"dragging"},_construct:function(e,n){this.overrided(e,n);var i,r,o=this,n=o.options,l=(n.draggingClass,!0);["started","entered","leaved","dropped","overing"].forEach(function(e){t.isFunction(n[e])&&o.on(e,n[e])}),s.on(e,{dragover:function(t){if(t.stopPropagation(),l){var e=s.create("overing",{overElm:t.target,transfer:c.draggingTransfer,acceptable:!0});o.trigger(e),e.acceptable&&(t.preventDefault(),t.dataTransfer.dropEffect="copyMove")}},dragenter:function(t){o.options;var e=o._elm,n=s.create("entered",{transfer:c.draggingTransfer});o.trigger(n),t.stopPropagation(),i&&l&&a.addClass(e,i)},dragleave:function(t){o.options;var e=o._elm;if(!l)return!1;var n=s.create("leaved",{transfer:c.draggingTransfer});o.trigger(n),t.stopPropagation(),i&&l&&a.removeClass(e,i)},drop:function(t){o.options;var e=o._elm;if(s.stop(t),c.dragging){i&&l&&a.addClass(e,i);var n=s.create("dropped",{transfer:c.draggingTransfer});o.trigger(n),c.end(!0)}}}),c.on("dndStarted",function(t){var n=s.create("started",{transfer:c.draggingTransfer,acceptable:!1});o.trigger(n),l=n.acceptable,i=n.hoverClass,(r=n.activeClass)&&l&&a.addClass(e,r)}).on("dndEnded",function(t){var n=s.create("ended",{transfer:c.draggingTransfer,acceptable:!1});o.trigger(n),i&&l&&a.removeClass(e,i),r&&l&&a.removeClass(e,r),l=!1,r=null,i=null})}});return o.register(u,"droppable"),l.Droppable=u}),define("skylark-domx-plugins-groups/sortable",["./groups","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-dnd/draggable","skylark-domx-plugins-dnd/droppable"],function(t,e,n,i,r,s,a,o,l,c,u){"use strict";s.on,s.off,i.attr,i.removeAttr,r.pagePosition,a.addClass,r.height,Array.prototype.some,Array.prototype.map,l.Plugin.inherit({klassName:"Sorter",enable:function(){},disable:function(){},destory:function(){}});var h,d=o(),p=l.Plugin.inherit({klassName:"Sortable",pluginName:"lark.groups.sortable",options:{connectWith:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",items:null},_construct:function(t,e){this.overrided(t,e),e=this.options;var i,r=o(t),s=r.children(e.items),a=o(e.placeholder||n.createElement(/^(ul|ol)$/i.test(t.tagName)?"li":"div",{class:e.placeholderClass}));c(t,{source:e.items,handle:e.handle,draggingClass:e.draggingClass,preparing:function(t){},started:function(t){t.ghost=t.dragSource,t.transfer={text:"dummy"},i=(h=o(t.dragSource)).index()},ended:function(t){h&&(h.show(),d.detach(),i!=h.index()&&h.parent().trigger("sortupdate",{item:h}),h=null)}}),u(t,{started:function(t){t.acceptable=!0,t.activeClass="active",t.hoverClass="over"},overing:function(t){s.is(t.overElm)?(e.forcePlaceholderSize&&a.height(h.outerHeight()),h.hide(),o(t.overElm)[a.index()<o(t.overElm).index()?"after":"before"](a),d.not(a).detach()):d.is(t.overElm)||o(t.overElm).children(e.items).length||(d.detach(),o(t.overElm).append(a))},dropped:function(t){d.filter(":visible").after(h),h.show(),d.detach(),h=null}}),r.data("items",e.items),d=d.add(a),e.connectWith&&o(e.connectWith).add(this).data("connectWith",e.connectWith)}});return l.register(p,"sortable"),t.Sortable=p}),define("skylark-domx-plugins-groups/tiler",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./groups","./group"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"Tiler",pluginName:"lark.groups.tiler",options:{alignment:"left",infiniteScroll:!1,itemRendered:null,noItemsHTML:"no items found",selectable:!1,viewClass:"repeater-tile",template:'<div class="clearfix repeater-tile" data-container="true" data-infinite="true" data-preserve="shallow"></div>',item:{template:'<div class="thumbnail"><img height="75" src="<%= href %>" width="65"><span><%= title %></span></div>',selectable:!0},renderItem:null},_construct:function(n,i){this.overrided(n,i),this._renderItem=t.template(this.options.item.template);for(var r=0;r<i.items.length;r++){var s=this._renderItem(i.items[r]);this._velm.append(e(s))}}});return i.register(a),r.Tiler=a}),define("skylark-domx-plugins-groups/main",["./groups","./group","./carousel","./linear","./sortable","./tiler"],function(t){return t}),define("skylark-domx-plugins-groups",["skylark-domx-plugins-groups/main"],function(t){return t}),define("skylark-domx-plugins-pictures/pictures",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.pictures={}}),define("skylark-domx-plugins-interact/movable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-plugins-base","./interact"],function(t,e,n,i,r,s,a,o){r.on,r.off,n.attr,n.removeAttr,i.pagePosition,s.addClass,i.height,Array.prototype.some,Array.prototype.map;var l=a.Plugin.inherit({klassName:"Movable",pluginName:"lark.interact.movable",_construct:function(n,a){function o(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function l(t){t.movable=p,t.moveEl=n,t.handleEl=f}this.overrided(n,a);var c,u,h,d,p=this,f=(a=this.options).handle||n,m=!1!==a.auto,g=a.constraints,y=a.document||document,v=a.starting,k=a.started,x=a.moving,b=a.stopped,w=function(t){if(o(t),l(t),0!==t.button)return _(t);if(t.deltaX=t.screenX-u,t.deltaY=t.screenY-h,m){var e=d.left+t.deltaX,r=d.top+t.deltaY;g&&(e<g.minX&&(e=g.minX),e>g.maxX&&(e=g.maxX),r<g.minY&&(r=g.minY),r>g.maxY&&(r=g.maxY))}i.relativePosition(n,{left:e,top:r}),t.preventDefault(),x&&x(t)},_=function(t){o(t),r.off(y,"mousemove touchmove",w).off(y,"mouseup touchend",_),e.remove(c),b&&b(t)};r.on(f,"mousedown touchstart",function(a){var p,m=i.getDocumentSize(y);if(o(a),l(a),v){var C=v(a);if(!1===C)return;t.isPlainObject(C)&&(C.constraints&&(g=C.constraints),C.started&&(k=C.started),C.moving&&(x=C.moving),C.stopped&&(b=C.stopped))}a.preventDefault(),a.button,u=a.screenX,h=a.screenY,d=i.relativePosition(n),i.size(n),p=s.css(f,"cursor"),c=e.createElement("div"),s.css(c,{position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,cursor:p}),e.append(y.body,c),r.on(y,"mousemove touchmove",w).on(y,"mouseup touchend",_),k&&k(a)}),this._handleEl=f},remove:function(){r.off(this._handleEl)}});return a.register(l,"movable"),o.Movable=l}),define("skylark-domx-plugins-pictures/viewer",["skylark-langx","skylark-domx/eventer","skylark-domx/geom","skylark-domx/query","skylark-domx-images/preload","skylark-domx-plugins-base","skylark-domx-plugins-interact/movable","./pictures"],function(t,n,i,r,s,a,o,l){"use strict";var c=a.Plugin.inherit({klassName:"PictureViewer",pluginName:"lark.pictures.pictureviewer",options:{ratioThreshold:.1,minRatio:.05,maxRatio:16,movable:!0,classes:{grab:null,loader:null}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e),this.$stage=this.$(),this.$image=this.$stage.find("img"),this.$stage.off("wheel").on("wheel",t=>{this._handleWheel(t)}),this.options.movable&&(this._movable=new o(this.$image[0],{starting:t=>{const e=this.$image.width(),n=this.$image.height(),i=this.$stage.width(),r=this.$stage.height();let s,a,o,l;return!(i>=e&&r>=n)&&(i>=e?s=o=(i-e)/2:(s=i-e,o=0),r>=n?a=l=(r-n)/2:(a=r-n,l=0),{constraints:{minX:s,maxX:o,minY:a,maxY:l}})},started:function(t){n.stop(t)}}))},getImageScaleToStage:function(t,e){let n=1;return n=this.isRotated?Math.min(t/this.img.height,e/this.img.width,1):Math.min(t/this.img.width,e/this.img.height,1)},setGrabCursor:function(t,e,n){const i=n?t.h:t.w,r=n?t.w:t.h;(r>e.h||i>e.w)&&this.$stage.addClass("is-grab"),r<=e.h&&i<=e.w&&this.$stage.removeClass("is-grab")},setImageSize:function(e){const n={w:this.$stage.width(),h:this.$stage.height()},i=this.getImageScaleToStage(n.w,n.h);this.$image.css({width:Math.ceil(e.width*i)+"px",height:Math.ceil(e.height*i)+"px",left:(n.w-Math.ceil(e.width*i))/2+"px",top:(n.h-Math.ceil(e.height*i))/2+"px"}),t.mixin(this.imageData,{initWidth:e.width*i,initHeight:e.height*i,initLeft:(n.w-e.width*i)/2,initTop:(n.h-e.height*i)/2,width:e.width*i,height:e.height*i,left:(n.w-e.width*i)/2,top:(n.h-e.height*i)/2}),this.setGrabCursor({w:this.$image.width(),h:this.$image.height()},{w:this.$stage.width(),h:this.$stage.height()},this.isRotated),this.imageLoaded||(this.$stage.find(".${ this.options.classes.loader }").remove(),this.$stage.removeClass("stage-ready"),this.$image.removeClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0)},loadImage:function(t,e,n){this.$image.removeAttr("style").attr("src",""),this.isRotated=!1,this.rotateAngle=0,this.imageLoaded=!1,this.$stage.append(`<div class="${this.options.classes.loader}"></div>`),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),this.$image.attr("src",t),s(t).then(t=>{var n=t.imgs[0];this.img=n,this.imageData={originalWidth:n.width,originalHeight:n.height},e&&e(n)},()=>{this.$photoviewer.find(".${ this.options.classes.loader }").remove(),n&&n.call()})},_handleWheel:function(t){t.preventDefault();let e=1;t.deltaY?e=t.deltaY>0?1:-1:t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=t.detail>0?1:-1);const n=-e*this.options.ratioThreshold,r={x:t.clientX-this.$stage.offset().left+i.scrollLeft(document.body),y:t.clientY-this.$stage.offset().top+i.scrollTop(document.body)};this.zoom(n,r,t)},zoom:function(t,e,n){t=t<0?1/(1-t):1+t,(t=this.$image.width()/this.imageData.originalWidth*t)>this.options.maxRatio||t<this.options.minRatio||this.zoomTo(t,e,n)},zoomTo:function(t,e,n){const i=this.$image,s=this.$stage,a={w:this.imageData.width,h:this.imageData.height,x:this.imageData.left,y:this.imageData.top},o={w:s.width(),h:s.height(),x:s.offset().left,y:s.offset().top},l=this.imageData.originalWidth*t,c=this.imageData.originalHeight*t;let u=e.x-(e.x-a.x)/a.w*l,h=e.y-(e.y-a.y)/a.h*c;const d=this.isRotated?(l-c)/2:0,p=this.isRotated?c:l,f=this.isRotated?l:c,m=o.w-l,g=o.h-c;h=f<=o.h?(o.h-c)/2:h>d?d:h>g-d?h:g-d,u=p<=o.w?(o.w-l)/2:u>-d?-d:u>m+d?u:m+d,Math.abs(this.imageData.initWidth-l)<.05*this.imageData.initWidth?this.setImageSize(this.img):(i.css({width:Math.round(l)+"px",height:Math.round(c)+"px",left:Math.round(u)+"px",top:Math.round(h)+"px"}),this.setGrabCursor({w:Math.round(p),h:Math.round(f)},{w:o.w,h:o.h})),r.extend(this.imageData,{width:l,height:c,left:u,top:h})},rotate:function(t){this.rotateAngle=this.rotateAngle+t,this.rotateAngle/90%2==0?this.isRotated=!1:this.isRotated=!0,this.rotateTo(this.rotateAngle)},rotateTo:function(t){this.$image.css({transform:"rotate("+t+"deg)"}),this.setImageSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}),this.$stage.removeClass("is-grab")},resize:function(){const t=this.$image.width(),e=this.$image.height(),n=this.$stage.width(),i=this.$stage.height(),r=(n-t)/2,s=(i-e)/2;this.$image.css({left:r,top:s})},shortcut:function(t,n,i){var r=!1;switch(t){case 187:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 189:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 48:n&&i&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 188:n&&this.rotate(-90);break;case 190:n&&this.rotate(90),r=!0}return r}});return l.PictureViewer=c}),define("skylark-domx-plugins-pictures/main",["./pictures","./viewer"],function(t){"use strict";return t}),define("skylark-domx-plugins-pictures",["skylark-domx-plugins-pictures/main"],function(t){return t}),define("skylark-domx-plugins-players/players",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.players={}}),define("skylark-domx-plugins-players/video-player",["skylark-langx/langx","skylark-domx-noder","skylark-domx-eventer","skylark-domx-query","skylark-domx-plugins-base","./players"],function(t,e,n,i,r,s){"use strict";var a=r.Plugin.inherit({klassName:"VideoPlayer",pluginName:"lark.players.video",options:{classes:{videoContent:"video-content",videoLoading:"video-loading",videoPlaying:"video-playing"},videoPosterProperty:"poster",videoSourcesProperty:"sources"},_construct:function(t,e){r.Plugin.prototype._construct.call(this,t,e);let s,a=this.$(),o=i("<video/>"),l=this._video=o[0];a.addClass(this.options.classes.videoContent);var c=this._$poster=i("<img/>");c.prop("draggable",!1),a.append(c),c.css({maxWidth:"100%",maxHeight:"100%"});var u=this._$play=i("<a/>");u.prop("target","_blank"),l.controls=!0,this.listenTo(o,"error",function(){}),this.listenTo(o,"pause",function(){l.seeking||(s=!1,this.$().removeClass(this.options.classes.videoLoading).removeClass(this.options.classes.videoPlaying),this.trigger("pause"))}),this.listenTo(o,"playing",()=>{s=!1,this.$().removeClass(this.options.classes.videoLoading).addClass(this.options.classes.videoPlaying),this.trigger("playing")}),this.listenTo(o,"play",()=>{s=!0,this.$().addClass(this.options.classes.videoLoading),this.trigger("play")}),this.listenTo(u,"click",t=>{n.stop(t),s?this.pause():this.play()}),a.append(o),o.css({maxWidth:"100%",maxHeight:"100%"}),a.append(u),this.options.media&&this.source(this.options.media)},source:function(t){this._media=t;let e=t.title||"",n=t.href,i=t.type,r=t.poster||"",s=t.altText||"",a=this.$(),o=this._video,l=this._$play,c=this._$poster;a.prop("title",e),o.canPlayType&&n&&i&&o.canPlayType(i)&&(o.src=n),o.poster=r,c.prop({src:r,alt:s}),l.prop({download:e,href:n})},load:function(){this._video.load()},play:function(){this._video.play()},stop:function(){},pause:function(){this._video.pause()}});return r.register(a),s.VideoPlayer=a}),define("skylark-domx-plugins-players/main",["./players","./video-player"],function(t){return t}),define("skylark-domx-plugins-players",["skylark-domx-plugins-players/main"],function(t){return t}),define("skylark-domx-plugins-panels/panels",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base/plugins"],function(t,e,n,i,r,s,a,o){var l={},c={BACKSPACE_KEYCODE:8,COMMA_KEYCODE:188,DELETE_KEYCODE:46,DOWN_ARROW_KEYCODE:40,ENTER_KEYCODE:13,TAB_KEYCODE:9,UP_ARROW_KEYCODE:38},u=function(t){return function(e){return e.keyCode===t}},h=u(c.BACKSPACE_KEYCODE),d=u(c.DELETE_KEYCODE),p=u(c.TAB_KEYCODE),f=u(c.UP_ARROW_KEYCODE),m=u(c.DOWN_ARROW_KEYCODE),g=/&[^\s]*;/;return e.mixin(l,{CONST:c,cleanInput:function(t){for(;g.test(t);)t=a("<i>").html(t).text();return a("<i>").text(t).html()},isBackspaceKey:h,isDeleteKey:d,isShiftHeld:function(t){return!0===t.shiftKey},isTabKey:p,isUpArrow:f,isDownArrow:m}),o.panels=l}),define("skylark-domx-plugins-interact/resizable",["skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-finder","skylark-domx-geom","skylark-domx-eventer","skylark-domx-styler","skylark-domx-query","skylark-domx-plugins-base","./interact","./movable"],function(t,e,n,i,r,s,a,o,l,c,u){s.on,s.off,n.attr,n.removeAttr,r.pagePosition,a.addClass,r.height,Array.prototype.some,Array.prototype.map;var h=l.Plugin.inherit({klassName:"Resizable",pluginName:"lark.interact.resizable",options:{touchActionNone:!0,handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:"resizable-handle",top:"resizable-handle-n",left:"resizable-handle-w",right:"resizable-handle-e",bottom:"resizable-handle-s",topLeft:"resizable-handle-nw",topRight:"resizable-handle-ne",bottomLeft:"resizable-handle-sw",bottomRight:"resizable-handle-se"}},grabber:{selector:"",direction:"bottomRight"},selector:!0},constraints:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null}},_construct:function(n,a){this.overrided(n,a);var o=(a=this.options).handle||{},l=a.constraints||{},c=a.started,h=a.moving,d=a.stopped;function p(t,e){let i;u(t,{auto:!1,started:function(t){i=r.relativeRect(n),c&&c(t)},moving:function(t){currentRect={},"right"!=e&&"topRight"!=e&&"bottomRight"!=e||(currentRect.width=i.width+t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.width=l.maxWidth)),"bottom"!=e&&"bottomLeft"!=e&&"bottomRight"!=e||(currentRect.height=i.height+t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.height=l.maxHeight)),"left"!=e&&"topLeft"!=e&&"bottomLeft"!=e||(currentRect.left=i.left+t.deltaX,currentRect.width=i.width-t.deltaX,l.minWidth&&currentRect.width<l.minWidth&&(currentRect.left=currentRect.left+currentRect.width-l.minWidth,currentRect.width=l.minWidth),l.maxWidth&&currentRect.width>l.maxWidth&&(currentRect.left=currentRect.left+currentRect.width-l.maxWidth,currentRect.width=l.maxWidth)),"top"!=e&&"topLeft"!=e&&"topRight"!=e||(currentRect.top=i.top+t.deltaY,currentRect.height=i.height-t.deltaY,l.minHeight&&currentRect.height<l.minHeight&&(currentRect.top=currentRect.top+currentRect.height-l.minHeight,currentRect.height=l.minHeight),l.maxHeight&&currentRect.height>l.maxHeight&&(currentRect.top=currentRect.top+currentRect.height-l.maxHeight,currentRect.height=l.maxHeight)),r.relativeRect(n,currentRect),h&&h(t),s.resized(n)},stopped:function(t){d&&d(t)}})}if(t.isString(o)?handleEl=i.find(n,o):t.isHtmlNode(o)&&(handleEl=o),o&&o.border){for(var f in o.border.directions)if(o.border.directions[f]){let t=e.createElement("div",{className:o.border.classes.all+" "+o.border.classes[f],direction:f},n);p(t,f)}}if(o&&o.grabber&&o.grabber.selector){let t=i.find(n,o.grabber.selector);p(t,o.grabber.direction)}},remove:function(){s.off(this._handleEl)}});return l.register(h,"resizable"),c.Resizable=h}),define("skylark-domx-plugins-panels/panel",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-interact/resizable","./panels"],function(t,e,n,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:"Panel",pluginName:"lark.panels.panel",options:{},_construct:function(t,e){this.overrided(t,e),this._velm=this.elmx(),this.options.resizable&&(this._resizable=new o(t,{handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:this.options.resizable.border.classes.all,top:this.options.resizable.border.classes.top,left:this.options.resizable.border.classes.left,right:this.options.resizable.border.classes.right,bottom:this.options.resizable.border.classes.bottom,topLeft:this.options.resizable.border.classes.topLeft,topRight:this.options.resizable.border.classes.topRight,bottomLeft:this.options.resizable.border.classes.bottomLeft,bottomRight:this.options.resizable.border.classes.bottomRight}}},constraints:{minWidth:this.options.resizable.minWidth,minHeight:this.options.resizable.minHeight},started:()=>{this.isResizing=!0},moving:function(t){},stopped:()=>{this.isResizing=!1}}))}});return a.register(c),c}),define("skylark-domx-plugins-panels/collapsible",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-toggles/collapse","./panels","./panel"],function(t,e,n,i,r,s,a,o,l,c){var u=c.inherit({klassName:"Collapsible",pluginName:"lark.panels.collapsible",options:{toggler:{selector:'.panel-heading [data-toggle="collapse"]'},body:{selector:".panel-body"}},_construct:function(t,e){c.prototype._construct.call(this,t,e),this._expanded=!1,this.$toggle=this._velm.find(this.options.toggler.selector),this.$body=this._velm.find(this.options.body.selector),this.$toggle.on("click.panel",t=>{this.toggle()})},expand:function(){this.emit("expanding"),this.$body.plugin(o.prototype.pluginName).show(),this._expanded=!0,this.emit("expanded")},collapse:function(){this.emit("collapsing"),this.$body.plugin(o.prototype.pluginName).hide(),this._expanded=!1,this.emit("collapsed")},toggle:function(){this._expanded?this.collapse():this.expand()},full:function(){},unfull:function(){},toogleFull:function(){},close:function(){}});return a.register(u),l.Collapsible=u}),define("skylark-domx-plugins-panels/accordion",["skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-domx-plugins-base","./panels","./panel","./collapsible"],function(t,e,n,i,r,s,a){var o=s.inherit({klassName:"Accordion",pluginName:"lark.panels.accordion",options:{panel:{selector:"> .panel",template:null}},_construct:function(t,e){s.prototype._construct.call(this,t,e);var n=[];this._velm.$(this.options.panel.selector).forEach(t=>{var e=new o.Pane(t,{group:this});n.push(e)}),this._panels=n},panels:{get:function(){}},addPanel:function(){},remove:function(){},expand:function(){},expandAll:function(){},collapse:function(){},collapseAll:function(){}});return o.Pane=a.inherit({klassName:"AccordionPane",expand:function(){this.options.group.active&&this.options.group.active.collapse(),this.overrided(),this.options.group.active=this},collapse:function(){this.overrided(),this.options.group.active=null},toggle:function(){this.overrided()},remove:function(){this.overrided()}}),i.register(o),r.Accordion=o}),define("skylark-domx-plugins-panels/floating",["skylark-domx/noder","skylark-domx/eventer","skylark-domx/query","skylark-domx-plugins-base","skylark-domx-plugins-interact/movable","./panels","./panel"],function(t,e,n,i,r,s,a){"use strict";var o=[],l=a.inherit({klassName:"Floating",pluginName:"lark.panels.floating",options:{selectors:{headerPane:"",contentPane:"",footerPane:"",titlebar:"",buttons:{fullscreen:".button-fullscreen",maximize:".button-maximize",minimize:".button-minimize",close:".button-close"}},classes:{maximize:"maximize"},fixedContent:!0,initMaximized:!1,movable:{dragHandle:!1,dragCancel:null}},_construct:function(t,e){a.prototype._construct.call(this,t,e),this.$pane=n(this._elm),this.isOpened=!1,this.isMaximized=!1,this.options.movable&&(this._movable=new r(t,{handle:this.options.movable.dragHandle,starting:t=>{const e=this.options.movable.dragCancel,i=n(t.target).closest(e);return!i.length&&(!this.isResizing&&!this.isMaximized)}})),this.$close=this._velm.$(this.options.selectors.buttons.close),this.$maximize=this._velm.$(this.options.selectors.buttons.maximize),this.$minimize=this._velm.$(this.options.selectors.buttons.minimize),this.$fullscreen=this._velm.$(this.options.selectors.buttons.fullscreen),this.$close.off("click.window").on("click.window",t=>{this.close()}),this.$fullscreen.off("click.window").on("click.window",()=>{this.fullscreen()}),this.$maximize.off("click.window").on("click.window",()=>{this.maximize()}),this.$pane.off("keydown.window").on("keydown.window",t=>{this._keydown(t)}),o.push(this)},close:function(){this.trigger("closing",this),this.$pane.remove(),this.isOpened=!1,this.isMaximized=!1;var t=o.indexOf(this);t>-1&&o.splice(t,1),this.trigger("closed",this)},maximize:function(){if(this.$pane.get(0).focus(),this.isMaximized){let t=n(window),e=n(document);this.$pane.removeClass(this.options.classes.maximize);const i=(t.width()-this.options.modalWidth)/2+e.scrollLeft(),r=(t.height()-this.options.modalHeight)/2+e.scrollTop();this.$pane.css({width:this.modalData.width?this.modalData.width:this.options.modalWidth,height:this.modalData.height?this.modalData.height:this.options.modalHeight,left:this.modalData.left?this.modalData.left:i,top:this.modalData.top?this.modalData.top:r}),this.isMaximized=!1}else this.modalData={width:this.$pane.width(),height:this.$pane.height(),left:this.$pane.offset().left,top:this.$pane.offset().top},this.$pane.addClass(this.options.classes.maximize),this.$pane.css({width:"100%",height:"100%",left:0,top:0}),this.isMaximized=!0;e.resized(this._elm)},fullscreen:function(){this.$pane.get(0).focus(),t.fullscreen(this.$pane[0])},_keydown:function(t){if(!this.options.keyboard)return!1;const e=t.keyCode||t.which||t.charCode;t.ctrlKey||t.metaKey,t.altKey||t.metaKey;switch(e){case 81:this.close()}}});return e.on(window,"resize.window",()=>{for(let t=0;t<o.length;t++)e.resized(o[t]._elm)}),s.Floating=l}),define("skylark-domx-plugins-panels/pagination",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./panels","./panel"],function(t,e,n,i,r,s,a,o,l){"use strict";var c=l.inherit({klassName:"Pagination",pluginName:"lark.panels.pagination",options:{tagName:"ul",css:"",selectors:{firstNavi:"li[aria-label='first']",prevNavi:"li[aria-label='prev']",nextNavi:"li[aria-label='next']",lastNavi:"li[aria-label='last']",numericNavi:"li:not([aria-label])",numericTxt:"a"},totalPages:7,maxButtonsVisible:5,currentPage:1},state:{totalPages:Number,currentPage:Number},_construct:function(t,e){l.prototype._construct.call(this,t,e),this.$first=this._velm.$(this.options.selectors.firstNavi),this.$prev=this._velm.$(this.options.selectors.prevNavi),this.$last=this._velm.$(this.options.selectors.lastNavi),this.$next=this._velm.$(this.options.selectors.nextNavi),this.$numeric=this._velm.$(this.options.selectors.numericNavi);var n=this;function i(t){var e=s(t);return!e.is(".disabled,.active")&&e}this.$first.click(function(){i(this)&&n.currentPage(1)}),this.$prev.click(function(){i(this)&&n.currentPage(n.currentPage()-1)}),this.$last.click(function(){i(this)&&n.currentPage(n.totalPages())}),this.$next.click(function(){i(this)&&n.currentPage(n.currentPage()+1)}),this.$numeric.click(function(){var t=i(this);if(t){var e=t.find(n.options.selectors.numericTxt).text(),r=parseInt(e);n.currentPage(r)}}),this._currentPage=this.options.currentPage,this._totalPages=this.options.totalPages,this._refresh({currentPage:!0,totalPages:!0})},_refresh:function(t){var e=this;if(t.currentPage||t.totalPages){var n=e.currentPage(),i=e.totalPages();!function(t,n){var i=Math.min(n,e.options.maxButtonsVisible),r=1,s=r+i-1;for(;t<r||t>s;)t>s?(r+=i,(s+=i)>n&&(r-=s-n,s=n)):(s-=i,(r-=i)<0&&(s+=r+i,r=1));t===s&&1!=n&&(s=(r=t-1)+i-1)>=n&&(r-=s-n,s=n);r===t&&1!=n&&1!=t&&(r=(s=t+1)-(i-1));var a=e.$numeric.size(),o=s-r+1,l=0;e.$numeric.filter(".active").removeClass("active");for(;l<o;){var c=l+r,u=e.$numeric.eq(l);u.find(e.options.selectors.numericTxt).text(l+r).show(),c==t&&u.addClass("active"),l++}for(;l<a;)e.$numeric.eq(l).find(e.options.selectors.numericTxt).text(l+r).hide(),l++}(n,i),function(t,n){if(t<1)throw"Page can't be less than 1";if(t>n)throw"Page is bigger than total pages";if(n<1)throw"Total Pages can't be less than 1";1==t?(e.$first.addClass("disabled"),e.$prev.addClass("disabled")):(e.$first.removeClass("disabled"),e.$prev.removeClass("disabled"));t==n?(e.$last.addClass("disabled"),e.$next.addClass("disabled")):(e.$last.removeClass("disabled"),e.$next.removeClass("disabled"))}(n,i)}},currentPage:function(t){return void 0!==t?(this._currentPage=t,this._refresh({currentPage:!0}),this):this._currentPage},totalPages:function(t){return void 0!==t?(this._totalPages=t,this._refresh({totalPages:!0}),this):this._totalPages}});return a.register(c),o.Pagination=c}),define("skylark-domx-plugins-popups/Dropdown",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./popups"],function(t,e,n,i,r,s,a,o){"use strict";var l=".dropdown-backdrop",c='[data-toggle="dropdown"]',u=a.Plugin.inherit({klassName:"Dropdown",pluginName:"lark.popups.dropdown",options:{selectors:{toggler:'[data-toggle="dropdown"],.dropdown-menu'}},_construct:function(t,e){this.overrided(t,e);var n=this.$element=s(this._elm);n.on("click.dropdown",this.toggle),n.on("keydown.dropdown",this.options.selectors.toggler,this.keydown)},toggle:function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var i=h(e),r=i.hasClass("open");if(d(),!r){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",d);var a={relatedTarget:this};if(i.trigger(t=n.create("show.dropdown",a)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(n.create("shown.dropdown",a))}return!1}},keydown:function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=h(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(c).trigger("focus"),e.trigger("click");var r=n.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var a=r.index(t.target);38==t.which&&a>0&&a--,40==t.which&&a<r.length-1&&a++,~a||(a=0),r.eq(a).trigger("focus")}}}}});function h(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&s(e);return n&&n.length?n:t.parent()}function d(t){t&&3===t.which||(s(l).remove(),s(c).each(function(){var e=s(this),r=h(e),a={relatedTarget:this};r.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&i.contains(r[0],t.target)||(r.trigger(t=n.create("hide.dropdown",a)),t.isDefaultPrevented()||(e.attr("aria-expanded","false"),r.removeClass("open").trigger(n.create("hidden.dropdown",a)))))}))}return s(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}),a.register(u),o.Dropdown=u}),define("skylark-domx-plugins-toggles/tab",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./toggles"],function(t,e,n,i,r,s,a,o){"use strict";var l=a.Plugin.inherit({klassName:"Tab",pluginName:"lark.toggles.tab",_construct:function(e,n){this.element=s(e),this.target=n&&n.target,this.element.on("click.lark.toggles.tab",t.proxy(function(t){t.preventDefault(),this.show()},this))},show:function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=this.target||t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=e.find(".active:last a"),a=n.create("hide.lark.toggles.tab",{relatedTarget:t[0]}),o=n.create("show.lark.toggles.tab",{relatedTarget:r[0]});if(r.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var l=s(i);this.activate(t.closest("li"),e),this.activate(l,l.parent(),function(){r.trigger({type:"hidden.lark.toggles.tab",relatedTarget:t[0]}),t.trigger({type:"shown.lark.toggles.tab",relatedTarget:r[0]})})}}},activate:function(t,n,i){var r=n.find("> .active"),s=i&&e.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}r.length&&s?r.one("transitionEnd",a).emulateTransitionEnd(l.TRANSITION_DURATION):a(),r.removeClass("in")}});return l.TRANSITION_DURATION=150,a.register(l),o.Tab=l}),define("skylark-domx-plugins-panels/tabstrip",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-popups/Dropdown","skylark-domx-plugins-toggles/tab","./panels","./panel"],function(t,e,n,i,r,s,a,o,l,c,u){var h=u.inherit({klassName:"TabStrip",pluginName:"lark.panels.tabstrip",options:{selectors:{header:".nav-tabs",tab:'[data-toggle="tab"]',content:".tab-content",tabpane:".tab-pane"},droptabs:{selectors:{dropdown:"li.droptabs",dropdownMenu:"ul.dropdown-menu",dropdownTabs:"li",dropdownCaret:"b.caret",visibleTabs:">li:not(.dropdown)"},auto:!0,pullDropdownRight:!0}},_construct:function(t,e){u.prototype._construct.call(this,t,e),this.$header=this._velm.$(this.options.selectors.header),this.$tabs=this.$header.find(this.options.selectors.tab),this.$content=this._velm.$(this.options.selectors.content),this.$tabpanes=this.$content.find(this.options.selectors.tabpane),this.$header.find('[data-toggle="dropdown"]').plugin(o.prototype.pluginName);var n=this;this.$tabs.each(function(t,e){s(e).plugin(l.prototype.pluginName,{target:n.$tabpanes[t]})})},arrange:function(){var t=this.options.droptabs.selectors.dropdownTabs,e=this.options.droptabs.selectors.visibleTabs;$container=this.$header;var n=$container.find(this.options.droptabs.selectors.dropdown),i=n.find(this.options.droptabs.selectors.dropdownMenu),r=s(">a",n).clone();s(this.options.droptabs.selectors.dropdownCaret,n);s(this.options.droptabs.selectors.dropdownCaret,r).remove(),this.options.droptabs.pullDropdownRight&&s(n).addClass("pull-right");var a=function(){return s(t,i)},o=function(){return s(e,$container)};var l,c,u=function(){return $container.outerWidth()-function(){var t=0;return s(o()).each(function(e){t+=parseInt(s(this).outerWidth(),10)}),t+=parseInt(s(n).outerWidth(),10)}()};if(u()<0){var h=u();s(o().get().reverse()).each(function(t){if(s(this).hasClass("always-visible")||(s(this).prependTo(i),h+=s(this).outerWidth()),h>=0)return!1})}if(u()>(l=a().first().clone().appendTo($container).css("position","fixed"),c=s(l).outerWidth(),s(l).remove(),c)){var h=u();s(a()).each(function(t){if(e=s(this).clone().appendTo($container).css("position","fixed"),n=s(e).outerWidth(),s(e).remove(),!(n<h)||s(this).hasClass("always-dropdown"))return!1;var e,n;s(this).appendTo($container),h-=s(this).outerWidth()}),this.options.droptabs.pullDropdownRight||s(n).is(":last-child")||s(n).detach().insertAfter($container.find("li:last-child"))}a().length<=0?n.hide():n.show()},activateTab:function(e){t.isNumber(e)&&s(this.$tabs[e]).plugin(l.prototype.pluginName).show()},addTab:function(){},removeTab:function(){}});return a.register(h),c.TabStrip=h}),define("skylark-domx-plugins-panels/toolbar",["skylark-langx/langx","skylark-domx-query","skylark-domx-plugins-base","./panels","./panel"],function(t,e,n,i,r){var s=r.inherit({klassName:"Toolbar",pluginName:"lark.panels.toolbar",options:{toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0,template:'<div class="domx-toolbar"><ul></ul></div>',separator:{template:'<li><span class="separator"></span></li>'}},_construct:function(t,n){var i,s;r.prototype._construct.call(this,t,n),this.opts=this.options,this.wrapper=e(this._elm),this.list=this.wrapper.find("ul"),this.list.on("click",function(t){return!1}),this.wrapper.on("mousedown",(s=this,function(t){return s.list.find(".menu-on").removeClass(".menu-on")})),e(document).on("mousedown.toolbar",function(t){return function(e){return t.list.find(".menu-on").removeClass("menu-on")}}(this)),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&(this.wrapper.css("top",this.opts.toolbarFloatOffset),i=0,function(t){return function(){return t.wrapper.css("position","static"),t.wrapper.width("auto"),t.editor.editable.util.reflow(t.wrapper),t.wrapper.width(t.wrapper.outerWidth()),t.wrapper.css("left",t.editor.editable.util.os.mobile?t.wrapper.position().left:t.wrapper.offset().left),t.wrapper.css("position",""),i=t.wrapper.outerHeight(),t.editor.placeholderEl.css("top",i),!0}}(this))},addToolItem:function(t){return e(t._elm).appendTo(this.list),this},addSeparator:function(){return e(this.options.separator.template).appendTo(this.list),this}});return n.register(s),i.Toolbar=s}),define("skylark-domx-plugins-panels/wizard",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","skylark-domx-noder","skylark-domx-geom","skylark-domx-query","skylark-domx-plugins-base","./panels","./panel"],function(t,e,n,i,r,s,a,o,l){var c=l.inherit({klassName:"Wizard",pluginName:"lark.panels.wizard",options:{disablePreviousStep:!1,selectedItem:{step:-1}},_construct:function(e,n){l.prototype._construct.call(this,e,n),this.$element=this.$(),this.options.disablePreviousStep="previous"===this.$element.attr("data-restrict")||this.options.disablePreviousStep,this.currentStep=this.options.selectedItem.step,this.numSteps=this.$element.find(".steps li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next");var i=this.$nextBtn.children().detach();this.nextText=t.trim(this.$nextBtn.text()),this.$nextBtn.append(i);var r=this.$element.children(".steps-container");0===r.length&&(r=this.$element,this.$element.addClass("no-steps-container"),window&&window.console&&window.console.warn&&window.console.warn('please update your wizard markup to include ".steps-container" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup')),r=r.find(".steps"),this.$prevBtn.on("click.fu.wizard",t.proxy(this.previous,this)),this.$nextBtn.on("click.fu.wizard",t.proxy(this.next,this)),r.on("click.fu.wizard","li.complete",t.proxy(this.stepclicked,this)),this.selectedItem(this.options.selectedItem),this.options.disablePreviousStep&&(this.$prevBtn.attr("disabled",!0),this.$element.find(".steps").addClass("previous-disabled"))},destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function(t){var e,n,i,r,a,o,l=[].slice.call(arguments).slice(1),c=this.$element.find(".steps"),u=this.$element.find(".step-content");for(t=-1===t||t>this.numSteps+1?this.numSteps+1:t,l[0]instanceof Array&&(l=l[0]),a=c.find("li:nth-child("+t+")"),r=u.find(".step-pane:nth-child("+t+")"),a.length<1&&(a=null),e=0,n=l.length;e<n;e++)(o=s('<li data-step="'+t+'"><span class="badge badge-info"></span></li>')).append(l[e].label||"").append('<span class="chevron"></span>'),o.find(".badge").append(l[e].badge||t),(i=s('<div class="step-pane" data-step="'+t+'"></div>')).append(l[e].pane||""),a?(a.before(o),r.before(i)):(c.append(o),u.append(i)),t++;this.syncSteps(),this.numSteps=c.find("li").length,this.setState()},removeSteps:function(t,e){var n,i="nextAll",r=0,a=this.$element.find(".steps"),o=this.$element.find(".step-content");e=void 0!==e?e:1,t>a.find("li").length?n=a.find("li:last"):(n=a.find("li:nth-child("+t+")").prev()).length<1&&(i="children",n=a),n[i]().each(function(){var t=s(this),n=t.attr("data-step");if(!(r<e))return!1;t.remove(),o.find('.step-pane[data-step="'+n+'"]:first').remove(),r++}),this.syncSteps(),this.numSteps=a.find("li").length,this.setState()},setState:function(){var t=this.currentStep>1,e=1===this.currentStep,i=this.currentStep===this.numSteps;this.options.disablePreviousStep||this.$prevBtn.attr("disabled",!0===e||!1===t);var r=this.$nextBtn.attr("data-last");if(r){this.lastText=r;var a=this.nextText;!0===i?(a=this.lastText,this.$element.addClass("complete")):this.$element.removeClass("complete");var o=this.$nextBtn.children().detach();this.$nextBtn.text(a).append(o)}var l=this.$element.find(".steps li");l.removeClass("active").removeClass("complete"),l.find("span.badge").removeClass("badge-info").removeClass("badge-success");var c=".steps li:lt("+(this.currentStep-1)+")",u=this.$element.find(c);u.addClass("complete"),u.find("span.badge").addClass("badge-success");var h=".steps li:eq("+(this.currentStep-1)+")",d=this.$element.find(h);d.addClass("active"),d.find("span.badge").addClass("badge-info");var p=this.$element.find(".step-content"),f=d.attr("data-step");p.find(".step-pane").removeClass("active"),p.find('.step-pane[data-step="'+f+'"]:first').addClass("active"),this.$element.find(".steps").first().attr("style","margin-left: 0");var m=0;this.$element.find(".steps > li").each(function(){m+=s(this).outerWidth()});var g=0;if(g=this.$element.find(".actions").length?this.$element.width()-this.$element.find(".actions").first().outerWidth():this.$element.width(),m>g){var y=m-g;this.$element.find(".steps").first().attr("style","margin-left: -"+y+"px"),this.$element.find("li.active").first().position().left<200&&((y+=this.$element.find("li.active").first().position().left-200)<1?this.$element.find(".steps").first().attr("style","margin-left: 0"):this.$element.find(".steps").first().attr("style","margin-left: -"+y+"px"))}if(void 0!==this.initialized){var v=n.create("changed.fu.wizard");this.$element.trigger(v,{step:this.currentStep})}this.initialized=!0},stepclicked:function(t){var e=s(t.currentTarget),i=this.$element.find(".steps li").index(e);if(!(i<this.currentStep&&this.options.disablePreviousStep)){var r=n.create("stepclicked.fu.wizard");this.$element.trigger(r,{step:i+1}),r.isDefaultPrevented()||(this.currentStep=i+1,this.setState())}},syncSteps:function(){var t=1,e=this.$element.find(".steps"),n=this.$element.find(".step-content");e.children().each(function(){var e=s(this),i=e.find(".badge"),r=e.attr("data-step");isNaN(parseInt(i.html(),10))||i.html(t),e.attr("data-step",t),n.find('.step-pane[data-step="'+r+'"]:last').attr("data-step",t),t++})},previous:function(){if(!this.options.disablePreviousStep&&1!==this.currentStep){var t=n.create("actionclicked.fu.wizard");if(this.$element.trigger(t,{step:this.currentStep,direction:"previous"}),!t.isDefaultPrevented()&&(this.currentStep-=1,this.setState(),this.$prevBtn.is(":focus"))){var e=this.$element.find(".active").find("input, select, textarea")[0];void 0!==e?s(e).focus():0===this.$element.find(".active input:first").length&&this.$prevBtn.is(":disabled")&&this.$nextBtn.focus()}}},next:function(){var t=n.create("actionclicked.fu.wizard");if(this.$element.trigger(t,{step:this.currentStep,direction:"next"}),!t.isDefaultPrevented()&&(this.currentStep<this.numSteps?(this.currentStep+=1,this.setState()):this.$element.trigger("finished.fu.wizard"),this.$nextBtn.is(":focus"))){var e=this.$element.find(".active").find("input, select, textarea")[0];void 0!==e?s(e).focus():0===this.$element.find(".active input:first").length&&this.$nextBtn.is(":disabled")&&this.$prevBtn.focus()}},selectedItem:function(t){var e,n;return t?(n=t.step||-1,1<=(n=Number(this.$element.find('.steps li[data-name="'+n+'"]').first().attr("data-step"))||Number(n))&&n<=this.numSteps?(this.currentStep=n,this.setState()):(n=this.$element.find(".steps li.active:first").attr("data-step"),isNaN(n)||(this.currentStep=parseInt(n,10),this.setState())),e=this):(e={step:this.currentStep},this.$element.find(".steps li.active:first[data-name]").length&&(e.stepname=this.$element.find(".steps li.active:first").attr("data-name"))),e}});return a.register(c),o.Wizard=c}),define("skylark-domx-plugins-panels/main",["./panels","./accordion","./collapsible","./floating","./pagination","./panel","./tabstrip","./toolbar","./wizard"],function(t){return t}),define("skylark-domx-plugins-panels",["skylark-domx-plugins-panels/main"],function(t){return t}),define("skylark-domx-plugins-embeds/embeds",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.embeds={}}),define("skylark-domx-plugins-embeds/embed-runner",["skylark-domx-iframes/create","skylark-domx/query","skylark-domx-plugins-base","./embeds"],function(t,e,n,i){"use strict";var r=e(window),s=e(document),a=n.Plugin.inherit({klassName:"EmbedRunner",pluginName:"lark.embeds.runner",options:{runnerUrl:"",runnerName:""},_construct:function(t,e){this.overrided(t,e),this.runner={},this.runner.origin="*"},prepare:function(){return this._inited?this._inited.promise:(this._inited=new Deferred,t({url:this.options.runnerUrl,className:"stretch",sandbox:"allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts",frameBorder:"0",name:"<proxy>",contentWindowName:this.options.runnerName,onload:()=>{window.postMessage&&(r.on("message",t=>{this.handleMessage(t.originalEvent)}),this.setup(iframe),this._inited.resolve())},onerror:t=>{this._inited.reject(t)}},this._elm),s.on("codeChange.live",(t,e)=>{"setValue"!==e.origin&&e.origin}),s.on("console:run",(t,e)=>{this.postMessage("console:run",e)}),s.on("console:load:script",(t,e)=>{this.postMessage("console:load:script",e)}),s.on("console:load:dom",(t,e)=>{this.postMessage("console:load:dom",e)}),inited.promise)},setup:function(t){this.runner.window=t.contentWindow,this.runner.iframe=t},error:function(){window.console.warn.apply(console,["Renderer:"].concat([].slice.call(arguments)))},handleMessage:function(t){if(t.origin){var e=t.data;if("string"==typeof e){try{e="string"==typeof t.data?JSON.parse(t.data):t.data}catch(t){return this.error("Error parsing event data:",t.message)}if("function"!=typeof this[e.type])return!1;try{this[e.type](e.data)}catch(t){this.error(t.message)}}}},postMessage:function(t,e){if(!this.runner.window)return this.error("postMessage: No connection to runner window.");this.runner.window.postMessage(JSON.stringify({type:t,data:e}),this.runner.origin)},complete:function(){try{store.sessionStorage.removeItem("runnerPending")}catch(t){}},focus:function(){},console:function(t){var e=t.method,n=t.args;window._console&&(window._console[e]||(e="log"),window._console[e].apply(window._console,n))},"console:load:script:success":function(t){s.trigger("console:load:script:success",t)},"console:load:script:error":function(t){s.trigger("console:load:script:error",t)},"console:load:dom:success":function(t){s.trigger("console:load:dom:success",t)},"console:load:dom:error":function(t){s.trigger("console:load:dom:error",t)}});return i.EmbedRunner=a}),define("skylark-domx-plugins-embeds/embed-vimeo",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-domx-plugins-base","./embeds"],function(t,e,n,i,r){"use strict";var s=i.Plugin.inherit({klassName:"EmbedVimeo",pluginName:"lark.embeds.vimeo",options:{},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),this.url=e.url,this.videoId=e.videoId,this.playerId=e.playerId,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e,i=this,r="//f.vimeocdn.com/js/froogaloop2.min.js",s=document.getElementsByTagName("script"),a=s.length;function o(){!e&&i.playOnReady&&i.play(),e=!0}for(;a;)if(s[a-=1].src===r){t=s[a];break}t||((t=document.createElement("script")).src=r),n(t).on("load",o),s[0].parentNode.insertBefore(t,s[0]),/loaded|complete/.test(t.readyState)&&o()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent("play",function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent("pause",function(){t.onPause()}),this.player.addEvent("finish",function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit("playing"),this.playStatus=2)},onPause:function(){this.emit("pause"),delete this.playStatus},insertIframe:function(){var t=document.createElement("iframe");t.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),t.id=this.playerId,this._elm.parentNode.replaceChild(t,this._elm),this._elm=t},play:function(){var t=this;this.playStatus||(this.emit("play"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this._elm),this.player.addEvent("ready",function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.emit("pause"),delete this.playStatus)}});return r.EmbedVimeo=s}),define("skylark-domx-plugins-embeds/embed-youtube",["skylark-langx/langx","skylark-domx-noder","skylark-domx-query","skylark-domx-plugins-base","./embeds"],function(t,e,n,i,r){"use strict";var s=i.Plugin.inherit({klassName:"EmbedYoutube",pluginName:"lark.embeds.youtube",options:{},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),this.videoId=e.videoId,this.playerVars=e.playerVars,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e=this,n=window.onYouTubeIframeAPIReady,i="https://www.youtube.com/iframe_api",r=document.getElementsByTagName("script"),s=r.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),e.playOnReady&&e.play()};s;)if(r[s-=1].src===i)return;(t=document.createElement("script")).src=i,r[0].parentNode.insertBefore(t,r[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit("playing"),this.playStatus=2)},onPause:function(){t.defer(()=>{this.checkSeek()},2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.emit("pause"),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.trigger("error",t)},play:function(){var t=this;this.playStatus||(this.emit("play"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this._elm,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.emit("pause"),delete this.playStatus)}});return r.EmbedYoutube=s}),define("skylark-domx-plugins-embeds/main",["./embeds","./embed-runner","./embed-vimeo","./embed-youtube"],function(t){return t}),define("skylark-domx-plugins-embeds",["skylark-domx-plugins-embeds/main"],function(t){return t}),define("skylark-domx-plugins-sandboxs/sandboxs",["skylark-domx-plugins-base/plugins"],function(t){"use strict";return t.sandboxs={}}),define("skylark-domx-plugins-sandboxs/sandbox",["skylark-langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-eventer","skylark-domx-query","skylark-domx-plugins-base","./sandboxs"],function(t,e,n,i,r,s,a){"use strict";var o=function(t){return t.contentWindow||t.contentDocument.parentWindow},l=s.Plugin.inherit({klassName:"Sandbox",pluginName:"lark.sandboxs.sandbox",options:{name:"Output",allows:"allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts",frameBorder:"0",cssTextTagId:"sandbox-css"},_construct:function(t,e){this.overrided(t,e),this.target=t,this.old=null,this.active=null,this.state={},this.guid=+new Date},create:function(){var t=document.createElement("iframe");return t.setAttribute("sandbox",this.options.allows),t.setAttribute("frameBorder",this.options.frameBorder),t.setAttribute("name",this.options.name),t.id=this.guid++,t},use:function(e,i){if(!this.target)throw new Error("Sandbox has no target element.");this.old=this.active,this.saveState(this.old),this.active=e,n.prepend(this.target,e),t.defer(function(){i&&i();for(var t,e=this.target.getElementsByTagName("iframe"),r=e.length,s=0,a=this.active.id;t=e[s],s<r;s++)t.id!==a&&(n.remove(t),r--)}.bind(this))},restoreState:function(t,e){if(!t)return{};var n=o(t);if(!n)return{};e.scroll&&n.scrollTo(e.scroll.x,e.scroll.y)},saveState:function(t){if(!t)return{};var e=o(t);return e?{scroll:{x:e.scrollX,y:e.scrollY}}:{}},wrap:function(t,e){t&&(e=e||{},i.on(t,"resize",function(){i.resized(this._elm)}),i.on(t,"focus",()=>{i.trigger(this._elm,"focused")}))},getSizeProperties:function(t){return{width:t.innerWidth||t.document.documentElement.clientWidth,height:t.innerHeight||t.document.documentElement.clientHeight,offsetWidth:t.document.documentElement.offsetWidth,offsetHeight:t.document.documentElement.offsetHeight}},eval:function(t){if(!this.active)throw new Error("sandbox.eval: has no active iframe.");var e=/(^.|\b)console\.(\S+)/g;if(e.test(t)){t=t.replace(e,function(t,e,n){return"window.runnerWindow.proxyConsole."+n})}var n=this.active.contentWindow,i=null,r="log";try{i=n.eval(t)}catch(t){i=t.message,r="error"}return proxyConsole[r](i)},injectScript:function(t,e){if(!this.active)throw new Error("sandbox.injectScript: has no active iframe.");var n=this.active.contentWindow,i=n.document,r=i.createElement("script");r.src=t,r.onload=function(){e()},r.onerror=function(){e('Failed to load "'+t+'"')},i.body.appendChild(r)},injectDOM:function(t,e){if(!this.active)throw new Error("sandbox.injectDOM: has no active iframe.");var n=this.active.contentWindow,i=n.document;try{i.body.innerHTML=t}catch(t){e("Failed to load DOM.")}e()},injectCssText:function(t){if(this.active){var e=this.active.contentDocument.getElementById(this.options.cssTextTagId);if(e)return void(e.innerHTML=t)}},render:function(t,e){var n=this.create(e);this.use(n,()=>{var i=n.contentDocument,r=n.contentWindow||n.contentDocument.parentWindow;i||(i=r.document);let s=e.proxyConsole,a=e.loopProtect;s.methods.forEach(function(t){delete s[t]}),i.open(),i.write(""),r.runnerWindow={proxyConsole:s,protect:a},r.console=s,r.onerror=function(t,e,n,i,r){s._raw("error",r&&r.stack?r.stack:t+" (line "+n+")")},i.write(t),i.close(),this.wrap(r,e)})}});return s.register(l),a.Sandbox=l}),define("skylark-domx-plugins-sandboxs/main",["./sandboxs","./sandbox"],function(t){return t}),define("skylark-domx-plugins-sandboxs",["skylark-domx-plugins-sandboxs/main"],function(t){return t}),define("skylark-domx-plugins-menus/menus",["skylark-langx/skylark"],function(t){return t.attach("domx.plugins.menus")}),define("skylark-domx-plugins-menus/menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus"],function(t,e,n,i,r){"use strict";var s=i.Plugin.inherit({klassName:"Menu",pluginName:"lark.menus.menu",options:{template:"",classes:{base:"lark-menu"},selectors:{container:null},item:{templates:{general:'<li class="menu-item"><a href="#" class="link"><%= title %></a></li>',separator:"",hasChildren:'<li class="menu-item hasChildren"><a href="#" class="link"><%= title %></a><ul class="submenu"></ul>'},classes:{base:"menu-item",active:"active",hasChildren:"hasChildren"},selectors:{general:"li",hasChildren:":has(ul)"}},submenu:{template:"<ul></ul>",classes:{base:"submenu"},selectors:{children:"> ul",descendant:"ul"}},data:{},onAction:null},_construct:function(t,n){i.Plugin.prototype._construct.call(this,t,n),this._$container=this.$(this.options.selectors.container),this.options.onAction&&this.listenTo(this._$container,"click",`.${this.options.item.classes.base}`,t=>{var n=e(t.currentTarget).data("item");this.options.onAction(n)})},renderMenuItemHtml:function(e){if(!this._renderItemHtml){let e=this.options.item.template;t.isString(e)?this._renderItemHtml=t.template(e):t.isFunction(e)&&(this._renderItemHtml=e)}return this._renderItemHtml(e)},renderGeneralMenuItem:function(n){if(!this._renderGeneralItemHtml){let e=this.options.item.templates.general;t.isString(e)?this._renderGeneralItemHtml=t.template(e):t.isFunction(e)&&(this._renderGeneralItemHtml=e)}return e(this._renderGeneralItemHtml(n))},renderHasChildrenMenuItem:function(n){if(!this._renderHasChildrenItemHtml){let e=this.options.item.templates.hasChildren;t.isString(e)?this._renderHasChildrenItemHtml=t.template(e):t.isFunction(e)&&(this._renderHasChildrenItemHtml=e)}return e(this._renderHasChildrenItemHtml(n))}});return i.register(s),r.Menu=s}),define("skylark-domx-plugins-menus/accordion-menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"AccordionMenu",pluginName:"lark.menus.accordion",_construct:function(t,e){s.prototype._construct.call(this,t,e),n.multitier(t,{togglable:!0,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})}});return i.register(a),r.AccordionMenu=a}),define("skylark-domx-plugins-menus/cascade-menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"CascadeMenu",pluginName:"lark.menus.cascade",_construct:function(t,e){s.prototype._construct.call(this,t,e),n.multitier(t,{togglable:!0,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})}});return i.register(a),r.CascadeMenu=a}),define("skylark-domx-plugins-menus/mega-menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"MegaMenu",pluginName:"lark.menus.mega",options:{menuBehaviour:"click",stickyHeader:!0,caret:!1,caretArrows:[{up:"caret-up",down:"caret-down",upUrl:"",downUrl:""}],highlighter:!0,followingHighlighter:!1,highlightColor:"",textHighlighter:!1,textHighlighterColor:"",animation:!1,animationClass:""},_construct:function(n,i){s.prototype._construct.call(this,n,i);let r=this.options;r.selector;var a=e(".main-links ul li a"),o=e(".menu-dropdown .menu-item-wrapper"),l=[],c=[],u=(e("#"+o.attr("id")),this.options.caretArrows[0].up),h=this.options.caretArrows[0].down;if(!1===r.stickyHeader?e(".mega-menu").removeClass("sticky-header"):e(".mega-menu").addClass("sticky-header"),!0===r.caret)var u=r.caretArrows[0].up,h=r.caretArrows[0].down;(r.caretArrows[0].up||r.caretArrows[0].down)&&(r.caretArrows[0].upUrl=null,r.caretArrows[0].downUrl=null),e("a[data-submenu]").append('<span class="caret '+h+'"></span>'),!0===r.caret&&""!==r.caretArrows[0].downUrl&&(e(".mega-menu span.caret").removeClass("undefined"),e(".mega-menu span.caret").addClass("caret-img down"),e(".mega-menu span.caret.caret-img.down").css({"background-image":"url("+r.caretArrows[0].downUrl+")"})),e("<style>\n            .mega-menu .main-links ul li a:hover{\n              border-color:"+r.highlightColor+"}\n          </style>").appendTo("head"),a.on(r.menuBehaviour,function(){a.removeClass("highlight"),a.css({"border-color":""})}),""===r.menuBehaviour&&(r.menuBehaviour="click"),a.each(function(n){var i=e(this).attr("data-submenu");l.push(e(this).attr("data-submenu")),e(this).on(r.menuBehaviour,function(){var s=t.inArray(i,c),d=e(this).find(".caret.caret-img");if(a.find("span").removeClass(u),a.find("span").addClass(h),l[n]!=c[s]||e(o[s]).hasClass("active")?(e(o[s]).removeClass("active"),e(this).find("span").removeClass(u),e(this).find("span").addClass(h)):(o.removeClass("active"),e(o[s]).addClass("active"),e(this).find("span").removeClass(h),e(this).find("span").addClass(u)),e(".menu-dropdown").find(".menu-item-wrapper").hasClass("active")&&(e(".mega-menu span.caret").addClass("down"),e(".mega-menu span.caret").css({"background-image":"url("+r.caretArrows[0].downUrl+")"})),d.hasClass("down")?(d.removeClass("down"),d.addClass("up"),d.css({"background-image":"url("+r.caretArrows[0].upUrl+")"})):(d.removeClass("up"),d.addClass("down"),d.css({"background-image":"url("+r.caretArrows[0].downUrl+")"})),(a.find("span").hasClass("caret-up")||e(this).find("span").hasClass("up")&&!e(this).hasClass("highlight"))&&(e(this).addClass("highlight"),e(this).css({"border-color":r.highlightColor})),o.hasClass("dropdown")){var p=e("#"+c[s]+".dropdown");p.css({left:e(this).offset().left})}})}),!0===r.followingHighlighter&&(e(".main-links ul").append('<div class="follow-highlighter"></div>'),a.mouseover(function(t,n){t.pageX,e(this).offset().left,e(this).innerWidth();e(".follow-highlighter").css({display:"block"}),e(".main-links ul").addClass("follow-highlighter-enabled"),e(".follow-highlighter").css({width:e(this).innerWidth(),left:e(this).offset().left,"background-color":r.highlightColor})})),e(".main-links ul").each(function(){e(this).mouseleave(function(){e(".main-links ul").removeClass("follow-highlighter-enabled"),e(".follow-highlighter").css({display:"none",left:e(a[0]).offset().left})})}),!1===r.highlighter&&(e(".main-links").addClass("disable-highlighter"),e(".follow-highlighter").remove()),!0===r.textHighlighter&&e(".main-links").addClass("text-highlighter"),r.textHighlighterColor&&e("style").append(".mega-menu .text-highlighter.main-links ul li a:hover{\n            color:"+r.textHighlighterColor+"}"),o.each(function(t){c.push(e(o[t]).attr("id"))}),!0===r.animation&&o.addClass(r.animationClass),e(".mobile-nav-icon a").click(function(){e(".follow-highlighter").remove(),e(".main-links").hasClass("active")?(e(".main-links").removeClass("active"),e(".menu-dropdown").hide()):(e(".main-links").addClass("active"),e(".menu-dropdown").show())}),e(".menu-item-wrapper").prepend('<a href="#" class="back-link">Back</a>'),e(window).resize(function(){e(window).width()<768?e(".mega-menu").hasClass("sticky-header")&&(e(".mega-menu").addClass("responsive-menu"),e(".main-links").css({"margin-top":e(".mobile-nav-icon").outerHeight()+"px"})):e(".main-links").css({"margin-top":"0px"})})}});return i.register(a),r.MegaMenu=a}),define("skylark-domx-plugins-menus/nav-menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"NavMenu",pluginName:"lark.menus.nav",options:{item:{templates:{}}},_construct:function(t,e){s.prototype._construct.call(this,t,e),this.options.data.items&&this.resetItems(this.options.data.items),n.multitier(t,{togglable:!1,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})},resetItems:function(t){let e=this;let n=this.$(this.options.selectors.container);t.forEach(t=>{!function t(n,i){let r;r=n.children?e.renderHasChildrenMenuItem(n):e.renderGeneralMenuItem(n);r.data("item",n);i.append(r);if(n.children){let i=r.find(e.options.submenu.selectors.children);n.children.forEach(e=>{t(e,i)})}}(t,n)})}});return i.register(a),r.NavMenu=a}),define("skylark-domx-plugins-toggles/checkbox",["skylark-langx/langx","skylark-domx/browser","skylark-domx/eventer","skylark-domx/noder","skylark-domx/geom","skylark-domx/query","skylark-domx-plugins-base","./toggles"],function(t,e,n,i,r,s,a,o){var l=a.Plugin.inherit({klassName:"Checkbox",pluginName:"lark.toggles.checkbox",options:{ignoreVisibilityCheck:!1},_construct:function(e,n){this.overrided(e,n);var i=this.$();if("label"!==e.tagName.toLowerCase())throw new Error("Checkbox must be initialized on the `label` that wraps the `input` element. See https://github.com/ExactTarget/fuelux/blob/master/reference/markup/checkbox.html for example of proper markup. Call `.checkbox()` on the `<label>` not the `<input>`");if(this.$label=i,this.$chk=this.$label.find('input[type="checkbox"]'),this.$container=i.parent(".checkbox"),!this.options.ignoreVisibilityCheck&&this.$chk.css("visibility").match(/hidden|collapse/))throw new Error("For accessibility reasons, in order for tab and space to function on checkbox, checkbox `<input />`'s `visibility` must not be set to `hidden` or `collapse`. See https://github.com/ExactTarget/fuelux/pull/1996 for more details.");var r=this.$chk.attr("data-toggle");this.$toggleContainer=s(r),this.$chk.on("change",t.proxy(this.itemchecked,this)),this.setInitialState()},setInitialState:function(){var t=this.$chk,e=t.prop("checked"),n=t.prop("disabled");this.setCheckedState(t,e),this.setDisabledState(t,n)},setCheckedState:function(t,e){var n=t,i=this.$label,r=this.$toggleContainer;e?(n.prop("checked",!0),i.addClass("checked"),r.removeClass("hide hidden"),i.trigger("checked.lark.toggles.checkbox")):(n.prop("checked",!1),i.removeClass("checked"),r.addClass("hidden"),i.trigger("unchecked.lark.toggles.checkbox")),i.trigger("changed.lark.toggles.checkbox",e)},setDisabledState:function(t,e){var n=s(t),i=this.$label;return e?(n.prop("disabled",!0),i.addClass("disabled"),i.trigger("disabled.lark.toggles.checkbox")):(n.prop("disabled",!1),i.removeClass("disabled"),i.trigger("enabled.lark.toggles.checkbox")),n},itemchecked:function(t){var e=s(t.target),n=e.prop("checked");this.setCheckedState(e,n)},toggle:function(){var t=this.isChecked();t?this.uncheck():this.check()},check:function(){this.setCheckedState(this.$chk,!0)},uncheck:function(){this.setCheckedState(this.$chk,!1)},isChecked:function(){var t=this.$chk.prop("checked");return t},enable:function(){this.setDisabledState(this.$chk,!1)},disable:function(){this.setDisabledState(this.$chk,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}});return l.prototype.getValue=l.prototype.isChecked,a.register(l),o.Checkbox=l}),define("skylark-domx-plugins-toggles/radio",["skylark-langx/langx","skylark-domx/browser","skylark-domx/eventer","skylark-domx/noder","skylark-domx/geom","skylark-domx/query","skylark-domx-plugins-base","./toggles"],function(t,e,n,i,r,s,a,o){var l=a.Plugin.inherit({klassName:"Radio",pluginName:"lark.toggles.radio",options:{ignoreVisibilityCheck:!1},_construct:function(e,n){if(this.overrided(e,n),"label"!==e.tagName.toLowerCase())throw new Error("Radio must be initialized on the `label` that wraps the `input` element. See https://github.com/ExactTarget/fuelux/blob/master/reference/markup/radio.html for example of proper markup. Call `.radio()` on the `<label>` not the `<input>`");if(this.$label=this.$(),this.$radio=this.$label.find('input[type="radio"]'),this.groupName=this.$radio.attr("name"),!this.options.ignoreVisibilityCheck&&this.$radio.css("visibility").match(/hidden|collapse/))throw new Error("For accessibility reasons, in order for tab and space to function on radio, `visibility` must not be set to `hidden` or `collapse`. See https://github.com/ExactTarget/fuelux/pull/1996 for more details.");var i=this.$radio.attr("data-toggle");this.$toggleContainer=s(i),this.$radio.on("change",t.proxy(this.itemchecked,this)),this.setInitialState()},setInitialState:function(){var t=this.$radio,e=t.prop("checked"),n=t.prop("disabled");this.setCheckedState(t,e),this.setDisabledState(t,n)},resetGroup:function(){var t=s('input[name="'+this.groupName+'"]');t.each(function(t,e){var n=s(e),i=n.parent(),r=n.attr("data-toggle"),a=s(r);i.removeClass("checked"),a.addClass("hidden")})},setCheckedState:function(t,e){var n=t,i=n.parent(),r=n.attr("data-toggle"),a=s(r);e?(this.resetGroup(),n.prop("checked",!0),i.addClass("checked"),a.removeClass("hide hidden"),i.trigger("checked.lark.toggles.radio")):(n.prop("checked",!1),i.removeClass("checked"),a.addClass("hidden"),i.trigger("unchecked.lark.toggles.radio")),i.trigger("changed.lark.toggles.radio",e)},setDisabledState:function(t,e){var n=s(t),i=this.$label;return e?(n.prop("disabled",!0),i.addClass("disabled"),i.trigger("disabled.lark.toggles.radio")):(n.prop("disabled",!1),i.removeClass("disabled"),i.trigger("enabled.lark.toggles.radio")),n},itemchecked:function(t){var e=s(t.target);this.setCheckedState(e,!0)},check:function(){this.setCheckedState(this.$radio,!0)},uncheck:function(){this.setCheckedState(this.$radio,!1)},isChecked:function(){var t=this.$radio.prop("checked");return t},enable:function(){this.setDisabledState(this.$radio,!1)},disable:function(){this.setDisabledState(this.$radio,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}});return l.prototype.getValue=l.prototype.isChecked,a.register(l),o.Radio=l}),define("skylark-domx-plugins-toggles/main",["./toggles","./checkbox","./collapse","./radio","./tab"],function(t){return t}),define("skylark-domx-plugins-toggles",["skylark-domx-plugins-toggles/main"],function(t){return t}),define("skylark-domx-plugins-menus/tree-menu",["skylark-langx/langx","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","./menus","./menu","skylark-domx-plugins-toggles"],function(t,e,n,i,r,s){"use strict";var a=s.inherit({klassName:"Tree",pluginName:"lark.menus.tree",_construct:function(e,i){s.prototype._construct.call(this,e,i),n.multitier(e,t.mixin({hide:function(t){t.plugin("lark.toggles.collapse").hide()},toggle:function(t){t.plugin("lark.toggles.collapse").toggle()}},this.options))}});return i.register(a),r.TreeMenu=a}),define("skylark-devices-keyboard/keyboard",["skylark-langx-ns"],function(t){var e={isShiftDown:function(t){return null!=t&&t.shiftKey},isAltDown:function(t){return null!=t&&t.altKey},isControlDown:function(t){return null!=t&&t.ctrlKey},isMetaDown:function(t){return null!=t&&t.metaKey}};return t.attach("devices.keyboard",e)}),define("skylark-devices-keyboard/keys",["./keyboard"],function(t){var e={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,INSERT:45,DEL:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return t.keys=e}),define("skylark-domx-plugins-menus/popup-menu",["skylark-langx/langx","skylark-devices-keyboard/keys","skylark-domx-noder","skylark-domx-styler","skylark-domx-query","skylark-domx-lists","skylark-domx-plugins-base","skylark-domx-plugins-popups/popups","./menus","./menu"],function(t,e,n,i,r,s,a,o,l,c){"use strict";var u=c.inherit({klassName:"PopupMenu",pluginName:"lark.menus.popup",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},position:{my:"left top",at:"right top"},role:"menu",item:{classes:{base:"menu-item",active:"active",disabled:"disabled",wrapper:"menu-item-wrapper"},selector:"> *"},blur:null,focus:null,select:null},_construct:function(t,e){c.prototype._construct.call(this,t,e),this.element=this.$(),this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.attr({role:this.options.role,tabIndex:0}),this.listenTo(this.element,{mousedown:function(t){t.preventDefault(),this._activateItem(t)},click:function(t){var e=r(t.target),i=r(n.active());!this.mouseHandled&&e.not(`.${this.options.item.classes.disable}`).length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(`.${this.options.submenu.classes.base}`).length?this.expand(t):!this.element.is(":focus")&&i.closest(`.${this.options.submenu.classes.base}`).length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(`.${this.options.submenu.classes.base}`).length&&clearTimeout(this.timer)))},mouseenter:"_activateItem",mousemove:"_activateItem"},`.${this.options.item.classes.base}`),this.listenTo(this.element,{mouseleave:"collapseAll",focus:function(t,e){var n=this.active||this._menuItems().first();e||this.focus(t,n)},blur:function(t){this._delay(function(){var e=!n.contains(this.element[0],n.active());e&&this.collapseAll(t)})},keydown:"_keydown"}),this.listenTo(this.element,"mouseleave",`.${this.options.submenu.classes.base}`,"collapseAll"),this.listenTo(r(document),{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var e=r(t.target).closest(`.${this.options.item.classes.base}`),n=r(t.currentTarget);e[0]===n[0]&&(n.is(`.${this.options.item.classes.active}`)||(n.siblings().children(`.${this.options.item.classes.active}`).removeClass(this.options.item.classes.active),this.focus(t,n)))}},_keydown:function(t){var n,i,r,s,a=!0;switch(t.keyCode){case e.PAGE_UP:this.previousPage(t);break;case e.PAGE_DOWN:this.nextPage(t);break;case e.HOME:this._move("first","first",t);break;case e.END:this._move("last","last",t);break;case e.UP:this.previous(t);break;case e.DOWN:this.next(t);break;case e.LEFT:this.collapse(t);break;case e.RIGHT:this.active&&!this.active.is(`.${this.options.item.classes.disabled}`)&&this.expand(t);break;case e.ENTER:case e.SPACE:this._activate(t);break;case e.ESC:this.collapse(t);break;default:a=!1,i=this.previousFilter||"",s=!1,r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===i?s=!0:r=i+r,n=this._filterMenuItems(r),(n=s&&-1!==n.index(this.active.next())?this.active.nextAll(`.${this.options.item.classes.base}`):n).length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(`.${this.options.item.classes.disabled}`)&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),(i=this.active.children(`.${this.options.item.classes.wrapper}`)).addClass(this.options.item.classes.active),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(`.${this.options.item.classes.base}`).children(`.${this.options.item.classes.wrapper}`).addClass(this.options.item.classes.active),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(`.${this.options.submenu.classes.base}`)).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this.trigger("focus",{item:e})},_scrollIntoView:function(t){var e,n,r,s,a,o;this._hasScroll()&&(e=parseFloat(i.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(i.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-e-n,s=this.activeMenu.scrollTop(),a=this.activeMenu.height(),o=t.outerHeight(),r<0?this.activeMenu.scrollTop(s+r):r+o>a&&this.activeMenu.scrollTop(s+r-a+o))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children(`.${this.options.item.classes.wrapper}`).removeClass(this.options.item.classes.active),this.trigger("blur",{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),this.timer=this._delay(function(){this._close(),this._open(t)},this.delay)},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(`.${this.options.submenu.classes.base}`).not(e.parents(`.${this.options.submenu.classes.base}`)).hide().attr("aria-hidden","true"),o.open(e.attr("aria-expanded","true"),{position:n})},collapseAll:function(t,e){clearTimeout(this.timer),this.timer=this._delay(function(){var n=e?this.element:r(t&&t.target).closest(this.element.find(`.${this.options.submenu.classes.base}`));n.length||(n=this.element),this._close(n),this.blur(t),n.find(`.${this.options.item.classes.active}`).removeClass(this.options.item.classes.active),this.activeMenu=n},e?0:this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),o.close(t.find(`.${this.options.submenu.classes.base}`).attr("aria-expanded","false"))},_closeOnDocumentClick:function(t){return!r(t.target).closest(`.${this.options.submenu.classes.base}`).length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(`.${this.options.item.classes.base}`,this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this._menuItems(this.active.children(`.${this.options.submenu.classes.base}`)).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(`.${this.options.item.classes.base}`).length},isLastItem:function(){return this.active&&!this.active.nextAll(`.${this.options.item.classes.base}`).length},_menuItems:function(t){return(t||this.element).find(this.options.items).filter(`.${this.options.item.classes.base}`)},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](`.${this.options.item.classes.base}`).last():this.active[t+"All"](`.${this.options.item.classes.base}`).first()),i&&i.length&&this.active||(i=this._menuItems(this.activeMenu)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(`.${this.options.item.classes.base}`).each(function(){return(e=r(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(`.${this.options.item.classes.base}`).each(function(){return(e=r(this)).offset().top-n+i>0}),this.focus(t,e)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||r(t.target).closest(`.${this.options.item.classes.base}`);var e={item:this.active};this.active.has(`.${this.options.submenu.classes.base}`).length||this.collapseAll(t,!0),this.trigger("select",e)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(`.${this.options.item.classes.base}`).filter(function(){return i.test(t.trim(r(this).children(`.${this.options.item.classes.wrapper}`).text()))})}});return a.register(u),l.PopupMenu=u}),define("skylark-domx-plugins-menus/main",["./menus","./accordion-menu","./cascade-menu","./mega-menu","./nav-menu","./tree-menu","./popup-menu"],function(t){return t}),define("skylark-domx-plugins-menus",["skylark-domx-plugins-menus/main"],function(t){return t}),define("skylark-domx-plugins-uploads/uploads",["skylark-domx-plugins-base/plugins","skylark-domx-files/dropzone","skylark-domx-files/pastezone","skylark-domx-files/picker"],function(t){var e=function(){return e};return t.uploads=e}),define("skylark-langx-emitter/main",["./emitter","./evented"],function(t){return t}),define("skylark-langx-emitter",["skylark-langx-emitter/main"],function(t){return t}),define("skylark-domx-plugins-uploads/single-uploader",["skylark-langx-emitter","skylark-langx-async/deferred","skylark-domx-velm","skylark-domx-plugins-base","./uploads"],function(t,e,n,i,r){return r.SingleUploader=class extends i.Plugin{get klassName(){return"SingleUploader"}get pluginName(){return"lark.uploads.single"}get options(){return{selectors:{picker:".file-picker",dropzone:".file-dropzone",pastezone:".file-pastezone",startUploads:".start-uploads",cancelUploads:".cancel-uploads"}}}constructor(t,e){super(t,e),this._velm=n(this._elm),this._initFileHandlers()}_initFileHandlers(){var t=this,e=this.options.selectors,n=e.dropzone,i=e.pastezone,r=e.picker;n&&this._velm.$(n).dropzone({dropped:function(e){t._addFile(e[0])}}),i&&this._velm.$(i).pastezone({pasted:function(e){t._addFile(e[0])}}),r&&this._velm.$(r).picker({multiple:!0,picked:function(e){t._addFile(e[0])}})}_addFile(t){this.emit("added",t)}destroy(){}}}),define("skylark-net-http/xhr",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-funcs","skylark-langx-async/deferred","skylark-langx-emitter/evented","skylark-langx-urls/is-cross-origin","./http"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(t){return a||(a=document.createElement("a")),a.href=t,a.href},a,Xhr=function(){var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{}};function mimeToDataType(t){if(t&&(t=t.split(";",2)[0]),t){if(t==htmlType)return"html";if(t==jsonType)return"json";if(scriptTypeRE.test(t))return"script";if(xmlTypeRE.test(t))return"xml"}return"text"}function appendQuery(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&"string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||("string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(t,e,n,i){var r,s=isArray(e),a=isPlainObject(e);each(e,function(e,o){r=type(o),i&&(e=n?i:i+"["+(a||"object"==r||"array"==r?e:"")+"]"),!i&&s?t.add(o.name,o.value):"array"==r||!n&&"object"==r?serialize(t,o,n,e):t.add(e,o)})}var param=function(t,e){var n=[];return n.add=function(t,e){isFunction(e)&&(e=e()),null==e&&(e=""),this.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},serialize(n,t,e),n.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),"blob"!=dataType&&"arraybuffer"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type"));try{"script"==dataType?eval(xhr.responseText):result="xml"==dataType?xhr.responseXML:"json"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):"blob"==dataType?xhr.response:"arraybuffer"==dataType?xhr.response:xhr.responseText}catch(t){error=t}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||isCrossOrigin(url)||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var t=this._,e=t.xhr;e&&e.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type="GET",this._request(t)},post:function(t){return(t=t||{}).type="POST",this._request(t)},patch:function(t){return(t=t||{}).type="PATCH",this._request(t)},put:function(t){return(t=t||{}).type="PUT",this._request(t)},del:function(t){return(t=t||{}).type="DELETE",this._request(t)},init:function(t){this._={options:t||{}}}});return["request","get","post","put","del","patch"].forEach(function(t){Xhr[t]=function(e,n){var i=new Xhr({url:e});return i[t](n)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define("skylark-net-http/upload",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-async/deferred","skylark-langx-emitter/evented","./xhr","./http"],function(t,e,n,i,r,s,a){var o=Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice,l=r.inherit({klassName:"Upload",_construct:function(t){this._options=e.mixin({debug:!1,url:"/upload",headers:{},maxConnections:999,maxChunkSize:void 0,onProgress:function(t,e,n,i){},onComplete:function(t,e,n,i,r){},onCancel:function(t,e){},onFailure:function(t,e,n){}},t),this._queue=[],this._params=[],this._files=[],this._xhrs=[],this._loaded=[]},add:function(t){return this._files.push(t)-1},send:function(t,n){if(this._files[t]&&!(this._queue.indexOf(t)>-1)){var i=this._queue.push(t),r=e.clone(n);this._params[t]=r,i<=this._options.maxConnections&&this._send(t,this._params[t])}},sendAll:function(t){for(var e=0;e<this._files.length;e++)this.send(e,t)},cancel:function(t){this._cancel(t),this._dequeue(t)},cancelAll:function(){for(var t=0;t<this._queue.length;t++)this._cancel(this._queue[t]);this._queue=[]},getName:function(t){var e=this._files[t];return null!=e.fileName?e.fileName:e.name},getSize:function(t){var e=this._files[t];return null!=e.fileSize?e.fileSize:e.size},getLoaded:function(t){return this._loaded[t]||0},_send:function(t,n){var i,r=this._options,a=this.getName(t),l=this.getSize(t),c=r.maxChunkSize||0,u=0,h=this._files[t],d={headers:e.clone(r.headers)};this._loaded[t]=this._loaded[t]||0;var p=this._xhrs[t]=new s({url:r.url});if(c)d.data=o.call(h,this._loaded[t],this._loaded[t]+c,h.type),i=d.data.size,d.headers["content-range"]="bytes "+this._loaded[t]+"-"+(this._loaded[t]+i-1)+"/"+l,d.headers["Content-Type"]="application/octet-stream";else{i=l;var f=n.formParamName,m=n.formData;f?(m||(m=new FormData),m.append(f,h),d.data=m):(d.headers["Content-Type"]=h.type||"application/octet-stream",d.data=h)}var g=this;p.post(d).progress(function(e){e.lengthComputable&&(u+=e.loaded,g._loaded[t]=g._loaded[t]+e.loaded,g._options.onProgress(t,a,g._loaded[t],l))}).then(function(e,r,s){g._files[t]&&(u<i&&(g._loaded[t]=g._loaded[t]+i-u,g._options.onProgress(t,a,g._loaded[t],l)),g._loaded[t]<l?g._send(t,n):(g._options.onComplete(t,a,e,r,s),g._files[t]=null,g._xhrs[t]=null,g._dequeue(t)))}).catch(function(e){g._options.onFailure(t,a,e),g._files[t]=null,g._xhrs[t]=null,g._dequeue(t)})},_cancel:function(t){this._options.onCancel(t,this.getName(t)),this._files[t]=null,this._xhrs[t]&&(this._xhrs[t].abort(),this._xhrs[t]=null)},getQueue:function(){return this._queue},_dequeue:function(t){var e=n.inArray(t,this._queue);this._queue.splice(e,1);var i=this._options.maxConnections;if(this._queue.length>=i&&e<i){var r=this._queue[i-1];this._send(r,this._params[r])}}});return l.send=function(t,e){var n=new l(e),i=n.add(t);return n.send(i,e)},l.sendAll=function(t,e){for(var n=new l(e),i=0,r=t.length;i<r;i++)this.add(file[i]);return n.send(e)},a.Upload=l}),define("skylark-domx-plugins-uploads/multi-uploader",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-velm","skylark-net-http/upload","skylark-domx-plugins-base","./uploads"],function(t,e,n,i,r,s,a){var o=s.Plugin.inherit({klassName:"MultiUploader",pluginName:"lark.uploads.multi",options:{uploadUrl:"/upload",params:{formParamName:"file"},maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,autoUpload:!1,selectors:{fileList:".file-list",fileItem:".file-item",nodata:".file-list .no-data",picker:".file-picker",dropzone:".file-dropzone",pastezone:".file-pastezone",startUploads:".start-uploads",cancelUploads:".cancel-uploads"},template:'<div class="lark-multiuploader">    <h3 class="popover-title">Upload files</h3>    <div class="popover-content container-fluid" class="file-list file-dropzone file-pastezone">        <div class="no-data"><em>Add files.</em></div>    </div>    <footer>        <button class="btn btn-warning pull-right btn-sm" id="cancel-uploads-button"><i class="icon-cancel"></i>Cancel uploads</button>        <span class="btn btn-success fileinput-button btn-sm" id="fileinput-button">            <i class="icon-plus"></i>            <span>Add files...</span>            <input id="fileupload" type="file" name="files[]" multiple="multiple">        </span>        <button class="btn btn-primary btn-sm" id="start-uploads-button"><i class="icon-start"></i>Start uploads</button>    </footer></div>',dataType:"json",fileItem:{selectors:{name:".name",size:".size",cancel:".cancel",clear:".clear",progress:".progress",message:".message"},template:'<div class="file-item row">   <div class="col-md-6"><span class="name"></span></div>   <div class="col-md-3">    <span class="size"></span>    <div class="progress hidden">        <div class="progress-label"></div>        <div class="bar"></div>    </div>    <span class="message hidden"></span>   </div>   <div class="col-md-3">    <button class="btn btn-warning btn-xs cancel"><i class="icon-remove"></i>Cancel</button>    <button class="btn btn-xs clear hidden">Clear</button>   </div></div>'}},_construct:function(t,e){this.overrided(t,e),this._velm=i(this._elm),this._initEventHandler(),this._initFileHandlers(),this._initUpoadHandler(),this._updateFileList()},_initFileHandlers:function(){var t=this,e=this.options.selectors,n=e.dropzone,i=e.pastezone,r=e.picker;n&&this._velm.$(n).dropzone({dropped:function(e){t._addFiles(e)}}),i&&this._velm.$(i).pastezone({pasted:function(e){t._addFiles(e)}}),r&&this._velm.$(r).picker({multiple:!0,picked:function(e){t._addFiles(e)}})},_initUpoadHandler:function(){var t=this;this._handler=new r({url:this.options.uploadUrl,maxConnections:this.options.maxConnections,onProgress:function(e,n,i,r){t._onProgress(e,n,i,r)},onComplete:function(e,n,i){t._onComplete(e,n,i)},onCancel:function(e,n){t._onCancel(e,n)},onFailure:function(e,n,i){t._onFailure(e,n,i)}})},_initEventHandler:function(){var t=this,e=this.options.selectors,i=this.options.fileItem.selectors;this._listElement;this._velm.$(e.fileList).on("click",i.cancel,function(i){var r=n(this).closest(e.fileItem),s=r.data("fileId");t._handler.cancel(s),r.remove(),t._updateFileList()}),this._velm.$(e.fileList).on("click",i.clear,function(i){var r=n(this).closest(e.fileItem);r.data("fileId");r.remove(),t._updateFileList()}),this._velm.$(e.cancelUploads).click(function(){var i=t._velm.$(e.fileList).find(e.fileItem);i.forEach(function(e){var i=n(e),r=i.data("fileId");t._handler.cancel(r),i.remove()}),t._updateFileList()}),this._velm.$(e.startUploads).click(function(){var i=t._velm.$(e.fileList).find(e.fileItem);i.forEach(function(e){var i=n(e),r=i.data("fileId");i.data("status")||t._handler.send(r,t.options.params)})})},_onProgress:function(t,e,n,i){var r=this._getItemByFileId(t),s=parseInt(n/i*100,10),a=this._formatSize(n)+" of "+this._formatSize(i);r.data("status","running"),r.find(".progress").find(".bar").css("width",s+"%").parent().find(".progress-label").html(a),this._updateFile(r)},_onComplete:function(t,e,n){this._filesInProgress--;var i=this._getItemByFileId(t);i.data("status","done"),i.find(".message").html('<i class="icon-success"></i> '+(this.doneMsg||"Uploaded")),this._updateFile(i)},_onFailure:function(t,e,n){this._filesInProgress--;var i=this._getItemByFileId(t);i.data("status","error"),i.find(".message").html('<i class="icon-error"></i> '),this._updateFile(i)},_onCancel:function(t,e){this._filesInProgress--;var n=this._getItemByFileId(t);n.data("status","cancel"),this._updateFile(n)},_addToList:function(t,e){var e=this._handler.getName(t),i=this._handler.getSize(t),r=n(this.options.fileItem.template);r.data("fileId",t),r.find(this.options.fileItem.selectors.name).html(this._formatFileName(e)),r.find(this.options.fileItem.selectors.size).html(this._formatSize(i)),this._velm.$(this.options.selectors.fileList).append(r),this._updateFileList()},_updateFileList:function(){var t=this.options.selectors,e=(this.options.fileItem.selectors,this._velm.$(t.fileList).find(t.fileItem)),n=this._velm.$(t.cancelUploads+","+t.startUploads),i=this._velm.$(t.nodata);e.length>0?(n.removeClass("hidden"),i.addClass("hidden")):(n.addClass("hidden"),i.removeClass("hidden"))},_updateFile:function(t){var e=this.options.fileItem.selectors,n=t.find(e.size+","+e.cancel),i=t.find(e.progress+","+e.cancel),r=t.find(e.message+","+e.clear),s=t.data("status");"pending"==s?(i.add(r).addClass("hidden"),n.removeClass("hidden")):"running"==s?(n.add(r).addClass("hidden"),i.removeClass("hidden")):"done"!=s&&"error"!=s||(n.add(i).addClass("hidden"),r.removeClass("hidden"))},_getItemByFileId:function(t){for(var e,i=this.options.selectors,r=this._velm.$(i.fileList).find(i.fileItem),s=0;s<r.length;s++){var a=r[s];if(n(a).data("fileId")==t){e=a;break}}if(e)return n(e)},_addFiles:function(t){for(var e=0;e<t.length;e++)if(!this._validateFile(t[e]))return;for(var e=0;e<t.length;e++)this._addFile(t[e])},_addFile:function(t){var e=this._handler.add(t);this._filesInProgress++,this._addToList(e)},_validateFile:function(t){var e,n;return t.value?e=t.value.replace(/.*(\/|\\)/,""):(e=null!=t.fileName?t.fileName:t.name,n=null!=t.fileSize?t.fileSize:t.size),this._isAllowedExtension(e)?0===n?(this._error("emptyError",e),!1):n&&this.options.sizeLimit&&n>this.options.sizeLimit?(this._error("sizeError",e),!1):!(n&&n<this.options.minSizeLimit)||(this._error("minSizeError",e),!1):(this._error("typeError",e),!1)},_error:function(t,e){var n=this.options.messages[t];function i(t,e){n=n.replace(t,e)}i("{file}",this._formatFileName(e)),i("{extensions}",this.options.allowedExtensions.join(", ")),i("{sizeLimit}",this._formatSize(this.options.sizeLimit)),i("{minSizeLimit}",this._formatSize(this.options.minSizeLimit)),this.options.showMessage(n)},_formatFileName:function(t){return t.length>33&&(t=t.slice(0,19)+"..."+t.slice(-13)),t},_isAllowedExtension:function(t){var e=-1!==t.indexOf(".")?t.replace(/.*[.]/,"").toLowerCase():"",n=this.options.allowedExtensions;if(!n.length)return!0;for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==e)return!0;return!1},_formatSize:function(t){var e=-1;do{t/=1024,e++}while(t>99);return Math.max(t,.1).toFixed(1)+["KB","MB","GB","TB","PB","EB"][e]}});return s.register(o),a.MultiUploader=o}),define("skylark-domx-plugins-uploads/main",["./uploads","./single-uploader","./multi-uploader"],function(t){return t}),define("skylark-domx-plugins-uploads",["skylark-domx-plugins-uploads/main"],function(t){return t}),define("skylark-devices-keyboard/KeyState",["skylark-langx-klass","./keyboard"],function(t,e){"use strict";var n=t({_construct:function(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1},update:function(t){this.justPressed=!1,this.justReleased=!1,t===n.DOWN?(!1===this.pressed&&(this.justPressed=!0),this.pressed=!0):t===n.UP?(this.pressed&&(this.justReleased=!0),this.pressed=!1):t===n.RESET&&(this.justReleased=!1,this.justPressed=!1)},set:function(t,e,n){this.justPressed=t,this.pressed=e,this.justReleased=n},reset:function(){this.justPressed=!1,this.pressed=!1,this.justReleased=!1}});return n.DOWN=-1,n.UP=1,n.RESET=0,e.KeyState=n}),define("skylark-devices-keyboard/Monitor",["skylark-langx-klass","./keyboard","./KeyState"],function(t,e,n){"use strict";var i=t({_construct:function(t){this.keyStates=[],this.actions=[];var e=this,n=this.actions;this.handlers={keydown:function(t){n.push(t.keyCode),n.push(Key.DOWN)},keyup:function(t){n.push(t.keyCode),n.push(Key.UP)},focus:function(t){e.reset()}},!0!==t&&this.create()},update:function(){for(var t=0;this.actions.length>t;){var e=this.actions.shift(),n=this.actions.shift();void 0===this.keyStates[e]&&(this.keyStates[e]=new Key),this.keyStates[e].update(n),(this.keyStates[e].justReleased||this.keyStates[e].justPressed)&&(this.actions.push(e),this.actions.push(Key.RESET),t+=2)}},reset:function(){for(var t=0;t<this.keyStates.length;t++)void 0!==this.keyStates[t]&&this.keyStates[t].reset()},keyPressed:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].pressed},keyJustPressed:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].justPressed},keyJustReleased:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].justReleased},create:function(){for(var t in this.handlers)window.addEventListener(t,this.handlers[t])},dispose:function(){for(var t in this.handlers)window.removeEventListener(t,this.handlers[t])}});return e.Monitor=i}),define("skylark-devices-keyboard/codes",["./keyboard"],function(t){for(var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=97;n<123;n++)e[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)e[n-48]=n;for(var n=1;n<13;n++)e["f"+n]=n+111;for(var n=0;n<10;n++)e["numpad "+n]=n+96;return t.codes=e}),define("skylark-devices-keyboard/names",["./keyboard","./codes"],function(t,e){var n={};for(var i in e)n[e[i]]=i;return t.names=n}),define("skylark-devices-keyboard/aliases",["./keyboard","./codes","./names"],function(t,e){return t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91}}),define("skylark-devices-keyboard/isEventKey",["skylark-langx-types","./keyboard","./aliases","./codes","./names"],function(t,e,n,i,r){return e.isEventKey=function(e,r){var s=e.which||e.keyCode||e.charCode;if(null===s||void 0===s)return!1;if(t.isString(r)){var a=i[r.toLowerCase()];if(a)return a===s;var a=n[r.toLowerCase()];if(a)return a===s}else if(t.isNumber(r))return r===s;return!1}}),define("skylark-devices-keyboard/main",["./keyboard","./KeyState","./keys","./Monitor","./aliases","./codes","./isEventKey","./names"],function(t){return t}),define("skylark-devices-keyboard",["skylark-devices-keyboard/main"],function(t){return t}),define("skylark-devices-orientation/orientation",["skylark-langx-ns"],function(t){return t.attach("devices.orientation",{isDeviceOrientationSupported:function(){return new Promise(function(t){if("DeviceOrientationEvent"in window){var e=function(n){n&&null!==n.alpha&&!isNaN(n.alpha)?t(!0):t(!1),window.removeEventListener("deviceorientation",e)};window.addEventListener("deviceorientation",e,!1),setTimeout(e,2e3)}else t(!1)})}})}),define("skylark-devices-orientation/main",["./orientation"],function(t){return t}),define("skylark-devices-orientation",["skylark-devices-orientation/main"],function(t){return t}),define("skylark-devices-points/points",["skylark-langx-ns"],function(t){return t.attach("devices.points",{})}),define("skylark-devices-points/mouse",["./points"],function(t){return t.mouse={mouseWheelEvent:function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},normalizeWheel:function(t){var e=0,n=0,i=0,r=0;"detail"in t&&(n=t.detail);"wheelDelta"in t&&(n=-t.wheelDelta/120);"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120);"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120);"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0);i=10*e,r=10*n,"deltaY"in t&&(r=t.deltaY);"deltaX"in t&&(i=t.deltaX);(i||r)&&t.deltaMode&&(1===t.deltaMode?(i*=40,r*=40):(i*=800,r*=800));i&&!e&&(e=i<1?-1:1);r&&!n&&(n=r<1?-1:1);return{spinX:e,spinY:n,pixelX:i,pixelY:r}},isMouseEvent:function(t){return null!=t.pointerType?"mouse"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE:null!=t.mozInputSource?1==t.mozInputSource:0==t.type.indexOf("mouse")},isLeftMouseButton:function(t){return"buttons"in t&&("mousedown"==t.type||"mousemove"==t.type)?1==t.buttons:"which"in t?1===t.which:1===t.button},isMiddleMouseButton:function(t){return"which"in t?2===t.which:4===t.button},isRightMouseButton:function(t){return"which"in t?3===t.which:2===t.button}}}),define("skylark-devices-points/touch",["./points"],function(t){return t.touch={isTouchEnabled:function(){return new Promise(function(t){var e=function(n){t(!!n),window.removeEventListener("touchstart",e)};window.addEventListener("touchstart",e,!1),setTimeout(e,1e4)})},mousy:function(t){var e=function(t){if(!(t.touches.length>1)){var e=t.changedTouches[0],n="";switch(t.type){case"touchstart":n="mousedown";break;case"touchmove":n="mousemove";break;case"touchend":n="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(n,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i),t.preventDefault()}};(t=t||document).addEventListener("touchstart",e,!0),t.addEventListener("touchmove",e,!0),t.addEventListener("touchend",e,!0)}}}),define("skylark-devices-points/main",["./points","./mouse","./touch"],function(t){return t}),define("skylark-devices-points",["skylark-devices-points/main"],function(t){return t}),define("skylark-devices-webgl/webgl",["skylark-langx-ns"],function(t){function e(){var t=document.createElement("canvas"),e=null;return t.getContext&&["webgl","experimental-webgl","moz-webgl","webkit-3d"].some(function(n){try{return(e=t.getContext(n))&&"function"==typeof e.getParameter}catch(t){return!1}})?e:null}return t.attach("devices.webgl",{getWebGLCtx:e,isWebGLSupported:function(){return!!window.WebGLRenderingContext&&null!==e()},getMaxTextureWidth:function(){var t=e();return null!==t?t.getParameter(t.MAX_TEXTURE_SIZE):0}})}),define("skylark-devices-webgl/main",["./webgl"],function(t){return t}),define("skylark-devices-webgl",["skylark-devices-webgl/main"],function(t){return t}),define("skylark-io-mimes/mimes",["skylark-langx-ns"],function(t){return t.attach("io.mimes",{})}),define("skylark-io-mimes/types",["./mimes"],function(t){return t.types={"application/x-executable":"exe","application/x-jar":"jar","application/x-gzip":"gz","application/x-bzip2":"tbz","application/x-rar":"rar","application/x-mpegURL":"m3u8","application/dash+xml":"mpd","application/andrew-inset":"ez","application/applixware":"aw","application/atom+xml":"atom","application/atomcat+xml":"atomcat","application/atomsvc+xml":"atomsvc","application/ccxml+xml":"ccxml","application/cdmi-capability":"cdmia","application/cdmi-container":"cdmic","application/cdmi-domain":"cdmid","application/cdmi-object":"cdmio","application/cdmi-queue":"cdmiq","application/cu-seeme":"cu","application/davmount+xml":"davmount","application/docbook+xml":"dbk","application/dssc+der":"dssc","application/dssc+xml":"xdssc","application/ecmascript":"ecma","application/emma+xml":"emma","application/epub+zip":"epub","application/exi":"exi","application/font-tdpfr":"pfr","application/gml+xml":"gml","application/gpx+xml":"gpx","application/gxf":"gxf","application/hyperstudio":"stk","application/inkml+xml":"ink","application/ipfix":"ipfix","application/java-serialized-object":"ser","application/java-vm":"class","application/json":"json","application/jsonml+json":"jsonml","application/lost+xml":"lostxml","application/mac-binhex40":"hqx","application/mac-compactpro":"cpt","application/mads+xml":"mads","application/marc":"mrc","application/marcxml+xml":"mrcx","application/mathematica":"ma","application/mathml+xml":"mathml","application/mbox":"mbox","application/mediaservercontrol+xml":"mscml","application/metalink+xml":"metalink","application/metalink4+xml":"meta4","application/mets+xml":"mets","application/mods+xml":"mods","application/mp21":"m21","application/mp4":"mp4s","application/msword":"doc","application/mxf":"mxf","application/octet-stream":"bin","application/oda":"oda","application/oebps-package+xml":"opf","application/ogg":"ogx","application/omdoc+xml":"omdoc","application/onenote":"onetoc","application/oxps":"oxps","application/patch-ops-error+xml":"xer","application/pdf":"pdf","application/pgp-encrypted":"pgp","application/pgp-signature":"asc","application/pics-rules":"prf","application/pkcs10":"p10","application/pkcs7-mime":"p7m","application/pkcs7-signature":"p7s","application/pkcs8":"p8","application/pkix-attr-cert":"ac","application/pkix-cert":"cer","application/pkix-crl":"crl","application/pkix-pkipath":"pkipath","application/pkixcmp":"pki","application/pls+xml":"pls","application/postscript":"ai","application/prs.cww":"cww","application/pskc+xml":"pskcxml","application/rdf+xml":"rdf","application/reginfo+xml":"rif","application/relax-ng-compact-syntax":"rnc","application/resource-lists+xml":"rl","application/resource-lists-diff+xml":"rld","application/rls-services+xml":"rs","application/rpki-ghostbusters":"gbr","application/rpki-manifest":"mft","application/rpki-roa":"roa","application/rsd+xml":"rsd","application/rss+xml":"rss","application/rtf":"rtf","application/sbml+xml":"sbml","application/scvp-cv-request":"scq","application/scvp-cv-response":"scs","application/scvp-vp-request":"spq","application/scvp-vp-response":"spp","application/sdp":"sdp","application/set-payment-initiation":"setpay","application/set-registration-initiation":"setreg","application/shf+xml":"shf","application/smil+xml":"smi","application/sparql-query":"rq","application/sparql-results+xml":"srx","application/srgs":"gram","application/srgs+xml":"grxml","application/sru+xml":"sru","application/ssdl+xml":"ssdl","application/ssml+xml":"ssml","application/tei+xml":"tei","application/thraud+xml":"tfi","application/timestamped-data":"tsd","application/vnd.3gpp.pic-bw-large":"plb","application/vnd.3gpp.pic-bw-small":"psb","application/vnd.3gpp.pic-bw-var":"pvb","application/vnd.3gpp2.tcap":"tcap","application/vnd.3m.post-it-notes":"pwn","application/vnd.accpac.simply.aso":"aso","application/vnd.accpac.simply.imp":"imp","application/vnd.acucobol":"acu","application/vnd.acucorp":"atc","application/vnd.adobe.air-application-installer-package+zip":"air","application/vnd.adobe.formscentral.fcdt":"fcdt","application/vnd.adobe.fxp":"fxp","application/vnd.adobe.xdp+xml":"xdp","application/vnd.adobe.xfdf":"xfdf","application/vnd.ahead.space":"ahead","application/vnd.airzip.filesecure.azf":"azf","application/vnd.airzip.filesecure.azs":"azs","application/vnd.amazon.ebook":"azw","application/vnd.americandynamics.acc":"acc","application/vnd.amiga.ami":"ami","application/vnd.android.package-archive":"apk","application/vnd.anser-web-certificate-issue-initiation":"cii","application/vnd.anser-web-funds-transfer-initiation":"fti","application/vnd.antix.game-component":"atx","application/vnd.apple.installer+xml":"mpkg","application/vnd.aristanetworks.swi":"swi","application/vnd.astraea-software.iota":"iota","application/vnd.audiograph":"aep","application/vnd.blueice.multipass":"mpm","application/vnd.bmi":"bmi","application/vnd.businessobjects":"rep","application/vnd.chemdraw+xml":"cdxml","application/vnd.chipnuts.karaoke-mmd":"mmd","application/vnd.cinderella":"cdy","application/vnd.claymore":"cla","application/vnd.cloanto.rp9":"rp9","application/vnd.clonk.c4group":"c4g","application/vnd.cluetrust.cartomobile-config":"c11amc","application/vnd.cluetrust.cartomobile-config-pkg":"c11amz","application/vnd.commonspace":"csp","application/vnd.contact.cmsg":"cdbcmsg","application/vnd.cosmocaller":"cmc","application/vnd.crick.clicker":"clkx","application/vnd.crick.clicker.keyboard":"clkk","application/vnd.crick.clicker.palette":"clkp","application/vnd.crick.clicker.template":"clkt","application/vnd.crick.clicker.wordbank":"clkw","application/vnd.criticaltools.wbs+xml":"wbs","application/vnd.ctc-posml":"pml","application/vnd.cups-ppd":"ppd","application/vnd.curl.car":"car","application/vnd.curl.pcurl":"pcurl","application/vnd.dart":"dart","application/vnd.data-vision.rdz":"rdz","application/vnd.dece.data":"uvf","application/vnd.dece.ttml+xml":"uvt","application/vnd.dece.unspecified":"uvx","application/vnd.dece.zip":"uvz","application/vnd.denovo.fcselayout-link":"fe_launch","application/vnd.dna":"dna","application/vnd.dolby.mlp":"mlp","application/vnd.dpgraph":"dpg","application/vnd.dreamfactory":"dfac","application/vnd.ds-keypoint":"kpxx","application/vnd.dvb.ait":"ait","application/vnd.dvb.service":"svc","application/vnd.dynageo":"geo","application/vnd.ecowin.chart":"mag","application/vnd.enliven":"nml","application/vnd.epson.esf":"esf","application/vnd.epson.msf":"msf","application/vnd.epson.quickanime":"qam","application/vnd.epson.salt":"slt","application/vnd.epson.ssf":"ssf","application/vnd.eszigno3+xml":"es3","application/vnd.ezpix-album":"ez2","application/vnd.ezpix-package":"ez3","application/vnd.fdf":"fdf","application/vnd.fdsn.mseed":"mseed","application/vnd.fdsn.seed":"seed","application/vnd.flographit":"gph","application/vnd.fluxtime.clip":"ftc","application/vnd.framemaker":"fm","application/vnd.frogans.fnc":"fnc","application/vnd.frogans.ltf":"ltf","application/vnd.fsc.weblaunch":"fsc","application/vnd.fujitsu.oasys":"oas","application/vnd.fujitsu.oasys2":"oa2","application/vnd.fujitsu.oasys3":"oa3","application/vnd.fujitsu.oasysgp":"fg5","application/vnd.fujitsu.oasysprs":"bh2","application/vnd.fujixerox.ddd":"ddd","application/vnd.fujixerox.docuworks":"xdw","application/vnd.fujixerox.docuworks.binder":"xbd","application/vnd.fuzzysheet":"fzs","application/vnd.genomatix.tuxedo":"txd","application/vnd.geogebra.file":"ggb","application/vnd.geogebra.tool":"ggt","application/vnd.geometry-explorer":"gex","application/vnd.geonext":"gxt","application/vnd.geoplan":"g2w","application/vnd.geospace":"g3w","application/vnd.gmx":"gmx","application/vnd.google-earth.kml+xml":"kml","application/vnd.google-earth.kmz":"kmz","application/vnd.grafeq":"gqf","application/vnd.groove-account":"gac","application/vnd.groove-help":"ghf","application/vnd.groove-identity-message":"gim","application/vnd.groove-injector":"grv","application/vnd.groove-tool-message":"gtm","application/vnd.groove-tool-template":"tpl","application/vnd.groove-vcard":"vcg","application/vnd.hal+xml":"hal","application/vnd.handheld-entertainment+xml":"zmm","application/vnd.hbci":"hbci","application/vnd.hhe.lesson-player":"les","application/vnd.hp-hpgl":"hpgl","application/vnd.hp-hpid":"hpid","application/vnd.hp-hps":"hps","application/vnd.hp-jlyt":"jlt","application/vnd.hp-pcl":"pcl","application/vnd.hp-pclxl":"pclxl","application/vnd.hydrostatix.sof-data":"sfd-hdstx","application/vnd.ibm.minipay":"mpy","application/vnd.ibm.modcap":"afp","application/vnd.ibm.rights-management":"irm","application/vnd.ibm.secure-container":"sc","application/vnd.iccprofile":"icc","application/vnd.igloader":"igl","application/vnd.immervision-ivp":"ivp","application/vnd.immervision-ivu":"ivu","application/vnd.insors.igm":"igm","application/vnd.intercon.formnet":"xpw","application/vnd.intergeo":"i2g","application/vnd.intu.qbo":"qbo","application/vnd.intu.qfx":"qfx","application/vnd.ipunplugged.rcprofile":"rcprofile","application/vnd.irepository.package+xml":"irp","application/vnd.is-xpr":"xpr","application/vnd.isac.fcs":"fcs","application/vnd.jam":"jam","application/vnd.jcp.javame.midlet-rms":"rms","application/vnd.jisp":"jisp","application/vnd.joost.joda-archive":"joda","application/vnd.kahootz":"ktz","application/vnd.kde.karbon":"karbon","application/vnd.kde.kchart":"chrt","application/vnd.kde.kformula":"kfo","application/vnd.kde.kivio":"flw","application/vnd.kde.kontour":"kon","application/vnd.kde.kpresenter":"kpr","application/vnd.kde.kspread":"ksp","application/vnd.kde.kword":"kwd","application/vnd.kenameaapp":"htke","application/vnd.kidspiration":"kia","application/vnd.kinar":"kne","application/vnd.koan":"skp","application/vnd.kodak-descriptor":"sse","application/vnd.las.las+xml":"lasxml","application/vnd.llamagraphics.life-balance.desktop":"lbd","application/vnd.llamagraphics.life-balance.exchange+xml":"lbe","application/vnd.lotus-1-2-3":123,"application/vnd.lotus-approach":"apr","application/vnd.lotus-freelance":"pre","application/vnd.lotus-notes":"nsf","application/vnd.lotus-organizer":"org","application/vnd.lotus-screencam":"scm","application/vnd.lotus-wordpro":"lwp","application/vnd.macports.portpkg":"portpkg","application/vnd.mcd":"mcd","application/vnd.medcalcdata":"mc1","application/vnd.mediastation.cdkey":"cdkey","application/vnd.mfer":"mwf","application/vnd.mfmp":"mfm","application/vnd.micrografx.flo":"flo","application/vnd.micrografx.igx":"igx","application/vnd.mif":"mif","application/vnd.mobius.daf":"daf","application/vnd.mobius.dis":"dis","application/vnd.mobius.mbk":"mbk","application/vnd.mobius.mqy":"mqy","application/vnd.mobius.msl":"msl","application/vnd.mobius.plc":"plc","application/vnd.mobius.txf":"txf","application/vnd.mophun.application":"mpn","application/vnd.mophun.certificate":"mpc","application/vnd.mozilla.xul+xml":"xul","application/vnd.ms-artgalry":"cil","application/vnd.ms-cab-compressed":"cab","application/vnd.ms-excel":"xls","application/vnd.ms-excel.addin.macroenabled.12":"xlam","application/vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.ms-excel.template.macroenabled.12":"xltm","application/vnd.ms-fontobject":"eot","application/vnd.ms-htmlhelp":"chm","application/vnd.ms-ims":"ims","application/vnd.ms-lrm":"lrm","application/vnd.ms-officetheme":"thmx","application/vnd.ms-pki.seccat":"cat","application/vnd.ms-pki.stl":"stl","application/vnd.ms-powerpoint":"ppt","application/vnd.ms-powerpoint.addin.macroenabled.12":"ppam","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.ms-powerpoint.slide.macroenabled.12":"sldm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","application/vnd.ms-powerpoint.template.macroenabled.12":"potm","application/vnd.ms-project":"mpp","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.template.macroenabled.12":"dotm","application/vnd.ms-works":"wps","application/vnd.ms-wpl":"wpl","application/vnd.ms-xpsdocument":"xps","application/vnd.mseq":"mseq","application/vnd.musician":"mus","application/vnd.muvee.style":"msty","application/vnd.mynfc":"taglet","application/vnd.neurolanguage.nlu":"nlu","application/vnd.nitf":"ntf","application/vnd.noblenet-directory":"nnd","application/vnd.noblenet-sealer":"nns","application/vnd.noblenet-web":"nnw","application/vnd.nokia.n-gage.data":"ngdat","application/vnd.nokia.n-gage.symbian.install":"n-gage","application/vnd.nokia.radio-preset":"rpst","application/vnd.nokia.radio-presets":"rpss","application/vnd.novadigm.edm":"edm","application/vnd.novadigm.edx":"edx","application/vnd.novadigm.ext":"ext","application/vnd.oasis.opendocument.chart":"odc","application/vnd.oasis.opendocument.chart-template":"otc","application/vnd.oasis.opendocument.database":"odb","application/vnd.oasis.opendocument.formula":"odf","application/vnd.oasis.opendocument.formula-template":"odft","application/vnd.oasis.opendocument.graphics":"odg","application/vnd.oasis.opendocument.graphics-template":"otg","application/vnd.oasis.opendocument.image":"odi","application/vnd.oasis.opendocument.image-template":"oti","application/vnd.oasis.opendocument.presentation":"odp","application/vnd.oasis.opendocument.presentation-template":"otp","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.oasis.opendocument.spreadsheet-template":"ots","application/vnd.oasis.opendocument.text":"odt","application/vnd.oasis.opendocument.text-master":"odm","application/vnd.oasis.opendocument.text-template":"ott","application/vnd.oasis.opendocument.text-web":"oth","application/vnd.olpc-sugar":"xo","application/vnd.oma.dd2+xml":"dd2","application/vnd.openofficeorg.extension":"oxt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slide":"sldx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.osgeo.mapguide.package":"mgp","application/vnd.osgi.dp":"dp","application/vnd.osgi.subsystem":"esa","application/vnd.palm":"pdb","application/vnd.pawaafile":"paw","application/vnd.pg.format":"str","application/vnd.pg.osasli":"ei6","application/vnd.picsel":"efif","application/vnd.pmi.widget":"wg","application/vnd.pocketlearn":"plf","application/vnd.powerbuilder6":"pbd","application/vnd.previewsystems.box":"box","application/vnd.proteus.magazine":"mgz","application/vnd.publishare-delta-tree":"qps","application/vnd.pvi.ptid1":"ptid","application/vnd.quark.quarkxpress":"qxd","application/vnd.realvnc.bed":"bed","application/vnd.recordare.musicxml":"mxl","application/vnd.recordare.musicxml+xml":"musicxml","application/vnd.rig.cryptonote":"cryptonote","application/vnd.rim.cod":"cod","application/vnd.rn-realmedia":"rm","application/vnd.rn-realmedia-vbr":"rmvb","application/vnd.route66.link66+xml":"link66","application/vnd.sailingtracker.track":"st","application/vnd.seemail":"see","application/vnd.sema":"sema","application/vnd.semd":"semd","application/vnd.semf":"semf","application/vnd.shana.informed.formdata":"ifm","application/vnd.shana.informed.formtemplate":"itp","application/vnd.shana.informed.interchange":"iif","application/vnd.shana.informed.package":"ipk","application/vnd.simtech-mindmapper":"twd","application/vnd.smaf":"mmf","application/vnd.smart.teacher":"teacher","application/vnd.solent.sdkm+xml":"sdkm","application/vnd.spotfire.dxp":"dxp","application/vnd.spotfire.sfs":"sfs","application/vnd.stardivision.calc":"sdc","application/vnd.stardivision.draw":"sda","application/vnd.stardivision.impress":"sdd","application/vnd.stardivision.math":"smf","application/vnd.stardivision.writer":"sdw","application/vnd.stardivision.writer-global":"sgl","application/vnd.stepmania.package":"smzip","application/vnd.stepmania.stepchart":"sm","application/vnd.sun.xml.calc":"sxc","application/vnd.sun.xml.calc.template":"stc","application/vnd.sun.xml.draw":"sxd","application/vnd.sun.xml.draw.template":"std","application/vnd.sun.xml.impress":"sxi","application/vnd.sun.xml.impress.template":"sti","application/vnd.sun.xml.math":"sxm","application/vnd.sun.xml.writer":"sxw","application/vnd.sun.xml.writer.global":"sxg","application/vnd.sun.xml.writer.template":"stw","application/vnd.sus-calendar":"sus","application/vnd.svd":"svd","application/vnd.symbian.install":"sis","application/vnd.syncml+xml":"xsm","application/vnd.syncml.dm+wbxml":"bdm","application/vnd.syncml.dm+xml":"xdm","application/vnd.tao.intent-module-archive":"tao","application/vnd.tcpdump.pcap":"pcap","application/vnd.tmobile-livetv":"tmo","application/vnd.trid.tpt":"tpt","application/vnd.triscape.mxs":"mxs","application/vnd.trueapp":"tra","application/vnd.ufdl":"ufd","application/vnd.uiq.theme":"utz","application/vnd.umajin":"umj","application/vnd.unity":"unityweb","application/vnd.uoml+xml":"uoml","application/vnd.vcx":"vcx","application/vnd.visio":"vsd","application/vnd.visionary":"vis","application/vnd.vsf":"vsf","application/vnd.wap.wbxml":"wbxml","application/vnd.wap.wmlc":"wmlc","application/vnd.wap.wmlscriptc":"wmlsc","application/vnd.webturbo":"wtb","application/vnd.wolfram.player":"nbp","application/vnd.wordperfect":"wpd","application/vnd.wqd":"wqd","application/vnd.wt.stf":"stf","application/vnd.xara":"xar","application/vnd.xfdl":"xfdl","application/vnd.yamaha.hv-dic":"hvd","application/vnd.yamaha.hv-script":"hvs","application/vnd.yamaha.hv-voice":"hvp","application/vnd.yamaha.openscoreformat":"osf","application/vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","application/vnd.yamaha.smaf-audio":"saf","application/vnd.yamaha.smaf-phrase":"spf","application/vnd.yellowriver-custom-menu":"cmp","application/vnd.zul":"zir","application/vnd.zzazz.deck+xml":"zaz","application/voicexml+xml":"vxml","application/widget":"wgt","application/winhlp":"hlp","application/wsdl+xml":"wsdl","application/wspolicy+xml":"wspolicy","application/x-7z-compressed":"7z","application/x-abiword":"abw","application/x-ace-compressed":"ace","application/x-apple-diskimage":"dmg","application/x-authorware-bin":"aab","application/x-authorware-map":"aam","application/x-authorware-seg":"aas","application/x-bcpio":"bcpio","application/x-bittorrent":"torrent","application/x-blorb":"blb","application/x-bzip":"bz","application/x-cbr":"cbr","application/x-cdlink":"vcd","application/x-cfs-compressed":"cfs","application/x-chat":"chat","application/x-chess-pgn":"pgn","application/x-conference":"nsc","application/x-cpio":"cpio","application/x-csh":"csh","application/x-debian-package":"deb","application/x-dgc-compressed":"dgc","application/x-director":"dir","application/x-doom":"wad","application/x-dtbncx+xml":"ncx","application/x-dtbook+xml":"dtb","application/x-dtbresource+xml":"res","application/x-dvi":"dvi","application/x-envoy":"evy","application/x-eva":"eva","application/x-font-bdf":"bdf","application/x-font-ghostscript":"gsf","application/x-font-linux-psf":"psf","application/x-font-pcf":"pcf","application/x-font-snf":"snf","application/x-font-type1":"pfa","application/x-freearc":"arc","application/x-futuresplash":"spl","application/x-gca-compressed":"gca","application/x-glulx":"ulx","application/x-gnumeric":"gnumeric","application/x-gramps-xml":"gramps","application/x-gtar":"gtar","application/x-hdf":"hdf","application/x-install-instructions":"install","application/x-iso9660-image":"iso","application/x-java-jnlp-file":"jnlp","application/x-latex":"latex","application/x-lzh-compressed":"lzh","application/x-mie":"mie","application/x-mobipocket-ebook":"prc","application/x-ms-application":"application","application/x-ms-shortcut":"lnk","application/x-ms-wmd":"wmd","application/x-ms-wmz":"wmz","application/x-ms-xbap":"xbap","application/x-msaccess":"mdb","application/x-msbinder":"obd","application/x-mscardfile":"crd","application/x-msclip":"clp","application/x-msdownload":"dll","application/x-msmediaview":"mvb","application/x-msmetafile":"wmf","application/x-msmoney":"mny","application/x-mspublisher":"pub","application/x-msschedule":"scd","application/x-msterminal":"trm","application/x-mswrite":"wri","application/x-netcdf":"nc","application/x-nzb":"nzb","application/x-pkcs12":"p12","application/x-pkcs7-certificates":"p7b","application/x-pkcs7-certreqresp":"p7r","application/x-research-info-systems":"ris","application/x-shar":"shar","application/x-shockwave-flash":"swf","application/x-silverlight-app":"xap","application/x-sql":"sql","application/x-stuffit":"sit","application/x-stuffitx":"sitx","application/x-subrip":"srt","application/x-sv4cpio":"sv4cpio","application/x-sv4crc":"sv4crc","application/x-t3vm-image":"t3","application/x-tads":"gam","application/x-tar":"tar","application/x-tcl":"tcl","application/x-tex":"tex","application/x-tex-tfm":"tfm","application/x-texinfo":"texinfo","application/x-tgif":"obj","application/x-ustar":"ustar","application/x-wais-source":"src","application/x-x509-ca-cert":"der","application/x-xfig":"fig","application/x-xliff+xml":"xlf","application/x-xpinstall":"xpi","application/x-xz":"xz","application/x-zmachine":"z1","application/xaml+xml":"xaml","application/xcap-diff+xml":"xdf","application/xenc+xml":"xenc","application/xhtml+xml":"xhtml","application/xml":"xsl","application/xml-dtd":"dtd","application/xop+xml":"xop","application/xproc+xml":"xpl","application/xslt+xml":"xslt","application/xspf+xml":"xspf","application/xv+xml":"mxml","application/yang":"yang","application/yin+xml":"yin","application/zip":"zip","application/rtfd":"rtfd","application/x-cglap":"cglap","audio/wav":"wav","audio/adpcm":"adp","audio/basic":"au","audio/midi":"mid","audio/mp4":"m4a","audio/mpeg":"mpga","audio/ogg":"oga","audio/s3m":"s3m","audio/silk":"sil","audio/vnd.dece.audio":"uva","audio/vnd.digital-winds":"eol","audio/vnd.dra":"dra","audio/vnd.dts":"dts","audio/vnd.dts.hd":"dtshd","audio/vnd.lucent.voice":"lvp","audio/vnd.ms-playready.media.pya":"pya","audio/vnd.nuera.ecelp4800":"ecelp4800","audio/vnd.nuera.ecelp7470":"ecelp7470","audio/vnd.nuera.ecelp9600":"ecelp9600","audio/vnd.rip":"rip","audio/webm":"weba","audio/x-aac":"aac","audio/x-aiff":"aif","audio/x-caf":"caf","audio/x-flac":"flac","audio/x-matroska":"mka","audio/x-mpegurl":"m3u","audio/x-ms-wax":"wax","audio/x-ms-wma":"wma","audio/x-pn-realaudio":"ram","audio/x-pn-realaudio-plugin":"rmp","audio/xm":"xm","chemical/x-cdx":"cdx","chemical/x-cif":"cif","chemical/x-cmdf":"cmdf","chemical/x-cml":"cml","chemical/x-csml":"csml","chemical/x-xyz":"xyz","font/collection":"ttc","font/otf":"otf","font/ttf":"ttf","font/woff":"woff","font/woff2":"woff2","image/x-ms-bmp":"bmp","image/x-targa":"tga","image/xbm":"xbm","image/pxm":"pxm","image/cgm":"cgm","image/g3fax":"g3","image/gif":"gif","image/ief":"ief","image/jpeg":"jpeg","image/jpg":"jpg","image/ktx":"ktx","image/png":"png","image/prs.btif":"btif","image/sgi":"sgi","image/svg+xml":"svg","image/tiff":"tiff","image/vnd.adobe.photoshop":"psd","image/vnd.dece.graphic":"uvi","image/vnd.djvu":"djvu","image/vnd.dvb.subtitle":"sub","image/vnd.dwg":"dwg","image/vnd.dxf":"dxf","image/vnd.fastbidsheet":"fbs","image/vnd.fpx":"fpx","image/vnd.fst":"fst","image/vnd.fujixerox.edmics-mmr":"mmr","image/vnd.fujixerox.edmics-rlc":"rlc","image/vnd.ms-modi":"mdi","image/vnd.ms-photo":"wdp","image/vnd.net-fpx":"npx","image/vnd.wap.wbmp":"wbmp","image/vnd.xiff":"xif","image/webp":"webp","image/x-3ds":"3ds","image/x-cmu-raster":"ras","image/x-cmx":"cmx","image/x-freehand":"fh","image/x-icon":"ico","image/x-mrsid-image":"sid","image/x-pcx":"pcx","image/x-pict":"pic","image/x-portable-anymap":"pnm","image/x-portable-bitmap":"pbm","image/x-portable-graymap":"pgm","image/x-portable-pixmap":"ppm","image/x-rgb":"rgb","image/x-xpixmap":"xpm","image/x-xwindowdump":"xwd","image/x-xwindowdump":"xwd","image/panorama+jpeg":"jpegp","image/panorama+jpg":"jpgp","image/panorama+png":"pngp","message/rfc822":"eml","model/iges":"igs","model/mesh":"msh","model/vnd.collada+xml":"dae","model/vnd.dwf":"dwf","model/vnd.gdl":"gdl","model/vnd.gtw":"gtw","model/vnd.vtu":"vtu","model/vrml":"wrl","model/x3d+binary":"x3db","model/x3d+vrml":"x3dv","model/x3d+xml":"x3d","model/gltf+json":"gltf","model/gltf+binary":"glb","model/u-obj+text":"obj","text/x-php":"php","text/javascript":"js","text/x-python":"py","text/x-ruby":"rb","text/x-shellscript":"sh","text/x-perl":"pl","text/xml":"xml","text/x-csrc":"c","text/x-chdr":"h","text/x-c++src":"cpp","text/x-c++hdr":"hh","text/x-markdown":"md","text/x-yaml":"yml","text/cache-manifest":"appcache","text/calendar":"ics","text/css":"css","text/csv":"csv","text/html":"html","text/n3":"n3","text/plain":"txt","text/prs.lines.tag":"dsc","text/richtext":"rtx","text/sgml":"sgml","text/tab-separated-values":"tsv","text/troff":"t","text/turtle":"ttl","text/uri-list":"uri","text/vcard":"vcard","text/vnd.curl":"curl","text/vnd.curl.dcurl":"dcurl","text/vnd.curl.mcurl":"mcurl","text/vnd.curl.scurl":"scurl","text/vnd.fly":"fly","text/vnd.fmi.flexstor":"flx","text/vnd.graphviz":"gv","text/vnd.in3d.3dml":"3dml","text/vnd.in3d.spot":"spot","text/vnd.sun.j2me.app-descriptor":"jad","text/vnd.wap.wml":"wml","text/vnd.wap.wmlscript":"wmls","text/x-asm":"s","text/x-c":"cc","text/x-fortran":"f","text/x-java-source":"java","text/x-nfo":"nfo","text/x-opml":"opml","text/x-pascal":"p","text/x-setext":"etx","text/x-sfv":"sfv","text/x-sql":"sql","text/x-uuencode":"uu","text/x-vcalendar":"vcs","text/x-vcard":"vcf","text/x-httpd-cgi":"cgi","text/x-asap":"asp","text/x-jsp":"jsp","video/3gpp":"3gp","video/3gpp2":"3g2","video/h261":"h261","video/h263":"h263","video/h264":"h264","video/jpeg":"jpgv","video/jpm":"jpm","video/mj2":"mj2","video/MP2T":"m2ts","video/mp4":"mp4","video/mpeg":"mpeg","video/ogg":"ogm","video/quicktime":"qt","video/vnd.dece.hd":"uvh","video/vnd.dece.mobile":"uvm","video/vnd.dece.pd":"uvp","video/vnd.dece.sd":"uvs","video/vnd.dece.video":"uvv","video/vnd.dvb.file":"dvb","video/vnd.fvt":"fvt","video/vnd.mpegurl":"mxu","video/vnd.ms-playready.media.pyv":"pyv","video/vnd.uvvu.mp4":"uvu","video/vnd.vivo":"viv","video/webm":"webm","video/x-dv":"dv","video/x-f4v":"f4v","video/x-fli":"fli","video/x-flv":"flv","video/x-m4v":"m4v","video/x-matroska":"mkv","video/x-mng":"mng","video/x-ms-asf":"asf","video/x-ms-vob":"vob","video/x-ms-wmx":"wmx","video/x-ms-wvx":"wvx","video/x-msvideo":"avi","video/x-sgi-movie":"movie","video/x-smv":"smv","video/x-ms-wmv":"wm","video/panorama+mp4":"mp4p","x-conference/x-cooltalk":"ice","image/x-pixlr-data":"pxd","image/x-adobe-dng":"dng","image/x-sketch":"sketch","image/x-xcf":"xcf","audio/amr":"amr","image/vnd-ms.dds":"dds","application/plt":"plt","application/sat":"sat","application/step":"step"}}),define("skylark-io-mimes/extensions",["skylark-langx-types","./mimes","./types"],function(t,e,n){var i={};for(var r in n){var s=n[r];t.isString(s)&&(s=[s]);for(var a=0;a<s.length;a++){var o=s[a];i[o]?t.isString(i[o])?i[o]=[i[o],r]:i[o].push(r):i[o]=r}}return e.extenstions=i}),define("skylark-io-mimes/getMimeType",["./mimes","./types"],function(t,e){return t.getMimeType=function(t,n){for(var i in e)if(e[i]===t&&(!n||i.startsWith(n)))return i}}),define("skylark-io-mimes/main",["./mimes","./extensions","./getMimeType","./types"],function(t){return t}),define("skylark-io-mimes",["skylark-io-mimes/main"],function(t){return t}),define("skylark-io-diskfs/download",["skylark-langx/types","./diskfs"],function(t,e){return e.downlad=function(e,n){if(window.navigator.msSaveBlob)t.isString(e)&&(e=dataURItoBlob(e)),window.navigator.msSaveBlob(e,n);else{var i=document.createElement("a");e instanceof Blob&&(e=URL.createObjectURL(e)),i.href=e,i.setAttribute("download",n||"noname"),i.click()}}}),define("skylark-io-diskfs/read",["skylark-langx-async/deferred","./diskfs"],function(t,e){return e.read=e.readFile=function(e,n){n=n||{};var i=new t,r=new FileReader;r.onload=function(t){i.resolve(t.target.result)},r.onerror=function(t){var e=t.target.error.code;2===e?alert("please don't open this page using protocol fill:///"):alert("error code: "+e)},n.asArrayBuffer?r.readAsArrayBuffer(e):n.asDataUrl?r.readAsDataURL(e):n.asText?r.readAsText(e):r.readAsArrayBuffer(e);return i.promise}}),define("skylark-io-diskfs/read-image",["skylark-langx-async/deferred","./diskfs","./read"],function(t,e,n){return e.readImage=function(e){var i=new t,r=new Image;return r.onload=function(){i.resolve(r)},r.onerror=function(t){i.reject(t)},n(e,{asDataUrl:!0}).then(function(t){r.src=t}).catch(function(t){i.reject(t)}),i.promise}}),define("skylark-io-diskfs/main",["./diskfs","./download","./read","./read-image","./select","./webentry"],function(t){return t}),define("skylark-io-diskfs",["skylark-io-diskfs/main"],function(t){return t}),define("skylark-io-streams/streams",["skylark-langx-ns"],function(t){return t.attach("io.streams")}),define("skylark-langx-chars/chars",["skylark-langx-ns","skylark-langx-types"],function(t,e){return t.attach("langx.chars",{isWhiteSpace:function(t){return 32===t||9===t||13===t||10===t}})}),define("skylark-langx-chars/main",["./chars"],function(t){return t}),define("skylark-langx-chars",["skylark-langx-chars/main"],function(t){return t}),define("skylark-io-streams/decode-stream",["skylark-langx-events","skylark-langx-chars","./streams"],function(t,e,n){var i=new Uint8Array(0),r=t.Emitter.inherit({klassName:"DecodeStream",_construct:function(t){if(this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=i,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2},length:{get:function(){throw new Error("Should not access DecodeStream.length")}},isEmpty:{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}},ensureBuffer:function(t){var e=this.buffer;if(t<=e.byteLength)return e;for(var n=this.minBufferLength;n<t;)n*=2;var i=new Uint8Array(n);return i.set(e),this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},getInt32:function(){var t=this.getByte(),e=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(e<<16)+(n<<8)+i},getBytes(t,e=!1){var n,i=this.pos;if(t){for(this.ensureBuffer(i+t),n=i+t;!this.eof&&this.bufferLength<n;)this.readBlock();var r=this.bufferLength;n>r&&(n=r)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;const s=this.buffer.subarray(i,n);return!e||s instanceof Uint8ClampedArray?s:new Uint8ClampedArray(s)},peekByte:function(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes(t,e=!1){var n=this.getBytes(t,e);return this.pos-=n.length,n},makeSubStream:function(t,e,n){for(var i=t+e;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},getByteRange(t,e){throw new Error("Should not call DecodeStream.getByteRange")},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}});return n.DecodeStream=r}),define("skylark-io-streams/ascii85-stream",["skylark-langx-chars","./streams","./decode-stream"],function(t,e,n){var i=n.inherit({klassName:"Ascii85Stream",_construct:function(t){this.str=t,this.dict=t.dict,this.input=new Uint8Array(5),maybeLength&&(maybeLength*=.8),n.prototype._construct.call(this,maybeLength)},readBlock:function(){for(var e=this.str,n=e.getByte();t.isWhiteSpace(n);)n=e.getByte();if(-1!==n&&126!==n){var i,r,s=this.bufferLength;if(122===n){for(i=this.ensureBuffer(s+4),r=0;r<4;++r)i[s+r]=0;this.bufferLength+=4}else{var a=this.input;for(a[0]=n,r=1;r<5;++r){for(n=e.getByte();t.isWhiteSpace(n);)n=e.getByte();if(a[r]=n,-1===n||126===n)break}if(i=this.ensureBuffer(s+r-1),this.bufferLength+=r-1,r<5){for(;r<5;++r)a[r]=117;this.eof=!0}var o=0;for(r=0;r<5;++r)o=85*o+(a[r]-33);for(r=3;r>=0;--r)i[s+r]=255&o,o>>=8}}else this.eof=!0}});return e.Ascii85Stream=i}),define("skylark-io-streams/ascii-hex-stream",["./streams","./decode-stream"],function(t,e){var n=e.inherit({klassName:"AsciiHexStream",_construct:function(t,n){this.str=t,this.dict=t.dict,this.firstDigit=-1,n&&(n*=.5),e.prototype._construct.call(this,n)},readBlock:function(){var t=this.str.getBytes(8e3);if(t.length){for(var e=t.length+1>>1,n=this.ensureBuffer(this.bufferLength+e),i=this.bufferLength,r=this.firstDigit,s=0,a=t.length;s<a;s++){var o,l=t[s];if(l>=48&&l<=57)o=15&l;else{if(!(l>=65&&l<=70||l>=97&&l<=102)){if(62===l){this.eof=!0;break}continue}o=9+(15&l)}r<0?r=o:(n[i++]=r<<4|o,r=-1)}r>=0&&this.eof&&(n[i++]=r<<4,r=-1),this.firstDigit=r,this.bufferLength=i}else this.eof=!0}});return t.AsciiHexStream=n}),define("skylark-io-streams/_stream",["skylark-langx-events","./streams"],function(t,e){var n=t.Emitter.inherit({klassName:"Stream",_construct:function(t,e,n,i){this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+n||this.bytes.length,this.dict=i},length:{get:function(){return this.end-this.start}},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},getInt32:function(){var t=this.getByte(),e=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(e<<16)+(n<<8)+i},getBytes(t,e=!1){var n=this.bytes,i=this.pos,r=this.end;if(!t){const t=n.subarray(i,r);return e?new Uint8ClampedArray(t):t}var s=i+t;s>r&&(s=r),this.pos=s;const a=n.subarray(i,s);return e?new Uint8ClampedArray(a):a},peekByte:function(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes(t,e=!1){var n=this.getBytes(t,e);return this.pos-=n.length,n},getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(t,e,i){return new n(this.bytes.buffer,t,e,i)}});return e.Stream=n}),define("skylark-io-streams/chunked-stream",["./streams","./_stream"],function(t,e){var n=e.inherit({klassName:"ChunkedStream",numChunks:0,numChunksLoaded:0,_construct:function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=t.charCodeAt(i);DecodeStream.prototype._construct.call(n),this.dict=stream.dict},numChunks:function(){},getMissingChunks:function(){for(var t=[],e=0,n=this.numChunks;e<n;++e)e in this.loadedChunks||t.push(e);return t},getBaseStreams:function(){return[this]},allChunksLoaded:function(){var t=this._;return t.numChunksLoaded===t.numChunks},onReceiveData:function(t,e){var n=t+e.byteLength;assert(t%this.chunkSize==0,"Bad begin offset: "+t);var i=this.bytes.length;assert(n%this.chunkSize==0||n===i,"Bad end offset: "+n),this.bytes.set(new Uint8Array(e),t);for(var r=this.chunkSize,s=Math.floor(t/r),a=Math.floor((n-1)/r)+1,e=s;e<a;++e)e in this.loadedChunks||(this.loadedChunks[e]=!0,++this.numChunksLoaded)},onReceiveInitialData:function(t){this.bytes.set(t),this.initialDataLength=t.length;for(var e=this.end===t.length?this.numChunks:Math.floor(t.length/this.chunkSize),n=0;n<e;n++)this.loadedChunks[n]=!0,++this.numChunksLoaded},ensureRange:function(t,e){if(!(t>=e||e<=this.initialDataLength))for(var n=this.chunkSize,i=Math.floor(t/n),r=Math.floor((e-1)/n)+1,s=i;s<r;++s)if(!(s in this.loadedChunks))throw new MissingDataException(t,e)},nextEmptyChunk:function(t){for(var e=t,n=this.numChunks;e<n;++e)if(!(e in this.loadedChunks))return e;for(var e=0;e<t;++e)if(!(e in this.loadedChunks))return e;return null},hasChunk:function(t){return t in this._.loadedChunks},getByte:function(){var t=this.pos;return t>=this.end?-1:(this.ensureRange(t,t+1),this.bytes[this.pos++])},getBytes:function(t){var e=this.bytes,n=this.pos,i=this.end;if(!t)return this.ensureRange(n,i),e.subarray(n,i);var r=n+t;return r>i&&(r=i),this.ensureRange(n,r),this.pos=r,e.subarray(n,r)},peekBytes:function(t){var e=this.getBytes(t);return this.pos-=e.length,e},getByteRange:function(t,e){return this.ensureRange(t,e),this.bytes.subarray(t,e)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(t,e,n){function i(){}i.prototype=Object.create(this),i.prototype.getMissingChunks=function(){for(var t=this.chunkSize,e=Math.floor(this.start/t),n=Math.floor((this.end-1)/t)+1,i=[],r=e;r<n;++r)r in this.loadedChunks||i.push(r);return i};var r=new i;return r.pos=r.start=t,r.end=t+e||this.end,r.dict=n,r}});return t.ChunkedStream=n}),define("skylark-io-streams/decrypt-stream",["./streams","./decode-stream"],function(t,e){var n=e.inherit({klassName:"DecryptStream",_construct:function(t,n,i){this.str=t,this.dict=t.dict,this.decrypt=i,this.nextChunk=null,this.initialized=!1,e.prototype._construct.call(this,n)},readBlock:function(){var t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(512),this.initialized=!0),t&&0!==t.length){this.nextChunk=this.str.getBytes(512);var e=this.nextChunk&&this.nextChunk.length>0,n=this.decrypt;t=n(t,!e);var i,r=this.bufferLength,s=t.length,a=this.ensureBuffer(r+s);for(i=0;i<s;i++)a[r++]=t[i];this.bufferLength=r}else this.eof=!0}});return t.DecryptStream=n}),define("skylark-io-streams/fake-stream",["./streams","./decode-stream"],function(t,e){var n=e.inherit({klassName:"FakeStream",_construct:function(t){this.dict=t.dict,e.prototype._construct.call(this)},readBlock:function(){var t=this.bufferLength;t+=1024;this.ensureBuffer(t);this.bufferLength=t},getBytes:function(t){var e,n=this.pos;if(t){for(this.ensureBuffer(n+t),e=n+t;!this.eof&&this.bufferLength<e;)this.readBlock();var i=this.bufferLength;e>i&&(e=i)}else this.eof=!0,e=this.bufferLength;return this.pos=e,this.buffer.subarray(n,e)}});return t.FakeStream=n}),define("skylark-io-streams/flate-stream",["./streams","./decode-stream"],function(t,e){var n=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),s=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],o=e.inherit({klassName:"FlateStream",_construct:function(t,n){this.str=t,this.dict=t.dict;var i=t.getByte(),r=t.getByte();if(-1===i||-1===r)throw new util.FormatError(`Invalid header in flate stream: ${i}, ${r}`);if(8!=(15&i))throw new util.FormatError(`Unknown compression method in flate stream: ${i}, ${r}`);if(((i<<8)+r)%31!=0)throw new util.FormatError(`Bad FCHECK in flate stream: ${i}, ${r}`);if(32&r)throw new util.FormatError(`FDICT bit set in flate stream: ${i}, ${r}`);this.codeSize=0,this.codeBuf=0,e.prototype._construct.call(this,n)},getBits:function(t){for(var e,n=this.str,i=this.codeSize,r=this.codeBuf;i<t;){if(-1===(e=n.getByte()))throw new util.FormatError("Bad encoding in flate stream");r|=e<<i,i+=8}return e=r&(1<<t)-1,this.codeBuf=r>>t,this.codeSize=i-=t,e},getCode:function(t){for(var e,n=this.str,i=t[0],r=t[1],s=this.codeSize,a=this.codeBuf;s<r&&-1!==(e=n.getByte());)a|=e<<s,s+=8;var o=i[a&(1<<r)-1],l=o>>16,c=65535&o;if(l<1||s<l)throw new util.FormatError("Bad encoding in flate stream");return this.codeBuf=a>>l,this.codeSize=s-l,c},generateHuffmanTable:function(t){var e,n=t.length,i=0;for(e=0;e<n;++e)t[e]>i&&(i=t[e]);for(var r=1<<i,s=new Int32Array(r),a=1,o=0,l=2;a<=i;++a,o<<=1,l<<=1)for(var c=0;c<n;++c)if(t[c]===a){var u=0,h=o;for(e=0;e<a;++e)u=u<<1|1&h,h>>=1;for(e=u;e<r;e+=l)s[e]=a<<16|c;++o}return[s,i]},readBlock:function(){var t,e,o=this.str,l=this.getBits(3);if(1&l&&(this.eof=!0),0!==(l>>=1)){var c,u;if(1===l)c=s,u=a;else{if(2!==l)throw new util.FormatError("Unknown block type in flate stream");var h,d=this.getBits(5)+257,p=this.getBits(5)+1,f=this.getBits(4)+4,m=new Uint8Array(n.length);for(h=0;h<f;++h)m[n[h]]=this.getBits(3);var g=this.generateHuffmanTable(m);e=0,h=0;for(var y,v,k,x=d+p,b=new Uint8Array(x);h<x;){var w=this.getCode(g);if(16===w)y=2,v=3,k=e;else if(17===w)y=3,v=3,k=e=0;else{if(18!==w){b[h++]=e=w;continue}y=7,v=11,k=e=0}for(var _=this.getBits(y)+v;_-- >0;)b[h++]=k}c=this.generateHuffmanTable(b.subarray(0,d)),u=this.generateHuffmanTable(b.subarray(d,x))}for(var C=(t=this.buffer)?t.length:0,S=this.bufferLength;;){var E=this.getCode(c);if(E<256)S+1>=C&&(t=this.ensureBuffer(S+1),C=t.length),t[S++]=E;else{if(256===E)return void(this.bufferLength=S);var T=(E=i[E-=257])>>16;T>0&&(T=this.getBits(T)),e=(65535&E)+T,E=this.getCode(u),E=r[E],(T=E>>16)>0&&(T=this.getBits(T));var M=(65535&E)+T;S+e>=C&&(t=this.ensureBuffer(S+e),C=t.length);for(var z=0;z<e;++z,++S)t[S]=t[S-M]}}}else{var A;if(-1===(A=o.getByte()))throw new util.FormatError("Bad block header in flate stream");var $=A;if(-1===(A=o.getByte()))throw new util.FormatError("Bad block header in flate stream");if($|=A<<8,-1===(A=o.getByte()))throw new util.FormatError("Bad block header in flate stream");var P=A;if(-1===(A=o.getByte()))throw new util.FormatError("Bad block header in flate stream");if((P|=A<<8)!==(65535&~$)&&(0!==$||0!==P))throw new util.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const e=this.bufferLength,n=e+$;if(t=this.ensureBuffer(n),this.bufferLength=n,0===$)-1===o.peekByte()&&(this.eof=!0);else{const n=o.getBytes($);t.set(n,e),n.length<$&&(this.eof=!0)}}}});return t.FlateStream=o}),define("skylark-io-streams/lzw-stream",["./streams","./decode-stream"],function(t,e){var n=e.inherit({klassName:"LZWStream",_construct:function(t,n,i){this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;for(var r={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(4096),dictionaryLengths:new Uint16Array(4096),dictionaryPrevCodes:new Uint16Array(4096),currentSequence:new Uint8Array(4096),currentSequenceLength:0},s=0;s<256;++s)r.dictionaryValues[s]=s,r.dictionaryLengths[s]=1;this.lzwState=r,e.prototype._construct.call(this,n)},readBits:function(t){for(var e=this.bitsCached,n=this.cachedData;e<t;){var i=this.str.getByte();if(-1===i)return this.eof=!0,null;n=n<<8|i,e+=8}return this.bitsCached=e-=t,this.cachedData=n,this.lastCode=null,n>>>e&(1<<t)-1},readBlock:function(){var t,e,n,i=1024,r=this.lzwState;if(r){var s=r.earlyChange,a=r.nextCode,o=r.dictionaryValues,l=r.dictionaryLengths,c=r.dictionaryPrevCodes,u=r.codeLength,h=r.prevCode,d=r.currentSequence,p=r.currentSequenceLength,f=0,m=this.bufferLength,g=this.ensureBuffer(this.bufferLength+i);for(t=0;t<512;t++){var y=this.readBits(u),v=p>0;if(y<256)d[0]=y,p=1;else{if(!(y>=258)){if(256===y){u=9,a=258,p=0;continue}this.eof=!0,delete this.lzwState;break}if(y<a)for(p=l[y],e=p-1,n=y;e>=0;e--)d[e]=o[n],n=c[n];else d[p++]=d[0]}if(v&&(c[a]=h,l[a]=l[h]+1,o[a]=d[0],u=++a+s&a+s-1?u:0|Math.min(Math.log(a+s)/.6931471805599453+1,12)),h=y,i<(f+=p)){do{i+=512}while(i<f);g=this.ensureBuffer(this.bufferLength+i)}for(e=0;e<p;e++)g[m++]=d[e]}r.nextCode=a,r.codeLength=u,r.prevCode=h,r.currentSequenceLength=p,this.bufferLength=m}}});return t.LZWStream=n}),define("skylark-io-streams/null-stream",["./streams","./_stream"],function(t,e){var n=e.inherit({klassName:"NullStream",_construct:function(){e.prototype._construct.call(this,new Uint8Array(0))}});return t.NullStream=n}),define("skylark-io-streams/predictor-stream",["./streams","./decode-stream"],function(t,e){var n=e.inherit({klassName:"PredictorStream",_construct:function(t,n,i){if(!primitives.isDict(i))return t;var r=this.predictor=i.get("Predictor")||1;if(r<=1)return t;if(2!==r&&(r<10||r>15))throw new Error(`Unsupported predictor: ${r}`);this.readBlock=2===r?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;var s=this.colors=i.get("Colors")||1,a=this.bits=i.get("BitsPerComponent")||8,o=this.columns=i.get("Columns")||1;return this.pixBytes=s*a+7>>3,this.rowBytes=o*s*a+7>>3,e.call(this,n),this},readBlockTiff:function(){var t=this.rowBytes,e=this.bufferLength,n=this.ensureBuffer(e+t),i=this.bits,r=this.colors,s=this.str.getBytes(t);if(this.eof=!s.length,!this.eof){var a,o=0,l=0,c=0,u=0,h=e;if(1===i&&1===r)for(a=0;a<t;++a){var d=s[a]^o;d^=d>>1,d^=d>>2,o=(1&(d^=d>>4))<<7,n[h++]=d}else if(8===i){for(a=0;a<r;++a)n[h++]=s[a];for(;a<t;++a)n[h]=n[h-r]+s[a],h++}else if(16===i){var p=2*r;for(a=0;a<p;++a)n[h++]=s[a];for(;a<t;a+=2){var f=((255&s[a])<<8)+(255&s[a+1])+((255&n[h-p])<<8)+(255&n[h-p+1]);n[h++]=f>>8&255,n[h++]=255&f}}else{var m=new Uint8Array(r+1),g=(1<<i)-1,y=0,v=e,k=this.columns;for(a=0;a<k;++a)for(var x=0;x<r;++x)c<i&&(o=o<<8|255&s[y++],c+=8),m[x]=m[x]+(o>>c-i)&g,c-=i,l=l<<i|m[x],(u+=i)>=8&&(n[v++]=l>>u-8&255,u-=8);u>0&&(n[v++]=(l<<8-u)+(o&(1<<8-u)-1))}this.bufferLength+=t}},readBlockPng:function(){var t=this.rowBytes,e=this.pixBytes,n=this.str.getByte(),i=this.str.getBytes(t);if(this.eof=!i.length,!this.eof){var r=this.bufferLength,s=this.ensureBuffer(r+t),a=s.subarray(r-t,r);0===a.length&&(a=new Uint8Array(t));var o,l,c,u=r;switch(n){case 0:for(o=0;o<t;++o)s[u++]=i[o];break;case 1:for(o=0;o<e;++o)s[u++]=i[o];for(;o<t;++o)s[u]=s[u-e]+i[o]&255,u++;break;case 2:for(o=0;o<t;++o)s[u++]=a[o]+i[o]&255;break;case 3:for(o=0;o<e;++o)s[u++]=(a[o]>>1)+i[o];for(;o<t;++o)s[u]=(a[o]+s[u-e]>>1)+i[o]&255,u++;break;case 4:for(o=0;o<e;++o)l=a[o],c=i[o],s[u++]=l+c;for(;o<t;++o){l=a[o];var h=a[o-e],d=s[u-e],p=d+l-h,f=p-d;f<0&&(f=-f);var m=p-l;m<0&&(m=-m);var g=p-h;g<0&&(g=-g),c=i[o],s[u++]=f<=m&&f<=g?d+c:m<=g?l+c:h+c}break;default:throw new Error(`Unsupported predictor: ${n}`)}this.bufferLength+=t}}});return t.PredictorStream=n}),define("skylark-io-streams/run-length-stream",["skylark-langx-chars","./streams","./decode-stream"],function(t,e,n){var i=n.inherit({klassName:"RunLengthStream",_construct:function(t,e){this.str=t,this.dict=t.dict,n.prototype._construct.call(this,e)},readBlock:function(){var t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])this.eof=!0;else{var e,n=this.bufferLength,i=t[0];if(i<128){if((e=this.ensureBuffer(n+i+1))[n++]=t[1],i>0){var r=this.str.getBytes(i);e.set(r,n),n+=i}}else{i=257-i;var s=t[1];e=this.ensureBuffer(n+i+1);for(var a=0;a<i;a++)e[n++]=s}this.bufferLength=n}}});return e.RunLengthStream=i}),define("skylark-io-streams/streams-sequence-stream",["skylark-langx-chars","./streams","./decode-stream"],function(t,e,n){var i=n.inherit({klassName:"StreamsSequenceStream",_construct:function(t){this.streams=t;let e=0;for(let i=0,r=t.length;i<r;i++){const r=t[i];e+=r instanceof n?r._rawMinBufferLength:r.length}n.prototype._construct.call(this,e)},readBlock:function(){var t=this.streams;if(0!==e.length){t.shift();var n=t.getBytes(),i=this.bufferLength,r=i+n.length,s=this.ensureBuffer(r);s.set(n,i),this.bufferLength=r}else this.eof=!0},getBaseStreams:function(){for(var t=[],e=0,n=this.streams.length;e<n;e++){var i=this.streams[e];i.getBaseStreams&&t.push(...i.getBaseStreams())}return t}});return e.StreamsSequenceStream=i}),define("skylark-io-streams/string-stream",["./streams","./_stream"],function(t,e){var n=e.inherit({klassName:"StringStream",_construct:function(t){for(var n=t.length,i=new Uint8Array(n),r=0;r<n;++r)i[r]=t.charCodeAt(r);e.prototype._construct.call(this,i)}});return t.StringStream=n}),define("skylark-io-streams/main",["./streams","./ascii85-stream","./ascii-hex-stream","./chunked-stream","./decode-stream","./decrypt-stream","./fake-stream","./flate-stream","./lzw-stream","./null-stream","./predictor-stream","./run-length-stream","./_stream","./streams-sequence-stream","./string-stream"],function(t){return t}),define("skylark-io-streams",["skylark-io-streams/main"],function(t){return t}),define("skylark-net-http/restful",["skylark-langx-objects","skylark-langx-strings","skylark-langx-emitter/evented","./xhr"],function(t,e,n,i){var r=t.mixin,s=e.substitute,a=n.inherit({klassName:"Restful",idAttribute:"id",getBaseUrl:function(t){var e=s(this.baseEndpoint,t),n=this.server+this.basePath+e;return void 0!==t[this.idAttribute]&&(n=n+"/"+t[this.idAttribute]),n},_head:function(t){},_get:function(t){return i.get(this.getBaseUrl(t),t)},_post:function(t,e){var n=this.getBaseUrl(t);return e&&(n=n+"/"+e),i.post(n,t)},_put:function(t,e){var n=this.getBaseUrl(t);return e&&(n=n+"/"+e),i.put(n,t)},_delete:function(t){var e=this.getBaseUrl(t);return i.del(e)},_patch:function(t){var e=this.getBaseUrl(t);return i.patch(e,t)},query:function(t){return this._post(t)},retrieve:function(t){return this._get(t)},create:function(t){return this._post(t)},update:function(t){return this._put(t)},delete:function(t){return this._delete(t)},patch:function(t){return this._patch(t)},init:function(t){r(this,t)}});return a}),define("skylark-net-http/main",["./http","./restful","./Xhr","./upload"],function(t){return t}),define("skylark-net-http",["skylark-net-http/main"],function(t){return t}),define("skylark-appify-routers/routers",["skylark-langx/skylark","skylark-langx/langx"],function(t,e){return t.attach("appify.routers",{createEvent:function(t,n){var i=new CustomEvent(t,n);return e.safeMixin(i,n)}})}),define("skylark-appify-routers/route",["skylark-langx/langx","./routers"],function(t,e){var n=e.createEvent,i=t.Evented.inherit({klassName:"Route",init:function(e,n){var i=(n=t.mixin({},n)).pathto||"",r=i,s=r.match(/\:([a-zA-Z0-9_]+)/g);null!==s?(s=s.map(function(t){return t.substring(1)}),r=r.replace(/\:([a-zA-Z0-9_]+)/g,"(.*?)")):s=[],r="*"===r?"(.*)":r.replace("/","\\/"),this._setting=n,this.name=e,this.pathto=i,this.paramNames=s,this.params=r,this.regex=new RegExp("^"+r+"$","");var a=this;["entering","entered","exiting","exited"].forEach(function(e){t.isFunction(n[e])&&a.on(e,n[e])})},enter:function(e,i){if(i){var r=this._entering(e),s=this;return t.Deferred.when(r).then(function(){var t=n("entering",{route:s,result:!0});return s.trigger(t),t.result})}return this._entered(e),this.trigger(n("entered",t.safeMixin({route:this},e))),this},exit:function(e,i){if(i){var r=this._exiting(e);if(!r)return!1;var s=n("exiting",{route:this,result:!0});return this.trigger(s),s.result}return this._exited(e),this.trigger(n("exited",t.safeMixin({route:this},e))),this},match:function(t){var e=this.paramNames,n=t.indexOf("?"),t=~n?t.slice(0,n):decodeURIComponent(t),i=this.regex.exec(t);if(!i)return!1;for(var r={},s=1,a=i.length;s<a;++s){var o=e[s-1],l=decodeURIComponent(i[s]);r[o]=l}return r},path:function(t){var e=this.pathto;return t&&(e=e.replace(/:([a-zA-Z0-9_]+)/g,function(e,n){return t[n]})),e},_entering:function(t){return!0},_entered:function(t){return!0},_exiting:function(t){return!0},_exited:function(t){return!0}});return e.Route=i}),define("skylark-appify-routers/router",["skylark-langx/langx","./routers","./route"],function(t,e,n){var i=e.createEvent;return e.Router=function(){var e,r,s,a,o={},l={},c=new t.Evented,u=this;function h(n){if(e){var s=e.route.exit({path:e.path,params:e.params},!0);if(!s)return}if(r=e,!(e=n).route){var a=p(e.path);e.route=a.route,e.params=a.params}var o=e.route.enter({force:e.force,path:e.path,params:e.params},!0);t.Deferred.when(o).then(function(){c.trigger(i("routing",{current:e,previous:r})),e.route.enter({path:e.path,params:e.params},!1),r&&r.route.exit({path:r.path,params:r.params},!1),c.trigger(i("routed",{current:e,previous:r}))})}function d(t,n){if(!n&&e&&e.path==t)return!1;var r=p(t);if(r)if(r.path=t,u.useHistoryApi){var a={force:n,path:t};window.history.pushState(a,document.title,(s+t).replace("//","/")),window.dispatchEvent(i("popstate",{state:a}))}else if(u.useHashbang){var o="#!"+t;window.location.hash!==o?window.location.hash=o:h(r)}else h(r);return!0}function p(e,n){var i=!1;return!n&&(i=l[e])?i:(t.each(o,function(t,n){var r=n.match(e);return!r||(i={route:n,params:r},!1)}),i&&!n&&(l[e]=i),i)}function f(e){if(!t.isDefined(e))return t.mixin({},o);for(var n in e)o[n]=new u.Route(n,e[n])}t.mixin(u,{Route:n,current:function(){return e},go:d,map:p,hub:function(){return c},off:function(){c.off.apply(c,arguments)},on:function(){c.on.apply(c,arguments)},one:function(){c.one.apply(c,arguments)},path:function(t,e){var n,i=o[t];i&&(n=i.path(e));return n},previous:function(){return r},baseUrl:function(e){return t.isDefined(e)?(s=e,this):s},homePath:function(e){return t.isDefined(e)?(a=e,this):a},route:function(e,n){if(t.isDefined(n)){var i={};return i[e]=n,f(i),this}return o[e]},routes:f,start:function(){null==u.useHashbang&&null==u.useHistoryApi&&(window.location.host&&window.history.pushState?u.useHistoryApi=!0:u.useHashbang=!0);var t="";u.useHistoryApi?(t=window.location.pathname,void 0===s&&(s=t.replace(/\/$/,"")),t=t.replace(s,"")||a||"/"):t=u.useHashbang&&(window.location.hash.replace("#!","")||a)||"/";t.startsWith("/")||(t="/"+t);u.useHistoryApi?window.addEventListener("popstate",function(t){t.state&&h(t.state),t.preventDefault()}):u.useHashbang&&window.addEventListener("hashchange",function(t){h({path:window.location.hash.replace(/^#!/,"")}),t.preventDefault()});d(t)},trigger:function(t){return c.trigger(t),this},useHistoryApi:null,useHashbang:null})}}),define("skylark-appify-routers/main",["./routers","./router","./route"],function(t){return t}),define("skylark-appify-routers",["skylark-appify-routers/main"],function(t){return t}),define("skylark-appify-spa/spa",["skylark-langx/skylark","skylark-langx/langx","skylark-appify-routers"],function(t,e,n){var i=e.Deferred;function r(t,n){var i=new CustomEvent(t,n);return e.safeMixin(i,n)}var s,a=new n.Router,o=a.Route=a.Route.inherit({klassName:"SpaRoute",init:function(t,n){this.overrided(t,n),this.content=n.content,this.forceRefresh=n.forceRefresh,this.data=n.data;var i=this;["preparing","rendering","rendered"].forEach(function(t){e.isFunction(n[t])&&i.on(t,n[t])})},_entering:function(t){return this.forceRefresh||t.force||!this._prepared?this.prepare():this},getConfigData:function(t){return t?this.data[t]:this.data},getNamedValue:function(){return window.location.pathname.match(this.regex)},prepare:function(){var t=new i,e=this._setting,n=e.controller,s=(this.controller,this);e.content,e.contentPath;return require([n.type],function(e){s.controller=new e(n),t.resolve()}),t.then(function(){var t=r("preparing",{route:s,result:!0});return s.trigger(t),i.when(t.result).then(function(){s._prepared=!0})})},render:function(t){var e=r("rendering",{route:this,context:t,content:this.content});return this.trigger(e),e.content},trigger:function(t){var e=this.controller;return e?e.perform(t):this.overrided(t)}}),l=e.Evented.inherit({klassName:"SpaRouteController",init:function(t,e){e=e||{},this.content=e.content,this.data=e.data},getConfigData:function(t){return t?this.data[t]:this.data},perform:function(t){var e=t.type;if(this[e])return this[e].call(this,t)}}),c=e.Evented.inherit({klassName:"SpaPage",init:function(t){t=e.mixin({routeViewer:"body"},t),this._params=t,this._rvc=document.querySelector(t.routeViewer),this._router=a,a.on("routed",e.proxy(this,"refresh"))},prepare:function(){},refresh:function(){var t=a.current(),n=(a.previous(),t.route.render(t));void 0!==n&&null!==n&&(e.isString(n)?this._rvc.innerHTML=n:(this._rvc.innerHTML="",this._rvc.appendChild(n)),t.route.trigger(r("rendered",{route:t.route,content:n})))}}),u=e.Evented.inherit({klassName:"SpaPlugin",init:function(t,n){this.name=t,e.isString(n.hookers)&&(n.hookers=n.hookers.split(" ")),this._setting=n},isHooked:function(t){var e=this._setting.hookers||[];return e.indexOf(t)>-1},prepare:function(){var t=new i,n=this._setting,s=n.controller,o=this.controller,l=this;return require([s.type],function(i){o=l.controller=new i(s),a.on(n.hookers,{plugin:l},e.proxy(o.perform,o)),t.resolve()}),t.then(function(){var t=r("preparing",{plugin:l,result:!0});return l.trigger(t),i.when(t.result).then(function(){l._prepared=!0})})},trigger:function(t){var e=this.controller;return e?e.perform(t):this.overrided(t)}}),h=e.Evented.inherit({klassName:"SpaPluginController",init:function(t){this.plugin=t},perform:function(t){var e=t.type;if(this[e])return this[e].call(this,t)}}),d=e.Evented.inherit({klassName:"SpaApplication",init:function(t){if(s)return s;var n=this._plugins={};t=this._config=e.mixin({plugins:{}},t,!0),e.each(t.plugins,function(t,e){n[t]=new u(t,e)}),a.routes(t.routes),this._router=a,this._page=new p.Page(t.page),document.title=t.title;var i=t.baseUrl;void 0===i&&(i=t.baseUrl=new e.URL(document.baseURI).pathname),a.baseUrl(i),t.homePath&&a.homePath(t.homePath),s=this},baseUrl:function(){return a.baseUrl()},getConfig:function(t){return t?this._config[t]:this._config},go:function(t,e){return a.go(t,e),this},page:function(){return this._page},prepare:function(){if(this._prepared)return i.resolve();var t=this,n=e.map(this._plugins,function(t,e){if(t.isHooked("starting"))return t.prepare()});return i.all(n).then(function(){a.trigger(r("starting",{spa:t}));var n=e.map(a.routes(),function(t,e){if(!1===t.lazy)return t.prepare()}),s=e.map(t._plugins,function(t,e){if(!t.isHooked("starting"))return t.prepare()});return i.all(n.concat(s)).then(function(){t._prepared=!0})})},run:function(){this._router.start(),a.trigger(r("started",{spa:this}))}}),p=function(t){return s||(window[t.name||"app"]=s=new p.Application(t)),s};return e.mixin(p,{Application:d,Page:c,Plugin:u,PluginController:h,Route:o,router:a,RouteController:l}),t.attach("appify.spa",p)}),define("skylark-appify-spa/main",["./spa"],function(t){return t}),define("skylark-appify-spa",["skylark-appify-spa/main"],function(t){return t}),define("skylark-data-entities/entities",["skylark-langx/langx"],function(t){function e(){return e}return t.mixin(e,{emulateHTTP:!1,emulateJSON:!1,backends:{}}),e}),define("skylark-data-entities/Entity",["skylark-langx/langx","./entities"],function(t,e){var n=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}},i=t.Stateful.inherit({sync:function(){return e.sync.apply(this,arguments)},matches:function(e){return t.isMatch(this.attributes,e)},fetch:function(e){var i=this,r=(e=t.mixin({parse:!0},e)).success;return e.success=function(t){var n=e.parse?i.parse(t,e):t;if(!i.set(n,e))return!1;r&&r.call(e.context,i,t,e),i.trigger("sync",i,t,e)},n(this,e),this.sync("read",this,e)},save:function(e,i,r){var s;null==e||"object"==typeof e?(s=e,r=i):(s={})[e]=i;var a=(r=t.mixin({validate:!0,parse:!0},r)).wait;if(s&&!a){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;var o=this,l=r.success,c=this.attributes;r.success=function(e){o.attributes=c;var n=r.parse?o.parse(e,r):e;if(a&&(n=t.mixin({},s,n)),n&&!o.set(n,r))return!1;l&&l.call(r.context,o,e,r),o.trigger("sync",o,e,r)},n(this,r),s&&a&&(this.attributes=t.mixin({},c,s));var u=this.isNew()?"create":r.patch?"patch":"update";"patch"!==u||r.attrs||(r.attrs=s);var h=this.sync(u,this,r);return this.attributes=c,h},destroy:function(e){var i=this,r=(e=e?t.clone(e):{}).success,s=e.wait,a=function(){i.stopListening(),i.trigger("destroy",i,i.collection,e)};e.success=function(t){s&&a(),r&&r.call(e.context,i,t,e),i.isNew()||i.trigger("sync",i,t,e)};var o=!1;return this.isNew()?t.defer(e.success):(n(this,e),o=this.sync("delete",this,e)),s||a(),o},url:function(){var e=t.result(this,"urlRoot")||t.result(this.collection,"url")||urlError();if(this.isNew())return e;var n=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(n)},parse:function(t,e){return t}});return e.Entity=i}),define("skylark-data-entities/Collection",["skylark-langx/langx","./entities","./Entity"],function(t,e,n){var i=t.Evented.inherit({_construct:function(e,n){n||(n={}),n.entity&&(this.entity=n.entity),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),e&&this.reset(e,t.mixin({silent:!0},n))}}),r={add:!0,remove:!0,merge:!0},s={add:!0,remove:!1},a=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),s=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<s;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+s+n]=r[i]};return i.partial({entity:n,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,n){return this.set(e,t.mixin({merge:!1},n,s))},remove:function(e,n){n=t.mixin({},n);var i=!t.isArray(e);e=i?[e]:e.slice();var r=this._removeEntitys(e,n);return!n.silent&&r.length&&(n.changes={added:[],merged:[],removed:r},this.trigger("update",this,n)),i?r[0]:r},set:function(e,n){if(null!=e){(n=t.mixin({},r,n)).parse&&!this._isEntity(e)&&(e=this.parse(e,n)||[]);var i=!t.isArray(e);e=i?[e]:e.slice();var s=n.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var o,l,c=[],u=[],h=[],d=[],p={},f=n.add,m=n.merge,g=n.remove,y=!1,v=this.comparator&&null==s&&!1!==n.sort,k=t.isString(this.comparator)?this.comparator:null;for(l=0;l<e.length;l++){o=e[l];var x=this.get(o);if(x){if(m&&o!==x){var b=this._isEntity(o)?o.attributes:o;n.parse&&(b=x.parse(b,n)),x.set(b,n),h.push(x),v&&!y&&(y=x.hasChanged(k))}p[x.cid]||(p[x.cid]=!0,c.push(x)),e[l]=x}else f&&(o=e[l]=this._prepareEntity(o,n))&&(u.push(o),this._addReference(o,n),p[o.cid]=!0,c.push(o))}if(g){for(l=0;l<this.length;l++)o=this.entities[l],p[o.cid]||d.push(o);d.length&&this._removeEntitys(d,n)}var w=!1,_=!v&&f&&g;if(c.length&&_?(w=this.length!==c.length||this.entities.some(function(t,e){return t!==c[e]}),this.entities.length=0,a(this.entities,c,0),this.length=this.entities.length):u.length&&(v&&(y=!0),a(this.entities,u,null==s?this.length:s),this.length=this.entities.length),y&&this.sort({silent:!0}),!n.silent){for(l=0;l<u.length;l++)null!=s&&(n.index=s+l),(o=u[l]).trigger("add",o,this,n);(y||w)&&this.trigger("sort",this,n),(u.length||d.length||h.length)&&(n.changes={added:u,removed:d,merged:h},this.trigger("update",this,n))}return i?e[0]:e}},reset:function(e,n){n=n?t.clone(n):{};for(var i=0;i<this.entities.length;i++)this._removeReference(this.entities[i],n);return n.previousEntitys=this.entities,this._reset(),e=this.add(e,t.mixin({silent:!0},n)),n.silent||this.trigger("reset",this,n),e},push:function(e,n){return this.add(e,t.mixin({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(e,n){return this.add(e,t.mixin({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return slice.apply(this.entities,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.entityId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.entities[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(e){var n=this.comparator;if(!n)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=n.length;return t.isFunction(n)&&(n=t.proxy(n,this)),1===i||t.isString(n)?this.entities=this.sortBy(n):this.entities.sort(n),e.silent||this.trigger("sort",this,e),this},pluck:function(t){return this.map(t+"")},fetch:function(e){var n=(e=t.mixin({parse:!0},e)).success,i=this;return e.success=function(t){var r=e.reset?"reset":"set";i[r](t,e),n&&n.call(e.context,i,t,e),i.trigger("sync",i,t,e)},function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}}(this,e),this.sync("read",this,e)},create:function(e,n){var i=(n=n?t.clone(n):{}).wait;if(!(e=this._prepareEntity(e,n)))return!1;i||this.add(e,n);var r=this,s=n.success;return n.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},e.save(null,n),e},parse:function(t,e){return t},clone:function(){return new this.constructor(this.entities,{entity:this.entity,comparator:this.comparator})},entityId:function(t){return t[this.entity.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.entities=[],this._byId={}},_prepareEntity:function(e,n){if(this._isEntity(e))return e.collection||(e.collection=this),e;(n=n?t.clone(n):{}).collection=this;var i=new this.entity(e,n);return i.validationError?(this.trigger("invalid",this,i.validationError,n),!1):i},_removeEntitys:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var s=this.indexOf(r);this.entities.splice(s,1),this.length--,delete this._byId[r.cid];var a=this.entityId(r.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=s,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isEntity:function(t){return t instanceof n},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.entityId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onEntityEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.entityId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onEntityEvent,this)},_onEntityEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.entityId(e.previousAttributes()),s=this.entityId(e.attributes);r!==s&&(null!=r&&delete this._byId[r],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}}),e.Collection=i}),define("skylark-data-entities/backends/registry",[],function(){var t={};return{add:function(e,n){t[e]=n},remove:function(t){delete provides[t]},get:function(e){return t[e]}}}),define("skylark-data-entities/sync",["skylark-langx/langx","./entities","./backends/registry"],function(t,e,n){return e.sync=function(e,i,r){if(!r.backend)throw new Error("The backend is not specified");var s=n.get(r.backend);if(!s)throw new Error("The backend is not defined:"+r.backend);var a=s.sync;if(!a)throw new Error("The backend sync method is not defined:"+r.backend);var o=t.mixin({},s.options,r);return a.apply(this,[e,i,o])}}),define("skylark-data-entities/backends/ajaxSync",["skylark-langx/langx","../entities"],function(t,e){var n={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};return e.backends.ajaxSync=function(i,r,s){var a=n[i];t.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:a,dataType:"json"};s.url||(o.url=t.result(r,"url")||urlError());null!=s.data||!r||"create"!==i&&"update"!==i&&"patch"!==i||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||r.toJSON(s)));s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{entity:o.data}:{});if(s.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",s.emulateJSON&&(o.data._method=a);var l=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",a),l)return l.apply(this,arguments)}}"GET"===o.type||s.emulateJSON||(o.processData=!1);var c=s.error;s.error=function(t,e,n){s.textStatus=e,s.errorThrown=n,c&&c.call(s.context,t,e,n)};var u=s.xhr=t.Xhr.request(t.mixin(o,s));return r.trigger("request",r,u,s),u}}),define("skylark-data-entities/backends/localSync",["skylark-langx/langx","../entities"],function(t,e){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var i=t.klass({_construct:function(t){this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]},save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){return this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),_.include(this.records,t.id.toString())||this.records.push(t.id.toString()),this.save(),this.find(t)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){return _(this.records).chain().map(function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t))},this).compact().value()},destroy:function(t){return!t.isNew()&&(this.localStorage().removeItem(this.name+"-"+t.id),this.records=_.reject(this.records,function(e){return e===t.id.toString()}),this.save(),t)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)}});function r(e,n,i){var r,s,a=n.localStorage||n.collection.localStorage,o=t.Deferred();try{switch(e){case"read":r=void 0!=n.id?a.find(n):a.findAll();break;case"create":r=a.create(n);break;case"update":r=a.update(n);break;case"delete":r=a.destroy(n)}}catch(t){s=t.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length?"Private browsing is unsupported":t.message}return r?(n.trigger("sync",n,r,i),i&&i.success&&i.success(r),o&&o.resolve(r)):(s=s||"Record Not Found",i&&i.error&&i.error(s),o&&o.reject(s)),i&&i.complete&&i.complete(r),o&&o.promise()}return e.backends.LocalStorage=r.LocalStorage=i,e.backends.localSync=r}),define("skylark-data-entities/main",["./entities","./Collection","./Entity","./sync","./backends/ajaxSync","./backends/localSync","./backends/registry"],function(t){return t}),define("skylark-data-entities",["skylark-data-entities/main"],function(t){return t}),define("skylark-domx-forms/forms",["skylark-langx/skylark"],function(t){return t.attach("domx.forms",{})}),define("skylark-domx-forms/deserialize",["skylark-langx/langx","skylark-domx-query","./forms"],function(t,e,n){function i(t,e,n){var i=n[t];return void 0===i?n[t]=[e]:i.push(e),n}var r={checked:["radio","checkbox"],selected:["option","select-one","select-multiple"],value:["button","color","date","datetime","datetime-local","email","hidden","month","number","password","range","reset","search","submit","tel","text","textarea","time","url","week"]};function s(e,n,i,s,a){var o=function(e){var n=function(t){return(t.type||t.nodeName).toLowerCase()}(e),i=void 0;return t.each(r,function(e,r){if(t.inArray(n,r)>-1)return i=e,!1}),i}(e);if("value"==o&&n==s)e.value=i,a.call(e,i);else if("checked"==o||"selected"==o){var l=[];e.options?t.each(e.options,function(t,e){l.push(e)}):l.push(e),e.multiple&&0==s&&(e.selectedIndex=-1),t.each(l,function(t,e){e.value==i&&(e[o]=!0,a.call(e,i))})}}var a={change:t.noop,complete:t.noop};return n.deserialize=function(n,r,o){t.isFunction(o)&&(o={complete:o});o=t.extend(a,o||{}),r=function(e){var n={},r=/\+/g;t.isPlainObject(e)?(t.extend(n,e),t.each(n,function(e,i){t.isArray(i)||(n[e]=[i])})):t.isArray(e)?t.each(e,function(t,e){i(e.name,e.value,n)}):"string"==typeof e&&t.each(e.split("&"),function(t,e){var s=e.split("="),a=decodeURIComponent(s[0].replace(r,"%20")),o=decodeURIComponent(s[1].replace(r,"%20"));i(a,o,n)});return n}(r);var l=function(n,r){var s={},a=e(n).map(function(){return this.elements?t.makeArray(this.elements):this}).filter(r||":input:not(:disabled)").get();return t.each(a,function(t,e){i(e.name,e,s)}),s}(n,o.filter);return t.each(r,function(e,n){t.each(l[e],function(e,i){t.each(n,function(t,n){s(i,e,n,t,o.change)})})}),o.complete.call(n),this}}),define("skylark-domx-forms/serialize-array",["skylark-langx/langx","skylark-domx-data","./forms"],function(t,e,n){return n.serializeArray=function(n){var i,r,s=[],a=function(t){if(t.forEach)return t.forEach(a);s.push({name:i,value:t})};return t.each(n.elements,function(t,n){r=n.type,(i=n.name)&&"fieldset"!=n.nodeName.toLowerCase()&&!n.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&"file"!=r&&("radio"!=r&&"checkbox"!=r||n.checked)&&a(e.val(n))}),s}}),define("skylark-domx-forms/serialize-object",["skylark-langx/langx","./forms","./serialize-array"],function(t,e,n){return e.serializeObject=function(e){var i={};return t.each(n(e),function(e,n){var r=n.name,s=n.value;i[r]=void 0===i[r]?s:t.isArray(i[r])?i[r].concat(s):[i[r],s]}),i}}),define("skylark-domx-forms/serialize",["skylark-langx/langx","./forms","./serialize-array"],function(t,e,n){return e.serialize=function(t){var e=[];return n(t).forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")}}),define("skylark-domx-forms/main",["./forms","skylark-domx-velm","skylark-domx-query","./deserialize","./serialize-array","./serialize-object","./serialize"],function(t,e,n){return e.delegate(["deserialize","serializeArray","serializeObject","serialize"],t),n.fn.deserialize=n.wraps.wrapper_value(t.deserialize,t,t.deserialize),n.fn.serializeArray=n.wraps.wrapper_value(t.serializeArray,t,t.serializeArray),n.fn.serializeObject=n.wraps.wrapper_value(t.serializeObject,t,t.serializeObject),n.fn.serialize=n.wraps.wrapper_value(t.serialize,t,t.serialize),t}),define("skylark-domx-forms",["skylark-domx-forms/main"],function(t){return t}),define("skylark-jquery/core",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-forms","skylark-domx-fx","skylark-domx-styler","skylark-domx-query","skylark-langx-scripter"],function(t,e,n,i,r,s,a,o,l,c,u,h){var d,p=Array.prototype.filter;Array.prototype.slice;return(d=u).fn.jquery="2.2.0",d.browser=n,d.camelCase=e.camelCase,d.cleanData=function(t){for(var e,n=0;void 0!==(e=t[n]);n++)r.cleanData(e)},d.removeData=function(t,e){r.removeData(t,e)},d.each=e.each,d.extend=e.extend,d.grep=function(t,e){return p.call(t,e)},d.attr=function(t,e){return r.attr(t,e)},d.isArray=e.isArray,d.isEmptyObject=e.isEmptyObject,d.isFunction=e.isFunction,d.isWindow=e.isWindow,d.isPlainObject=e.isPlainObject,d.isNumeric=e.isNumber,d.inArray=e.inArray,d.makeArray=e.makeArray,d.map=e.map,d.noop=function(){},d.parseJSON=window.JSON.parse,d.proxy=e.proxy,d.trim=e.trim,d.type=e.type,d.fn.extend=function(t){e.mixin(d.fn,t)},function(t){t.Event=function(t,n){if(e.isString(t)){var i=t;return s.create(i,n)}return s.proxy(t,n)},t.event={},t.event.special=s.special,t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this},t.fn.triggerHandler=t.fn.trigger,t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.bind=function(t,e,n,i){return this.on(t,e,n,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.ready=function(t){return s.ready(t),this},t.fn.stop=function(){return this},t.fn.moveto=function(t,e){return this.animate({left:t+"px",top:e+"px"},.4)},t.ready=s.ready,t.on=s.on,t.off=s.off}(u),function(t){t.uuid=0,t.support=n.support,t.expr={},t.expr[":"]=t.expr.pseudos=t.expr.filters=a.pseudos,t.expr.createPseudo=function(t){return t},t.cssHooks=c.cssHooks,t.contains=i.contains,t.css=c.css,t.data=r.data,t.fx=l,t.fx.step={},t.speed=function(e,n,i){var r=e&&"object"==typeof e?t.extend({},e):{complete:i||!i&&n||t.isFunction(e)&&e,duration:e,easing:i&&n||n&&!t.isFunction(n)&&n};return t.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in t.fx.speeds?r.duration=t.fx.speeds[r.duration]:r.duration=t.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){t.isFunction(r.old)&&r.old.call(this),r.queue&&t.dequeue(this,r.queue)},r},t.easing={},t.offset={},t.offset.setOffset=function(e,n,i){var r=t.css(e,"position");"static"===r&&(e.style.position="relative");var s,a,o=t(e),l=o.offset(),c=t.css(e,"top"),u=t.css(e,"left"),h=("absolute"===r||"fixed"===r)&&t.inArray("auto",[c,u])>-1,d={},p={};h?(p=o.position(),s=p.top,a=p.left):(s=parseFloat(c)||0,a=parseFloat(u)||0),t.isFunction(n)&&(n=n.call(e,i,l)),null!=n.top&&(d.top=n.top-l.top+s),null!=n.left&&(d.left=n.left-l.left+a),"using"in n?n.using.call(e,d):o.css(d)},t._data=function(t,e){return t.hasAttribute?r.data(t,e):{}};var e=t.fn.text;t.fn.text=function(t){var n=e.apply(this,arguments);return void 0===n&&(n=""),n},t.fn.pos=t.fn.position}(u),u.parseHTML=function(t){return i.createFragment(t)},u.uniqueSort=u.unique=e.uniq,u.skylark=t,window.jQuery=window.$=u}),define("skylark-jquery/ajax",["skylark-langx/langx","skylark-net-http/xhr","./core"],function(t,e,n){var i=0;function r(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function s(t,e,i,r){return n.isFunction(t)?(r=e,i=t,e=void 0,t=void 0):n.isFunction(e)&&(r=i,i=e,e=void 0),n.isFunction(i)||(r=i,i=void 0),{url:t,data:e,success:i,dataType:r}}n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){n.fn[e]=function(t){return this.on(e,t)}}),n.ajaxJSONP=function(e){var s,a,o=new t.Deferred,l=e.jsonpCallback,c=(n.isFunction(l)?l():l)||"jsonp"+ ++i,u=document.createElement("script"),h=window[c],d=function(t){n(u).triggerHandler("error",t||"abort")},p={abort:d};for(var f in e.data)e.url=r(e.url,f+"="+e.data[f]);return n(u).on("load error",function(t,e){clearTimeout(a),n(u).off().remove(),"error"!=t.type&&s?o.resolve(s[0],200,p):o.reject(t),window[c]=h,s&&n.isFunction(h)&&h(s[0]),h=s=void 0}),window[c]=function(){s=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),document.head.appendChild(u),e.timeout>0&&(a=setTimeout(function(){d("timeout")},e.timeout)),o},n.ajaxSettings={processData:!0},n.ajax=function(i,s){if(i?s?s.url=i:s=t.isString(i)?{url:i}:i:s={url:"./"},"jsonp"==(s=t.mixin({},n.ajaxSettings,s)).dataType){var a=/\?.+=\?/.test(s.url);return a||(s.url=r(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),n.ajaxJSONP(s)}var o=e.request(s.url,s);return(o=o.then(function(t,e,i){n(document).trigger("ajaxSucess"),s.success&&s.success.apply(this,arguments);s.complete&&s.complete.apply(this,arguments);return t},function(){n(document).trigger("ajaxError"),s.error&&s.error.apply(this,arguments)})).success=o.done,o.error=o.fail,o.complete=o.always,o},n.get=function(){return n.ajax(s.apply(null,arguments))},n.post=function(){var t=s.apply(null,arguments);return t.type="POST",n.ajax(t)},n.getJSON=function(){var t=s.apply(null,arguments);return t.dataType="json",n.ajax(t)};var a=n.fn.load;function o(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(l)||[];if(jQuery.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}n.fn.load=function(t,e,i){if("string"!=typeof t&&a)return a.apply(this,arguments);if(!this.length)return this;var r,o=this,l=s(t,e,i),c=l.url&&l.url.split(/\s/),u=l.success;return c&&c.length>1&&(l.url=c[0],r=c[1]),l.data&&"object"==typeof l.data&&(l.type="POST"),l.success=function(t){o.html(r?n("<div>").html(t.replace(rscript,"")).find(r):t),u&&u.apply(o,arguments)},n.ajax(l),this},n.param=e.param;var l=/\S+/g;return n.ajaxPrefilter=o({}),n.ajaxTransport=o({}),n.ajaxSetup=function(n,i){t.mixin(e.defaultOptions,n,i)},n.getScript=function(t,e){return n.get(t,void 0,e,"script")},n}),define("skylark-jquery/callbacks",["./core"],function(t){return t.Callbacks=function(e){var n,i,r,s,a,o,l=[],c=!(e=t.extend({},e)).once&&[],u=function(t){for(n=e.memory&&t,i=!0,o=s||0,s=0,a=l.length,r=!0;l&&o<a;++o)if(!1===l[o].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}r=!1,l&&(c?c.length&&u(c.shift()):n?l.length=0:h.disable())},h={add:function(){if(l){var i=l.length,o=function(n){t.each(n,function(t,n){"function"==typeof n?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&o(n)})};o(arguments),r?a=l.length:n&&(s=i,u(n))}return this},remove:function(){return l&&t.each(arguments,function(e,n){for(var i;(i=t.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=a&&--a,i<=o&&--o)}),this},has:function(e){return!(!l||!(e?t.inArray(e,l)>-1:l.length))},empty:function(){return a=l.length=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||i&&!c||(e=[t,(e=e||[]).slice?e.slice():e],r?c.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments)},fired:function(){return!!i}};return h},t}),define("skylark-jquery/deferred",["./core","skylark-langx/langx"],function(t,e){return t.Deferred=function(){var t=new e.Deferred,n={promise:function(){return t.promise}};return["resolve","resolveWith","reject","rejectWith","notify","then","done","fail","progress","always","state"].forEach(function(e){n[e]=function(){var i=t[e].apply(t,arguments);return i==t&&(i=n),i}}),n},t.when=function(){var t=e.Deferred.all(e.makeArray(arguments)),n=t.then;return t.then=function(e,i){return n.call(t,function(t){return e&&e.apply(null,t)},i)},t},t}),define("skylark-jquery/queue",["skylark-langx/langx","./core","./callbacks"],function(t,e){var n="Sky"+("1.0"+Math.random()).replace(/\D/g,""),i=/\S+/g,r=[].push;function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n+Math.random()}s.uid=1,s.accepts=function(t){return!t.nodeType||(1===t.nodeType||9===t.nodeType)},s.prototype={key:function(t){if(!s.accepts(t))return 0;var n={},i=t[this.expando];if(!i){i=s.uid++;try{n[this.expando]={value:i},Object.defineProperties(t,n)}catch(r){n[this.expando]=i,e.extend(t,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,n,i){var r,s=this.key(t),a=this.cache[s];if("string"==typeof n)a[n]=i;else if(e.isEmptyObject(a))e.extend(this.cache[s],n);else for(r in n)a[r]=n[r];return a},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,n,i){var r;return void 0===n||n&&"string"==typeof n&&void 0===i?void 0!==(r=this.get(t,n))?r:this.get(t,e.camelCase(n)):(this.set(t,n,i),void 0!==i?i:n)},remove:function(t,n){var r,s,a,o=this.key(t),l=this.cache[o];if(void 0===n)this.cache[o]={};else{e.isArray(n)?s=n.concat(n.map(e.camelCase)):(a=e.camelCase(n),s=n in l?[n,a]:(s=a)in l?[s]:s.match(i)||[]),r=s.length;for(;r--;)delete l[s[r]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var a=new s;return e.extend(e,{queue:function(t,n,i){var r;if(t)return n=(n||"fx")+"queue",r=a.get(t,n),i&&(!r||e.isArray(i)?r=a.access(t,n,e.makeArray(i)):r.push(i)),r||[]},dequeue:function(t,n){n=n||"fx";var i=e.queue(t,n),r=i.length,s=i.shift(),a=e._queueHooks(t,n);"inprogress"===s&&(s=i.shift(),r--),s&&("fx"===n&&i.unshift("inprogress"),delete a.stop,s.call(t,function(){e.dequeue(t,n)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,n){var i=n+"queueHooks";return a.get(t,i)||a.access(t,i,{empty:e.Callbacks("once memory").add(function(){a.remove(t,[n+"queue",i])})})},makeArray:function(t,n){var i=n||[];return null!=t&&(!function(t){var n=t.length,i=e.type(t);if(e.isWindow(t))return!1;if(1===t.nodeType&&n)return!0;return"array"===i||"function"!==i&&(0===n||"number"==typeof n&&n>0&&n-1 in t)}(Object(t))?r.call(i,t):e.merge(i,"string"==typeof t?[t]:t)),i},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t}}),e.extend(e.fn,{queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?e.queue(this[0],t):void 0===n?this:this.each(function(){var i=e.queue(this,t,n);e._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&e.dequeue(this,t)})},dequeue:function(t){return this.each(function(){e.dequeue(this,t)})},delay:function(t,n){return t=e.fx&&e.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,s=e.Deferred(),o=this,l=this.length,c=function(){--r||s.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=void 0),t=t||"fx";l--;)(i=a.get(o[l],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(c));return c(),s.promise(n)}}),e}),define("skylark-jquery/jquery-plugin",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx/langx","skylark-domx-data","skylark-domx-eventer","skylark-domx-plugins-base","skylark-domx-query"],function(t,e,n,i,r,s,a,o){var l=0,c=a.Plugin.inherit({klassName:"JqPlugin",pluginEventPrefix:"",options:{create:null},destroy:function(){this.overrided(),this.element.off(this.eventNamespace),this.bindings.off(this.eventNamespace)},_construct:function(t,e){t=o(t||this.defaultElement||this)[0],this.element=o(t),this.uuid=l++,this.eventNamespace="."+this.pluginName+this.uuid,this.bindings=o(),this.classesElementLookup={},this.hoverable=o(),this.focusable=o(),t!==this&&(r.data(t,this.pluginName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=o(t.style?t.ownerDocument:t.document||t),this.window=o(this.document[0].defaultView||this.document[0].parentWindow)),this.overrided(t,e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_initOptions:function(t){t=i.mixin(this._getCreateOptions(),t),this.overrided(t)},_getCreateOptions:function(){return{}},_getCreateEventData:i.noop,_super:function(){if(this.overrided)return this.overrided.apply(this,arguments)},_superApply:function(t){if(this.overrided)return this.overrided.apply(this,t)},_create:i.noop,_init:i.noop,_classes:function(t){var n=[],r=this;function s(e,s){var a,l;for(l=0;l<e.length;l++)a=r.classesElementLookup[e[l]]||o(),t.add?(t.element.each(function(t,e){var n=i.map(r.classesElementLookup,function(t){return t}).some(function(t){return o(t).is(e)});n||r._on(o(e),{remove:"_untrackClassesElement"})}),a=o(i.uniq(a.get().concat(t.element.get())))):a=o(a.not(t.element).get()),r.classesElementLookup[e[l]]=a,n.push(e[l]),s&&t.classes[e[l]]&&n.push(t.classes[e[l]])}return(t=e.mixin({element:this.element,classes:this.options.classes||{}},t)).keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var e=this;i.each(e.classesElementLookup,function(i,r){-1!==n.inArray(t.target,r)&&(e.classesElementLookup[i]=o(r.not(t.target).get()))}),this._off(o(t.target))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,s={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(t,n,i){var r,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=o(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(e,i){function a(){if(t||!0!==s.options.disabled&&!o(this).hasClass("ui-state-disabled"))return("string"==typeof i?s[i]:i).apply(s,arguments)}"string"!=typeof i&&(a.guid=i.guid=i.guid||a.guid||o.guid++);var l=e.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.on(c,u,a):n.on(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=o(this.bindings.not(t).get()),this.focusable=o(this.focusable.not(t).get()),this.hoverable=o(this.hoverable.not(t).get())},_trigger:function(e,n,i){var r,a,o=this.options[e];if(i=i||{},(n=s.proxy(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(t.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})}});return c}),define("skylark-jquery/widget",["skylark-langx/langx","skylark-domx-plugins-base","./core","./jquery-plugin"],function(t,e,n,i){var r,s=Array.prototype.hasOwnProperty,a=Array.prototype.slice;return n.cleanData=(r=n.cleanData,function(t){var e,i,s;for(s=0;null!=(i=t[s]);s++)(e=n._data(i,"events"))&&e.remove&&n(i).triggerHandler("remove");r(t)}),n.widget=function(t,i,r){var s,a,o=t.split(".")[0];t=t.split(".")[1];var l=o+"-"+t;r||(r=i,i=n.Widget),n.isArray(r)&&(r=n.extend.apply(null,[{}].concat(r))),n.expr.pseudos[l.toLowerCase()]=function(t){return!!n.data(t,l)},n[o]=n[o]||{},s=n[o][t];var c=i.prototype,u={};for(var h in r){var d=r[h];n.isPlainObject(d)?u[h]=n.isPlainObject(c[h])?n.widget.extend({},c[h],d):n.widget.extend({},d):u[h]=d}var p=n.widget.extend({widgetEventPrefix:s&&i.prototype.widgetEventPrefix||t},{options:i.prototype.options},u,{name:l,namespace:o,widgetName:t,pluginName:"jqueryui."+(o?o+".":"")+t,widgetFullName:l});return a=n[o][t]=i.inherit(p),n.extend(a,s,{version:r.version,_proto:p,_childConstructors:[]}),s?(n.each(s._childConstructors,function(t,e){var i=e.prototype;n.widget(i.namespace+"."+i.widgetName,a,e._proto)}),delete s._childConstructors):i._childConstructors&&i._childConstructors.push(a),e.register(a,t,l),a},n.widget.extend=function(t){for(var e,i,r=a.call(arguments,1),o=0,l=r.length;o<l;o++)for(e in r[o])i=r[o][e],s.call(r[o],e)&&void 0!==i&&(n.isPlainObject(i)?t[e]=n.isPlainObject(t[e])?n.widget.extend({},t[e],i):n.widget.extend({},i):t[e]=i);return t},n.Widget=i.inherit({widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},widget:function(){return this.element},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,r;for(e in t)r=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&r&&r.length&&(i=n(r.get()),this._removeClass(r,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(n(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(n(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-focus")}})}}),n.Widget._childConstructors=[],n.each({show:"fadeIn",hide:"fadeOut"},function(t,e){n.Widget.prototype["_"+t]=function(i,r,s){var a;"string"==typeof r&&(r={effect:r});var o=r?!0===r||"number"==typeof r?e:r.effect||e:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!n.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),a&&n.effects&&n.effects.effect[o]?i[t](r):o!==t&&i[o]?i[o](r.duration,r.easing,s):i.queue(function(e){n(this)[t](),s&&s.call(i[0]),e()})}}),n.widget}),define("skylark-jquery/main",["./core","./ajax","./callbacks","./deferred","./queue","./jquery-plugin","./widget"],function(t){return t}),define("skylark-jquery",["skylark-jquery/main"],function(t){return t}),define("skylark-slax-runtime/skylark",["./slax","skylark-langx-ns","skylark-langx","skylark-langx-logging","skylark-domx","skylark-domx-files","skylark-domx-images","skylark-domx-i18n","skylark-domx-plugins-base","skylark-domx-plugins-colors","skylark-domx-plugins-groups","skylark-domx-plugins-pictures","skylark-domx-plugins-players","skylark-domx-plugins-panels","skylark-domx-plugins-embeds","skylark-domx-plugins-sandboxs","skylark-domx-plugins-menus","skylark-domx-plugins-popups","skylark-domx-plugins-uploads","skylark-devices-keyboard","skylark-devices-orientation","skylark-devices-points","skylark-devices-webgl","skylark-io-mimes","skylark-io-caches","skylark-io-diskfs","skylark-io-streams","skylark-net-http","skylark-appify-routers","skylark-appify-spa","skylark-data-entities","skylark-jquery"],function(t,e){return t.skylark=e}),define("skylark-slax-runtime/main",["./slax","./caches","./skylark"],function(t){return t}),define("skylark-slax-runtime",["skylark-slax-runtime/main"],function(t){return t})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-slax-runtime-all.js.map
