{"version":3,"sources":["skylark-slax-runtime-all.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../skylark-slax-runtime-all.js","sourcesContent":["/*!\r\n   * The buffer module from node.js, for the browser.\r\n   *\r\n   * @author   Feross Aboukhadijeh <https://feross.org>\r\n   * @license  MIT\r\n   */\r\n\r\n/**\r\n     * https://github.com/cho45/micro-template.js\r\n     * (c) cho45 http://cho45.github.com/mit-license\r\n     *\r\n    function template (id, data) {\r\n\r\n        function include(name, args) {\r\n            var stash = {};\r\n            for (var key in template.context.stash) if (template.context.stash.hasOwnProperty(key)) {\r\n                stash[key] = template.context.stash[key];\r\n            }\r\n            if (args) for (var key in args) if (args.hasOwnProperty(key)) {\r\n                stash[key] = args[key];\r\n            }\r\n            var context = template.context;\r\n            context.ret += template(name, stash);\r\n            template.context = context;\r\n        }\r\n\r\n        function wrapper(name, fun) {\r\n            var current = template.context.ret;\r\n            template.context.ret = '';\r\n            fun.apply(template.context);\r\n            var content = template.context.ret;\r\n            var orig_content = template.context.stash.content;\r\n            template.context.stash.content = content;\r\n            template.context.ret = current + template(name, template.context.stash);\r\n            template.context.stash.content = orig_content;\r\n        }\r\n\r\n        var me = arguments.callee;\r\n        if (!me.cache[id]) me.cache[id] = (function () {\r\n            var name = id, string = /^[\\w\\-]+$/.test(id) ? me.get(id): (name = 'template(string)', id); // no warnings\r\n            var line = 1, body = (\r\n                \"try { \" +\r\n                    (me.variable ?  \"var \" + me.variable + \" = this.stash;\" : \"with (this.stash) { \") +\r\n                        \"this.ret += '\"  +\r\n                        string.\r\n                            replace(/<%/g, '\\x11').replace(/%>/g, '\\x13'). // if you want other tag, just edit this line\r\n                            replace(/'(?![^\\x11\\x13]+?\\x13)/g, '\\\\x27').\r\n                            replace(/^\\s*|\\s*$/g, '').\r\n                            replace(/\\n|\\r\\n/g, function () { return \"';\\nthis.line = \" + (++line) + \"; this.ret += '\\\\n\" }).\r\n                            replace(/\\x11=raw(.+?)\\x13/g, \"' + ($1) + '\").\r\n                            replace(/\\x11=(.+?)\\x13/g, \"' + this.escapeHTML($1) + '\").\r\n                            replace(/\\x11(.+?)\\x13/g, \"'; $1; this.ret += '\") +\r\n                    \"'; \" + (me.variable ? \"\" : \"}\") + \"return this.ret;\" +\r\n                \"} catch (e) { throw 'TemplateError: ' + e + ' (on \" + name + \"' + ' line ' + this.line + ')'; } \" +\r\n                \"//@ sourceURL=\" + name + \"\\n\" // source map\r\n            ).replace(/this\\.ret \\+= '';/g, '');\r\n            var func = new Function(body);\r\n            var map  = { '&' : '&amp;', '<' : '&lt;', '>' : '&gt;', '\\x22' : '&#x22;', '\\x27' : '&#x27;' };\r\n            var escapeHTML = function (string) { return (''+string).replace(/[&<>\\'\\\"]/g, function (_) { return map[_] }) };\r\n            return function (stash) { return func.call(me.context = { escapeHTML: escapeHTML, line: 1, ret : '', stash: stash }) };\r\n        })();\r\n        return data ? me.cache[id](data) : me.cache[id];\r\n    }\r\n\r\n    template.cache = {};\r\n    \r\n\r\n    template.get = function (id) {\r\n        return document.getElementById(id).innerHTML;\r\n    };\r\n    **/\r\n\r\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n\r\n//     Underscore may be freely distributed under the MIT license.\r\n\r\n// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\r\n\r\n/*!\r\n   * Programatically add the following\r\n   */\r\n\r\n/**\r\n   * @summary Normalize mousewheel values accross browsers\r\n   * @description From Facebook's Fixed Data Table\r\n   * {@link https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js}\r\n   * @copyright Facebook\r\n   * @param {MouseWheelEvent} event\r\n   * @returns {{spinX: number, spinY: number, pixelX: number, pixelY: number}}\r\n   */\r\n\r\n//     (c) 2010-2014 Thomas Fuchs\r\n\r\n//     Zepto.js may be freely distributed under the MIT license.\r\n\r\n/*!\r\n * jQuery UI Widget @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\ndefine(\"skylark-langx-ns/_attach\",[],function(){return function(t,e,n){for(var i=(e=\"string\"==typeof e?e.split(\".\"):e).length,r=t,s=0,a=e[s++];s<i;)r=r[a]=r[a]||{},a=e[s++];if(r[a]){if(n)throw new Error(\"This namespace already exists:\"+e)}else r[a]=n||{};return r[a]}}),define(\"skylark-langx-ns/ns\",[\"./_attach\"],function(n){var i={attach:function(t,e){return n(i,t,e)}};return i}),define(\"skylark-langx-ns/main\",[\"./ns\"],function(t){return t}),define(\"skylark-langx-ns\",[\"skylark-langx-ns/main\"],function(t){return t}),define(\"skylark-langx-types/types\",[\"skylark-langx-ns\"],function(t){var e,n=Array.isArray,i={}.toString,r=(e={},\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \").forEach(function(t){e[\"[object \"+t+\"]\"]=t.toLowerCase()}),function(t){return null==t?String(t):e[i.call(t)]||\"object\"});function s(t){for(var e in t)if(null!==t[e])return!1;return!0}function a(t){return\"function\"==r(t)}function o(t){return t&&t.nodeType}function l(t){return\"number\"==typeof t}function c(t){var e=typeof t;return\"function\"==e||\"object\"==e&&!!t}function u(t){return\"string\"==typeof t}function d(t){return t&&t==t.window}function h(t){return\"symbol\"==typeof t}var p=NaN,f=/^\\s+|\\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,y=/^0o[0-7]+$/i,k=parseInt;function x(t){return t?(t=v(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function v(t){if(\"number\"==typeof t)return t;if(h(t))return p;if(\"string\"!=typeof(t=c(t)?c(e=\"function\"==typeof t.valueOf?t.valueOf():t)?e+\"\":e:t))return 0===t?t:+t;t=t.replace(f,\"\");var e=g.test(t);return e||y.test(t)?k(t.slice(2),e?2:8):m.test(t)?p:+t}return t.attach(\"langx.types\",{isArray:n||function(t){return object&&object.constructor===Array},isArrayLike:function(t){return!u(t)&&!o(t)&&\"number\"==typeof t.length&&!a(t)},isBoolean:function(t){return!0===t||!1===t||\"[object Boolean]\"===i.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:s,isEmptyObject:s,isFunction:a,isHtmlNode:o,isInstanceOf:function(t,e){return void 0!==t&&(null===t||e==Object||(\"number\"==typeof t?e===Number:\"string\"==typeof t?e===String:\"boolean\"==typeof t?e===Boolean:\"string\"==typeof t?e===String:t instanceof e||!(!t||!t.isInstanceOf)&&t.isInstanceOf(e)))},isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:l,isNumeric:l,isObject:c,isPlainObject:function(t){return c(t)&&!d(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:u,isSameOrigin:function(t){var e;if(t)return e=location.protocol+\"//\"+location.hostname,location.port&&(e+=\":\"+location.port),t.startsWith(e)},isSymbol:h,isUndefined:function(t){return void 0===t},isWindow:d,type:r,toFinite:x,toNumber:v,toInteger:function(t){var e=(t=x(t))%1;return t==t?e?t-e:t:0}})}),define(\"skylark-langx-types/main\",[\"./types\"],function(t){return t}),define(\"skylark-langx-types\",[\"skylark-langx-types/main\"],function(t){return t}),define(\"skylark-langx-objects/objects\",[\"skylark-langx-ns\",\"skylark-langx-types\"],function(t,e){return t.attach(\"langx.objects\",{attach:t.attach})}),define(\"skylark-langx-objects/all-keys\",[\"skylark-langx-types\",\"./objects\"],function(i,t){return t.allKeys=function(t){if(!i.isObject(t))return[];var e,n=[];for(e in t)n.push(e);return n}}),define(\"skylark-langx-objects/assign\",[\"skylark-langx-types\",\"./objects\"],function(t,e){return e.assign=Object.assign}),define(\"skylark-langx-objects/to-key\",[\"skylark-langx-types\",\"./objects\"],function(t,e){const n=t.isSymbol,i=t.isString;return e.toKey=function(t){var e;return i(t)||n(t)?t:\"0\"==(e=\"\"+t)&&1/t==-1/0?\"-0\":e}}),define(\"skylark-langx-objects/is-key\",[\"skylark-langx-types\",\"./objects\"],function(t,e){const i=t.isSymbol,r=t.isArray,s=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,a=/^\\w*$/;return e.isKey=function(t,e){var n;return!r(t)&&(!(\"number\"!=(n=typeof t)&&\"boolean\"!=n&&null!=t&&!i(t))||a.test(t)||!s.test(t)||null!=e&&t in Object(e))}}),define(\"skylark-langx-objects/_cast_path\",[\"skylark-langx-types\",\"./objects\",\"./is-key\"],function(n,t,i){const r=\".\".charCodeAt(0),a=/\\\\(\\\\)?/g,o=RegExp(\"[^.[\\\\]]+|\\\\[(?:([^\\\"'][^[]*)|([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2)\\\\]|(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\",\"g\");return function(t,e){if(n.isArray(t))return t;if(i(t,e))return[t];{e=t;const s=[];return e.charCodeAt(0)===r&&s.push(\"\"),e.replace(o,(t,e,n,i)=>{let r=t;n?r=i.replace(a,\"$1\"):e&&(r=e.trim()),s.push(r)}),s}}}),define(\"skylark-langx-objects/get\",[\"skylark-langx-types\",\"./objects\",\"./to-key\",\"./_cast_path\"],function(t,e,r,s){return e.get=function(t,e,n){return void 0===(t=null==t?void 0:function(t,e){let n=0;for(var i=(e=s(e,t)).length;null!=t&&n<i;)t=t[r(e[n++])];return n&&n==i?t:void 0}(t,e))?n:t}}),define(\"skylark-langx-objects/base-at\",[\"./objects\",\"./get\"],function(t,a){return t.baseAt=function(t,e){let n=-1;for(var i=e.length,r=new Array(i),s=null==t;++n<i;)r[n]=s?void 0:a(t,e[n]);return r}}),define(\"skylark-langx-objects/clone\",[\"skylark-langx-types\",\"./objects\"],function(t,e){var a=t.isPlainObject,o=t.isArray;return e.clone=function t(e,n){if(null==e)i=e;else if(n&&e.clone)i=e.clone();else if(o(e))for(var i=[],r=0;r<e.length;r++)i.push(t(e[r]));else if(a(e))for(var s in i={},e)i[s]=t(e[s]);else i=e;return i}}),define(\"skylark-langx-objects/defaults\",[\"./objects\",\"./all-keys\"],function(t,e){return t.defaults=(l=e,c=!0,function(t){var e=arguments.length;if(c&&(t=Object(t)),!(e<2||null==t))for(var n=1;n<e;n++)for(var i=arguments[n],r=l(i),s=r.length,a=0;a<s;a++){var o=r[a];c&&void 0!==t[o]||(t[o]=i[o])}return t});var l,c}),define(\"skylark-langx-objects/each\",[\"./objects\"],function(t){return t.each=function(t,e,n){var i,r,s,a;if(t)if(void 0===(i=t.length)){for(r in t)if(t.hasOwnProperty(r)&&(a=t[r],!1===(n?e.call(a,a,r):e.call(a,r,a))))break}else for(s=0;s<i&&(a=t[s],!1!==(n?e.call(a,a,s):e.call(a,s,a)));s++);return this}}),define(\"skylark-langx-objects/_mixin\",[\"skylark-langx-types\",\"./objects\"],function(t,e){var a=t.isPlainObject;return function t(e,n,i,r){for(var s in n)r&&void 0!==e[s]||(i&&a(n[s])?(a(e[s])||(e[s]={}),t(e[s],n[s],i,r)):void 0!==n[s]&&(e[s]=n[s]));return e}}),define(\"skylark-langx-objects/_parse_mixin_args\",[\"skylark-langx-types\",\"./objects\"],function(t,e){var r=Array.prototype.slice,s=t.isBoolean;return function(t){var e=r.call(arguments,0),n=e.shift(),i=!1;return s(e[e.length-1])&&(i=e.pop()),{target:n,sources:e,deep:i}}}),define(\"skylark-langx-objects/mixin\",[\"skylark-langx-types\",\"./objects\",\"./_mixin\",\"./_parse_mixin_args\"],function(t,e,n,i){return e.mixin=function(){var e=i.apply(this,arguments);return e.sources.forEach(function(t){n(e.target,t,e.deep,!1)}),e.target}}),define(\"skylark-langx-objects/extend\",[\"./objects\",\"./mixin\"],function(t,i){var r=Array.prototype.slice;return t.extend=function(e){var n,t=r.call(arguments,1);return\"boolean\"==typeof e&&(n=e,e=t.shift()),0==t.length&&(t=[e],e=this),t.forEach(function(t){i(e,t,n)}),e}}),define(\"skylark-langx-objects/for-each\",[\"./objects\",\"./each\"],function(t,n){return t.forEach=function(t,e){t&&(t.forEach?t.forEach(e):n(t,e,!0))}}),define(\"skylark-langx-objects/has\",[\"skylark-langx-types\",\"./objects\"],function(s,t){var a=Object.prototype.hasOwnProperty;return t.has=function(t,e){if(!s.isArray(e))return null!=t&&a.call(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!a.call(t,r))return!1;t=t[r]}return!!n}}),define(\"skylark-langx-objects/includes\",[\"./objects\"],function(t){return t.includes=function(t,e,n,i){return t=isArrayLike(t)?t:values(t),n=n&&!i?toInteger(n):0,i=t.length,n<0&&(n=nativeMax(i+n,0)),isString(t)?n<=i&&-1<t.indexOf(e,n):!!i&&-1<baseIndexOf(t,e,n)}}),define(\"skylark-langx-objects/is-equal\",[\"skylark-langx-types\",\"./objects\"],function(t,e){var u,s,d=t.isFunction,h=\"undefined\"!=typeof Symbol?Symbol.prototype:null;return u=function(t,e,n,i){var r;return t===e?0!==t||1/t==1/e:null!=t&&null!=e&&(t!=t?e!=e:(\"function\"==(r=typeof t)||\"object\"==r||\"object\"==typeof e)&&s(t,e,n,i))},s=function(t,e,n,i){var r=toString.call(t);if(r!==toString.call(e))return!1;switch(r){case\"[object RegExp]\":case\"[object String]\":return\"\"+t==\"\"+e;case\"[object Number]\":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case\"[object Date]\":case\"[object Boolean]\":return+t==+e;case\"[object Symbol]\":return h.valueOf.call(t)===h.valueOf.call(e)}r=\"[object Array]\"===r;if(!r){if(\"object\"!=typeof t||\"object\"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(d(s)&&s instanceof s&&d(a)&&a instanceof a)&&\"constructor\"in t&&\"constructor\"in e)return!1}i=i||[];for(var o=(n=n||[]).length;o--;)if(n[o]===t)return i[o]===e;if(n.push(t),i.push(e),r){if((o=t.length)!==e.length)return!1;for(;o--;)if(!u(t[o],e[o],n,i))return!1}else{var l,c=Object.keys(t),o=c.length;if(Object.keys(e).length!==o)return!1;for(;o--;)if(void 0===e[l=c[o]]||!u(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0},e.isEqual=function(t,e){return u(t,e)}}),define(\"skylark-langx-objects/keys\",[\"skylark-langx-types\",\"./objects\",\"./has\"],function(i,t,r){return t.keys=function(t){if(!i.isObject(t))return[];var e,n=[];for(e in t)r(t,e)&&n.push(e);return n}}),define(\"skylark-langx-objects/is-match\",[\"skylark-langx-types\",\"./objects\",\"./keys\"],function(t,e,n){return e.isMatch=function(t,e){var n=(void 0)(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var a=n[s];if(e[a]!==r[a]||!(a in r))return!1}return!0}}),define(\"skylark-langx-objects/omit\",[\"./objects\",\"./mixin\"],function(t,a){return t.omit=function(t,e,n){if(!t)return null;for(var i=a({},t),r=1;r<arguments.length;r++){var s=arguments[r];s in t&&delete i[s]}return i}}),define(\"skylark-langx-objects/pick\",[\"./objects\"],function(t){return t.pick=function(t,e,n){if(!t)return null;for(var i={},r=1;r<arguments.length;r++){var s=arguments[r];s in t&&(i[s]=t[s])}return i}}),define(\"skylark-langx-objects/remove-items\",[\"skylark-langx-types\",\"./objects\"],function(r,t){return t.removeItem=function(t,e){if(r.isArray(t)){var n=t.indexOf(e);-1!=n&&t.splice(n,1)}else if(r.isPlainObject(t))for(var i in t)if(t[i]==e){delete t[i];break}return this}}),define(\"skylark-langx-objects/result\",[\"skylark-langx-types\",\"./objects\",\"./to-key\",\"./_cast_path\"],function(t,e,a,o){t.isArray;var l=t.isFunction;return e.result=function(e,n,i){let r=-1,s=(n=o(n,e)).length;for(s||(s=1,e=void 0);++r<s;){let t=null==e?void 0:e[a(n[r])];void 0===t&&(r=s,t=i),e=l(t)?t.call(e):t}return e}}),define(\"skylark-langx-objects/safe-mixin\",[\"./objects\",\"./_mixin\",\"./_parse_mixin_args\"],function(t,n,i){return t.safeMixin=function(){var e=i.apply(this,arguments);return e.sources.forEach(function(t){n(e.target,t,e.deep,!0)}),e.target}}),define(\"skylark-langx-objects/scall\",[\"./objects\"],function(t){const s=Array.prototype.slice;return t.scall=function(t,e,n,i){var r;if(t&&t[e])return r=s.call(arguments,2),t[e].apply(t,r)}}),define(\"skylark-langx-objects/is-index\",[\"skylark-langx-types\",\"./objects\"],function(t,e){const i=/^(?:0|[1-9]\\d*)$/;return e.isIndex=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&(\"number\"==n||\"symbol\"!=n&&i.test(t))&&-1<t&&t%1==0&&t<e}}),define(\"skylark-langx-objects/set\",[\"skylark-langx-types\",\"./objects\",\"./_cast_path\",\"./is-index\",\"./to-key\"],function(u,t,d,h,p){return t.set=function(t,e,n){if(null!=t){var i=e,r=n,s=void 0;if(u.isObject(t)){var a=(i=d(i,t)).length,o=a-1;let e=-1,n=t;for(;null!=n&&++e<a;){var l,c=p(i[e]);let t=r;e!=o&&(l=n[c],void 0===(t=s?s(l,c,n):void 0))&&(t=u.isObject(l)?l:h(i[e+1])?[]:{}),n[c]=t,n=n[c]}}}return t}}),define(\"skylark-langx-objects/shadow\",[\"./objects\"],function(t){return t.shadow=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}}),define(\"skylark-langx-objects/unset\",[\"skylark-langx-types\",\"./objects\",\"./set\"],function(t,e,n){return e.unset=function(t,e){return null==t||n(t,e,void 0)}}),define(\"skylark-langx-objects/values\",[\"skylark-langx-types\",\"./objects\",\"./all-keys\"],function(t,e,s){return e.values=function(t){for(var e=s(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}}),define(\"skylark-langx-objects/main\",[\"./objects\",\"./all-keys\",\"./assign\",\"./base-at\",\"./clone\",\"./defaults\",\"./each\",\"./extend\",\"./for-each\",\"./get\",\"./has\",\"./includes\",\"./is-equal\",\"./is-key\",\"./is-match\",\"./keys\",\"./mixin\",\"./omit\",\"./pick\",\"./remove-items\",\"./result\",\"./safe-mixin\",\"./scall\",\"./set\",\"./shadow\",\"./to-key\",\"./unset\",\"./values\"],function(t){return t}),define(\"skylark-langx-objects\",[\"skylark-langx-objects/main\"],function(t){return t}),define(\"skylark-langx-hoster/hoster\",[\"skylark-langx-ns\"],function(t){var e,n,i={isBrowser:!0,isNode:null,global:this,browser:null,node:null},r=(\"object\"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(i.isNode=!0,i.isBrowser=!1),i.global=function(){return\"undefined\"!=typeof global&&\"function\"!=typeof global?global:\"undefined\"!=typeof window?window:\"undefined\"!=typeof self?self:this}(),null);return Object.defineProperty(i,\"document\",function(){var t;return r||(t=\"undefined\"==typeof window?require(\"html-element\"):window,r=t.document),r}),void 0===i.global.CustomEvent&&(i.global.CustomEvent=function(t,e){this.type=t,this.props=e}),i.isBrowser&&(n=(n=navigator.userAgent).toLowerCase(),n={browser:(n=/(chrome)[ \\/]([\\w.]+)/.exec(n)||/(webkit)[ \\/]([\\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(n)||/(msie) ([\\w.]+)/.exec(n)||n.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(n)||[])[1]||\"\",version:n[2]||\"0\"},e=i.browser={},n.browser&&(e[n.browser]=!0,e.version=n.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)),i.detects={},t.attach(\"langx.hoster\",i)}),define(\"skylark-langx-hoster/detects/mobile\",[\"../hoster\"],function(t){function r(t){return void 0!==t&&\"MacIntel\"===t.platform&&\"number\"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&\"undefined\"==typeof MSStream}var s=/iPhone/i,a=/iPod/i,o=/iPad/i,l=/\\biOS-universal(?:.+)Mac\\b/i,c=/\\bAndroid(?:.+)Mobile\\b/i,u=/Android/i,d=/(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i,h=/Silk/i,p=/Windows Phone/i,f=/\\bWindows(?:.+)ARM\\b/i,m=/BlackBerry/i,g=/BB10/i,y=/Opera Mini/i,k=/\\b(CriOS|Chrome)(?:.+)Mobile/i,x=/Mobile(?:.+)Firefox\\b/i;return t.detects.mobile=function(t){var e,n={userAgent:\"\",platform:\"\",maxTouchPoints:0};t||\"undefined\"==typeof navigator?\"string\"==typeof t?n.userAgent=t:t&&t.userAgent&&(n={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):n={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=(t=n.userAgent).split(\"[FBAN\");return void 0!==(i=(t=void 0!==i[1]?i[0]:t).split(\"Twitter\"))[1]&&(t=i[0]),e=t,(t={apple:{phone:(i=function(t){return t.test(e)})(s)&&!i(p),ipod:i(a),tablet:!i(s)&&(i(o)||r(n))&&!i(p),universal:i(l),device:(i(s)||i(a)||i(o)||i(l)||r(n))&&!i(p)},amazon:{phone:i(d),tablet:!i(d)&&i(h),device:i(d)||i(h)},android:{phone:!i(p)&&i(d)||!i(p)&&i(c),tablet:!i(p)&&!i(d)&&!i(c)&&(i(h)||i(u)),device:!i(p)&&(i(d)||i(h)||i(c)||i(u))||i(/\\bokhttp\\b/i)},windows:{phone:i(p),tablet:i(f),device:i(p)||i(f)},other:{blackberry:i(m),blackberry10:i(g),opera:i(y),firefox:i(x),chrome:i(k),device:i(m)||i(g)||i(y)||i(x)||i(k)},any:!1,phone:!1,tablet:!1}).any=t.apple.device||t.android.device||t.windows.device||t.other.device,t.phone=t.apple.phone||t.android.phone||t.windows.phone,t.tablet=t.apple.tablet||t.android.tablet||t.windows.tablet,t}}),define(\"skylark-langx-hoster/is-mobile\",[\"./hoster\",\"./detects/mobile\"],function(t,e){return null==t.isMobile&&(t.isMobile=e()),t.isMobile}),define(\"skylark-langx-hoster/main\",[\"./hoster\",\"./is-mobile\"],function(t){return t}),define(\"skylark-langx-hoster\",[\"skylark-langx-hoster/main\"],function(t){return t}),define(\"skylark-langx-async/async\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.async\")}),define(\"skylark-langx-arrays/arrays\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.arrays\")}),define(\"skylark-langx-arrays/base-find-index\",[\"./arrays\"],function(t){return t.baseFindIndex=function(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}}),define(\"skylark-langx-arrays/base-indexof\",[\"./arrays\",\"./base-find-index\"],function(t,s){function a(t){return t!=t}return t.baseIndexOf=function(t,e,n){if(e!=e)return s(t,a,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}}),define(\"skylark-langx-arrays/filter\",[\"./arrays\"],function(t){var n=Array.prototype.filter;return t.filter=function(t,e){return n.call(t,e)}}),define(\"skylark-langx-arrays/compact\",[\"./arrays\",\"./filter\"],function(t,e){return t.compact=function(t){return e(t,function(t){return null!=t})}}),define(\"skylark-langx-arrays/in-array\",[\"./arrays\"],function(t){return t.inArray=function(t,e){if(e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n}return-1}}),define(\"skylark-langx-arrays/contains\",[\"./arrays\",\"./in-array\"],function(t,n){return t.contains=function(t,e){return n(e,t)}}),define(\"skylark-langx-funcs/funcs\",[\"skylark-langx-ns\"],function(t,e,n){return t.attach(\"langx.funcs\",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define(\"skylark-langx-funcs/rest-arguments\",[\"./funcs\"],function(t){return t.restArguments=function(r,s){return s=null==s?r.length-1:+s,function(){for(var t=Math.max(arguments.length-s,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+s];switch(s){case 0:return r.call(this,e);case 1:return r.call(this,arguments[0],e);case 2:return r.call(this,arguments[0],arguments[1],e)}for(var i=Array(s+1),n=0;n<s;n++)i[n]=arguments[n];return i[s]=e,r.apply(this,i)}}}),define(\"skylark-langx-funcs/bind-all\",[\"./funcs\",\"./rest-arguments\"],function(t,e){return t.bindAll=e(function(t,e){var n=e.length;if(n<1)throw new Error(\"bindAll must be passed function names\");for(;n--;){var i=e[n];t[i]=t[i].bind(t)}})}),define(\"skylark-langx-funcs/defer\",[\"skylark-langx-types\",\"./funcs\"],function(l,t){return t.defer=function(t,e,n,i){var r,s,a={cancel:null},o=t;return l.isNumber(e)||l.isFunction(e)||(i=n,n=e,e=0),n&&(o=function(){t.apply(i,n)}),l.isFunction(e)?(r=!1,e(function(){r||o()}),a.cancel=function(){r=!0}):0==e&&requestAnimationFrame?(s=requestAnimationFrame(o),a.cancel=function(){return cancelAnimationFrame(s)}):(s=setTimeout(o,e),a.cancel=function(){return clearTimeout(s)}),a}}),define(\"skylark-langx-funcs/debounce\",[\"./funcs\",\"./defer\"],function(t,l){return t.debounce=function(n,i,r){function t(){var t=this,e=arguments;return o(),s=setTimeout(function(){s=null,r?a=l(n,e,t):n.apply(t,e)},i),{cancel:o}}var s,a,o=t.cancel=function(){s&&clearTimeout(s),a&&a.cancel(),a=s=void 0};return t}}),define(\"skylark-langx-funcs/delegate\",[\"skylark-langx-objects\",\"./funcs\"],function(t,e){var n=t.mixin;function i(){}return e.delegate=function(t,e){i.prototype=t;t=new i;return i.prototype=null,e&&n(t,e),t}}),define(\"skylark-langx-funcs/loop\",[\"./funcs\"],function(t){function e(t){this.callback=t,this.running=!1,this.id=-1}return e.prototype.start=function(){var e;this.running||(this.running=!0,e=this,function t(){e.callback(),e.running&&(e.id=requestAnimationFrame(t))}())},e.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new e(t)}}),define(\"skylark-langx-funcs/negate\",[\"./funcs\"],function(t){return t.negate=function(e){if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");return function(...t){return!e.apply(this,t)}}}),define(\"skylark-langx-funcs/proxy\",[\"skylark-langx-types\",\"./funcs\"],function(t,e){var i=Array.prototype.slice,r=t.isFunction,s=t.isString;function a(t,e){var n=2 in arguments&&i.call(arguments,2);if(r(t))return function(){return t.apply(e,n?n.concat(i.call(arguments)):arguments)};if(s(e))return n?(n.unshift(t[e],t),a.apply(null,n)):a(t[e],t);throw new TypeError(\"expected function\")}return e.bind=e.proxy=a}),define(\"skylark-langx-funcs/template\",[\"skylark-langx-objects\",\"./funcs\",\"./proxy\"],function(i,t,r){Array.prototype.slice;var l={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},c=/(.)^/,u={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\t\":\"t\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},d=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;function e(s,t){t=i.defaults({},t,l);var e,n=RegExp([(t.escape||c).source,(t.interpolate||c).source,(t.evaluate||c).source].join(\"|\")+\"|$\",\"g\"),a=0,o=\"__p+='\";s.replace(n,function(t,e,n,i,r){return o+=s.slice(a,r).replace(d,function(t){return\"\\\\\"+u[t]}),e&&(o+=\"'+\\n((__t=(\"+e+\"))==null?'':_.escape(__t))+\\n'\"),n&&(o+=\"'+\\n((__t=(\"+n+\"))==null?'':__t)+\\n'\"),i&&(o+=\"';\\n\"+i+\"\\n__p+='\"),a=r+t.length,t}),o+=\"';\\n\",o=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+(o=t.variable?o:\"with(obj||{}){\\n\"+o+\"}\\n\")+\"return __p;\\n\";try{e=new Function(t.variable||\"obj\",\"_\",o)}catch(t){throw t.source=o,t}n=r(function(t){return e.call(this,t,this)},this),t=t.variable||\"obj\";return n.source=\"function(\"+t+\"){\\n\"+o+\"}\",n}return e.templateSettings=t.templateSettings=l,t.template=e}),define(\"skylark-langx-funcs/throttle\",[\"./funcs\"],function(t){return t.throttle=function(n,i){let r=window.performance.now();return function(...t){var e=window.performance.now();e-r>=i&&(n(...t),r=e)}}}),define(\"skylark-langx-funcs/main\",[\"./funcs\",\"./bind-all\",\"./debounce\",\"./defer\",\"./delegate\",\"./loop\",\"./negate\",\"./proxy\",\"./rest-arguments\",\"./template\",\"./throttle\"],function(t){return t}),define(\"skylark-langx-funcs\",[\"skylark-langx-funcs/main\"],function(t){return t}),define(\"skylark-langx-arrays/flatten\",[\"skylark-langx-types\",\"./arrays\"],function(s,t){return t.flatten=function(t){if(s.isArrayLike(t)){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(s.isArrayLike(i))for(var r=0;r<i.length;r++)e.push(i[r]);else e.push(i)}return e}return t}}),define(\"skylark-langx-arrays/difference\",[\"skylark-langx-funcs\",\"./arrays\",\"./flatten\",\"./filter\",\"./contains\"],function(t,e,n,i,r){t=t.restArguments(function(t,e){return e=n(e,!0,!0),i(t,function(t){return!r(e,t)})});return e.difference=t}),define(\"skylark-langx-arrays/find\",[\"./arrays\"],function(t){var n=Array.prototype.find;return t.find=function(t,e){return n.call(t,e)}}),define(\"skylark-langx-arrays/first\",[\"./arrays\"],function(t){return t.first=function(t,e){return e?t.slice(0,e):t[0]}}),define(\"skylark-langx-arrays/grep\",[\"skylark-langx-objects\",\"./arrays\"],function(e,t){return t.grep=function(t,n){var i=[];return e.each(t,function(t,e){n(e,t)&&i.push(e)}),i}}),define(\"skylark-langx-arrays/indexof\",[\"./arrays\"],function(t){return t.indexOf=function(t,e){return t.indexOf(e)}}),define(\"skylark-langx-arrays/last\",[\"./arrays\"],function(t){return t.last=function(t){return t[t.length-1]}}),define(\"skylark-langx-arrays/make-array\",[\"skylark-langx-types\",\"./arrays\"],function(i,t){return t.makeArray=function(t,e,n){return i.isArrayLike(t)?(n||[]).concat(Array.prototype.slice.call(t,e||0)):[t]}}),define(\"skylark-langx-arrays/map\",[\"skylark-langx-types\",\"./arrays\",\"./flatten\"],function(a,t,o){return t.map=function(t,e){var n,i,r,s=[];if(a.isArrayLike(t))for(i=0;i<t.length;i++)null!=(n=e.call(t[i],t[i],i))&&s.push(n);else for(r in t)null!=(n=e.call(t[r],t[r],r))&&s.push(n);return o(s)}}),define(\"skylark-langx-arrays/merge\",[\"./arrays\"],function(t){return t.merge=function(t,e){var n=e.length,i=t.length,r=0;if(\"number\"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t}}),define(\"skylark-langx-arrays/pull-at\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"./arrays\"],function(t,i,e){return e.pullAt=function(e,...n){null!=e&&e.length;var t=i.baseAt(e,n);n.sort(function(t,e){return t-e});for(let t=n.length-1;0<=t;t--)e.slice(n[t],1);return t}}),define(\"skylark-langx-arrays/reduce\",[\"./arrays\"],function(t){return t.reduce=function(t,e,n){return Array.prototype.reduce.call(t,e,n)}}),define(\"skylark-langx-arrays/uniq\",[\"./arrays\",\"./filter\"],function(t,e){return t.uniq=function(n){return e(n,function(t,e){return n.indexOf(t)==e})}}),define(\"skylark-langx-arrays/without\",[\"skylark-langx-funcs\",\"./arrays\",\"./difference\"],function(t,e,n){t=t.restArguments(function(t,e){return n(t,e)});return e.without=t}),define(\"skylark-langx-arrays/main\",[\"./arrays\",\"./base-find-index\",\"./base-indexof\",\"./compact\",\"./contains\",\"./difference\",\"./filter\",\"./find\",\"./first\",\"./flatten\",\"./grep\",\"./in-array\",\"./indexof\",\"./last\",\"./make-array\",\"./map\",\"./merge\",\"./pull-at\",\"./reduce\",\"./uniq\",\"./without\"],function(t){return t}),define(\"skylark-langx-arrays\",[\"skylark-langx-arrays/main\"],function(t){return t}),define(\"skylark-langx-async/deferred\",[\"skylark-langx-arrays\",\"skylark-langx-funcs\",\"skylark-langx-objects\",\"./async\"],function(t,e,n,i){\"use strict\";function a(){var n=this;this.promise=c(new Promise(function(t,e){n._resolve=t,n._reject=e}))}var r=Array.prototype.slice,o=e.proxy,s=t.makeArray,l=n.result;(0,n.mixin)(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});function c(t){var e,n,i,r,s;return t.isResolved||(i=n=!(e=!0),(t=t.then(function(t){return e=!(i=!0),t},function(t){throw e=!(n=!0),t})).isResolved=function(){return i},t.isPending=function(){return e},t.isRejected=function(){return n},t.state=function(){return i?\"resolved\":n?\"rejected\":\"pending\"},r=[],s=[],t.then=function(e,n,t){return t&&this.progress(t),c(Promise.prototype.then.call(this,e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)},n&&function(t){return t&&void 0!==t.__ctx__?n.apply(t.__ctx__,t):n(t)}))},t.progress=function(e){return r.forEach(function(t){e(t)}),s.push(e),this},t.pipe=t.then,t.notify=function(e){try{return r.push(e),s.forEach(function(t){return t(e)})}catch(t){this.reject(t)}return this}),t}return a.prototype.resolve=function(t){var e=r.call(arguments);return this.resolveWith(null,e)},a.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},a.prototype.notify=function(t){return l(this,\"promise\").notify(t),this},a.prototype.reject=function(t){var e=r.call(arguments);return this.rejectWith(null,e)},a.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},a.prototype.isResolved=function(){return l(this,\"promise\").isResolved()},a.prototype.isRejected=function(){return l(this,\"promise\").isRejected()},a.prototype.state=function(){return l(this,\"promise\").state()},a.prototype.then=function(t,e,n){return l(this,\"promise\").then(t,e,n)},a.prototype.progress=function(t){return l(this,\"promise\").progress(t)},a.prototype.catch=function(t){return l(this,\"promise\").catch(t)},a.prototype.always=function(){var t=l(this,\"promise\");return t.always.apply(t,arguments),this},a.prototype.done=function(){var t=l(this,\"promise\");return t.done.apply(t,arguments),this},a.prototype.fail=function(t){return l(this,\"promise\").fail(t),this},a.all=function(t){var e=new a;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),l(e,\"promise\")},a.first=function(t){return c(Promise.race(t))},a.when=function(t,e,n,i){var r=t&&\"function\"==typeof t.then,s=r&&t instanceof Promise;return r?(s||(r=new a(t.cancel),t.then(o(r.resolve,r),o(r.reject,r),r.notify),t=r.promise),e||n||i?t.then(e,n,i):t):1<arguments.length?e?e(t):t:(new a).resolve(t)},a.reject=function(t){var e=new a;return e.reject(t),e.promise},a.immediate=a.resolve=function(t){var e=new a;return e.resolve.apply(e,arguments),e.promise},a.promise=function(t){var e=new a;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},i.Deferred=a}),define(\"skylark-langx-async/each\",[\"./async\"],function(t){return t.each=function(i,e,r){if(0===i.length)return r(void 0,i);var s=new Array(i.length),a=0,o=!1;i.forEach(function(t,n){e(t,function(t,e){if(!o)return t?(o=!0,r(t)):(s[n]=e,(a+=1)===i.length?r(void 0,s):void 0)})})}}),define(\"skylark-langx-async/parallel\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(e,t,s){return t.parallel=function(t,n,i){var r=[];return i=i||null,n=n||[],e.each(t,function(t,e){r.push(e.apply(i,n))}),s.all(r)}}),define(\"skylark-langx-async/series\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(a,t,o){return t.series=function(t,n,i){var r=[],e=new o,s=e.promise;return i=i||null,n=n||[],e.resolve(),a.each(t,function(t,e){s=s.then(function(){return e.apply(i,n)}),r.push(s)}),o.all(r)}}),define(\"skylark-langx-async/waterful\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(s,t,a){return t.waterful=function(t,e,n){var i=new a,r=i.promise;return i.resolveWith(n=n||null,e=e||[]),s.each(t,function(t,e){r=r.then(e)}),r}}),define(\"skylark-langx-async/main\",[\"./async\",\"./deferred\",\"./each\",\"./parallel\",\"./series\",\"./waterful\"],function(t){return t}),define(\"skylark-langx-async\",[\"skylark-langx-async/main\"],function(t){return t}),define(\"skylark-langx-events/events\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.events\",{})}),define(\"skylark-langx-constructs/constructs\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.constructs\",{})}),define(\"skylark-langx-constructs/inherit\",[\"./constructs\"],function(t){return t.inherit=function(t,e){if(\"function\"!=typeof e&&e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object.setPrototypeOf(t,e)}}),define(\"skylark-langx-constructs/klass\",[\"skylark-langx-ns\",\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"./constructs\",\"./inherit\"],function(t,c,e,n,i,u){var d=n.uniq,h=e.has,p=e.mixin,f=c.isArray,m=c.isDefined;function g(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return i.klass=function i(t,e,n,r){f(e)&&(r=n,n=e,e=null),e=e||Object,m(n)&&!f(n)&&(r=n,n=!1);var s,a,o=e,l=(n&&(s=o,a=[],n.forEach(function(t){if(h(t,\"__mixins__\"))throw new Error(\"nested mixins\");for(var e=[];t;)e.unshift(t),t=t.superclass;a=a.concat(e)}),n=0<(a=(a=d(a)).filter(function(t){for(var e=s;e;){if(t===e)return!1;if(h(e,\"__mixins__\"))for(var n=e.__mixins__,i=0;i<n.length;i++)if(n[i]===t)return!1;e=e.superclass}return!0})).length&&a),n&&(o=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=new Function;u(r,n),r.superclass=null,p(r.prototype,e[i].prototype),r.prototype.__mixin__=e[i],n=r}return n}(o,n)),t.klassName||\"\"),l=new Function(\"return function \"+l+\"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}\")();return u(l,o),l.superclass=e,l._constructor||(l._constructor=g),n&&(l.__mixins__=n),l.partial||(l.partial=function(t,e){var n,i,r=this,s=t,t=e,a=r.prototype,o=r.superclass.prototype,l=t&&t.noOverrided;for(n in t&&t.overrides,s)\"constructor\"!==n&&(i=s[n],\"function\"==typeof s[n]?a[n]=i._constructor||l||\"function\"!=typeof o[n]?i:function(n,i){return function(){var t=this.overrided,e=(this.overrided=i,n.apply(this,arguments));return this.overrided=t,e}}(i,o[n]):c.isPlainObject(i)&&null!==i&&i.get?Object.defineProperty(a,n,i):a[n]=i);return r}),l.inherit||(l.inherit=function(t,e,n){return i(t,this,e,n)}),l.partial(t,r),l}}),define(\"skylark-langx-constructs/main\",[\"./constructs\",\"./inherit\",\"./klass\"],function(t){return t}),define(\"skylark-langx-constructs\",[\"skylark-langx-constructs/main\"],function(t){return t}),define(\"skylark-langx-klass/klass\",[\"skylark-langx-ns\",\"skylark-langx-constructs\"],function(t,e){return t.attach(\"langx.klass\",e.klass)}),define(\"skylark-langx-klass/main\",[\"./klass\"],function(t){return t}),define(\"skylark-langx-klass\",[\"skylark-langx-klass/main\"],function(t){return t}),define(\"skylark-langx-events/event\",[\"skylark-langx-objects\",\"skylark-langx-funcs\",\"skylark-langx-klass\",\"skylark-langx-hoster\",\"./events\"],function(n,s,t,e){var a={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};function i(i,r){return!r&&i.isDefaultPrevented||(r=r||i,n.each(a,function(t,e){var n=r[t];i[t]=function(){return this[e]=s.returnTrue,n&&n.apply(r,arguments)},i[e]=s.returnFalse})),i}class r extends CustomEvent{constructor(t,e){super(t,e),n.safeMixin(this,e),i(this)}}return r.compatible=i,e.Event=r}),define(\"skylark-langx-events/listener\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-klass\",\"./events\",\"./event\"],function(p,t,e,n,i,r){Array.prototype.slice;var u=e.compact,f=(p.isDefined,p.isUndefined),m=(p.isPlainObject,p.isFunction,p.isBoolean),g=p.isString,d=p.isEmptyObject,e=(t.mixin,t.safeMixin,n({listenTo:function(t,e,n,i,r){if(t)if(p.isPlainObject(e)){p.isBoolean(n)?(r=n,n=null):p.isBoolean(i)&&(r=i);var s,a=e;for(s in a){var o=s.match(/^([\\w:-]*)\\s*(.*)$/),l=o[1],o=o[2]||n;o?this.listenTo(t,l,o,a[s],r):this.listenTo(t,l,a[s],r)}}else{m(i)?(r=i,i=n,n=null):m(n)?(r=n,i=n=null):f(i)&&(r=!1,i=n,n=null),g(i=i||\"handleEvent\")&&(i=this[i]);for(var c,u=this.ensureListenedEmitter(t),d=(r?n?u.one(e,n,i,this):u.one(e,i,this):n?u.on(e,n,i,this):u.on(e,i,this),this._listeningTo||(this._listeningTo=[])),h=0;h<d.length;h++)if(d[h].obj==t){c=d[h];break}c||d.push(c={obj:t,events:{}});u=c.events,u=u[e]=u[e]||[];-1==u.indexOf(i)&&u.push(i)}return this},listenToOnce:function(t,e,n,i){return this.listenTo(t,e,n,i,1)},unlistenTo:function(t,e,n){var i=this._listeningTo;if(i){g(n)&&(n=this[n]);for(var r=0;r<i.length;r++){var s=i[r];if(!t||t==s.obj){var a,o=s.events;for(a in o)if(!e||e==a){var l=o[a];if(l){for(var c=0;c<l.length;c++)n&&n!=l[r]||(this.ensureListenedEmitter(s.obj).off(a,l[r],this),l[r]=null);l=o[a]=u(l),d(l)&&(o[a]=null)}}d(o)&&(i[r]=null)}}i=this._listeningTo=u(i),d(i)&&(this._listeningTo=null)}return this},ensureListenedEmitter:function(t){return t}}));return i.Listener=e}),define(\"skylark-langx-events/emitter\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-klass\",\"./events\",\"./event\",\"./listener\"],function(t,e,n,i,r,s,a){var o=Array.prototype.slice,h=n.compact,l=t.isDefined,p=t.isPlainObject,c=t.isFunction,f=t.isString,m=(t.isEmptyObject,e.mixin);e.safeMixin;function g(t){t=(\"\"+t).split(\".\");return{name:t[0],ns:t.slice(1).join(\" \")}}var u=new Map,n=a.inherit({_prepareArgs:function(t,e){return e=l(e)?[t].concat(e):[t]},on:function(t,n,i,r,s,a){var o=this,l=this._hub||(this._hub={});if(p(t))s=r,each(t,function(t,e){o.on(t,n,i,e,s,a)});else{if(f(n)||c(r)||(s=r,r=i,i=n,n=void 0),c(i)&&(s=r,r=i,i=null),!r)throw new Error(\"No callback function\");if(!c(r))throw new Error(\"The callback  is not afunction\");(t=f(t)?t.split(/\\s/):t).forEach(function(t){var t=g(t),e=t.name,t=t.ns;(l[e]||(l[e]=[])).push({fn:r,selector:n,data:i,ctx:s,ns:t,one:a})})}return this},one:function(t,e,n,i,r){return this.on(t,e,n,i,r,1)},emit:function(c){var u,d;return this._hub&&(u=this,f(c)&&(c=new s(c)),Object.defineProperty(c,\"target\",{value:this}),d=o.call(arguments,1),d=this._prepareArgs(c,d),[c.type||c.name,\"all\"].forEach(function(t){var e=g(t),n=e.name,i=e.ns,r=u._hub[n];if(r){for(var s=r.length,a=!1,o=0;o<s;o++){if(c.isImmediatePropagationStopped&&c.isImmediatePropagationStopped())return this;var l=r[o];(!i||l.ns&&l.ns.startsWith(i))&&(l.data&&(c.data=m({},l.data,c.data)),2==d.length&&p(d[1])&&(c.data=c.data||{},m(c.data,d[1])),l.fn.apply(l.ctx,d),l.one)&&(a=!(r[o]=null))}a&&(u._hub[t]=h(r))}})),this},queueEmit:function(t){var e=t.type||t;let n=u.get(this);n||(n=new Map,u.set(this,n));var i=n.get(e),i=(n.delete(e),window.clearTimeout(i),window.setTimeout(()=>{0===n.size&&(n=null,u.delete(this)),this.trigger(t)},0));n.set(e,i)},listened:function(t){return 0<((this._hub||(this._events={}))[t]||[]).length},off:function(t,o){var l;if(t)return l=this._hub||(this._hub={}),(t=f(t)?t.split(/\\s/):t).forEach(function(t){var t=g(t),e=t.name,n=t.ns,i=l[e];if(i){var r=[];if(o||n)for(var s=0,a=i.length;s<a;s++)(!o||i[s].fn===o||i[s].fn._===o)&&(!n||i[s].ns&&0==i[s].ns.indexOf(n))||r.push(i[s]);r.length?l[e]=r:delete l[e]}}),this;this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return r.Emitter=n}),define(\"skylark-langx-events/create-event\",[\"./events\",\"./event\"],function(t,n){return t.createEvent=function(t,e){return new n(t,e)}}),define(\"skylark-langx-events/main\",[\"./events\",\"./event\",\"./listener\",\"./emitter\",\"./create-event\"],function(t){return t}),define(\"skylark-langx-events\",[\"skylark-langx-events/main\"],function(t){return t}),define(\"skylark-langx-emitter/emitter\",[\"skylark-langx-events\"],function(t){return t.Emitter}),define(\"skylark-langx-emitter/evented\",[\"./emitter\"],function(t){return t}),define(\"skylark-langx-urls/urls\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.urls\",{})}),define(\"skylark-langx-urls/parse-url\",[\"./urls\"],function(t){\"use strict\";return t.parseUrl=function(t){var e=[\"protocol\",\"hostname\",\"port\",\"pathname\",\"search\",\"hash\",\"host\"];let n=document.createElement(\"a\");n.href=t;var i=\"\"===n.host&&\"file:\"!==n.protocol;let r;i&&((r=document.createElement(\"div\")).innerHTML=`<a href=\"${t}\"></a>`,n=r.firstChild,r.setAttribute(\"style\",\"display:none; position:absolute;\"),document.body.appendChild(r));var s={};for(let t=0;t<e.length;t++)s[e[t]]=n[e[t]];return\"http:\"===s.protocol&&(s.host=s.host.replace(/:80$/,\"\")),\"https:\"===s.protocol&&(s.host=s.host.replace(/:443$/,\"\")),s.protocol||(s.protocol=window.location.protocol),i&&document.body.removeChild(r),s}}),define(\"skylark-langx-urls/is-cross-origin\",[\"./urls\",\"./parse-url\"],function(t,n){\"use strict\";return t.isCrossOrigin=function(t,e=window.location){t=n(t);return(\":\"===t.protocol?e:t).protocol+t.host!==e.protocol+e.host}}),define(\"skylark-net-http/http\",[\"skylark-langx-ns/ns\"],function(t){return t.attach(\"net.http\",{})}),define(\"skylark-net-http/Xhr\",[\"skylark-langx-ns/ns\",\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-funcs\",\"skylark-langx-async/deferred\",\"skylark-langx-emitter/evented\",\"skylark-langx-urls/is-cross-origin\",\"./http\"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(){var e;return function(t){return(e=e||document.createElement(\"a\")).href=t,e.href}}(),Xhr=function(){var jsonpID=0,key,name,rscript=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,scriptTypeRE=/^(?:text|application)\\/javascript/i,xmlTypeRE=/^(?:text|application)\\/xml/i,jsonType=\"application/json\",htmlType=\"text/html\",blankRE=/^\\s*$/,XhrDefaultOptions={async:!0,type:\"GET\",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:\"application/json\",xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{withCredentials:!0}};function mimeToDataType(t){if(t=t&&t.split(\";\",2)[0]){if(t==htmlType)return\"html\";if(t==jsonType)return\"json\";if(scriptTypeRE.test(t))return\"script\";if(xmlTypeRE.test(t))return\"xml\"}return\"text\"}function appendQuery(t,e){return\"\"==e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&\"string\"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&\"GET\"!=t.type.toUpperCase()||(\"string\"!=type(t.data)&&(t.data=param(t.data,t.traditional)),t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(n,t,i,r){var s,a=isArray(t),o=isPlainObject(t);each(t,function(t,e){s=type(e),r&&(t=i?r:r+\"[\"+(o||\"object\"==s||\"array\"==s?t:\"\")+\"]\"),!r&&a?n.add(e.name,e.value):\"array\"==s||!i&&\"object\"==s?serialize(n,e,i,t):n.add(t,e)})}var param=function(t,e){var n=[];return n.add=function(t,e){null==(e=isFunction(e)?e():e)&&(e=\"\"),this.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e))},serialize(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")},Xhr=Evented.inherit({klassName:\"Xhr\",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest,dataType=(serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options),options.dataType||options.handleAs),mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&\"application/x-www-form-urlencoded\";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&-1<mime.indexOf(\",\")&&(mime=mime.split(\",\",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),\"blob\"!=dataType&&\"arraybuffer\"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(200<=xhr.status&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith(\"file:\")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader(\"content-type\"));try{\"script\"==dataType?eval(xhr.responseText):result=\"xml\"==dataType?xhr.responseXML:\"json\"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):\"blob\"==dataType||\"arraybuffer\"==dataType?xhr.response:xhr.responseText}catch(e){error=e}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error(\"abort\"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error(\"timeout\"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];\"content-type\"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader(\"Content-Type\",contentType),headers&&\"X-Requested-With\"in headers||isCrossOrigin(url)||xhr.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),basicAuthorizationToken&&xhr.setRequestHeader(\"Authorization\",basicAuthorizationToken),xhr.send(options.data||null),deferred.promise},abort:function(){var t=this._.xhr;t&&t.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type=\"GET\",this._request(t)},post:function(t){return(t=t||{}).type=\"POST\",this._request(t)},patch:function(t){return(t=t||{}).type=\"PATCH\",this._request(t)},put:function(t){return(t=t||{}).type=\"PUT\",this._request(t)},del:function(t){return(t=t||{}).type=\"DELETE\",this._request(t)},init:function(t){this._={options:t||{}}}});return[\"request\",\"get\",\"post\",\"put\",\"del\",\"patch\"].forEach(function(n){Xhr[n]=function(t,e){return new Xhr({url:t})[n](e)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define(\"skylark-langx/skylark\",[\"skylark-langx-ns\"],function(t){return t}),define(\"skylark-langx/arrays\",[\"skylark-langx-arrays\"],function(t){return t}),define(\"skylark-langx/klass\",[\"skylark-langx-klass\"],function(t){return t}),define(\"skylark-langx/array-store\",[\"./klass\"],function(t){function s(i){var r;return i&&((r=!!i.then)&&(i=Object.delegate(i)),t(\"forEach\"),t(\"filter\"),t(\"map\"),null==i.total)&&(i.total=Deferred.when(i,function(t){return t.length})),i;function t(n){i[n]=function(){var e=arguments,t=Deferred.when(i,function(t){return s(Array.prototype[n].apply(t,e))});if(\"forEach\"!==n||r)return t}}}return t({klassName:\"ArrayStore\",queryEngine:function(n,i){switch(typeof n){default:throw new Error(\"Can not query with a \"+typeof n);case\"object\":case\"undefined\":var r=n;n=function(t){for(var e in r){var n=r[e];if(n&&n.test){if(!n.test(t[e],t))return!1}else if(n!=t[e])return!1}return!0};break;case\"string\":if(!this[n])throw new Error(\"No filter function \"+n+\" was found in store\");n=this[n];case\"function\":}function t(t){var e,t=function(t,e,n){var i,r=0,s=t&&t.length||0,a=[];if(s&&\"string\"==typeof t&&(t=t.split(\"\")),\"string\"==typeof e&&(e=cache[e]||buildFn(e)),n)for(;r<s;++r)i=t[r],e.call(n,i,r,t)&&a.push(i);else for(;r<s;++r)e(i=t[r],r,t)&&a.push(i);return a}(t,n),a=i&&i.sort;return a&&t.sort(\"function\"==typeof a?a:function(t,e){for(var n,i=0;n=a[i];i++){var r=t[n.attribute],s=e[n.attribute];if((r=null!=r?r.valueOf():r)!=(s=null!=s?s.valueOf():s))return!!n.descending==(null==r||s<r)?-1:1}return 0}),i&&(i.start||i.count)&&(e=t.length,(t=t.slice(i.start||0,(i.start||0)+(i.count||1/0))).total=e),t}return t.matches=n,t},idProperty:\"id\",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var n=this.data,i=this.index,r=this.idProperty,r=t[r]=e&&\"id\"in e?e.id:r in t?t[r]:Math.random();if(r in i){if(e&&!1===e.overwrite)throw new Error(\"Object already exists\");n[i[r]]=t}else i[r]=n.push(t)-1;return r},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,n=this.data;if(t in e)return n.splice(e[t],1),this.setData(n),!0},query:function(t,e){return s(this.queryEngine(t,e)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,n=t.length;e<n;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}})}),define(\"skylark-langx-aspect/aspect\",[\"skylark-langx-ns\"],function(t){var l=0;function e(s){return function(t,e,n,i){var a,r=t[e],e=(r&&r.target==t||(t[e]=a=function(){for(var t=l,e=arguments,n=a.before;n;)e=n.advice.apply(this,e)||e,n=n.next;a.around&&(r=a.around.advice(this,e));for(var i,r,s=a.after;s&&s.id<t;)r=s.receiveArguments?void 0===(i=s.advice.apply(this,e))?r:i:s.advice.call(this,r,e),s=s.next;return r},r&&(a.around={advice:function(t,e){return r.apply(t,e)}}),a.target=t),function(n,i,r,t){var s,a,o=n[i],e=\"around\"==i;if(a=e?(s=r(function(){return o.advice(this,arguments)}),{remove:function(){s=s&&(n=r=null)},advice:function(t,e){return s?s.apply(t,e):o.advice(t,e)}}):{remove:function(){var t,e;a.advice&&(t=a.previous,(e=a.next)||t?(t?t.next=e:n[i]=e,e&&(e.previous=t)):delete n[i],n=r=a.advice=null)},id:l++,advice:r,receiveArguments:t},o&&!e)if(\"after\"==i){for(;o.next&&(o=o.next););(o.next=a).previous=o}else\"before\"==i&&(((n[i]=a).next=o).previous=a);else n[i]=a;return a}(a||r,s,n,i));return n=null,e}}return t.attach(\"langx.aspect\",{after:e(\"after\"),around:e(\"around\"),before:e(\"before\")})}),define(\"skylark-langx-aspect/main\",[\"./aspect\"],function(t){return t}),define(\"skylark-langx-aspect\",[\"skylark-langx-aspect/main\"],function(t){return t}),define(\"skylark-langx/aspect\",[\"skylark-langx-aspect\"],function(t){return t}),define(\"skylark-langx/async\",[\"skylark-langx-async\"],function(t){return t}),define(\"skylark-langx-binary/binary\",[\"skylark-langx-ns\"],function(t){\"use strict\";return t.attach(\"langx.binary\",{fromBase64:function(t){for(var e,n,i,r,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",a=t.length/4*3,o=new ArrayBuffer(a),l=new Uint8Array(o),c=0,u=0;c<a;c+=3)e=s.indexOf(t.charAt(u++)),n=s.indexOf(t.charAt(u++)),i=s.indexOf(t.charAt(u++)),r=s.indexOf(t.charAt(u++)),l[c]=e<<2|n>>4,64!==i&&(l[c+1]=(15&n)<<4|i>>2),64!==r&&(l[c+2]=(3&i)<<6|r);return o},fromBinaryString:function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n},fromBuffer:function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i++)n[i]=t[i];return e},readInt8:function(t,e){return t[e]<<24>>24},readUint16:function(t,e){return t[e]<<8|t[e+1]},readUint32:function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}})}),define(\"skylark-langx-binary/base64\",[],function(){\"use strict\";var t={byteLength:function(t){var t=u(t),e=t[0],t=t[1];return 3*(e+t)/4-t}};t.toByteArray=function(t){var e,n,i=u(t),r=i[0],i=i[1],s=new c(function(t,e){return 3*(t+e)/4-e}(r,i)),a=0,o=0<i?r-4:r;for(n=0;n<o;n+=4)e=l[t.charCodeAt(n)]<<18|l[t.charCodeAt(n+1)]<<12|l[t.charCodeAt(n+2)]<<6|l[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=l[t.charCodeAt(n)]<<2|l[t.charCodeAt(n+1)]>>4,s[a++]=255&e);1===i&&(e=l[t.charCodeAt(n)]<<10|l[t.charCodeAt(n+1)]<<4|l[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},t.fromByteArray=function(t){for(var e,n=t.length,i=n%3,r=[],s=0,a=n-i;s<a;s+=16383)r.push(function(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),r.push(function(t){return o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}(i));return r.join(\"\")}(t,s,a<s+16383?a:s+16383));1==i?(e=t[n-1],r.push(o[e>>2]+o[e<<4&63]+\"==\")):2==i&&(e=(t[n-2]<<8)+t[n-1],r.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+\"=\"));return r.join(\"\")};for(var o=[],l=[],c=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n=0,i=e.length;n<i;++n)o[n]=e[n],l[e.charCodeAt(n)]=n;function u(t){var e=t.length;if(0<e%4)throw new Error(\"Invalid string. Length must be a multiple of 4\");t=t.indexOf(\"=\"),e=(t=-1===t?e:t)===e?0:4-t%4;return[t,e]}return l[\"-\".charCodeAt(0)]=62,l[\"_\".charCodeAt(0)]=63,t}),define(\"skylark-langx-binary/ieee754\",[],function(){\"use strict\";var t={read:function(t,e,n,i,r){var s,a,o=8*r-i-1,l=(1<<o)-1,c=l>>1,u=-7,d=n?r-1:0,h=n?-1:1,r=t[e+d];for(d+=h,s=r&(1<<-u)-1,r>>=-u,u+=o;0<u;s=256*s+t[e+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=i;0<u;a=256*a+t[e+d],d+=h,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(r?-1:1);a+=Math.pow(2,i),s-=c}return(r?-1:1)*a*Math.pow(2,s-i)},write:function(t,e,n,i,r,s){var a,o,l=8*s-r-1,c=(1<<l)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,p=i?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(i=Math.pow(2,-a))<1&&(a--,i*=2),2<=(e+=1<=a+u?d/i:d*Math.pow(2,1-u))*i&&(a++,i/=2),c<=a+u?(o=0,a=c):1<=a+u?(o=(e*i-1)*Math.pow(2,r),a+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),a=0));8<=r;t[n+h]=255&o,h+=p,o/=256,r-=8);for(a=a<<r|o,l+=r;0<l;t[n+h]=255&a,h+=p,a/=256,l-=8);t[n+h-p]|=128*s}};return t}),define(\"skylark-langx-binary/memory\",[\"./binary\",\"./base64\",\"./ieee754\"],function(t,C,s){\"use strict\";d.INSPECT_MAX_BYTES=50;var e=2147483647;function a(t){if(e<t)throw new RangeError(\"Invalid typed array length\");t=new Uint8Array(t);return t.__proto__=d.prototype,t}function d(t,e,n){if(\"number\"!=typeof t)return i(t,e,n);if(\"string\"==typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return o(t)}function i(t,e,n){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');if(A(t)||t&&A(t.buffer)){var i=t,r=e;if(r<0||i.byteLength<r)throw new RangeError('\"offset\" is outside of buffer bounds');if(i.byteLength<r+(n||0))throw new RangeError('\"length\" is outside of buffer bounds');return(i=void 0===r&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,r):new Uint8Array(i,r,n)).__proto__=d.prototype,i}if(\"string\"!=typeof t){r=t;if(d.isBuffer(r))return n=0|c(r.length),0!==(i=a(n)).length&&r.copy(i,0,0,n),i;if(r){if(ArrayBuffer.isView(r)||\"length\"in r)return\"number\"!=typeof r.length||P(r.length)?a(0):l(r);if(\"Memory\"===r.type&&Array.isArray(r.data))return l(r.data)}throw new TypeError(\"The first argument must be one of type string, Memory, ArrayBuffer, Array, or Array-like Object.\")}var s,n=t,t=e;if(d.isEncoding(t=\"string\"==typeof t&&\"\"!==t?t:\"utf8\"))return e=0|u(n,t),s=a(e),s=(n=s.write(n,t))!==e?s.slice(0,n):s;throw new TypeError(\"Unknown encoding: \"+t)}function r(t){if(\"number\"!=typeof t)throw new TypeError('\"size\" argument must be of type number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function o(t){return r(t),a(t<0?0:0|c(t))}function l(t){for(var e=t.length<0?0:0|c(t.length),n=a(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function c(t){if(e<=t)throw new RangeError(\"Attempt to allocate Memory larger than maximum size: 0x\"+e.toString(16)+\" bytes\");return 0|t}function u(t,e){if(d.isMemory(t))return t.length;if(ArrayBuffer.isView(t)||A(t))return t.byteLength;var n=(t=\"string\"!=typeof t?\"\"+t:t).length;if(0===n)return 0;for(var i=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return E(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return T(t).length;default:if(i)return E(t).length;e=(\"\"+e).toLowerCase(),i=!0}}function n(t,e,n){var i,r=!1;if((e=void 0===e||e<0?0:e)>this.length)return\"\";if((n=void 0===n||n>this.length?this.length:n)<=0)return\"\";if((n>>>=0)<=(e>>>=0))return\"\";for(t=t||\"utf8\";;)switch(t){case\"hex\":var s=this,a=e,o=n,l=s.length;(!o||o<0||l<o)&&(o=l);for(var c=\"\",u=a=!a||a<0?0:a;u<o;++u)c+=function(t){return t<16?\"0\"+t.toString(16):t.toString(16)}(s[u]);return c;case\"utf8\":case\"utf-8\":return S(this,e,n);case\"ascii\":var d=this,l=e,h=n,p=\"\";h=Math.min(d.length,h);for(var f=l;f<h;++f)p+=String.fromCharCode(127&d[f]);return p;case\"latin1\":case\"binary\":var m=this,a=e,g=n,y=\"\";g=Math.min(m.length,g);for(var k=a;k<g;++k)y+=String.fromCharCode(m[k]);return y;case\"base64\":return x=this,i=n,0===(v=e)&&i===x.length?C.fromByteArray(x):C.fromByteArray(x.slice(v,i));case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":for(var x=e,v=n,b=this.slice(x,v),w=\"\",_=0;_<b.length;_+=2)w+=String.fromCharCode(b[_]+256*b[_+1]);return w;default:if(r)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),r=!0}}function h(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function p(t,e,n,i,r){if(0===t.length)return-1;if(\"string\"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=P(n=+n)?r?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if(\"string\"==typeof e&&(e=d.from(e,i)),d.isMemory(e))return 0===e.length?-1:f(t,e,n,i,r);if(\"number\"==typeof e)return e&=255,\"function\"==typeof Uint8Array.prototype.indexOf?(r?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):f(t,[e],n,i,r);throw new TypeError(\"val must be string, number or Memory\")}function f(t,e,n,i,r){var s=1,a=t.length,o=e.length;if(void 0!==i&&(\"ucs2\"===(i=String(i).toLowerCase())||\"ucs-2\"===i||\"utf16le\"===i||\"utf-16le\"===i)){if(t.length<2||e.length<2)return-1;a/=s=2,o/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r)for(var c=-1,u=n;u<a;u++)if(l(t,u)===l(e,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===o)return c*s}else-1!==c&&(u-=u-c),c=-1;else for(u=n=a<n+o?a-o:n;0<=u;u--){for(var d=!0,h=0;h<o;h++)if(l(t,u+h)!==l(e,h)){d=!1;break}if(d)return u}return-1}function g(t,e,n,i){return M(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function y(t,e,n,i){return M(function(t,e){for(var n,i,r=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function S(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,a,o,l,c=t[r],u=null,d=239<c?4:223<c?3:191<c?2:1;if(r+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(s=t[r+1]))&&127<(l=(31&c)<<6|63&s)&&(u=l);break;case 3:s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&s)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&65535<(l=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(i.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=d}var h=i,p=h.length;if(p<=k)return String.fromCharCode.apply(String,h);for(var f=\"\",m=0;m<p;)f+=String.fromCharCode.apply(String,h.slice(m,m+=k));return f}d.kMaxLength=e,(d.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||\"undefined\"==typeof console||\"function\"!=typeof console.error||console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\"),Object.defineProperty(d.prototype,\"parent\",{get:function(){if(this instanceof d)return this.buffer}}),Object.defineProperty(d.prototype,\"offset\",{get:function(){if(this instanceof d)return this.byteOffset}}),\"undefined\"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=i,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(t,e,n){return e=e,n=n,r(t=t),!(t<=0)&&void 0!==e?\"string\"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)},d.allocUnsafe=o,d.allocUnsafeSlow=o,d.isMemory=d.isBuffer=function(t){return null!=t&&!0===t._isBuffer},d.compare=function(t,e){if(!d.isMemory(t)||!d.isMemory(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},d.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;for(var n=d.allocUnsafe(e),i=0,r=0;r<t.length;++r){var s=t[r];if(ArrayBuffer.isView(s)&&(s=d.from(s)),!d.isMemory(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},d.byteLength=u,d.toArrayBuffer=function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i++)n[i]=t[i];return e},d.prototype._isMemory=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError(\"Memory size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)h(this,e,e+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError(\"Memory size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)h(this,e,e+3),h(this,e+1,e+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError(\"Memory size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)h(this,e,e+7),h(this,e+1,e+6),h(this,e+2,e+5),h(this,e+3,e+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var t=this.length;return 0===t?\"\":0===arguments.length?S(this,0,t):n.apply(this,arguments)},d.prototype.equals=function(t){if(d.isMemory(t))return this===t||0===d.compare(this,t);throw new TypeError(\"Argument must be a Memory\")},d.prototype.inspect=function(){var t=\"\",e=d.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString(\"hex\",0,e).match(/.{2}/g).join(\" \"),this.length>e)&&(t+=\" ... \"),\"<Memory \"+t+\">\"},d.prototype.compare=function(t,e,n,i,r){if(!d.isMemory(t))throw new TypeError(\"Argument must be a Memory\");if(void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),(e=void 0===e?0:e)<0||n>t.length||i<0||r>this.length)throw new RangeError(\"out of range index\");if(r<=i&&n<=e)return 0;if(r<=i)return-1;if(n<=e)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),o=Math.min(s,a),l=this.slice(i,r),c=t.slice(e,n),u=0;u<o;++u)if(l[u]!==c[u]){s=l[u],a=c[u];break}return s<a?-1:a<s?1:0},d.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},d.prototype.indexOf=function(t,e,n){return p(this,t,e,n,!0)},d.prototype.lastIndexOf=function(t,e,n){return p(this,t,e,n,!1)},d.prototype.write=function(t,e,n,i){if(void 0===e)i=\"utf8\",n=this.length,e=0;else if(void 0===n&&\"string\"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Memory.write(string, encoding, offset[, length]) is no longer supported\");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i=\"utf8\")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||r<n)&&(n=r),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");i=i||\"utf8\";for(var s,a,o,l=!1;;)switch(i){case\"hex\":var c=this,u=t,d=e,h=n,p=(d=Number(d)||0,c.length-d);(!h||p<(h=Number(h)))&&(h=p),(p=u.length)/2<h&&(h=p/2);for(var f=0;f<h;++f){var m=parseInt(u.substr(2*f,2),16);if(P(m))return f;c[d+f]=m}return f;case\"utf8\":case\"utf-8\":return p=e,o=n,M(E(t,(a=this).length-p),a,p,o);case\"ascii\":return g(this,t,e,n);case\"latin1\":case\"binary\":return g(this,t,e,n);case\"base64\":return a=this,o=e,s=n,M(T(t),a,o,s);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return y(this,t,e,n);default:if(l)throw new TypeError(\"Unknown encoding: \"+i);i=(\"\"+i).toLowerCase(),l=!0}},d.prototype.toJSON=function(){return{type:\"Memory\",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function m(t,e,n){if(t%1!=0||t<0)throw new RangeError(\"offset is not uint\");if(n<t+e)throw new RangeError(\"Trying to access beyond buffer length\")}function x(t,e,n,i,r,s){if(!d.isMemory(t))throw new TypeError('\"buffer\" argument must be a Memory instance');if(r<e||e<s)throw new RangeError('\"value\" argument is out of bounds');if(n+i>t.length)throw new RangeError(\"Index out of range\")}function v(t,e,n,i){if(n+i>t.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function b(t,e,n,i,r){return e=+e,n>>>=0,r||v(t,0,n,4),s.write(t,e,n,i,23,4),n+4}function w(t,e,n,i,r){return e=+e,n>>>=0,r||v(t,0,n,8),s.write(t,e,n,i,52,8),n+8}d.prototype.slice=function(t,e){var n=this.length,n=((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),this.subarray(t,e));return n.__proto__=d.prototype,n},d.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},d.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var i=this[t+--e],r=1;0<e&&(r*=256);)i+=this[t+--e]*r;return i},d.prototype.readUInt8=function(t,e){return t>>>=0,e||m(t,1,this.length),this[t]},d.prototype.readUInt16LE=function(t,e){return t>>>=0,e||m(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUInt16BE=function(t,e){return t>>>=0,e||m(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUInt32LE=function(t,e){return t>>>=0,e||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUInt32BE=function(t,e){return t>>>=0,e||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*e)),i},d.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var i=e,r=1,s=this[t+--i];0<i&&(r*=256);)s+=this[t+--i]*r;return(r*=128)<=s&&(s-=Math.pow(2,8*e)),s},d.prototype.readInt8=function(t,e){return t>>>=0,e||m(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){t>>>=0,e||m(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt16BE=function(t,e){t>>>=0,e||m(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},d.prototype.readInt32LE=function(t,e){return t>>>=0,e||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return t>>>=0,e||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readFloatLE=function(t,e){return t>>>=0,e||m(t,4,this.length),s.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return t>>>=0,e||m(t,4,this.length),s.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return t>>>=0,e||m(t,8,this.length),s.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return t>>>=0,e||m(t,8,this.length),s.read(this,t,!1,52,8)},d.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||x(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},d.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||x(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;0<=--r&&(s*=256);)this[e+r]=t/s&255;return e+n},d.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,255,0),this[e]=255&t,e+1},d.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},d.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeIntLE=function(t,e,n,i){t=+t,e>>>=0,i||x(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var r=0,s=1,a=0;for(this[e]=255&t;++r<n&&(s*=256);)t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},d.prototype.writeIntBE=function(t,e,n,i){t=+t,e>>>=0,i||x(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var r=n-1,s=1,a=0;for(this[e+r]=255&t;0<=--r&&(s*=256);)t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},d.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},d.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},d.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeFloatLE=function(t,e,n){return b(this,t,e,!0,n)},d.prototype.writeFloatBE=function(t,e,n){return b(this,t,e,!1,n)},d.prototype.writeDoubleLE=function(t,e,n){return w(this,t,e,!0,n)},d.prototype.writeDoubleBE=function(t,e,n){return w(this,t,e,!1,n)},d.prototype.copy=function(t,e,n,i){if(!d.isMemory(t))throw new TypeError(\"argument should be a Memory\");if(n=n||0,i||0===i||(i=this.length),e>=t.length&&(e=t.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"Index out of range\");if(i<0)throw new RangeError(\"sourceEnd out of bounds\");i>this.length&&(i=this.length);var r=(i=t.length-e<i-n?t.length-e+n:i)-n;if(this===t&&\"function\"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,i);else if(this===t&&n<e&&e<i)for(var s=r-1;0<=s;--s)t[s+e]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),e);return r},d.prototype.fill=function(t,e,n,i){if(\"string\"==typeof t){if(\"string\"==typeof e?(i=e,e=0,n=this.length):\"string\"==typeof n&&(i=n,n=this.length),void 0!==i&&\"string\"!=typeof i)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof i&&!d.isEncoding(i))throw new TypeError(\"Unknown encoding: \"+i);var r;1===t.length&&(r=t.charCodeAt(0),\"utf8\"===i&&r<128||\"latin1\"===i)&&(t=r)}else\"number\"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError(\"Out of range index\");var s;if(!(n<=e))if(e>>>=0,n=void 0===n?this.length:n>>>0,\"number\"==typeof(t=t||0))for(s=e;s<n;++s)this[s]=t;else{var a=d.isMemory(t)?t:new d(t,i),o=a.length;if(0===o)throw new TypeError('The value \"'+t+'\" is invalid for argument \"value\"');for(s=0;s<n-e;++s)this[s+e]=a[s%o]}return this};var _=/[^+/0-9A-Za-z-_]/g;function E(t,e){e=e||1/0;for(var n,i=t.length,r=null,s=[],a=0;a<i;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!r){if(56319<n){-1<(e-=3)&&s.push(239,191,189);continue}if(a+1===i){-1<(e-=3)&&s.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(e-=3)&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(e-=3)&&s.push(239,191,189);if(r=null,n<128){if(--e<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function T(t){return C.toByteArray(function(t){if((t=(t=t.split(\"=\")[0]).trim().replace(_,\"\")).length<2)return\"\";for(;t.length%4!=0;)t+=\"=\";return t}(t))}function M(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function A(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&\"ArrayBuffer\"===t.constructor.name&&\"number\"==typeof t.byteLength}function P(t){return t!=t}return t.Memory=d}),define(\"skylark-langx-binary/get-type-of\",[\"./binary\",\"./memory\"],function(t,e){return function(t){return\"string\"==typeof t?\"string\":\"[object Array]\"===Object.prototype.toString.call(t)?\"array\":e.isMemory(t)?\"memory\":t instanceof Uint8Array?\"uint8array\":t instanceof ArrayBuffer?\"arraybuffer\":void 0}}),define(\"skylark-langx-binary/arraylike-to-string\",[\"./binary\",\"./get-type-of\"],function(t,r){var s={stringifyByChunk:function(t,e,n){var i=[],r=0,s=t.length;if(s<=n)return String.fromCharCode.apply(null,t);for(;r<s;)i.push(\"array\"===e||\"nodebuffer\"===e?String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,s))):String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,s)))),r+=n;return i.join(\"\")},stringifyByChar:function(t){for(var e=\"\",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return 1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return 1===String.fromCharCode.apply(null,Buffer.alloc(1)).length}catch(t){return!1}}()}};return t.arrayLikeToString=function(t){var e=65536,n=r(t),i=!0;if(\"uint8array\"===n?i=s.applyCanBeUsed.uint8array:\"memory\"===n&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}}),define(\"skylark-langx-binary/buffer\",[\"./memory\"],function(t){return t}),define(\"skylark-langx-binary/string-to-arraylike\",[\"./binary\"],function(t){return t.stringToArrayLike=function(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}}),define(\"skylark-langx-binary/string-to-binary\",[\"./binary\",\"./string-to-arraylike\"],function(t,n){var i=\"undefined\"!=typeof Uint8Array;return t.string2binary=function(t){var e=null,e=new(i?Uint8Array:Array)(t.length);return n(t,e)}}),define(\"skylark-langx-binary/transform\",[\"./binary\",\"./memory\",\"./get-type-of\",\"./string-to-arraylike\",\"./arraylike-to-string\"],function(t,e,i,n,r){function s(t){return t}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}function o(t,e){var n;return e=e||\"\",t?(n=i(e),o[n][t](e)):e}return o.string={string:s,array:function(t){return n(t,new Array(t.length))},arraybuffer:function(t){return o.string.uint8array(t).buffer},uint8array:function(t){return n(t,new Uint8Array(t.length))},memory:function(t){return n(t,Buffer.alloc(t.length))}},o.array={string:r,array:s,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},memory:function(t){return e.from(t)}},o.arraybuffer={string:function(t){return r(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:s,uint8array:function(t){return new Uint8Array(t)},memory:function(t){return e.from(new Uint8Array(t))}},o.uint8array={string:r,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:s,memory:function(t){return e.from(t)}},o.memory={string:r,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return o.memory.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},memory:s},t.transform=o}),define(\"skylark-langx-binary/main\",[\"./binary\",\"./arraylike-to-string\",\"./buffer\",\"./string-to-arraylike\",\"./string-to-binary\",\"./transform\"],function(t){return t}),define(\"skylark-langx-binary\",[\"skylark-langx-binary/main\"],function(t){return t}),define(\"skylark-langx/binary\",[\"skylark-langx-binary\"],function(t){return t}),define(\"skylark-langx-chars/chars\",[\"skylark-langx-ns\",\"skylark-langx-types\"],function(t,e){return t.attach(\"langx.chars\",{isWhiteSpace:function(t){return 32===t||9===t||13===t||10===t}})}),define(\"skylark-langx-chars/main\",[\"./chars\"],function(t){return t}),define(\"skylark-langx-chars\",[\"skylark-langx-chars/main\"],function(t){return t}),define(\"skylark-langx/chars\",[\"skylark-langx-chars\"],function(t){return t}),define(\"skylark-langx/constructs\",[\"skylark-langx-constructs\"],function(t){return t}),define(\"skylark-langx-datetimes/datetimes\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.datetimes\",{parseMilliSeconds:function(t){var t=t.split(\" \"),e=parseInt(t[0]);if(isNaN(e))return 0;var n=36e5;switch(t[1].trim().replace(/\\./g,\"\")){case\"minutes\":case\"minute\":case\"min\":case\"mm\":case\"m\":return 6e4*e;case\"hours\":case\"hour\":case\"HH\":case\"hh\":case\"h\":case\"H\":return n*e;case\"seconds\":case\"second\":case\"sec\":case\"ss\":case\"s\":return 1e3*e;case\"days\":case\"day\":case\"DD\":case\"dd\":case\"d\":return 864e5*e;case\"months\":case\"month\":case\"MM\":case\"M\":return 24192e5*e;case\"weeks\":case\"week\":case\"W\":case\"w\":return 6048e5*e;case\"years\":case\"year\":case\"yyyy\":case\"yy\":case\"y\":return 31536e6*e;default:return 0}}})}),define(\"skylark-langx-datetimes/to_date\",[\"skylark-langx-types\",\"./datetimes\"],function(c,t){let u;return t.toDate=function(t){if(!t||!c.isString(t))return null;if(!(t=(u=u||new RegExp(\"^D:(\\\\d{4})(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?(\\\\d{2})?([Z|+|-])?(\\\\d{2})?'?(\\\\d{2})?'?\")).exec(t)))return null;var e=parseInt(t[1],10),n=1<=(n=parseInt(t[2],10))&&n<=12?n-1:0,i=1<=(i=parseInt(t[3],10))&&i<=31?i:1;let r=parseInt(t[4],10),s=(r=0<=r&&r<=23?r:0,parseInt(t[5],10));s=0<=s&&s<=59?s:0;var a=0<=(a=parseInt(t[6],10))&&a<=59?a:0,o=t[7]||\"Z\",l=0<=(l=parseInt(t[8],10))&&l<=23?l:0,t=0<=(t=parseInt(t[9],10)||0)&&t<=59?t:0;return\"-\"===o?(r+=l,s+=t):\"+\"===o&&(r-=l,s-=t),new Date(Date.UTC(e,n,i,r,s,a))}}),define(\"skylark-langx-datetimes/main\",[\"./datetimes\",\"./to_date\"],function(t){return t}),define(\"skylark-langx-datetimes\",[\"skylark-langx-datetimes/main\"],function(t){return t}),define(\"skylark-langx/datetimes\",[\"skylark-langx-datetimes\"],function(t){return t}),define(\"skylark-langx/deferred\",[\"skylark-langx-async\"],function(t){return t.Deferred}),define(\"skylark-langx/emitter\",[\"skylark-langx-events\"],function(t){return t.Emitter}),define(\"skylark-langx/evented\",[\"./emitter\"],function(t){return t}),define(\"skylark-langx/events\",[\"skylark-langx-events\"],function(t){return t}),define(\"skylark-langx/funcs\",[\"skylark-langx-funcs\"],function(t){return t}),define(\"skylark-langx-globals/globals\",[\"skylark-langx-ns\"],function(t){var e=function(){return\"undefined\"!=typeof global&&\"function\"!=typeof global?global:\"undefined\"!=typeof window?window:\"undefined\"!=typeof self?self:this}();return t.attach(\"langx.globals\",e)}),define(\"skylark-langx-globals/console\",[\"./globals\"],function(t){return t.console=console}),define(\"skylark-langx-globals/document\",[\"./globals\"],function(t){var e;if(\"undefined\"!=typeof document)e=document;else try{e=require(\"min-document\")}catch(t){console.warn(\"min-document is not finded!\",t)}return t.document=e}),define(\"skylark-langx-globals/window\",[\"./globals\"],function(t){var e=\"undefined\"!=typeof window?window:{};return t.window=e}),define(\"skylark-langx-globals/main\",[\"./globals\",\"./console\",\"./document\",\"./window\"],function(t){return t}),define(\"skylark-langx-globals\",[\"skylark-langx-globals/main\"],function(t){return t}),define(\"skylark-langx/globals\",[\"skylark-langx-globals\"],function(t){return t}),define(\"skylark-langx/hoster\",[\"skylark-langx-hoster\"],function(t){return t}),define(\"skylark-langx-maths/maths\",[\"skylark-langx-ns\",\"skylark-langx-types\"],function(t,e){for(var n=0;n<256;n++)n,n.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*i.DEG2RAD},radToDeg:function(t){return t*i.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,a=Math.sin,o=s(n/2),n=a(n/2),l=s((e+i)/2),c=a((e+i)/2),u=s((e-i)/2),d=a((e-i)/2),s=s((i-e)/2),a=a((i-e)/2);\"XYX\"===r?t.set(o*c,n*u,n*d,o*l):\"YZY\"===r?t.set(n*d,o*c,n*u,o*l):\"ZXZ\"===r?t.set(n*u,n*d,o*c,o*l):\"XZX\"===r?t.set(o*c,n*a,n*s,o*l):\"YXY\"===r?t.set(n*s,o*c,n*a,o*l):\"ZYZ\"===r?t.set(n*a,n*s,o*c,o*l):console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.\")}};return t.attach(\"langx.maths\",i)}),define(\"skylark-langx-maths/main\",[\"./maths\"],function(t){return t}),define(\"skylark-langx-maths\",[\"skylark-langx-maths/main\"],function(t){return t}),define(\"skylark-langx/maths\",[\"skylark-langx-maths\"],function(t){return t}),define(\"skylark-langx-numerics/numerics\",[\"skylark-langx-ns\",\"skylark-langx-types\"],function(t,e){return t.attach(\"langx.numerics\",{toFinite:e.toFinite,toNumber:e.toNumber,toInteger:e.toInteger})}),define(\"skylark-langx-numerics/maths\",[\"skylark-langx-ns\",\"skylark-langx-types\",\"./numerics\"],function(t,e,n){for(var i=0;i<256;i++)i,i.toString(16);var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var s=Math.cos,a=Math.sin,o=s(n/2),n=a(n/2),l=s((e+i)/2),c=a((e+i)/2),u=s((e-i)/2),d=a((e-i)/2),s=s((i-e)/2),a=a((i-e)/2);\"XYX\"===r?t.set(o*c,n*u,n*d,o*l):\"YZY\"===r?t.set(n*d,o*c,n*u,o*l):\"ZXZ\"===r?t.set(n*u,n*d,o*c,o*l):\"XZX\"===r?t.set(o*c,n*a,n*s,o*l):\"YXY\"===r?t.set(n*s,o*c,n*a,o*l):\"ZYZ\"===r?t.set(n*a,n*s,o*c,o*l):console.warn(\"THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.\")}};return n.maths=r}),define(\"skylark-langx-numerics/quaternion\",[\"skylark-langx-klass\",\"./numerics\",\"./maths\"],function(t,e,n){t=t({klassName:\"Quaternion\",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){var n,i,r,s,a,o,l;if(t&&t.isEuler)return a=t._x,o=t._y,n=t._z,t=t.order,s=Math.cos,l=Math.sin,i=s(a/2),r=s(o/2),s=s(n/2),a=l(a/2),o=l(o/2),l=l(n/2),\"XYZ\"===t?(this._x=a*r*s+i*o*l,this._y=i*o*s-a*r*l,this._z=i*r*l+a*o*s,this._w=i*r*s-a*o*l):\"YXZ\"===t?(this._x=a*r*s+i*o*l,this._y=i*o*s-a*r*l,this._z=i*r*l-a*o*s,this._w=i*r*s+a*o*l):\"ZXY\"===t?(this._x=a*r*s-i*o*l,this._y=i*o*s+a*r*l,this._z=i*r*l+a*o*s,this._w=i*r*s-a*o*l):\"ZYX\"===t?(this._x=a*r*s-i*o*l,this._y=i*o*s+a*r*l,this._z=i*r*l-a*o*s,this._w=i*r*s+a*o*l):\"YZX\"===t?(this._x=a*r*s+i*o*l,this._y=i*o*s+a*r*l,this._z=i*r*l-a*o*s,this._w=i*r*s-a*o*l):\"XZY\"===t&&(this._x=a*r*s-i*o*l,this._y=i*o*s-a*r*l,this._z=i*r*l+a*o*s,this._w=i*r*s+a*o*l),!1!==e&&this._onChangeCallback(),this;throw new Error(\"mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\")},setFromAxisAngle:function(t,e){var e=e/2,n=Math.sin(e);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,t=t.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],t=t[10],u=n+a+t;return 0<u?(e=.5/Math.sqrt(u+1),this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e):a<n&&t<n?(e=2*Math.sqrt(1+n-a-t),this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e):t<a?(e=2*Math.sqrt(1+a-n-t),this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e):(e=2*Math.sqrt(1+t-n-a),this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(n.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);return 0!==n&&(e=Math.min(1,e/n),this.slerp(t,e)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn(\"mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,t=t._w,s=e._x,a=e._y,o=e._z,e=e._w;return this._x=n*e+t*s+i*o-r*a,this._y=i*e+t*a+r*s-n*o,this._z=r*e+t*o+n*a-i*s,this._w=t*e-n*s-i*a-r*o,this._onChangeCallback(),this},slerp:function(t,e){if(0!==e){if(1===e)return this.copy(t);var n,i=this._x,r=this._y,s=this._z,a=this._w,o=a*t._w+i*t._x+r*t._y+s*t._z;o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o?(this._w=a,this._x=i,this._y=r,this._z=s):((t=1-o*o)<=Number.EPSILON?(this._w=(n=1-e)*a+e*this._w,this._x=n*i+e*this._x,this._y=n*r+e*this._y,this._z=n*s+e*this._z,this.normalize()):(n=Math.sqrt(t),t=Math.atan2(n,o),o=Math.sin((1-e)*t)/n,e=Math.sin(e*t)/n,this._w=a*o+this._w*e,this._x=i*o+this._x*e,this._y=r*o+this._y*e,this._z=s*o+this._z*e),this._onChangeCallback())}return this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return this._x=t[e=void 0===e?0:e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}});return Object.assign(t,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,a){var o,l,c,u=n[i+0],d=n[i+1],h=n[i+2],n=n[i+3],i=r[s+0],p=r[s+1],f=r[s+2],r=r[s+3];n===r&&u===i&&d===p&&h===f||(s=1-a,o=0<=(l=u*i+d*p+h*f+n*r)?1:-1,(c=1-l*l)>Number.EPSILON&&(c=Math.sqrt(c),l=Math.atan2(c,l*o),s=Math.sin(s*l)/c,a=Math.sin(a*l)/c),u=u*s+i*(l=a*o),d=d*s+p*l,h=h*s+f*l,n=n*s+r*l,s===1-a&&(u*=c=1/Math.sqrt(u*u+d*d+h*h+n*n),d*=c,h*=c,n*=c)),t[e]=u,t[e+1]=d,t[e+2]=h,t[e+3]=n}}),Object.assign(t.prototype,{}),e.Quaternion=t}),define(\"skylark-langx-numerics/vector3\",[\"skylark-langx-klass\",\"./numerics\",\"./maths\",\"./quaternion\"],function(t,e,n,i){var r=new i,i=t({klassName:\"Vector3\",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn(\"mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error(\"mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\"),this.applyQuaternion(r.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(r.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,t=t.elements;return this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,t=t.elements,r=1/(t[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z,t=t.w,o=t*e+s*i-a*n,l=t*n+a*e-r*i,c=t*i+r*n-s*e,e=-r*e-s*n-a*i;return this.x=o*t+e*-r+l*-a-c*-s,this.y=l*t+e*-s+c*-r-o*-a,this.z=c*t+e*-a+o*-s-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn(\"mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,t=t.z,r=e.x,s=e.y,e=e.z;return this.x=i*e-t*s,this.y=t*r-n*e,this.z=n*s-i*r,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return s.copy(this).projectOnVector(t),this.sub(s)},reflect:function(t){return this.sub(s.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(MathUtils.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return e*e+n*n+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"mathsVector3: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},_construct:function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}}),s=new i;return e.Vector3=i}),define(\"skylark-langx-numerics/matrix4\",[\"skylark-langx-klass\",\"./numerics\",\"./vector3\"],function(t,e,n){var l=new n,i=new n(0,0,0),r=new n(1,1,1),s=new n,a=new n,o=new n,c=t({set:function(t,e,n,i,r,s,a,o,l,c,u,d,h,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){var e=this.elements,t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements,t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/l.setFromMatrixColumn(t,0).length(),r=1/l.setFromMatrixColumn(t,1).length(),t=1/l.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error(\"mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");var e,n,i,r,s,a,o,l,c,u,d,h,p=this.elements,f=t.x,m=t.y,g=t.z,y=Math.cos(f),f=Math.sin(f),k=Math.cos(m),m=Math.sin(m),x=Math.cos(g),g=Math.sin(g);return\"XYZ\"===t.order?(s=y*x,a=y*g,o=f*x,l=f*g,p[0]=k*x,p[4]=-k*g,p[8]=m,p[1]=a+o*m,p[5]=s-l*m,p[9]=-f*k,p[2]=l-s*m,p[6]=o+a*m,p[10]=y*k):\"YXZ\"===t.order?(n=k*g,i=m*x,p[0]=(e=k*x)+(r=m*g)*f,p[4]=i*f-n,p[8]=y*m,p[1]=y*g,p[5]=y*x,p[9]=-f,p[2]=n*f-i,p[6]=r+e*f,p[10]=y*k):\"ZXY\"===t.order?(n=k*g,i=m*x,p[0]=(e=k*x)-(r=m*g)*f,p[4]=-y*g,p[8]=i+n*f,p[1]=n+i*f,p[5]=y*x,p[9]=r-e*f,p[2]=-y*m,p[6]=f,p[10]=y*k):\"ZYX\"===t.order?(s=y*x,a=y*g,o=f*x,l=f*g,p[0]=k*x,p[4]=o*m-a,p[8]=s*m+l,p[1]=k*g,p[5]=l*m+s,p[9]=a*m-o,p[2]=-m,p[6]=f*k,p[10]=y*k):\"YZX\"===t.order?(c=y*k,u=y*m,d=f*k,h=f*m,p[0]=k*x,p[4]=h-c*g,p[8]=d*g+u,p[1]=g,p[5]=y*x,p[9]=-f*x,p[2]=-m*x,p[6]=u*g+d,p[10]=c-h*g):\"XZY\"===t.order&&(c=y*k,u=y*m,d=f*k,h=f*m,p[0]=k*x,p[4]=-g,p[8]=m*x,p[1]=c*g+h,p[5]=y*x,p[9]=u*g-d,p[2]=d*g-u,p[6]=f*x,p[10]=h*g+c),p[3]=0,p[7]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(i,t,r)},lookAt:function(t,e,n){var i=this.elements;return o.subVectors(t,e),0===o.lengthSq()&&(o.z=1),o.normalize(),s.crossVectors(n,o),0===s.lengthSq()&&(1===Math.abs(n.z)?o.x+=1e-4:o.z+=1e-4,o.normalize(),s.crossVectors(n,o)),s.normalize(),a.crossVectors(o,s),i[0]=s.x,i[4]=a.x,i[8]=o.x,i[1]=s.y,i[5]=a.y,i[9]=o.y,i[2]=s.z,i[6]=a.z,i[10]=o.z,this},multiply:function(t,e){return void 0!==e?(console.warn(\"mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var t=t.elements,e=e.elements,n=this.elements,i=t[0],r=t[4],s=t[8],a=t[12],o=t[1],l=t[5],c=t[9],u=t[13],d=t[2],h=t[6],p=t[10],f=t[14],m=t[3],g=t[7],y=t[11],t=t[15],k=e[0],x=e[4],v=e[8],b=e[12],w=e[1],_=e[5],C=e[9],S=e[13],E=e[2],T=e[6],M=e[10],A=e[14],P=e[3],$=e[7],z=e[11],e=e[15];return n[0]=i*k+r*w+s*E+a*P,n[4]=i*x+r*_+s*T+a*$,n[8]=i*v+r*C+s*M+a*z,n[12]=i*b+r*S+s*A+a*e,n[1]=o*k+l*w+c*E+u*P,n[5]=o*x+l*_+c*T+u*$,n[9]=o*v+l*C+c*M+u*z,n[13]=o*b+l*S+c*A+u*e,n[2]=d*k+h*w+p*E+f*P,n[6]=d*x+h*_+p*T+f*$,n[10]=d*v+h*C+p*M+f*z,n[14]=d*b+h*S+p*A+f*e,n[3]=m*k+g*w+y*E+t*P,n[7]=m*x+g*_+y*T+t*$,n[11]=m*v+g*C+y*M+t*z,n[15]=m*b+g*S+y*A+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],l=t[13],c=t[2],u=t[6],d=t[10],h=t[14];return t[3]*(+r*o*u-i*l*u-r*a*d+n*l*d+i*a*h-n*o*h)+t[7]*(+e*o*h-e*l*d+r*s*d-i*s*h+i*l*c-r*o*c)+t[11]*(+e*l*u-e*a*h-r*s*u+n*s*h+r*a*c-n*l*c)+t[15]*(-i*a*c-e*o*u+e*a*d+i*s*u-n*s*d+n*o*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn(\"mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.\");var e=this.elements,t=t.elements,n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],t=t[15],y=d*g*c-m*h*c+m*l*p-o*g*p-d*l*t+o*h*t,k=f*h*c-u*g*c-f*l*p+a*g*p+u*l*t-a*h*t,x=u*m*c-f*d*c+f*o*p-a*m*p-u*o*t+a*d*t,v=f*d*l-u*m*l-f*o*h+a*m*h+u*o*g-a*d*g,b=n*y+i*k+r*x+s*v;return 0==b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=y*(y=1/b),e[1]=(m*h*s-d*g*s-m*r*p+i*g*p+d*r*t-i*h*t)*y,e[2]=(o*g*s-m*l*s+m*r*c-i*g*c-o*r*t+i*l*t)*y,e[3]=(d*l*s-o*h*s-d*r*c+i*h*c+o*r*p-i*l*p)*y,e[4]=k*y,e[5]=(u*g*s-f*h*s+f*r*p-n*g*p-u*r*t+n*h*t)*y,e[6]=(f*l*s-a*g*s-f*r*c+n*g*c+a*r*t-n*l*t)*y,e[7]=(a*h*s-u*l*s+u*r*c-n*h*c-a*r*p+n*l*p)*y,e[8]=x*y,e[9]=(f*d*s-u*m*s-f*i*p+n*m*p+u*i*t-n*d*t)*y,e[10]=(a*m*s-f*o*s+f*i*c-n*m*c-a*i*t+n*o*t)*y,e[11]=(u*o*s-a*d*s-u*i*c+n*d*c+a*i*p-n*o*p)*y,e[12]=v*y,e[13]=(u*m*r-f*d*r+f*i*h-n*m*h-u*i*g+n*d*g)*y,e[14]=(f*o*r-a*m*r-f*i*l+n*m*l+a*i*g-n*o*g)*y,e[15]=(a*d*r-u*o*r+u*i*l-n*d*l-a*i*h+n*o*h)*y,this)},scale:function(t){var e=this.elements,n=t.x,i=t.y,t=t.z;return e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,t))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),e=Math.sin(e),i=1-n,r=t.x,s=t.y,t=t.z,a=i*r,o=i*s;return this.set(a*r+n,a*s-e*t,a*t+e*s,0,a*s+e*t,o*s+n,o*t-e*r,0,a*t-e*s,o*t+e*r,i*t*t+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,s=e._y,a=e._z,e=e._w,o=r+r,l=s+s,c=a+a,u=r*o,d=r*l,r=r*c,h=s*l,s=s*c,a=a*c,o=e*o,l=e*l,e=e*c,c=n.x,p=n.y,n=n.z;return i[0]=(1-(h+a))*c,i[1]=(d+e)*c,i[2]=(r-l)*c,i[3]=0,i[4]=(d-e)*p,i[5]=(1-(u+a))*p,i[6]=(s+o)*p,i[7]=0,i[8]=(r+l)*n,i[9]=(s-o)*n,i[10]=(1-(u+h))*n,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=l.set(i[0],i[1],i[2]).length(),s=l.set(i[4],i[5],i[6]).length(),a=l.set(i[8],i[9],i[10]).length(),t=(this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],u.copy(this),1/r),i=1/s,o=1/a;return u.elements[0]*=t,u.elements[1]*=t,u.elements[2]*=t,u.elements[4]*=i,u.elements[5]*=i,u.elements[6]*=i,u.elements[8]*=o,u.elements[9]*=o,u.elements[10]*=o,e.setFromRotationMatrix(u),n.x=r,n.y=s,n.z=a,this},makePerspective:function(t,e,n,i,r,s){void 0===s&&console.warn(\"mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var a=this.elements,o=2*r/(n-i),l=(e+t)/(e-t),n=(n+i)/(n-i),i=-(s+r)/(s-r),s=-2*s*r/(s-r);return a[0]=2*r/(e-t),a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=o,a[9]=n,a[13]=0,a[2]=0,a[6]=0,a[10]=i,a[14]=s,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,i,r,s){var a=this.elements,o=1/(e-t),l=1/(n-i),c=1/(s-r),e=(e+t)*o,t=(n+i)*l,n=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-e,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-t,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-n,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){var n=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error(\"mathsMatrix4: the constructor no longer reads arguments. use .set() instead.\")}}),u=new c;return e.Matrix4=c}),define(\"skylark-langx-numerics/euler\",[\"skylark-langx-klass\",\"./numerics\",\"./maths\",\"./quaternion\",\"./vector3\",\"./matrix4\"],function(t,e,h,n,i,r){var s=new r,a=new n,o=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=h.clamp,t=t.elements,r=t[0],s=t[4],a=t[8],o=t[1],l=t[5],c=t[9],u=t[2],d=t[6],t=t[10];return\"XYZ\"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,t),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(d,l),this._z=0)):\"YXZ\"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,t),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0)):\"ZXY\"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,t),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r))):\"ZYX\"===e?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,t),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l))):\"YZX\"===e?(this._z=Math.asin(i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,t))):\"XZY\"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,t),this._y=0)):console.warn(\"skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: \"+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return s.makeRotationFromQuaternion(t),this.setFromRotationMatrix(s,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return a.setFromEuler(this),this.setFromQuaternion(a,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||o.DefaultOrder}});return o.RotationOrders=[\"XYZ\",\"YZX\",\"ZXY\",\"XZY\",\"YXZ\",\"ZYX\"],o.DefaultOrder=\"XYZ\",e.Euler=o}),define(\"skylark-langx-numerics/matrix3\",[\"skylark-langx-klass\",\"./numerics\"],function(t,e){t=t({klassName:\"Matrix3\",isMatrix3:!0,set:function(t,e,n,i,r,s,a,o,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var t=t.elements,e=e.elements,n=this.elements,i=t[0],r=t[3],s=t[6],a=t[1],o=t[4],l=t[7],c=t[2],u=t[5],t=t[8],d=e[0],h=e[3],p=e[6],f=e[1],m=e[4],g=e[7],y=e[2],k=e[5],e=e[8];return n[0]=i*d+r*f+s*y,n[3]=i*h+r*m+s*k,n[6]=i*p+r*g+s*e,n[1]=a*d+o*f+l*y,n[4]=a*h+o*m+l*k,n[7]=a*p+o*g+l*e,n[2]=c*d+u*f+t*y,n[5]=c*h+u*m+t*k,n[8]=c*p+u*g+t*e,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],t=t[8];return e*s*t-e*a*l-n*r*t+n*a*o+i*r*l-i*s*o},getInverse:function(t,e){void 0!==e&&console.warn(\"mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.\");var e=t.elements,t=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],e=e[8],u=e*a-o*c,d=o*l-e*s,h=c*s-a*l,p=n*u+i*d+r*h;return 0==p?this.set(0,0,0,0,0,0,0,0,0):(t[0]=u*(u=1/p),t[1]=(r*c-e*i)*u,t[2]=(o*i-r*a)*u,t[3]=d*u,t[4]=(e*n-r*l)*u,t[5]=(r*s-o*n)*u,t[6]=h*u,t[7]=(i*l-c*n)*u,t[8]=(a*n-i*s)*u,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,s,a){var o=Math.cos(r),r=Math.sin(r);this.set(n*o,n*r,-n*(o*s+r*a)+s+t,-i*r,i*o,-i*(-r*s+o*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),t=Math.sin(t),n=this.elements,i=n[0],r=n[3],s=n[6],a=n[1],o=n[4],l=n[7];return n[0]=e*i+t*a,n[3]=e*r+t*o,n[6]=e*s+t*l,n[1]=-t*i+e*a,n[4]=-t*r+e*o,n[7]=-t*s+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){var n=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error(\"Matrix3: the constructor no longer reads arguments. use .set() instead.\")}});return e.Matrix3=t}),define(\"skylark-langx-numerics/transform\",[\"skylark-langx-klass\",\"./numerics\"],function(t,e){t=t({klassName:\"Transform\",value:{get:function(){return this._.value}}});return e.Transform=t}),define(\"skylark-langx-numerics/matrix-transform\",[\"./numerics\",\"./transform\"],function(t,e){e=e.inherit({klassName:\"MatrixTransform\",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){(this._={}).matrix=t}});return t.MatrixTransform=e}),define(\"skylark-langx-numerics/plane\",[\"skylark-langx-klass\",\"./numerics\",\"./matrix3\",\"./vector3\"],function(t,e,n,r){var s=new r,i=new r,a=new n,n=t({klassName:\"Plane\",set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){n=s.subVectors(n,e).cross(i.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn(\"mathsPlane: .projectPoint() target is now required\"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn(\"mathsPlane: .intersectLine() target is now required\"),e=new r);var n=t.delta(s),i=this.normal.dot(n);return 0===i?0===this.distanceToPoint(t.start)?e.copy(t.start):void 0:(i=-(t.start.dot(this.normal)+this.constant)/i)<0||1<i?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn(\"mathsPlane: .coplanarPoint() target is now required\"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){e=e||a.getNormalMatrix(t),t=this.coplanarPoint(s).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize();return this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}});return e.Plane=n}),define(\"skylark-langx-numerics/rotate-transform\",[\"./numerics\",\"./transform\",\"./matrix-transform\"],function(t,e,n){return t.RotateTransform=e.inherit({klassName:\"RotateTransform\",value:{get:function(){return n.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e,n){var i=this._={};i.angle=t||0,i.centerX=e||0,i.centerY=n||0}})}),define(\"skylark-langx-numerics/scale-transform\",[\"./numerics\",\"./transform\",\"./matrix-transform\"],function(t,e,n){e=e.inherit({klassName:\"ScaleTransform\",value:{get:function(){return n.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e,n,i){var r=this._={};r.scaleX=t||1,r.scaleY=e||1,r.centerX=n||0,r.centerY=i||0}});return t.ScaleTransform=e}),define(\"skylark-langx-numerics/skew-transform\",[\"./numerics\",\"./transform\",\"./matrix-transform\"],function(t,e,n){e=e.inherit({klassName:\"SkewTransform\",value:{get:function(){return n.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,e){var n=this._={};n.skewX=t||0,n.skewY=e||0}});return t.SkewTransform=e}),define(\"skylark-langx-numerics/vector2\",[\"skylark-langx-klass\",\"./numerics\"],function(t,e){t=t({klassName:\"Vector2\",set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn(\"Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,t=t.elements;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t},rotateAround:function(t,e){var n=Math.cos(e),e=Math.sin(e),i=this.x-t.x,r=this.y-t.y;return this.x=i*n-r*e+t.x,this.y=i*e+r*n+t.y,this},_construct:function(t,e){this.x=t||0,this.y=e||0}});return e.Vector2=t}),define(\"skylark-langx-numerics/transform-matrix\",[\"skylark-langx-klass\",\"./numerics\",\"./vector2\"],function(t,e,i){function n(t){return r[t]||(r[t]=Math.PI*t/180)}var u=Math.PI/180,r={},a=t({klassName:\"TransformMatrix\",_multiplyPoint:function(t){var e=this._,n=t.x*e.m11+t.y*e.m21+e.dx,t=t.x*e.m12+t.y*e.m22+e.dy;return new i(n,t)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){var e,n,i,r,s,a;return this.isIdentity()?t.clone():(a=this.multiplyPoint(t.leftTop),e=this.multiplyPoint(t.leftBottom),n=this.multiplyPoint(t.right),t=this.multiplyPoint(t.rightBottom),i=Math.min(a.x,e.x,n.x,t.x),r=Math.min(a.y,e.y,n.y,t.y),s=Math.max(a.x,e.x,n.x,t.x),a=Math.max(a.y,e.y,n.y,t.y),new Rect(i,r,s-i,a-r))},prepend:function(t,e,n,i,r,s){var a,o,l=this.dx;return 1==t&&0==e&&0==n&&1==i||(a=this.m11,o=this.m21,this.m11=a*t+this.m12*n,this.m12=a*e+this.m12*i,this.m21=o*t+this.m22*n,this.m22=o*e+this.m22*i),this.dx=l*t+this.dy*n+r,this.dy=l*e+this.dy*i+s,this},append:function(t,e,n,i,r,s){var a=this.m11,o=this.m12,l=this.m21,c=this.m22;return this.m11=t*a+e*l,this.m12=t*o+e*c,this.m21=n*a+i*l,this.m22=n*o+i*c,this.dx=r*a+s*l+this.dx,this.dy=r*o+s*c+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,e,n,i,r,s,a,o,l){var c,r=r%360?(r=r*u,c=Math.cos(r),Math.sin(r)):(c=1,0);return(o||l)&&(this.dx-=o,this.dy-=l),s||a?(s*=u,a*=u,this.prepend(c*n,r*n,-r*i,c*i,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e)):this.prepend(c*n,r*n,-r*i,c*i,t,e),this},appendTransform:function(t,e,n,i,r,s,a,o,l){var c,r=r%360?(r=r*u,c=Math.cos(r),Math.sin(r)):(c=1,0);return s||a?(s*=u,a*=u,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,e),this.append(c*n,r*n,-r*i,c*i,0,0)):this.append(c*n,r*n,-r*i,c*i,t,e),(o||l)&&(this.dx-=o*this.m11+l*this.m21,this.dy-=o*this.m12+l*this.m22),this},rotate:function(t){var e=Math.cos(t),t=Math.sin(t),n=this.m11,i=this.m21,r=this.dx;return this.m11=n*e-this.m12*t,this.m12=n*t+this.m12*e,this.m21=i*e-this.m22*t,this.m22=i*t+this.m22*e,this.dx=r*e-this.dy*t,this.dy=r*t+this.dy*e,this},skew:function(t,e){return t*=u,e*=u,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,e){return this.m11*=t,this.m22*=e,this.dx*=t,this.dy*=e,this},translate:function(t,e){return this.dx+=t,this.dy+=e,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,e=this.m12,n=this.m21,i=this.m22,r=this.dx,s=t*i-e*n;return this.m11=i/s,this.m12=-e/s,this.m21=-n/s,this.m22=t/s,this.dx=(n*this.dy-i*r)/s,this.dy=-(t*this.dy-e*r)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){(t=null==t?{}:t).x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var e=Math.atan2(-this.m21,this.m22),n=Math.atan2(this.m12,this.m11);return e==n?(t.rotation=n/u,this.m11<0&&0<=this.m22&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/u,t.skewY=n/u),t},reinitialize:function(t,e,n,i,r,s,a,o,l){return this._initialize(t,e,n,i,r,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=l,this},appendProperties:function(t,e,n){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=n||this.compositeOperation,this},prependProperties:function(t,e,n){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||n,this},multiply:function(t){var e=this.m11,n=this.m12,i=this.m21,r=this.m22,s=this.dx,a=this.dy;return this.m11=e*t.m11+i*t.m12,this.m12=n*t.m11+r*t.m12,this.m21=e*t.m21+i*t.m22,this.m22=n*t.m21+r*t.m22,this.dx=e*t.dx+i*t.dy+s,this.dy=n*t.dx+r*t.dy+a,this},clone:function(){var t=this._,t=new a(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},toString:function(){var t=this._;return\"[TransformMatrix (m11=\"+t.m11+\" m12=\"+t.m12+\" m21=\"+t.m21+\" m22=\"+t.m22+\" dx=\"+t.dx+\" dy=\"+t.dy+\")]\"},_construct:function(t,e,n,i,r,s){var a=this._={};a.m11=t||1,a.m12=e||0,a.m21=n||0,a.m22=i||1,a.dx=r||0,a.dy=s||0}});return Object.assign(a,{translate:function(t,e){return new a(1,0,0,1,t,e)},scale:function(t,e){return new a(t,0,0,e||t,0,0)},rotate:function(t){var e=Math.cos(t),t=Math.sin(t);return new a(e,t,-t,e,0,0)},rotateg:function(t){return this.rotate(n(t))},skewX:function(t){t=Math.tan(t);return new a(1,0,t,1)},skewXg:function(t){return this.skewX(n(t))},skewY:function(t){t=Math.tan(t);return new a(1,t,0,1)},skewYg:function(t){return this.skewY(n(t))},reflect:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,i=e*e,r=n+i,s=2*t*e/r;return new a(2*n/r-1,s,s,2*i/r-1)},project:function(t,e){var n=t*t,i=e*e,r=n+i,t=t*e/r;return yx=t,yy=i/r,new a(n/r,yx,t,yy)},_sandwich:function(t,e,n){return this.translate(e,n).multiply(t).multiply(this.translate(-e,-n))},scaleAt:function(t,e,n,i){switch(arguments.length){case 4:return this._sandwich(this.scale(t,e),n,i);case 3:return\"number\"==typeof n?this._sandwich(this.scale(t),e,n):this._sandwich(this.scale(t,e),n.x,n.y)}return this._sandwich(this.scale(t),e.x,e.y)},rotateAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.rotate(t),e,n):this._sandwich(this.rotate(t),e.x,e.y)},rotategAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.rotateg(t),e,n):this._sandwich(this.rotateg(t),e.x,e.y)},skewXAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.skewX(t),e,n):this._sandwich(this.skewX(t),e.x,e.y)},skewXgAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.skewXg(t),e,n):this._sandwich(this.skewXg(t),e.x,e.y)},skewYAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.skewY(t),e,n):this._sandwich(this.skewY(t),e.x,e.y)},skewYgAt:function(t,e,n){return 2<arguments.length?this._sandwich(this.skewYg(t),e,n):this._sandwich(this.skewYg(t),e.x,e.y)}}),e.TransformMatrix=a}),define(\"skylark-langx-numerics/translate-transform\",[\"./numerics\",\"./transform\",\"./matrix-transform\"],function(t,e,n,i,r){e=e.inherit({klassName:\"TranslateTransform\",value:{get:function(){return n.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,e){var n=this._;n.x=t||0,n.y=e||0}});return t.TranslateTransform=e}),define(\"skylark-langx-numerics/vector4\",[\"skylark-langx-klass\",\"./numerics\"],function(t,e){t=t({klassName:\"Vector4\",set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(\"index is out of range: \"+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(\"index is out of range: \"+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn(\"Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn(\"Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,s,a,o,l,c,u,t=t.elements,d=t[0],h=t[4],p=t[8],f=t[1],m=t[5],g=t[9],y=t[2],k=t[6],t=t[10];return Math.abs(h-f)<.01&&Math.abs(p-y)<.01&&Math.abs(g-k)<.01?Math.abs(h+f)<.1&&Math.abs(p+y)<.1&&Math.abs(g+k)<.1&&Math.abs(d+m+t-3)<.1?this.set(1,0,0,0):(r=Math.PI,a=(t+1)/2,o=(h+f)/4,l=(p+y)/4,c=(g+k)/4,(s=(m+1)/2)<(u=(d+1)/2)&&a<u?i=u<.01?(e=0,n=.707106781):(n=o/(e=Math.sqrt(u)),l/e):a<s?i=s<.01?(n=0,e=.707106781):(e=o/(n=Math.sqrt(s)),c/n):a<.01?(n=e=.707106781,i=0):(e=l/(i=Math.sqrt(a)),n=c/i),this.set(e,n,i,r)):(u=Math.sqrt((k-g)*(k-g)+(p-y)*(p-y)+(f-h)*(f-h)),Math.abs(u)<.001&&(u=1),this.x=(k-g)/u,this.y=(p-y)/u,this.z=(f-h)/u,this.w=Math.acos((d+m+t-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn(\"Vector4: offset has been removed from .fromBufferAttribute().\"),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},_construct:function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}});return e.Vector4=t}),define(\"skylark-langx-numerics/main\",[\"./numerics\",\"./euler\",\"./maths\",\"./matrix3\",\"./matrix4\",\"./matrix-transform\",\"./plane\",\"./quaternion\",\"./rotate-transform\",\"./scale-transform\",\"./skew-transform\",\"./transform\",\"./transform-matrix\",\"./translate-transform\",\"./vector2\",\"./vector3\",\"./vector4\"],function(t){return t}),define(\"skylark-langx-numerics\",[\"skylark-langx-numerics/main\"],function(t){return t}),define(\"skylark-langx/numerics\",[\"skylark-langx-numerics\"],function(t){return t}),define(\"skylark-langx/objects\",[\"skylark-langx-objects\"],function(t){return t}),define(\"skylark-langx-paths/paths\",[\"skylark-langx-ns\"],function(t){var e={_makeLong:function(t){return t},_removeDuplicateSeps:function(t){return t=t.replace(this._replaceRegex,this.sep)},sep:\"/\"};return e._replaceRegex=new RegExp(\"//+\",\"g\"),e.delimiter=\":\",t.attach(\"langx.paths\",(e.posix=e).win32=e)}),define(\"skylark-langx-paths/normalize\",[\"./paths\"],function(a){return a.normalize=function(t){for(var e=(t=\"\"===t?\".\":t).charAt(0)===a.sep,n=(t=a._removeDuplicateSeps(t)).split(a.sep),i=[],r=0;r<n.length;r++){var s=n[r];\".\"!==s&&(\"..\"===s&&(e||!e&&0<i.length&&\"..\"!==i[0])?i.pop():i.push(s))}return!e&&i.length<2&&(1===i.length?\"\"===i[0]&&i.unshift(\".\"):i.push(\".\")),t=i.join(a.sep),t=e&&t.charAt(0)!==a.sep?a.sep+t:t}}),define(\"skylark-langx-paths/basename\",[\"./paths\",\"./normalize\"],function(i,r){return i.basename=function(t,e){var n;return void 0===e&&(e=\"\"),\"\"===t?t:\"\"===(n=(t=(t=r(t)).split(i.sep))[t.length-1])&&1<t.length?t[t.length-2]:0<e.length&&n.substr(n.length-e.length)===e?n.substr(0,n.length-e.length):n}}),define(\"skylark-langx-paths/dirname\",[\"./paths\"],function(n){return n.dirname=function(t){var e=(t=n._removeDuplicateSeps(t)).charAt(0)===n.sep;return\"\"===(t=t.split(n.sep)).pop()&&0<t.length&&t.pop(),1<t.length||1===t.length&&!e?t.join(n.sep):e?n.sep:\".\"}}),define(\"skylark-langx-paths/extname\",[\"./paths\",\"./normalize\"],function(n,i){return n.extname=function(t){var e=(t=i(t)).split(n.sep);return\"..\"===(t=\"\"===(t=e.pop())&&0<e.length?e.pop():t)||-1===(e=t.lastIndexOf(\".\"))||0===e?\"\":t.substr(e)}}),define(\"skylark-langx-paths/format\",[\"./paths\"],function(e){return e.format=function(t){if(null===t||\"object\"!=typeof t)throw new TypeError(\"Parameter 'pathObject' must be an object, not \"+typeof t);if(\"string\"!=typeof(t.root||\"\"))throw new TypeError(\"'pathObject.root' must be a string or undefined, not \"+typeof t.root);return(t.dir?t.dir+e.sep:\"\")+(t.base||\"\")}}),define(\"skylark-langx-paths/is-absolute\",[\"./paths\"],function(e){return e.isAbsolute=function(t){return 0<t.length&&t.charAt(0)===e.sep}}),define(\"skylark-langx-paths/join\",[\"./paths\",\"./normalize\"],function(s,a){return s.join=function(){for(var t=[],e=0;e<arguments.length;e++)t[+e]=arguments[e];for(var n=[],i=0;i<t.length;i++){var r=t[i];if(\"string\"!=typeof r)throw new TypeError(\"Invalid argument type to segs.join: \"+typeof r);\"\"!==r&&n.push(r)}return a(n.join(s.sep))}}),define(\"skylark-langx-paths/path\",[\"skylark-langx-types\",\"skylark-langx-constructs\",\"./paths\"],function(e,t,n){var o=t.klass({_construct:function(){var t=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&e.isString(arguments[0])?this._parse(arguments[0]):e.isArray(arguments[0])&&(t.segments=arguments[0],t.hasLeading=arguments[1]||!1,t.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var t,e=this._.segments,n=0;n<e.length;n++)if(\".\"==e[n]||\"..\"==e[n]){t=!0;break}if(t){for(var i=[],n=0;n<e.length;n++)\"..\"==e[n]?0==i.length?this.hasLeading||i.push(e[n]):\"..\"==i[i.length-1]?i.push(\"..\"):i.pop():\".\"==e[n]&&1!=e.length||i.push(e[n]);i.length!=e.length&&(this._.segments=i)}},_length:function(t){return this._.segments.length},_parse:function(t){var e=this._,n=(t=t||\".\").split(\"/\");\"/\"==t.charAt(0)&&(e.hasLeading=!0,n.shift()),\"/\"==t.charAt(t.length-1)&&(e.hasTrailing=!0,n.pop()),e.segments=n,e.path=t,this._canonicalize()},append:function(t){return e.isString(t)?this.appendPathStr(t):this.appendPath(t)},appendPath:function(t){var e,n;return t.isAbsolute()?t:(n=this.segments,e=t.segments,n=n.concat(e),new o(n,this.hasLeading,t.hasTrailing))},appendPathStr:function(t){return t=new o(t||\"\"),this.appendPath(t)},clone:function(){return new o(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(t){for(var e=this.segments,n=new o(t).segments;0<n.length&&0<e.length;)if(n.pop()!=e.pop())return!1;return!0},equals:function(t){var e=this._.segments,n=t._.segments;if(e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(n[i]!=e[i])return!1;return!0},firstSegment:function(t){return this._.segments[t||0]},getExtension:function(){var t=this._.extension,e=this._.path;return t=textension?t:this._.extension=e.substr(e.lastIndexOf(\".\")+1)},getSegments:function(){return this.segments},getParentPath:function(){var t,e=this._.parentPath;return e||((t=this.segments).pop(),e=this._.parentPath=new o(t,this.hasLeading)),e},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var t=this._.segments;return t[t.length-1]},matchingFirstSegments:function(t){for(var e=this.segments,n=t.segments,i=Math.min(e.length,n.length),r=0,s=0;s<i;s++){if(e[s]!=n[s])return r;r++}return r},normalize:function(){},removeFirstSegments:function(t){var e=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,new o(e.slice(t,e.length),n,hasTrailing)},removeLastSegments:function(t){var e=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,new o(e.slice(0,e.length-(t=t||1)),n,hasTrailing)},removeMatchingFirstSegments:function(t){t=this.matchingFirstSegments(t);return this.removeFirstSegments(t)},removeMatchingLastSegments:function(t){var e=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(e)},removeRelative:function(){var t=this.segments;return 0<t.length&&\".\"==t[1]?this.removeFirstSegments(1):this},relativeTo:function(t,e){\"string\"==typeof t&&(t=new o(t));var n=this.segments;if(this.isAbsolute())return this;var i=t.segments,t=this.matchingFirstSegments(t),i=i.length,r=(e&&(i-=1),i-t);if(0==r+n.length-t)return o.EMPTY;for(var s=[],a=0;a<r;a++)s.push(\"..\");for(a=t;a<n.length;a++)s.push(n[a]);return new o(s,!1,this.hasTrailing)},segment:function(t){var e=this._.segments;return e.length<t?null:e[t]},startsWith:function(t){var e=this.matchingFirstSegments(t);return t._length()==e},toString:function(){var t=[],e=this._.segments;this.hasLeading&&t.push(\"/\");for(var n=0;n<e.length;n++)0<n&&t.push(\"/\"),t.push(e[n]);return this.hasTrailing&&t.push(\"/\"),t.join(\"\")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return o.EMPTY=new o(\"\"),n.Path=o}),define(\"skylark-langx-paths/resolve\",[\"./paths\",\"./normalize\"],function(a,o){return a.resolve=function(){for(var t=[],e=0;e<arguments.length;e++)t[+e]=arguments[e];for(var n=[],i=0;i<t.length;i++){var r=t[i];if(\"string\"!=typeof r)throw new TypeError(\"Invalid argument type to paths.join: \"+typeof r);\"\"!==r&&(n=r.charAt(0)===a.sep?[]:n).push(r)}var s=o(n.join(a.sep));return 1<s.length&&s.charAt(s.length-1)===a.sep?s.substr(0,s.length-1):s}}),define(\"skylark-langx-paths/relative\",[\"./paths\",\"./resolve\"],function(l,c){return l.relative=function(t,e){t=c(t),e=c(e);for(var n=t.split(l.sep),i=e.split(l.sep),r=(i.shift(),n.shift(),0),t=[],s=0;s<n.length;s++){var a=n[s];if(a!==i[s]){r=n.length-s;break}}t=i.slice(s),(r=1===n.length&&\"\"===n[0]?0:r)>n.length&&(r=n.length);var o=\"\";for(s=0;s<r;s++)o+=\"../\";return o=1<(o+=t.join(l.sep)).length&&o.charAt(o.length-1)===l.sep?o.substr(0,o.length-1):o}}),define(\"skylark-langx-paths/main\",[\"./paths\",\"./basename\",\"./dirname\",\"./extname\",\"./format\",\"./is-absolute\",\"./join\",\"./normalize\",\"./path\",\"./relative\",\"./resolve\"],function(t){return t}),define(\"skylark-langx-paths\",[\"skylark-langx-paths/main\"],function(t){return t}),define(\"skylark-langx/paths\",[\"skylark-langx-paths\"],function(t){return t}),define(\"skylark-langx/Evented\",[\"./emitter\"],function(t){return t}),define(\"skylark-langx-strings/strings\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.strings\")}),define(\"skylark-langx-strings/base64\",[\"./strings\"],function(t){return t.base64={decode:function(t,e){e=null!=e&&e;var n,i,r,s,a,o,l=\"\",c=0;for(t=t.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");c<t.length;)r=this._keyStr.indexOf(t.charAt(c++)),n=(15&(s=this._keyStr.indexOf(t.charAt(c++))))<<4|(a=this._keyStr.indexOf(t.charAt(c++)))>>2,i=(3&a)<<6|(o=this._keyStr.indexOf(t.charAt(c++))),l+=String.fromCharCode(r<<2|s>>4),64!=a&&(l+=String.fromCharCode(n)),64!=o&&(l+=String.fromCharCode(i));return l=e?l:function(t){var e,n=\"\",i=0;for(c1=c2=0;i<t.length;)(e=t.charCodeAt(i))<128?(n+=String.fromCharCode(e),i++):191<e&&e<224?(c2=t.charCodeAt(i+1),n+=String.fromCharCode((31&e)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),n+=String.fromCharCode((15&e)<<12|(63&c2)<<6|63&c3),i+=3);return n}(l)},encode:function(t,e){var n,i,r,s,a,o,l=\"\",c=0;for((e=null!=e&&e)||(t=function(t){t=t.replace(/\\r\\n/g,\"\\n\");for(var e=\"\",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):e=127<i&&i<2048?(e+=String.fromCharCode(i>>6|192))+String.fromCharCode(63&i|128):(e=(e+=String.fromCharCode(i>>12|224))+String.fromCharCode(i>>6&63|128))+String.fromCharCode(63&i|128)}return e}(t));c<t.length;)r=(n=t.charCodeAt(c++))>>2,s=(3&n)<<4|(n=t.charCodeAt(c++))>>4,a=(15&n)<<2|(i=t.charCodeAt(c++))>>6,o=63&i,isNaN(n)?a=o=64:isNaN(i)&&(o=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o);return l}}}),define(\"skylark-langx-strings/camel-case\",[\"./strings\"],function(t){return t.camelCase=function(t){return t.replace(/-([\\da-z])/g,function(t){return t.toUpperCase().replace(\"-\",\"\")})}}),define(\"skylark-langx-strings/dasherize\",[\"./strings\"],function(t){return t.dasherize=function(t){return t.replace(/::/g,\"/\").replace(/([A-Z]+)([A-Z][a-z])/g,\"$1_$2\").replace(/([a-z\\d])([A-Z])/g,\"$1_$2\").replace(/_/g,\"-\").toLowerCase()}}),define(\"skylark-langx-strings/deserialize-value\",[\"./strings\"],function(t){return t.deserializeValue=function(e){try{return e&&(\"true\"==e||\"false\"!=e&&(\"null\"==e?null:+e+\"\"==e?+e:/^[\\[\\{]/.test(e)?JSON.parse(e):e))}catch(t){return e}}}),define(\"skylark-langx-strings/escape-html\",[\"./strings\"],function(t){var e=Object.freeze({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\",\"=\":\"&#x3D;\"});function n(t){return e[t]}var i=/[&<>\"'`=]/g;return t.escapeHTML=function(t){return null==t?\"\":t?t.toString().replace(i,n):String(t)}}),define(\"skylark-langx-strings/generate-uuid\",[\"./strings\"],function(t){return t.generateUUID=function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return(\"x\"===t?e:3&e|8).toString(16)})}}),define(\"skylark-langx-strings/lower-first\",[\"./strings\"],function(t){return t.lowerFirst=function(t){return t.charAt(0).toLowerCase()+t.slice(1)}}),define(\"skylark-langx-strings/ltrim\",[\"./strings\"],function(t){return t.ltrim=function(t){return t.replace(/^\\s+/,\"\")}}),define(\"skylark-langx-strings/rtrim\",[\"./strings\"],function(t){return t.rtrim=function(t){return t.replace(/\\s+$/,\"\")}}),define(\"skylark-langx-strings/serialize-value\",[\"./strings\"],function(t){return t.serializeValue=function(t){return JSON.stringify(t)}}),define(\"skylark-langx-strings/slugify\",[\"./strings\"],function(t){return t.slugify=function(t){t=(t=t.replace(/^\\s+|\\s+$/g,\"\")).toLowerCase();for(var e=\"ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;\",n=0,i=e.length;n<i;n++)t=t.replace(new RegExp(e.charAt(n),\"g\"),\"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------\".charAt(n));return t=t.replace(/\\s+/g,\"-\").replace(/-+/g,\"-\")}}),define(\"skylark-langx-strings/substitute\",[\"./strings\"],function(t){return t.substitute=function(t,r,s,a){function o(t,e){var i,r;return t.match(/\\./)?(r=function(t,e){var n=t.pop();return n?e[n]?r(t,i=e[n]):null:i})(t.split(\".\").reverse(),e):e[t]}return a=a||window,s=s?proxy(a,s):function(t){return t},t.replace(/\\$\\{([^\\s\\:\\}]+)(?:\\:([^\\s\\:\\}]+))?\\}/g,function(t,e,n){var i=o(e,r);return n&&(i=o(n,a).call(a,i,e)),s(i,e).toString()})}}),define(\"skylark-langx-strings/template\",[\"./strings\"],function(t){function l(t){return\"\\\\\"+e[t]}var c=/(.)^/,e={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},u=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g;function d(s,t,e){!t&&e&&(t=e),t=Object.assign({},d.templateSettings,t);var e=RegExp([(t.escape||c).source,(t.interpolate||c).source,(t.evaluate||c).source].join(\"|\")+\"|$\",\"g\"),a=0,o=\"__p+='\";s.replace(e,function(t,e,n,i,r){return o+=s.slice(a,r).replace(u,l),a=r+t.length,e?o+=\"'+\\n((__t=(\"+e+\"))==null?'':_.escape(__t))+\\n'\":n?o+=\"'+\\n((__t=(\"+n+\"))==null?'':__t)+\\n'\":i&&(o+=\"';\\n\"+i+\"\\n__p+='\"),t}),o+=\"';\\n\",o=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+(o=t.variable?o:\"with(obj||{}){\\n\"+o+\"}\\n\")+\"return __p;\\n\";try{var n=new Function(t.variable||\"obj\",\"_\",o)}catch(t){throw t.source=o,t}function i(t){return n.call(r,t,r)}var r=this,e=t.variable||\"obj\";return i.source=\"function(\"+e+\"){\\n\"+o+\"}\",i}return d.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},t.template=d}),define(\"skylark-langx-strings/trim\",[\"./strings\"],function(t){return t.trim=function(t){return null==t?\"\":String.prototype.trim.call(t)}}),define(\"skylark-langx-strings/trim-null\",[\"./strings\"],function(t){const e=/\\x00/g;return t.trimNull=function(t){return\"string\"!=typeof t?(warn(\"The argument for removeNullCharacters must be a string.\"),t):t.replace(e,\"\")}}),define(\"skylark-langx-strings/unique-id\",[\"./strings\"],function(t){var n=0;return t.uniqueId=function(t){var e=++n+\"\";return t?t+e:e}}),define(\"skylark-langx-strings/upper-first\",[\"./strings\"],function(t){return t.upperFirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}),define(\"skylark-langx-strings/words\",[\"./strings\"],function(t){var e=\"\\\\ud800-\\\\udfff\",n=\"\\\\u2700-\\\\u27bf\",i=\"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\",r=\"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\",s=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",a=`[${s}]`,o=`[${n}]`,l=`[${i}]`,s=`[^${e}${s+\"\\\\d\"+n+i+r}]`,n=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",i=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",r=`[${r}]`,c=`(?:${l}|${s})`,s=`(?:${r}|${s})`,u=\"(?:['’](?:d|ll|m|re|s|t|ve))?\",d=\"(?:['’](?:D|LL|M|RE|S|T|VE))?\",h=\"(?:[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\u1ab0-\\\\u1aff\\\\u1dc0-\\\\u1dff]|\\\\ud83c[\\\\udffb-\\\\udfff])?\",p=\"[\\\\ufe0e\\\\ufe0f]?\",e=p+h+`(?:\\\\u200d(?:${[`[^${e}]`,n,i].join(\"|\")})${p+h})*`,p=`(?:${[o,n,i].join(\"|\")})`+e;const f=RegExp([`${r}?${l}+${u}(?=${[a,r,\"$\"].join(\"|\")})`,s+`+${d}(?=${[a,r+c,\"$\"].join(\"|\")})`,r+`?${c}+`+u,r+\"+\"+d,\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",\"\\\\d+\",p].join(\"|\"),\"g\");const m=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),g=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;return t.words=function(t,e){return void 0===e?(m(t)?t.match(f):t.match(g))||[]:t.match(e)||[]}}),define(\"skylark-langx-strings/main\",[\"./strings\",\"./base64\",\"./camel-case\",\"./dasherize\",\"./deserialize-value\",\"./escape-html\",\"./generate-uuid\",\"./lower-first\",\"./ltrim\",\"./rtrim\",\"./serialize-value\",\"./slugify\",\"./substitute\",\"./template\",\"./trim\",\"./trim-null\",\"./unique-id\",\"./upper-first\",\"./words\"],function(t){return t}),define(\"skylark-langx-strings\",[\"skylark-langx-strings/main\"],function(t){return t}),define(\"skylark-langx/strings\",[\"skylark-langx-strings\"],function(t){return t}),define(\"skylark-langx/stateful\",[\"./Evented\",\"./strings\",\"./objects\"],function(t,e,n){var h=n.isEqual,i=n.mixin,r=n.result,s=n.isEmptyObject,p=n.clone,a=e.uniqueId;return t.inherit({_construct:function(t,e){var t=t||{},n=(e=e||{},this.cid=a(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(t=this.parse(t,e)||{}),r(this,\"defaults\")),t=i({},n,t);this.set(t,e),this.changed={}},changed:null,validationError:null,idAttribute:\"id\",cidPrefix:\"c\",toJSON:function(t){return p(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,n){if(null!=t){var i;if(\"object\"==typeof t?(i=t,n=e):(i={})[t]=e,!this._validate(i,n=n||{}))return!1;var r,s=n.unset,t=n.silent,a=[],o=this._changing,l=(this._changing=!0,o||(this._previousAttributes=p(this.attributes),this.changed={}),this.attributes),c=this.changed,u=this._previousAttributes;for(r in i)e=i[r],h(l[r],e)||a.push(r),h(u[r],e)?delete c[r]:c[r]=e,s?delete l[r]:l[r]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!t){a.length&&(this._pending=n);for(var d=0;d<a.length;d++)this.trigger(\"change:\"+a[d],this,l[a[d]],n)}if(!o){if(!t)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger(\"change\",this,n);this._pending=!1,this._changing=!1}}return this},unset:function(t,e){return this.set(t,void 0,i({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,i({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&p(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,i={};for(e in t){var r=t[e];h(n[e],r)||(i[e]=r)}return!s(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return p(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger(\"invalid\",this,t,i(e,{validationError:t})),!1)}})}),define(\"skylark-langx-topic/topic\",[\"skylark-langx-ns\",\"skylark-langx-events\"],function(t,e){var r=new e.Emitter;return t.attach(\"langx.topic\",{publish:function(t,e,n){var i=[].slice.call(arguments,1);return r.trigger({type:t,data:i})},subscribe:function(t,e,n){function i(t){e.apply(n,t.data)}return r.on(t,i),{remove:function(){r.off(t,i)}}}})}),define(\"skylark-langx-topic/main\",[\"./topic\"],function(t){return t}),define(\"skylark-langx-topic\",[\"skylark-langx-topic/main\"],function(t){return t}),define(\"skylark-langx/topic\",[\"skylark-langx-topic\"],function(t){return t}),define(\"skylark-langx/types\",[\"skylark-langx-types\"],function(t){return t}),define(\"skylark-langx-urls/create_object_url\",[\"./urls\"],function(t){\"use strict\";const l=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";return t.createObjectURL=function(n,t,e=!1){if(!e&&URL.createObjectURL)return e=new Blob([n],{type:t}),URL.createObjectURL(e);let i=`data:${t};base64,`;for(let t=0,e=n.length;t<e;t+=3){var r=255&n[t],s=255&n[t+1],a=255&n[t+2],o=r>>2,r=(3&r)<<4|s>>4,s=t+1<e?(15&s)<<2|a>>6:64,a=t+2<e?63&a:64;i+=l[o]+l[r]+l[s]+l[a]}return i}}),define(\"skylark-langx-urls/create_valid_absolute_url\",[\"./urls\"],function(t){\"use strict\";return t.createValidAbsoluteUrl=function(t,e){if(t)try{var n=e?new URL(t,e):new URL(t);if(function(t){if(t)switch(t.protocol){case\"http:\":case\"https:\":case\"ftp:\":case\"mailto:\":case\"tel:\":return 1;default:return}}(n))return n}catch(t){}return null}}),define(\"skylark-langx-urls/get-absolute-url\",[\"./urls\"],function(t){\"use strict\";return t.getAbsoluteUrl=function(t){var e;return t.match(/^https?:\\/\\//)||((e=document.createElement(\"div\")).innerHTML=`<a href=\"${t}\">x</a>`,t=e.firstChild.href),t}}),define(\"skylark-langx-urls/get-file-extension\",[\"./urls\"],function(t){\"use strict\";return t.getFileExtension=function(t){if(\"string\"==typeof t){t=/^(\\/?)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?)(\\.([^\\.\\/\\?]+)))(?:[\\/]*|[\\?].*)$/.exec(t);if(t)return t.pop().toLowerCase()}return\"\"}}),define(\"skylark-langx-urls/get-file-name\",[\"./urls\"],function(t){\"use strict\";return t.getFileName=function(t){var e=t.indexOf(\"#\"),n=t.indexOf(\"?\"),e=Math.min(0<e?e:t.length,0<n?n:t.length);return t.substring(t.lastIndexOf(\"/\",e)+1,e)}}),define(\"skylark-langx-urls/get-query\",[\"./urls\"],function(t){\"use strict\";return t.getQuery=function(t){for(var e={},n=t.split(\"&\"),i=n.length,r=[],s=0;s<i;s++){r=n[s].split(\"=\",2);try{r[0]=decodeURIComponent(r[0]),r[1]=decodeURIComponent(r[1])}catch(t){}void 0===e[r[0]]?e[r[0]]=r[1]:e[r[0]]+=\",\"+r[1]}return e}}),define(\"skylark-langx-urls/is_same_origin\",[\"./urls\"],function(t){\"use strict\";return t.isSameOrigin=function(t,e){let n;try{if(!(n=new URL(t)).origin||\"null\"===n.origin)return!1}catch(t){return!1}return t=new URL(e,n),n.origin===t.origin}}),define(\"skylark-langx-urls/main\",[\"./urls\",\"./create_object_url\",\"./create_valid_absolute_url\",\"./get-absolute-url\",\"./get-file-extension\",\"./get-file-name\",\"./get-query\",\"./is-cross-origin\",\"./is_same_origin\",\"./parse-url\"],function(t){return t}),define(\"skylark-langx-urls\",[\"skylark-langx-urls/main\"],function(t){return t}),define(\"skylark-langx/urls\",[\"skylark-langx-urls\"],function(t){return t}),define(\"skylark-langx/langx\",[\"./skylark\",\"./arrays\",\"./array-store\",\"./aspect\",\"./async\",\"./binary\",\"./chars\",\"./constructs\",\"./datetimes\",\"./deferred\",\"./emitter\",\"./evented\",\"./events\",\"./funcs\",\"./globals\",\"./hoster\",\"./klass\",\"./maths\",\"./numerics\",\"./objects\",\"./paths\",\"./stateful\",\"./strings\",\"./topic\",\"./types\",\"./urls\"],function(t,e,n,i,r,s,a,o,l,c,u,d,h,p,f,m,g,y,k,x,v,b,w,_,C,S){\"use strict\";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var E=x.mixin,T=(x.safeMixin,C.isFunction);var M=1;t=t.attach(\"langx\");return E(t,{createEvent:h.createEvent,funcArg:function(t,e,n,i){return T(e)?e.call(t,n,i):e},getQueryParams:function(t){var t=(t=t||window.location.href).split(\"?\"),e={};return 1<t.length&&t[1].split(\"&\").forEach(function(t){t=t.split(\"=\");e[t[0]]=t[1]}),e},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=M++)},URL:\"undefined\"!=typeof window?window.URL||window.webkitURL:null}),E(t,e,i,l,p,k,x,w,C,{ArrayStore:n,async:r,Deferred:c,Emitter:u,Evented:d,hoster:m,klass:g,Stateful:b,topic:_}),t}),define(\"skylark-langx/main\",[\"./langx\"],function(t){return t}),define(\"skylark-langx\",[\"skylark-langx/main\"],function(t){return t}),define(\"skylark-langx-scripter/scripter\",[\"skylark-langx/skylark\",\"skylark-langx\"],function(t,n){var r=document.getElementsByTagName(\"head\")[0],s={},a={},o=0;function e(){return e}var l={type:!0,src:!0,nonce:!0,noModule:!0};return n.mixin(e,{loadJavaScript:function(t,e,n){var i=s[t];return(i=i||(s[t]={state:0,loadedCallbacks:[],errorCallbacks:[]})).loadedCallbacks.push(e),i.errorCallbacks.push(n),1===i.state?i.node.onload():-1===i.state?i.node.onerror():(e=i.node=document.createElement(\"script\"),n=i.id=o++,e.type=\"text/javascript\",e.async=!1,e.defer=!1,startTime=(new Date).getTime(),r.appendChild(e),e.onload=function(){i.state=1;for(var t=i.loadedCallbacks,e=t.length;e--;)t[e]();i.loadedCallbacks=[],i.errorCallbacks=[]},e.onerror=function(){i.state=-1;for(var t=i.errorCallbacks,e=t.length;e--;)t[e]();i.loadedCallbacks=[],i.errorCallbacks=[]},e.src=t,a[n]=e),i.id},deleteJavaScript:function(t){var e,n=a[t];n&&(e=n.src,n.parentNode&&n.parentNode.remove(n),delete a[t],delete s[e])},evaluate:function(t,e,n){var i,r,s=(n=n||document).createElement(\"script\");if(s.text=t,e)for(i in l)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);return n.head.appendChild(s).parentNode.removeChild(s),this},loadScript:function(t){var e=new n.Deferred;return e.promise.scriptId=this.loadJavaScript(t,function(){e.resolve()},function(t){e.reject(t)}),e.promise}}),t.attach(\"langx.scripter\",e)}),define(\"skylark-langx-scripter/main\",[\"./scripter\"],function(t){return t}),define(\"skylark-langx-scripter\",[\"skylark-langx-scripter/main\"],function(t){return t}),define(\"skylark-domx-browser/browser\",[\"skylark-langx/skylark\",\"skylark-langx/langx\"],function(t,e){\"use strict\";var n=e.hoster.browser;return e.mixin(n,{isIE:!!/msie/i.exec(window.navigator.userAgent),location:function(){return window.location},support:{}}),t.attach(\"domx.browser\",n)}),define(\"skylark-domx-browser/support/css3\",[\"skylark-langx/langx\",\"../browser\"],function(t,e){\"use strict\";var n,i,r={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"},s=null,a=\"\",o=\"\",l={},c={},u=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,d=window.document.createElement(\"div\"),h=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.matchesSelector,p=d.style;for(i in p){var f,m=i.match(n||u);m&&(n||(f=m[1],n=new RegExp(\"^(\"+f+\")(.*)$\"),a=\"-\"+f.toLowerCase()+\"-\",o=f.toLowerCase()),l[t.lowerFirst(m[2])]=i,f=t.dasherize(m[2]),c[f]=a+f,r[i])&&(s=r[i])}s||void 0!==p.transition&&(s=r.transition);p={normalizeStyleProperty:function(t){return l[t]||t},normalizeCssProperty:function(t){return c[t]||t},normalizeCssEvent:function(t){return o?o+t:t.toLowerCase()},matchesSelector:h};return t.mixin(e,p),e.css3PropPrefix=p.propPrefix=a,s&&(e.support.transition=p.transition={end:s}),e.support.cssPointerEvents=p.pointerEvents=(d.style.cssText=\"pointer-events:auto\",\"auto\"===d.style.pointerEvents),d=null,e.support.css3=p}),define(\"skylark-domx-browser/support/fullscreen\",[\"../browser\"],function(t){const e={prefixed:!0};var n=[[\"requestFullscreen\",\"exitFullscreen\",\"fullscreenElement\",\"fullscreenEnabled\",\"fullscreenchange\",\"fullscreenerror\",\"fullscreen\"],[\"webkitRequestFullscreen\",\"webkitExitFullscreen\",\"webkitFullscreenElement\",\"webkitFullscreenEnabled\",\"webkitfullscreenchange\",\"webkitfullscreenerror\",\"-webkit-full-screen\"],[\"mozRequestFullScreen\",\"mozCancelFullScreen\",\"mozFullScreenElement\",\"mozFullScreenEnabled\",\"mozfullscreenchange\",\"mozfullscreenerror\",\"-moz-full-screen\"],[\"msRequestFullscreen\",\"msExitFullscreen\",\"msFullscreenElement\",\"msFullscreenEnabled\",\"MSFullscreenChange\",\"MSFullscreenError\",\"-ms-fullscreen\"]],i=n[0];let r;for(let t=0;t<n.length;t++)if(n[t][1]in document){r=n[t];break}if(r){for(let t=0;t<r.length;t++)e[i[t]]=r[t];e.prefixed=r[0]!==i[0],t.requestFullscreen=function(){return document.body[e.requestFullscreen].apply(this,arguments)},t.exitFullscreen=function(){return document[e.exitFullscreen].apply(this,arguments)},t.support.fullscreen=e}else t.support.fullscreen=null;return t.support.fullscreen}),define(\"skylark-domx-browser/support/touch\",[\"../browser\"],function(t){return t.support.tocuh=!!(\"ontouchstart\"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}),define(\"skylark-domx-browser/main\",[\"./browser\",\"./support/css3\",\"./support/fullscreen\",\"./support/touch\"],function(t){return t}),define(\"skylark-domx-browser\",[\"skylark-domx-browser/main\"],function(t){return t}),define(\"skylark-domx-noder/noder\",[\"skylark-langx-ns\",\"skylark-langx-types\",\"skylark-langx-arrays\",\"skylark-langx-strings\",\"skylark-langx-scripter\",\"skylark-domx-browser\"],function(t,e,n,i,r,s){Array.prototype.map,Array.prototype.slice;function a(){return a}return Object.assign(a,{blur:function(t){t.blur()},generateId:function(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}}),t.attach(\"domx.noder\",a)}),define(\"skylark-domx-noder/active\",[\"./noder\"],function(t){return t.active=function(e){var n;e=e||document;try{n=e.activeElement}catch(t){n=e.body}return n=(n=n||e.body).nodeName?n:e.body}}),define(\"skylark-domx-noder/_enhance_place_content\",[\"skylark-langx-types\",\"skylark-langx-arrays\",\"./noder\"],function(r,s,t){return function(t,e){if(r.isFunction(t))return t.apply(e,[]);if(r.isArrayLike(t)){for(var n,i=0;i<t.length;i++)r.isFunction(t[i])&&(t[i]=t[i].apply(e,[]),r.isArrayLike(t[i]))&&(n=!0);n&&(t=s.flatten(t))}return t}}),define(\"skylark-domx-noder/is-element\",[\"./noder\"],function(t){return t.isElement=function(t){return t&&1===t.nodeType}}),define(\"skylark-domx-noder/is-text-node\",[\"./noder\"],function(t){return t.isTextNode=function(t){return t&&3===t.nodeType}}),define(\"skylark-domx-noder/is-fragment\",[\"./noder\"],function(t){return t.isFragment=function(t){return t&&11===t.nodeType}}),define(\"skylark-domx-noder/_normalize_content\",[\"skylark-langx-types\",\"./noder\",\"./is-element\",\"./is-text-node\",\"./is-fragment\"],function(e,t,n,i,r){var s=Array.prototype.map;return function(t){return\"function\"==typeof t&&(t=t()),s.call(e.isArrayLike(t)?t:[t],t=>(\"function\"==typeof t&&(t=t()),n(t)||i(t)||r(t)?t:\"string\"==typeof t&&/\\S/.test(t)?document.createTextNode(t):void 0)).filter(t=>t)}}),define(\"skylark-domx-noder/_ensure_nodes\",[\"skylark-langx-arrays\",\"./noder\",\"./_normalize_content\"],function(n,t,i){var r=Array.prototype.map;return function(t,e){return t=i(t),e&&(t=r.call(t,function(t){return t.cloneNode(!0)})),n.flatten(t)}}),define(\"skylark-domx-noder/after\",[\"./noder\",\"./_enhance_place_content\",\"./_ensure_nodes\"],function(t,o,l){return t.after=function(t,e,n){e=o(e,t);var i=(s=t).parentNode;if(i)for(var r=l(e,n),s=s.nextSibling,a=0;a<r.length;a++)s?i.insertBefore(r[a],s):i.appendChild(r[a]);return this}}),define(\"skylark-domx-noder/append\",[\"./noder\",\"./_enhance_place_content\",\"./_ensure_nodes\"],function(t,a,o){return t.append=function(t,e,n){e=a(e,t);for(var i=t,r=o(e,n),s=0;s<r.length;s++)i.appendChild(r[s]);return this}}),define(\"skylark-domx-noder/before\",[\"./noder\",\"./_enhance_place_content\",\"./_ensure_nodes\"],function(t,o,l){return t.before=function(t,e,n){e=o(e,t);var i=t,r=i.parentNode;if(r)for(var s=l(e,n),a=0;a<s.length;a++)r.insertBefore(s[a],i);return this}}),define(\"skylark-domx-noder/body\",[\"./noder\"],function(t){return t.body=function(){return document.body}}),define(\"skylark-domx-noder/clone\",[\"./noder\"],function(t){return t.clone=function(t,e){return t.cloneNode(e)}}),define(\"skylark-domx-noder/is-child-of\",[\"./noder\"],function(t){return t.isChildOf=function(t,e,n){if(n)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}}),define(\"skylark-domx-noder/contains\",[\"./noder\",\"./is-child-of\"],function(t,n){return t.contains=function(t,e){return n(e,t)}}),define(\"skylark-domx-noder/node-name\",[\"./noder\"],function(t){return t.nodeName=function(t,e){return t=t.nodeName&&t.nodeName.toLowerCase(),void 0!==e?t===e.toLowerCase():t}}),define(\"skylark-domx-noder/contents\",[\"./noder\",\"./node-name\"],function(t,e){return t.contents=function(t){return e(t,\"iframe\")?t.contentDocument:t.childNodes}}),define(\"skylark-domx-noder/create-element\",[\"skylark-langx-types\",\"./noder\"],function(a,o){return o.createElement=function(t,e,n,i){var r=/svg/i.test(t)?document.createElementNS(\"http://www.w3.org/2000/svg\",t):document.createElement(t);if(a.isHtmlNode(e)?(i=e,n=e=null):a.isHtmlNode(n)&&(i=n,n=null),e)for(var s in e)r[s]=e[s];if(n)for(var s in n)r.setAttribute(s,n[s]);return i&&o.append(i,r),r}}),define(\"skylark-domx-noder/create-fragment\",[\"skylark-langx-strings\",\"./noder\",\"./create-element\"],function(i,t,r){var s=/^\\s*<(\\w+|!)[^>]*>/,a=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,e=document.createElement(\"div\"),n=document.createElement(\"table\"),o=document.createElement(\"tbody\"),l=document.createElement(\"tr\"),c={tr:o,tbody:n,thead:n,tfoot:n,td:l,th:l,\"*\":e},u=Array.prototype.slice;return t.createFragment=function(t){var e,n;return t=i.trim(t),a.test(t)?[r(RegExp.$1)]:(e=s.test(t)&&RegExp.$1,(n=c[e=e in c?e:\"*\"]).innerHTML=function(t){for(var e=t.split(\"/>\"),n=\"\",i=0;i<e.length-1;i++){var r=e[i].split(\"<\");n+=e[i]+\"></\"+r[r.length-1].split(\" \")[0]+\">\"}return n+e[e.length-1]}(\"\"+t),(dom=u.call(n.childNodes)).forEach(function(t){n.removeChild(t)}),dom)}}),define(\"skylark-domx-noder/create-text-node\",[\"./noder\"],function(t){return t.createTextNode=function(t){return document.createTextNode(t)}}),define(\"skylark-domx-noder/doc\",[\"./noder\"],function(t){return t.doc=function(){return document}}),define(\"skylark-domx-noder/empty\",[\"./noder\"],function(t){return t.empty=function(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this}}),define(\"skylark-domx-noder/focusable\",[\"./noder\"],function(t){return t.focusable=function(t,e){var n,i,r,s=t.nodeName.toLowerCase();return\"area\"===s?(r=(n=t.parentNode).name,!(!t.href||!r||\"map\"!==n.nodeName.toLowerCase())&&0<(n=$(\"img[usemap='#\"+r+\"']\")).length&&n.is(\":visible\")):(/^(input|select|textarea|button|object)$/.test(s)?(i=!t.disabled)&&(r=$(t).closest(\"fieldset\")[0])&&(i=!r.disabled):i=\"a\"===s&&t.href||e,i&&$(t).is(\":visible\")&&visible($(t)))}}),define(\"skylark-domx-noder/from-point\",[\"./noder\"],function(t){return t.fromPoint=function(t,e){return document.elementFromPoint(t,e)}}),define(\"skylark-domx-noder/fullscreen\",[\"skylark-domx-browser\",\"./noder\"],function(e,t){return t.fullscreen=function(t){return!1===t?e.exitFullscreen.apply(document):t?t[e.support.fullscreen.requestFullscreen]():document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}}),define(\"skylark-domx-noder/html\",[\"skylark-langx-types\",\"skylark-langx-scripter\",\"./noder\",\"./empty\"],function(a,o,t,l){var c=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,u=/^$|^module$|\\/(?:java|ecma)script/i;return t.html=function(t,e){var n=function(t,e){if(void 0===e)return t.innerHTML;if(l(t),a.isString(e=e||\"\")&&(e=e.replace(c,\"<$1></$2>\")),a.isString(e)||a.isNumber(e))t.innerHTML=e;else if(a.isArrayLike(e))for(var n=0;n<e.length;n++)t.appendChild(e[n]);else t.appendChild(e);return this}(t,e);if(void 0===e)return n;for(var i=t.querySelectorAll(\"script\"),r=0;r<i.length;r++){var s=i[r];u.test(s.type||\"\")&&o.evaluate(s.textContent,s)}return this}}),define(\"skylark-domx-noder/is-active\",[\"./noder\"],function(t){return t.isActive=function(t){return t===document.activeElement&&(t.type||t.href)}}),define(\"skylark-domx-noder/is-block-node\",[\"./noder\"],function(t){var e=[\"div\",\"p\",\"ul\",\"ol\",\"li\",\"blockquote\",\"hr\",\"pre\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"table\"];return t.isBlockNode=function(t){return!(!t||3===t.nodeType)&&new RegExp(\"^(\"+e.join(\"|\")+\")$\").test(t.nodeName.toLowerCase())}}),define(\"skylark-domx-noder/is-doc\",[\"./noder\"],function(t){return t.isDoc=function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}}),define(\"skylark-domx-noder/is-editable\",[\"./noder\"],function(t){return t.isEditable=function t(e){return!!e&&\"false\"!==e.contentEditable&&(\"true\"===e.contentEditable||t(e.parentNode))}}),define(\"skylark-domx-noder/is-fullscreen\",[\"./noder\",\"./fullscreen\"],function(t,e){return t.isFullscreen=function(t){return e()===t}}),define(\"skylark-domx-noder/is-in-document\",[\"./noder\"],function(t){return t.isInDocument=function(t){return t===document.body||document.body.contains(t)}}),define(\"skylark-domx-noder/is-in-frame\",[\"./noder\"],function(t){return t.isInFrame=function(){try{return window.parent!==window.self}catch(t){return!0}}}),define(\"skylark-domx-noder/is-input\",[\"./noder\",\"./is-editable\"],function(t,e){return t.isInput=function(t){return\"INPUT\"===t.tagName||\"TEXTAREA\"===t.tagName||\"SELECT\"===t.tagName||e(t)}}),define(\"skylark-domx-noder/is-window\",[\"skylark-langx-types\",\"./noder\"],function(t,e){return e.isWindow=t.isWindow}),define(\"skylark-domx-noder/offset-parent\",[\"./noder\"],function(t){var n=/^(?:body|html)$/i;return t.offsetParent=function(t){for(var e=t.offsetParent||document.body;e&&!n.test(e.nodeName)&&\"static\"==document.defaultView.getComputedStyle(e).position;)e=e.offsetParent;return e}}),define(\"skylark-domx-styler/styler\",[\"skylark-langx/skylark\",\"skylark-langx/langx\"],function(t,a){Array.prototype.every;var o=Array.prototype.forEach,l=a.camelCase,c=a.dasherize;function u(t,e){return\"number\"!=typeof e||n[c(t)]?e:e+\"px\"}var n={\"column-count\":1,columns:1,\"font-weight\":1,\"line-height\":1,opacity:1,\"z-index\":1,zoom:1},e={};function i(t){return t in e?e[t]:e[t]=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\")}function r(t,e){var n=t.className||\"\",i=n&&void 0!==n.baseVal;if(void 0===e)return i?n.baseVal:n;i?n.baseVal=e:t.className=e}var s={};function d(t,e){var n;return e&&(n=r(t),(a.isString(e)?e.split(/\\s+/g):e).forEach(function(t){var e=i(t);n.match(e)||(n+=(n?\" \":\"\")+t)}),r(t,n)),this}function h(t){var e=t.ownerDocument.defaultView;return(e=e&&e.opener?e:window).getComputedStyle(t)}function p(t,e){e=i(e);return t.className&&t.className.match(e)}function f(t,e){var n;return e?(n=r(t),(a.isString(e)?e.split(/\\s+/g):e).forEach(function(t){t=i(t);n.match(t)&&(n=n.replace(t,\" \"))}),r(t,n.trim())):r(t,\"\"),this}function m(){return m}return a.mixin(m,{autocssfix:!1,cssHooks:{},addClass:d,className:r,css:function(e,t,n){if(null==n){var i,r=h(e);if(null==t)return r;if(a.isString(t))return e.style[l(t)]||r.getPropertyValue(c(t));if(a.isArrayLike(t))return i={},o.call(t,function(t){i[t]=e.style[l(t)]||r.getPropertyValue(c(t))}),i}var s=\"\";if(\"string\"==typeof t)n||0===n?s=c(t)+\":\"+u(t,n):e.style.removeProperty(c(t));else for(key in t)void 0!==t[key]&&(t[key]||0===t[key]?s+=c(key)+\":\"+u(key,t[key])+\";\":e.style.removeProperty(c(key)));return e.style.cssText+=\";\"+s,this},disabled:function(t,e){return arguments.length<2?!!this.dom.disabled:(t.disabled=e,this)},hasClass:p,hide:function(t){return m.css(t,\"display\",\"none\"),this},isInvisible:function(t){return\"none\"==m.css(t,\"display\")||0==m.css(t,\"opacity\")||\"hidden\"==m.css(t,\"visibility\")},removeClass:f,show:function(t){var e,n;return m.css(t,\"display\",\"\"),\"none\"==m.css(t,\"display\")&&m.css(t,\"display\",(t=t.nodeName,s[t]||(e=document.createElement(t),document.body.appendChild(e),n=h(e).getPropertyValue(\"display\"),e.parentNode.removeChild(e),s[t]=n=\"none\"==n?\"block\":n),s[t])),this},toggleClass:function(e,t,n){return t.split(/\\s+/g).forEach(function(t){((n=void 0===n?!p(e,t):n)?d:f)(e,t)}),this}}),t.attach(\"domx.styler\",m)}),define(\"skylark-domx-styler/main\",[\"./styler\"],function(t,e,n){return t}),define(\"skylark-domx-styler\",[\"skylark-domx-styler/main\"],function(t){return t}),define(\"skylark-domx-noder/overlay\",[\"skylark-domx-styler\",\"./noder\"],function(n,i){return i.overlay=function(t,e){return e=i.createElement(\"div\",e),n.css(e,{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",zIndex:2147483647,opacity:.7}),t.appendChild(e),e}}),define(\"skylark-domx-noder/owner-doc\",[\"./noder\"],function(t){return t.ownerDoc=function(t){return t?9==t.nodeType?t:t.ownerDocument:document}}),define(\"skylark-domx-noder/owner-window\",[\"./noder\",\"./owner-doc\"],function(t,e){return t.ownerWindow=function(t){return(t=e(t)).defaultView||t.parentWindow}}),define(\"skylark-domx-noder/picture-in-picture\",[\"skylark-domx-browser\",\"./noder\"],function(t,e){return e.pictureInPicture=function(t){return!1===t?document.exitPictureInPicture():t?void(t!==document.pictureInPictureElement&&(t.requestPictureInPicture(),0)):document.pictureInPictureElement}}),define(\"skylark-domx-noder/prepend\",[\"./noder\",\"./_enhance_place_content\",\"./_ensure_nodes\"],function(t,e,o){return t.prepend=function(t,e,n){for(var i=t,r=i.firstChild,s=o(e,n),a=0;a<s.length;a++)r?i.insertBefore(s[a],r):i.appendChild(s[a]);return this}}),define(\"skylark-domx-noder/reflow\",[\"./noder\"],function(t){return t.reflow=function(t){return(t=t||document).offsetHeight,this}}),define(\"skylark-domx-noder/remove-child\",[\"skylark-langx-types\",\"./noder\"],function(i,t){return t.removeChild=function(t,e){i.isArrayLike(e)||(e=[e]);for(var n=0;n<e.length;n++)t.removeChild(e[n]);return this}}),define(\"skylark-domx-noder/remove\",[\"./noder\"],function(t){return t.remove=function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){console.warn(\"The node is already removed\",t)}return this}}),define(\"skylark-domx-noder/replace\",[\"./noder\"],function(t){return t.replace=function(t,e){return e.parentNode.replaceChild(t,e),this}}),define(\"skylark-domx-noder/reverse\",[\"./noder\"],function(t){return t.reverse=function(t){for(var e,n=t.firstChild,i=t.children.length-1;0<i;i--)0<i&&(e=t.children[i],t.insertBefore(e,n))}}),define(\"skylark-domx-noder/root\",[\"./noder\"],function(t){return t.root=function(){return document.documentElement}}),define(\"skylark-domx-noder/scrolling-element\",[\"./noder\"],function(t){return t.scrollingElement=function(){return document.scrollingElement||document.documentElement}}),define(\"skylark-domx-noder/selectable\",[\"./noder\"],function(t){return t.selectable=function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?\"auto\":\"none\",t.style.KhtmlUserSelect=e?\"auto\":\"none\",t.unselectable=e?\"on\":\"off\")}}),define(\"skylark-domx-noder/throb\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./noder\"],function(t,o,l){return l.throb=function(t,e){e=e||{};var n,i=e.time,r=e.callback,s=l.createElement(\"div\",{className:e.className||\"throbber\"}),a=function(){n&&(clearTimeout(n),n=null),s&&(l.remove(s),s=null)},e=(e.style&&o.css(s,e.style),e.content||'<span class=\"throb\"></span>');return l.html(s,e),t.appendChild(s),i&&(n=setTimeout(function(){a(),r&&r()},i)),{throbber:s,remove:a,update:function(t){t&&t.text&&s&&(textNode.nodeValue=t.text)}}}}),define(\"skylark-domx-noder/traverse\",[\"./noder\"],function(t){return t.traverse=function t(e,n){n(e);for(var i=0,r=e.childNodes.length;i<r;i++)t(e.childNodes[i],n);return this}}),define(\"skylark-domx-noder/unwrap\",[\"./noder\",\"./is-doc\"],function(t,n){return t.unwrap=function(t){var e=t.parentNode;e&&!n(e.parentNode)&&e.parentNode.insertBefore(t,e)}}),define(\"skylark-domx-noder/wrapper-inner\",[\"./noder\"],function(t){var r=Array.prototype.slice;return t.wrapperInner=function(t,e){var n=r.call(t.childNodes);t.appendChild(e);for(var i=0;i<n.length;i++)e.appendChild(n[i]);return this}}),define(\"skylark-domx-noder/wrapper\",[\"./noder\"],function(t){return t.wrapper=function(t,e){types.isString(e)&&(e=this.createFragment(e).firstChild),t.parentNode.insertBefore(e,t),e.appendChild(t)}}),define(\"skylark-domx-noder/main\",[\"./noder\",\"./active\",\"./after\",\"./append\",\"./before\",\"./body\",\"./clone\",\"./contains\",\"./contents\",\"./create-element\",\"./create-fragment\",\"./create-text-node\",\"./doc\",\"./empty\",\"./focusable\",\"./from-point\",\"./fullscreen\",\"./html\",\"./is-active\",\"./is-block-node\",\"./is-child-of\",\"./is-doc\",\"./is-editable\",\"./is-element\",\"./is-fragment\",\"./is-fullscreen\",\"./is-in-document\",\"./is-in-frame\",\"./is-input\",\"./is-text-node\",\"./is-window\",\"./node-name\",\"./offset-parent\",\"./overlay\",\"./owner-doc\",\"./owner-window\",\"./picture-in-picture\",\"./prepend\",\"./reflow\",\"./remove-child\",\"./remove\",\"./replace\",\"./reverse\",\"./root\",\"./scrolling-element\",\"./selectable\",\"./throb\",\"./traverse\",\"./unwrap\",\"./wrapper-inner\",\"./wrapper\",\"./throb\"],function(t){return t}),define(\"skylark-domx-noder\",[\"skylark-domx-noder/main\"],function(t){return t}),define(\"skylark-domx-finder/finder\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-styler\"],function(t,d,e,s,o){var h={},u=Array.prototype.filter,p=Array.prototype.slice,f=e.matchesSelector,n=(function(){var k,x,v,b,e,n={},i={},w=/\\\\/g,r=function(t,e){if(null==t)return null;if(!0===t.Slick)return t;t=(\"\"+t).replace(/^\\s+|\\s+$/g,\"\");e=(b=!!e)?i:n;if(e[t])return e[t];for(k={Slick:!0,expressions:[],raw:t,reverse:function(){return r(this.raw,!0)}},x=-1;t!=(t=t.replace(a,o)););return k.length=k.expressions.length,e[k.raw]=b?s(k):k},_=function(t){return\"!\"===t?\" \":\" \"===t?\"!\":/^!/.test(t)?t.replace(/^!/,\"\"):\"!\"+t},s=function(t){for(var e=t.expressions,n=0;n<e.length;n++){for(var i=e[n],r={parts:[],tag:\"*\",combinator:_(i[0].combinator)},s=0;s<i.length;s++){var a=i[s];a.reverseCombinator||(a.reverseCombinator=\" \"),a.combinator=a.reverseCombinator,delete a.reverseCombinator}i.reverse().push(r)}return t},C=(e=/(?=[\\-\\[\\]{}()*+?.\\\\\\^$|,#\\s])/g,function(t){return t.replace(e,\"\\\\\")}),a=new RegExp(\"^(?:\\\\s*(,)\\\\s*|\\\\s*(<combinator>+)\\\\s*|(\\\\s+)|(<unicode>+|\\\\*)|\\\\#(<unicode>+)|\\\\.(<unicode>+)|\\\\[\\\\s*(<unicode1>+)(?:\\\\s*([*^$!~|]?=)(?:\\\\s*(?:([\\\"']?)(.*?)\\\\9)))?\\\\s*\\\\](?!\\\\])|(:+)(<unicode>+)(?:\\\\((?:(?:([\\\"'])([^\\\\13]*)\\\\13)|((?:\\\\([^)]+\\\\)|[^()]*)+))\\\\))?)\".replace(/<combinator>/,\"[\"+C(\">+~`!@$%^&={}\\\\;</\")+\"]\").replace(/<unicode>/g,\"(?:[\\\\w\\\\u00a1-\\\\uFFFF-]|\\\\\\\\[^\\\\s0-9a-f])\").replace(/<unicode1>/g,\"(?:[:\\\\w\\\\u00a1-\\\\uFFFF-]|\\\\\\\\[^\\\\s0-9a-f])\"));function o(t,e,n,i,r,s,a,o,l,c,u,d,h,p,f,m){if(!e&&-1!==x||(k.expressions[++x]=[],v=-1,!e)){(n||i||-1===v)&&(n=n||\" \",e=k.expressions[x],b&&e[v]&&(e[v].reverseCombinator=_(n)),e[++v]={combinator:n,tag:\"*\"});var g,y,i=k.expressions[x][v];if(r)i.tag=r.replace(w,\"\");else if(s)i.id=s.replace(w,\"\");else if(a)a=a.replace(w,\"\"),i.classList||(i.classList=[]),i.classes||(i.classes=[]),i.classList.push(a),i.classes.push({value:a,regexp:new RegExp(\"(^|\\\\s)\"+C(a)+\"(\\\\s|$)\")});else if(h)m=(m=m||f)?m.replace(w,\"\"):null,i.pseudos||(i.pseudos=[]),i.pseudos.push({key:h.replace(w,\"\"),value:m,type:1==d.length?\"class\":\"element\"});else if(o){switch(o=o.replace(w,\"\"),u=(u||\"\").replace(w,\"\"),l){case\"^=\":y=new RegExp(\"^\"+C(u));break;case\"$=\":y=new RegExp(C(u)+\"$\");break;case\"~=\":y=new RegExp(\"(^|\\\\s)\"+C(u)+\"(\\\\s|$)\");break;case\"|=\":y=new RegExp(\"^\"+C(u)+\"(-|$)\");break;case\"=\":g=function(t){return u==t};break;case\"*=\":g=function(t){return t&&-1<t.indexOf(u)};break;case\"!=\":g=function(t){return u!=t};break;default:g=function(t){return!!t}}g=(g=\"\"==u&&/^[*$^]=$/.test(l)?function(){return!1}:g)||function(t){return t&&y.test(t)},i.attributes||(i.attributes=[]),i.attributes.push({key:o,operator:l,value:u,test:g})}}return\"\"}var t=this.Slick||{};t.parse=function(t){return r(t)},t.escapeRegExp=C,this.Slick||(this.Slick=t)}.apply(h),/^(?:input|select|textarea|button)$/i),r=/^h\\d$/i,p=Array.prototype.slice,a=(h.parseSelector=h.Slick.parse,h.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return\"input\"===e&&\"button\"===t.type||\"button\"===e},checked:function(t){return!!t.checked},contains:function(t,e,n,i){if(-1<$(this).text().indexOf(i))return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,n,i){return e==i},even:function(t,e,n,i){return e%2==0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return s.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,n,i){return i<e},has:function(t,e,n,i){return k(t,i)},header:function(t){return r.test(t.nodeName)},hidden:function(t){return!h.pseudos.visible(t)},input:function(t){return n.test(t.nodeName)},last:function(t,e,n){return e===n.length-1},lt:function(t,e,n,i){return e<i},not:function(t,e,n,i){return!b(t,i)},odd:function(t,e,n,i){return e%2==1},parent:function(t){return!!t.parentElement},selected:function(t){return!!t.selected},tabbable:function(t){var t=t.tabindex,e=null!=t;return(!e||0<=t)&&s.focusable(element,e)},text:function(t){return\"text\"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth},empty:function(t){return!t.hasChildNodes()}});for(i in[\"first\",\"eq\",\"last\"].forEach(function(t){a[t].isArrayFilter=!0}),a.nth=a.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a[i]=function(e){return function(t){return\"input\"===t.nodeName.toLowerCase()&&t.type===e}}(i);for(i in{submit:!0,reset:!0})a[i]=function(n){return function(t){var e=t.nodeName.toLowerCase();return(\"input\"===e||\"button\"===e)&&t.type===n}}(i);function m(t,e,n){for(var i=[],r=n&&d.isString(n);(t=t.parentElement)&&9!==t.nodeType;){if(n)if(r){if(b(t,n))break}else if(d.isArrayLike(n)){if(-1<d.inArray(t,n))break}else if(t==n)break;e&&!b(t,e)||i.push(t)}return i}function g(t,e){for(var n=t.childNodes,i=[],r=0;r<n.length;r++)1==(t=n[r]).nodeType&&i.push(t);return i=e?h.filter(i,e):i}function l(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(\">\"!==e[0]||t.parentElement===n)&&b(t,e)||i&&t===n)return t}while(t!==n&&(t=C(t)))}return null}function c(t,e){try{return p.call(t.querySelectorAll(e))}catch(t){}return h.query(t,e)}function y(t,e){try{return t.querySelector(e)}catch(t){}t=h.query(t,e);return 0<t.length?t[0]:null}function k(t,e){return e||(e=t,t=document.body),b(t,e)?t:y(t,e)}function x(t,e,n){for(var i=t.childNodes[0];i;){if(1==i.nodeType){if(!e||b(i,e))return i;if(n)break}i=i.nextSibling}return null}function v(t,e,n){for(var t=t.childNodes,i=t[t.length-1];i;){if(1==i.nodeType){if(!e||b(i,e))return i;if(n)break}i=i.previousSibling}return null}function b(t,e){if(!e||!t||1!==t.nodeType)return!1;if(d.isString(e)){try{return f.call(t,e.replace(/\\[([^=]+)=\\s*([^'\"\\]]+?)\\s*\\]/g,'[$1=\"$2\"]'))}catch(t){}return h.match(t,e)}return d.isArrayLike(e)?-1<d.inArray(t,e):d.isPlainObject(e)?h.check(t,e):t===e}function w(t,e,n){for(var i=t.nextSibling;i;){if(1==i.nodeType){if(!e||b(i,e))return i;if(n)break}i=i.nextSibling}return null}function _(t,e){for(var n=t.nextSibling,i=[];n;)1!=n.nodeType||e&&!b(n,e)||i.push(n),n=n.nextSibling;return i}function C(t,e){t=t.host&&t!==document&&t.host.nodeType?t.host:t.parentElement;return!t||e&&!b(t,e)?null:t}function S(t,e,n){for(var i=t.previousSibling;i;){if(1==i.nodeType){if(!e||b(i,e))return i;if(n)break}i=i.previousSibling}return null}function E(t,e){for(var n=t.previousSibling,i=[];n;)1!=n.nodeType||e&&!b(n,e)||i.push(n),n=n.previousSibling;return i}function T(t,e){for(var n=t.parentElement.firstChild,i=[];n;)1!=n.nodeType||n===t||e&&!b(n,e)||i.push(n),n=n.nextSibling;return i}h.divide=function(t){var e,n,i,r,s=\"\",a=[];if((e=t.id)&&(s+=\"#\"+e),n=t.classes)for(var o=n.length;o--;)s+=\".\"+n[o].value;if(i=t.attributes)for(o=0;o<i.length;o++)i[o].operator?s+=\"[\"+i[o].key+i[o].operator+JSON.stringify(i[o].value)+\"]\":s+=\"[\"+i[o].key+\"]\";if(r=t.pseudos)for(o=r.length;o--;)part=r[o],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(s+=\":\"+part.key+\"(\"+JSON.stringify(part));return{nativeSelector:s=(s=(e=t.tag)&&\"*\"!==e?e.toUpperCase()+s:s)||\"*\",customPseudos:a}},h.check=function(t,e,n,i,r){var s,a,o,l,c,u,d,h;if(!r){if(s=e.tag){var p=t.nodeName.toUpperCase();if(\"*\"==s){if(p<\"@\")return!1}else if(p!=(s||\"\").toUpperCase())return!1}if((p=e.id)&&t.getAttribute(\"id\")!=p)return!1;if(a=e.classes)for(c=a.length;c--;)if(!(d=t.getAttribute(\"class\"))||!a[c].regexp.test(d))return!1;if(o=e.attributes)for(c=o.length;c--;)if((u=o[c]).operator?!u.test(t.getAttribute(u.key)):!t.hasAttribute(u.key))return!1}if(l=e.pseudos)for(c=l.length;c--;)if(u=l[c],h=this.pseudos[u.key]){if((r&&h.isArrayFilter||!r&&!h.isArrayFilter)&&!h(t,n,i,u.value))return!1}else if(!r&&!f.call(t,u.key))return!1;return!0},h.match=function(t,e){e=d.isString(e)?h.Slick.parse(e):e;if(!e)return!0;var n=e.expressions,i=0;for(o=0;r=n[o];o++)if(1==r.length){var r=r[0];if(this.check(t,r))return!0;i++}if(i!=e.length)for(var s,a=this.query(document,e),o=0;s=a[o++];)if(s===t)return!0;return!1},h.filterSingle=function(n,i){var r=u.call(n,function(t,e){return h.check(t,i,e,n,!1)});return r=u.call(r,function(t,e){return h.check(t,i,e,r,!0)})},h.filter=function(t,e){if(!d.isString(e))return h.filterSingle(t,e);for(var n=h.Slick.parse(e).expressions,i=[],r=0;s=n[r];r++){if(1!=s.length)throw new Error(\"not supported selector:\"+e);var s=s[0],s=h.filterSingle(t,s),i=d.uniq(i.concat(s))}return i},h.combine=function(t,e){var n,i=e.combinator,r=e,s=[];switch(i){case\">\":s=g(t,r);break;case\"+\":(n=w(t,r,!0))&&s.push(n);break;case\"^\":(n=x(t,r,!0))&&s.push(n);break;case\"~\":s=_(t,r);break;case\"++\":var a=S(t,r,!0),o=w(t,r,!0);a&&s.push(a),o&&s.push(o);break;case\"~~\":s=T(t,r);break;case\"!\":s=m(t,r);break;case\"!>\":(n=C(t,r))&&s.push(n);break;case\"!+\":s=S(t,r,!0);break;case\"!^\":(n=v(t,r,!0))&&s.push(n);break;case\"!~\":s=E(t,r);break;default:var l=this.divide(e),s=p.call(t.querySelectorAll(l.nativeSelector));if(l.customPseudos)for(var c=l.customPseudos.length-1;0<=c;c--)s=u.call(s,function(t,e){return h.check(t,{pseudos:[l.customPseudos[c]]},e,s,!1)}),s=u.call(s,function(t,e){return h.check(t,{pseudos:[l.customPseudos[c]]},e,s,!0)})}return s},h.query=function(t,e,n){for(var i,r,s=[],a=this.Slick.parse(e).expressions,o=0;i=a[o];o++){for(var l,c=[t],u=0;r=i[u];u++)(l=d.map(c,function(t,e){return h.combine(t,r)}))&&(c=l);l&&(s=s.concat(l))}return s};function M(){return M}return d.mixin(M,{ancestor:function(t,e,n){for(var i=n&&d.isString(n);t=t.parentElement;){if(b(t,e))return t;if(n)if(i){if(b(t,n))break}else if(t==n)break}return null},ancestors:m,byId:function(t,e){return(e=e||s.doc()).getElementById(t)},childAt:function(t,e,n){var i=0,r=t.children;n=d.mixin({ignoreHidden:!0,excluding:null,closesting:null},n);for(var s=0;s<r.length;s++){var a=r[s];if((!n.ignoreHidden||\"none\"!==o.css(a))&&((!n.excluding||!n.excluding.includes(a))&&(!n.closesting||l(a,n.closesting,t,!1)))){if(i===e)return a;i++}}return null},children:g,closest:l,descendant:y,descendants:c,find:k,findAll:function(t,e){return e||(e=t,t=document.body),c(t,e)},firstChild:x,index:function(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t&&t.previousElementSibling;)d.isString(e)?b(t,e)&&n++:d.isFunction(e)&&e(t)&&n++,n++;return n},lastChild:v,matches:b,nextSibling:w,nextSiblings:_,parent:C,previousSibling:S,previousSiblings:E,pseudos:h.pseudos,scrollableParent:function(t,e){if(t&&t.getBoundingClientRect){var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=o.css(n);if(n.clientWidth<n.scrollWidth&&(\"auto\"==r.overflowX||\"scroll\"==r.overflowX)||n.clientHeight<n.scrollHeight&&(\"auto\"==r.overflowY||\"scroll\"==r.overflowY)){if(!n||!n.getBoundingClientRect||n===document.body)return s.scrollingElement();if(i||e)return n;i=!0}}}while(n=n.parentNode)}return s.scrollingElement()},siblings:T}),t.attach(\"domx.finder\",M)}),define(\"skylark-domx-finder/main\",[\"./finder\"],function(t){return t}),define(\"skylark-domx-finder\",[\"skylark-domx-finder/main\"],function(t){return t}),define(\"skylark-domx-query/query\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-finder\"],function(t,l,a,c){var r,s=Array.prototype.some,u=Array.prototype.push,d=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),i=(Array.prototype.map,Array.prototype.filter),e=Array.prototype.forEach,h=Array.prototype.indexOf,p=Array.prototype.sort,o=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,f=l.funcArg,m=l.isArrayLike,g=l.isString,y=l.uniq,k=l.isFunction,x=l.type,v=(l.isArray,l.isWindow,l.isDocument,l.isObject);l.isPlainObject,l.compact,l.flatten,l.camelCase,l.dasherize,c.children;function b(i,r,t){return function(t){var e,n=l.map(arguments,function(t){return\"function\"==(e=x(t))||\"object\"==e||\"array\"==e||null==t?t:a.createFragment(t)});return n.length<1||this.each(function(t){i.apply(r,[this,n,0<t])}),this}}function w(i,r){return function(){var n=d.call(arguments),t=l.map(this,function(t,e){return i.apply(r,[t].concat(n))});return $(y(t))}}function _(i,r,s){return function(n){d.call(arguments);var t=this.map(function(t,e){return i.apply(r,s?[e]:[e,n])});return s&&n?t.filter(n):t}}function C(r,s,a){return function(n,i){d.call(arguments);var t=this.map(function(t,e){return r.apply(s,a?[e,n]:[e,i,n])});return a&&i?t.filter(i):t}}function S(i,r){return function(){var n=d.call(arguments);return this.each(function(t,e){i.apply(r,[this].concat(n))}),this}}function E(i,r,s){return function(n){return l.isDefined(n)?(e.call(this,function(t,e){e=s?f(t,n,e,s(t)):n;i.apply(r,[t,e])}),this):this[0]?i.apply(r,[this[0]]):void 0}}var T,n,M,A,P=l.klass({klassName:\"SkNodeList\",init:function(t,e){var n,i,r;if(t&&(this.context=e=e||a.doc(),g(t)?(i=\"<\"===(this.selector=t).charAt(0)&&\">\"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:o.exec(t))?i[1]?(n=a.createFragment(t),l.isPlainObject(e)&&(r=e)):(i=c.byId(i[2],a.ownerDoc(e)))&&(n=[i]):(l.isString(e)&&(e=c.find(e)),n=c.descendants(e,t)):n=!a.isWindow(t)&&m(t)?t:[t]),n&&(u.apply(this,n),r))for(var s in r)l.isFunction(this[s])?this[s](r[s]):this.attr(s,r[s]);return this}}),$=function(){r=function(t){return t instanceof P},init=function(t,e){return new P(t,e)};function o(t,e){return k(t)?(o.ready(function(){t(o)}),n):r(t)?t:e&&r(e)&&g(t)?e.find(t):init(t,e)}var n=o(document);o.fn=P.prototype,l.mixin(o.fn,{length:0,map:function(n){return o(y(l.map(this,function(t,e){return n.call(t,e,t)})))},slice:function(){return o(d.apply(this,arguments))},forEach:function(){return e.apply(this,arguments)},get:function(t){return void 0===t?d.call(this):this[0<=t?t:t+this.length]},indexOf:function(){return h.apply(this,arguments)},sort:function(){return p.apply(this,arguments)},toArray:function(){return d.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,e){a.remove(e)}),this)},each:function(t){return l.each(this,t),this},filter:function(e){return k(e)?this.not(this.not(e)):o(i.call(this,function(t){return c.matches(t,e)}))},add:function(t,e){return o(y(this.toArray().concat(o(t,e).toArray())))},is:function(e){if(0<this.length){if(l.isString(e))return s.call(this,function(t){return c.matches(t,e)});if(l.isArrayLike(e))return s.call(this,function(t){return-1<l.inArray(t,e)});if(l.isHtmlNode(e))return s.call(this,function(t){return t==e})}return!1},not:function(n){var e,i=[];return k(n)&&void 0!==n.call?this.each(function(t,e){n.call(this,t,e)||i.push(this)}):(e=\"string\"==typeof n?this.filter(n):m(n)&&k(n.item)?d.call(n):o(n),this.forEach(function(t){e.indexOf(t)<0&&i.push(t)})),o(i)},has:function(t){return this.filter(function(){return v(t)?a.contains(this,t):o(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:_(c.descendants,c),closest:_(c.closest,c),parents:_(c.ancestors,c),parentsUntil:C(c.ancestors,c),parent:_(c.parent,c),children:_(c.children,c),contents:w(a.contents,a),empty:S(a.empty,a),html:E(a.html,a),pluck:function(e){return l.map(this,function(t){return t[e]})},pushStack:function(t){t=o(t);return t.prevObject=this,t},replaceWith:function(t){return this.before(t).remove()},wrap:function(e){var n=\"function\"==typeof e;return this.each(function(t){o(this).wrapAll(n?e.call(this,t):e)})},wrapAll:function(t){return this[0]&&(\"function\"==typeof t&&(t=t.call(this[0])),t=o(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return\"function\"==typeof n?this.each(function(t){o(this).wrapInner(n.call(this,t))}):this.each(function(){var t=o(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},unwrap:function(t){return this.parent(t).not(\"body\").each(function(){o(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(e){return this.each(function(){var t=o(this);(void 0===e?\"none\"==t.css(\"display\"):e)?t.show():t.hide()})},prev:function(t){return o(this.pluck(\"previousElementSibling\")).filter(t||\"*\")},prevAll:_(c.previousSiblings,c),next:function(t){return o(this.pluck(\"nextElementSibling\")).filter(t||\"*\")},nextAll:_(c.nextSiblings,c),siblings:_(c.siblings,c),index:function(t){return t?this.indexOf(o(t)[0]):this.parent().children().indexOf(this[0])}}),o.fn.detach=o.fn.remove,o.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)},a.traverse;return o.fn.after=b(a.after,a),o.fn.prepend=b(a.prepend,a),o.fn.before=b(a.before,a),o.fn.append=b(a.append,a),l.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(t,a){o.fn[t]=function(t){for(var e,n=[],i=o(t),r=i.length-1,s=0;s<=r;s++)e=s===r?this:this.clone(!0),o(i[s])[a](e),u.apply(n,e.get());return this.pushStack(n)}}),o}();return(T=$).fn.scrollParent=function(t){var e=this.css(\"position\"),n=\"absolute\"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var t=T(this);return(!n||\"static\"!==t.css(\"position\"))&&i.test(t.css(\"overflow\")+t.css(\"overflow-y\")+t.css(\"overflow-x\"))}).eq(0);return\"fixed\"!==e&&t.length?t:T(this[0].ownerDocument||document)},(n=$).fn.end=function(){return this.prevObject||n()},n.fn.andSelf=function(){return this.add(this.prevObject||n())},n.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},\"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll\".split(\",\").forEach(function(t){var e=n.fn[t];n.fn[t]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}}),(M=$).fn.query=M.fn.find,M.fn.place=function(n,i){return l.isString(n)?n=c.descendant(n):r(n)&&(n=n[0]),this.each(function(t,e){switch(i){case\"before\":a.before(n,e);break;case\"after\":a.after(n,e);break;case\"replace\":a.replace(n,e);break;case\"only\":a.empty(n),a.append(n,e);break;case\"first\":a.prepend(n,e);break;default:a.append(n,e)}})},M.fn.addContent=function(t,e){return t.template&&(t=l.substitute(t.template,t)),this.append(t)},M.fn.disableSelection=(A=\"onselectstart\"in document.createElement(\"div\")?\"selectstart\":\"mousedown\",function(){return this.on(A+\".ui-disableSelection\",function(t){t.preventDefault()})}),M.fn.enableSelection=function(){return this.off(\".ui-disableSelection\")},M.fn.reflow=function(){return a.reflow(this[0])},M.fn.isBlockNode=function(){return a.isBlockNode(this[0])},$.fn.plugin=function(t,e){var n=d.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(n))}),r},$.wraps={wrapper_node_operation:b,wrapper_map:w,wrapper_value:E,wrapper_selector:_,wrapper_some_chk:function(n,i){return function(){var e=d.call(arguments);return s.call(this,function(t){return n.apply(i,[t].concat(e))})}},wrapper_selector_until:C,wrapper_every_act_firstArgFunc:function(r,s,a){return function(n){var i=d.call(arguments);return e.call(this,function(t,e){e=f(t,n,e,a(t));r.apply(s,[t,e].concat(i.slice(1)))}),this}},wrapper_every_act:S,wrapper_name_value:function(r,s,a){return function(n,i){return l.isPlainObject(n)||l.isDefined(i)?(e.call(this,function(t,e){e=a?f(t,i,e,a(t,n)):i;r.apply(s,[t,n,e])}),this):this[0]?r.apply(s,[this[0],n]):void 0}}},t.attach(\"domx.query\",$)}),define(\"skylark-domx-query/main\",[\"./query\",\"skylark-domx-styler\"],function(t,e){return t.fn.disabled=t.wraps.wrapper_name_value(e.disabled,e),t.fn.style=t.wraps.wrapper_name_value(e.css,e),t.fn.css=t.wraps.wrapper_name_value(e.css,e),t.fn.hasClass=t.wraps.wrapper_some_chk(e.hasClass,e),t.fn.addClass=t.wraps.wrapper_every_act_firstArgFunc(e.addClass,e,e.className),t.fn.removeClass=t.wraps.wrapper_every_act_firstArgFunc(e.removeClass,e,e.className),t.fn.toggleClass=t.wraps.wrapper_every_act_firstArgFunc(e.toggleClass,e,e.className),t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t}),define(\"skylark-domx-query\",[\"skylark-domx-query/main\"],function(t){return t}),define(\"skylark-domx-velm/velm\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\"],function(t,o,e,n,i){function r(t){return t?t instanceof u?t:new u(t):s}var l=Array.prototype.map,c=Array.prototype.slice,u=o.klass({klassName:\"VisualElement\",_construct:function(t){o.isString(t)&&(t=\"<\"===(t=o.trim(t)).charAt(0)?e.createFragment(t)[0]:document.getElementById(t)),this._elm=t}}),s=(u.prototype.$=u.prototype.query=function(t){return i(t,this._elm)},u.prototype.elm=function(){return this._elm},new u(document.body));return o.mixin(r,{batch:function(t,e,n){return t.forEach(function(t){t=t instanceof u?t:r(t);t[e].apply(t,n)}),this},root:new u(document.body),VisualElement:u,partial:function(t,e){var n={};n[t]=e,u.partial(n)},delegate:function(t,r,s){var a={};t.forEach(function(t){var e,n,i=t;s&&s[t]&&(i=s[t]),a[t]=(e=r[i],n=r,function(){var t=this._elm,t=e.apply(n,[t].concat(c.call(arguments)));if(t){if(t===n)return this;t instanceof HTMLElement?t=new u(t):o.isArrayLike(t)&&(t=l.call(t,function(t){return t instanceof HTMLElement?new u(t):t}))}return t})}),u.partial(a)}}),r.delegate([\"ancestor\",\"ancestors\",\"children\",\"descendant\",\"find\",\"findAll\",\"firstChild\",\"lastChild\",\"matches\",\"nextSibling\",\"nextSiblings\",\"parent\",\"previousSibling\",\"previousSiblings\",\"siblings\"],n),r.find=function(t){return\"body\"===t?this.root:this.root.descendant(t)},r.delegate([\"after\",\"append\",\"before\",\"clone\",\"contains\",\"contents\",\"empty\",\"fullscreen\",\"html\",\"isChildOf\",\"isDocument\",\"isInDocument\",\"isWindow\",\"ownerDoc\",\"prepend\",\"remove\",\"removeChild\",\"replace\",\"reverse\",\"throb\",\"traverse\",\"wrapper\",\"wrapperInner\",\"unwrap\"],e),t.attach(\"domx.velm\",r)}),define(\"skylark-domx-velm/main\",[\"./velm\",\"skylark-domx-styler\"],function(t,e){t.delegate([\"addClass\",\"className\",\"css\",\"disabled\",\"hasClass\",\"hide\",\"isInvisible\",\"removeClass\",\"show\",\"toggleClass\"],e);return[\"position\",\"left\",\"top\",\"right\",\"bottom\",\"width\",\"height\",\"border\",\"borderLeft\",\"borderTop\",\"borderRight\",\"borderBottom\",\"borderColor\",\"display\",\"overflow\",\"margin\",\"marginLeft\",\"marginTop\",\"marginRight\",\"marginBottom\",\"padding\",\"paddingLeft\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"color\",\"background\",\"backgroundColor\",\"opacity\",\"fontSize\",\"fontWeight\",\"textAlign\",\"textDecoration\",\"textTransform\",\"cursor\",\"zIndex\"].forEach(function(e){t.VisualElement.prototype[e]=function(t){return this.css(e,t),this}}),t}),define(\"skylark-domx-velm\",[\"skylark-domx-velm/main\"],function(t){return t}),define(\"skylark-domx-eventer/eventer\",[\"skylark-langx/skylark\"],function(t){return t.attach(\"domx.eventer\",function t(){return t})}),define(\"skylark-domx-eventer/compatible\",[\"skylark-langx\",\"./eventer\"],function(s,t){var e={preventDefault:\"isDefaultPrevented\",stopImmediatePropagation:\"isImmediatePropagationStopped\",stopPropagation:\"isPropagationStopped\"};return t.compatible=function(i,r){return!r&&i.isDefaultPrevented||(r=r||i,s.each(e,function(t,e){var n=r[t];i[t]=function(){return this[e]=s.returnTrue,n&&n.apply(r,arguments)},i[e]=s.returnFalse})),i}}),define(\"skylark-domx-eventer/proxy\",[\"skylark-langx\",\"./eventer\",\"./compatible\"],function(r,t,s){var a=/^([A-Z]|returnValue$|layer[XY]$)/;return t.proxy=function(t,e){var n,i={originalEvent:t};for(n in t)\"keyIdentifier\"===n||a.test(n)||void 0===t[n]||(i[n]=t[n]);return e&&r.mixin(i,e),s(i,t)}}),define(\"skylark-domx-eventer/event-bindings\",[\"skylark-langx\",\"skylark-domx-finder\",\"skylark-domx-noder\",\"./eventer\",\"./proxy\"],function(h,p,f,t,i){function r(t){return m[t]||e&&n[t]||t}var e=\"onfocusin\"in window,n={focus:\"focusin\",blur:\"focusout\"},m={mouseenter:\"mouseover\",mouseleave:\"mouseout\"},s=h.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,e){var n=this._bindings,t={fn:t,options:h.mixin({},e)},d=(n.push(t),this);d._listener||(d._listener=function(t){var o=this,l=i(t),c=t._args,t=d._bindings,u=l.namespace,c=h.isDefined(c)?[l].concat(c):[l];l.type=d._event,h.each(t,function(t,e){var n=o;if(l.isImmediatePropagationStopped&&l.isImmediatePropagationStopped())return!1;var i=e.fn,e=e.options||{},r=e.selector,s=e.one,a=e.data;if(!u||u==e.ns||-1!==e.ns.indexOf(u)){if(r){if(!(n=p.closest(l.target,r))||n===o)return;h.mixin(l,{currentTarget:n,liveFired:o})}if(d._event in m){r=l.relatedTarget;if(r&&(r===n||f.contains(n,r)))return}h.isDefined(a)&&(l.data=a),s&&d.remove(i,e),!1===(i.handleEvent?i.handleEvent.apply(i,c):e.ctx?i.apply(e.ctx,c):i.apply(n,c))&&(l.preventDefault(),l.stopPropagation())}})},e=d._event,d._target.addEventListener?d._target.addEventListener(r(e),d._listener,!1):console.warn(\"invalid eventer object\",d._target))},remove:function(e,n){var i,t;(n=h.mixin({},n)).ns&&(t=n.ns,i=new RegExp(\"(?:^| )\"+t.replace(\" \",\" .* ?\")+\"(?: |$)\")),this._bindings=this._bindings.filter(function(t){return!((!e||e===t.fn)&&(!i||i.test(t.options.ns))&&(!n.selector||n.selector==t.options.selector))}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(r(this._event),this._listener,!1),this._listener=null)}});return t.EventBindings=s}),define(\"skylark-domx-eventer/special\",[\"skylark-langx\",\"skylark-domx-browser\",\"./eventer\"],function(t,e,n){var i={};return e.support.transition&&(i.transitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end}),n.special=i}),define(\"skylark-domx-eventer/parse\",[],function(){return function(t){return t?{type:(t=(\"\"+t).split(\".\"))[0],ns:t.slice(1).sort().join(\" \")}:{type:null,ns:null}}}),define(\"skylark-domx-eventer/events-handler\",[\"skylark-langx\",\"./eventer\",\"./event-bindings\",\"./special\",\"./parse\"],function(a,t,o,l,c){var e=a.klass({init:function(t){this._target=t,this._handler={}},register:function(t,e,n){var i=c(t),t=i.type,r=l[t],r=r&&(r.bindType||r.bindEventName),s=this._handler;void 0===s[t]&&(s[t]=new o(this._target,r||t)),s[t].add(e,a.mixin({ns:i.ns},n))},unregister:function(t,e,n){var i,r=this._handler,s=c(t);if(t=s.type)(i=r[t])&&i.remove(e,a.mixin({ns:s.ns},n));else for(t in r)(i=r[t]).remove(e,a.mixin({ns:s.ns},n))}});return t.EventsHandler=e}),define(\"skylark-domx-eventer/find-handler\",[\"skylark-langx\",\"./eventer\",\"./events-handler\"],function(n,t,i){var r={};return t.findHandler=function(t){var e=n.uid(t);return r[e]||(r[e]=new i(t))}}),define(\"skylark-domx-eventer/clear\",[\"skylark-langx\",\"./eventer\",\"./find-handler\"],function(t,e,n){return e.clear=function(t){return n(t).unregister(),this}}),define(\"skylark-domx-eventer/native-event-ctors\",[\"skylark-langx\",\"./eventer\"],function(t,e){var n=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent];return e.NativeEventCtors=n}),define(\"skylark-domx-eventer/native-events\",[\"skylark-langx\",\"./eventer\"],function(t,e){return e.NativeEvents={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15}}),define(\"skylark-domx-eventer/create\",[\"skylark-langx\",\"./eventer\",\"./native-event-ctors\",\"./native-events\",\"./parse\",\"./compatible\"],function(i,t,r,s,a,o){return t.create=function(t,e){i.isString(t)?e=e||{}:t=(e=t||{}).type||\"\";var n=a(t);t=n.type,e=i.mixin({bubbles:!0,cancelable:!0},e),n.ns&&(e.namespace=n.ns),n=s[n=t];n=new r[n=n||0](t,e);return i.safeMixin(n,e),o(n)}}),define(\"skylark-domx-eventer/trigger\",[\"skylark-langx\",\"./eventer\",\"./create\"],function(t,e,i){return e.trigger=function(t,e,n){return(e=e instanceof Event?e:i(e,n))._args=n,(n=t.dispatchEvent||t.trigger)?n.call(t,e):console.warn(\"The evented parameter is not a eventable object\"),this}}),define(\"skylark-domx-eventer/focused\",[\"skylark-langx\",\"./eventer\",\"./trigger\"],function(t,e,n){var i=[];return t.loop(function(){for(var t=0;t<i.length;t++)n(i[t],\"focused\");i=[]}).start(),e.focused=function(t){i.includes(t)||i.push(t)}}),define(\"skylark-domx-eventer/is-native-event\",[\"skylark-langx\",\"./eventer\",\"./native-events\"],function(n,t,i){return t.isNativeEvent=function(t){if(n.isString(t))return!!i[t];if(n.isArray(t)){for(var e=0;e<t.length;e++)if(i[t])return!1;return 0<t.length}}}),define(\"skylark-domx-eventer/keys\",[\"skylark-langx\",\"./eventer\"],function(t,e){return e.keys={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38}}),define(\"skylark-domx-eventer/is-handler\",[\"skylark-langx\",\"./eventer\"],function(e,t){return function(t){return t&&(e.isFunction(t)||e.isFunction(t.handleEvent))}}),define(\"skylark-domx-eventer/off\",[\"skylark-langx\",\"./eventer\",\"./find-handler\",\"./is-handler\"],function(a,t,o,l){return t.off=function n(i,t,r,e){var s;return a.isPlainObject(t)?a.each(t,function(t,e){n(i,t,r,e)}):(a.isString(r)||l(e)||!1===e||(e=r,r=void 0),!1===e&&(e=a.returnFalse),\"string\"==typeof t&&(t=-1<t.indexOf(\",\")?t.split(\",\"):t.split(/\\s/)),s=o(i),t&&t.forEach(function(t){s.unregister(t,e,{selector:r})})),this}}),define(\"skylark-domx-eventer/on\",[\"skylark-langx\",\"./eventer\",\"./find-handler\",\"./is-handler\"],function(c,t,u,d){return t.on=function n(i,t,r,s,e,a,o){var l;return c.isPlainObject(t)?c.each(t,function(t,e){n(i,t,r,s,e,o)}):(c.isString(r)||d(e)||(o=a,a=e,e=s,s=r,r=void 0),d(s)&&(o=a,a=e,e=s,s=void 0),c.isBoolean(a)&&(o=a,a=void 0),!1===e&&(e=c.returnFalse),\"string\"==typeof t&&(t=-1<t.indexOf(\",\")?t.split(\",\"):t.split(/\\s/)),l=u(i),t.forEach(function(t){if(\"ready\"==t)return ready(e);l.register(t,e,{data:s,selector:r,ctx:a,one:!!o})})),this}}),define(\"skylark-domx-eventer/one\",[\"skylark-langx\",\"./eventer\",\"./on\"],function(t,e,n){return e.one=function(...t){return n(...t,!0),this}}),define(\"skylark-domx-eventer/ready\",[\"skylark-langx\",\"./eventer\"],function(e,t){var n=/complete|loaded|interactive/;return t.ready=function(t){return n.test(document.readyState)&&document.body?e.defer(t):document.addEventListener(\"DOMContentLoaded\",t,!1),this}}),define(\"skylark-domx-eventer/resized\",[\"skylark-langx\",\"./eventer\",\"./trigger\"],function(t,e,n){var i=[];return t.loop(function(){for(var t=0;t<i.length;t++)n(i[t],\"resized\");i=[]}).start(),e.resized=function(t){i.includes(t)||i.push(t)}}),define(\"skylark-domx-data/data\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-finder\",\"skylark-domx-noder\"],function(t,o,e,l){var n=Array.prototype.map,c=(Array.prototype.filter,o.camelCase),r=o.deserializeValue,u=/([A-Z])/g,s={tabindex:\"tabIndex\",readonly:\"readOnly\",for:\"htmlFor\",class:\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"};var d={option:{get:function(t){var e=t.getAttribute(\"value\");return null!=e?e:(m(t).match(/[^\\x20\\t\\r\\n\\f]+/g)||[]).join(\" \")}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,r=\"select-one\"===t.type,s=r?null:[],a=r?i+1:n.length,o=i<0?a:r?i:0;o<a;o++)if((e=n[o]).selected&&!e.disabled&&(!e.parentNode.disabled||!l.nodeName(e.parentNode,\"optgroup\"))){if(e=g(e),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,s=o.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<o.inArray(d.option.get(i),s))&&(n=!0);return n||(t.selectedIndex=-1),s}}};function h(t,e,n){if(void 0===n){if(\"object\"!=typeof e)return t.getAttribute?t.getAttribute(e):t[e];for(var i in e)h(t,i,e[i])}else t.setAttribute?t.setAttribute(e,n):t[e]=n;return this}function p(t,e){var n,i=t._$_store;return i=!i&&e?t._$_store=(n={},o.each(t.attributes||[],function(t,e){0==e.name.indexOf(\"data-\")&&(n[c(e.name.replace(\"data-\",\"\"))]=r(e.value))}),n):i}function f(t,e,n){p(t,!0)[c(e)]=n}function a(t,e,n){if(void 0!==n)return f(t,e,n),this;if(\"object\"==typeof e){for(var i in e)f(t,i,e[i]);return this}var n=t,r=e;if(void 0===r)return p(n,!0);var s=p(n);if(s){if(r in s)return s[r];var a=c(r);if(a in s)return s[a]}return s=h(n,\"data-\"+r.replace(u,\"-$1\").toLowerCase()),s=o.isString(s)?s:void 0}function i(t){t._$_store&&delete t._$_store}function m(t,e){return void 0===e?void 0!==t.textContent?t.textContent:t.innerText:(e=null==e?\"\":\"\"+e,void 0!==t.textContent?t.textContent=e:t.innerText=e,this)}function g(t,e){var n=d[t.type]||d[t.nodeName.toLowerCase()];if(void 0===e)return n&&\"get\"in n&&void 0!==(ret=n.get(t,\"value\"))?ret:\"string\"==typeof(ret=t.value)?ret.replace(/\\r/g,\"\"):null==ret?\"\":ret;null==e?e=\"\":\"number\"==typeof e?e+=\"\":o.isArray(e)&&(e=o.map(e,function(t){return null==t?\"\":t+\"\"})),n&&\"set\"in n&&void 0!==n.set(t,e,\"value\")||(t.value=e)}function y(){return y}return o.each([\"radio\",\"checkbox\"],function(){d[this]={set:function(t,e){if(o.isArray(e))return t.checked=-1<o.inArray(g(t),e)}}}),e.pseudos.data=function(t,e,n,i){return!!a(t,i||n[3])},o.mixin(y,{aria:function(t,e,n){return this.attr(t,\"aria-\"+e,n)},attr:h,cleanData:i,data:a,pluck:function(t,e){return n.call(t,function(t){return t[e]})},prop:function t(e,n,i){if(void 0!==i||\"object\"!=typeof n)return n=s[n]||n,void 0===i?e[n]:(e[n]=i,this);for(var r in n)t(e,r,n[r]);return this},removeAttr:function(i,t){return t.split(\" \").forEach(function(t){var e,n;e=i,t=t,null==n?e.removeAttribute(t):e.setAttribute(t,n)}),this},removeData:function(t,e){var n;return e?(o.isString(e)&&(e=e.split(/\\s+/)),n=p(t,!0),e.forEach(function(t){delete n[t]})):i(t),this},removeProp:function(e,t){return t.split(\" \").forEach(function(t){delete e[t]}),this},text:m,val:g,valHooks:d}),t.attach(\"domx.data\",y)}),define(\"skylark-domx-data/main\",[\"./data\",\"skylark-domx-velm\",\"skylark-domx-query\"],function(t,e,n){return e.delegate([\"attr\",\"data\",\"prop\",\"removeAttr\",\"removeData\",\"text\",\"val\"],t),n.fn.text=n.wraps.wrapper_value(t.text,t,t.text),n.fn.attr=n.wraps.wrapper_name_value(t.attr,t,t.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(t.removeAttr,t),n.fn.prop=n.wraps.wrapper_name_value(t.prop,t,t.prop),n.fn.removeProp=n.wraps.wrapper_every_act(t.removeProp,t),n.fn.data=n.wraps.wrapper_name_value(t.data,t),n.fn.removeData=n.wraps.wrapper_every_act(t.removeData),n.fn.val=n.wraps.wrapper_value(t.val,t,t.val),t}),define(\"skylark-domx-data\",[\"skylark-domx-data/main\"],function(t){return t}),define(\"skylark-domx-eventer/shortcuts\",[\"skylark-langx\",\"skylark-domx-data\",\"./eventer\",\"./keys\"],function(t,e,n,i){return n.shortcuts=function(t){var s=e.data(t,\"shortcuts\");return s||(s={},e.data(t,\"shortcuts\",s),on(t,\"keyup keypress keydown\",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var e in s){r=i=n=void 0;var n=s[e],i=t,r=i.metaKey||i.ctrlKey;if(n.ctrl==r&&n.alt==i.altKey&&n.shift==i.shiftKey&&(i.keyCode==n.keyCode||i.charCode&&i.charCode==n.charCode))i.preventDefault(),\"keydown\"==i.type&&n.fn(i)}})),{add:function(t,n){t=-1<t.indexOf(\",\")?t.toLowerCase().split(\",\"):t.toLowerCase().split(\" \");t.forEach(function(t){var e={fn:n,alt:!1,ctrl:!1,shift:!1};t.split(\"+\").forEach(function(t){switch(t){case\"alt\":case\"ctrl\":case\"shift\":e[t]=!0;break;default:e.charCode=t.charCodeAt(0),e.keyCode=i[t]||t.toUpperCase().charCodeAt(0)}}),s[(e.ctrl?\"ctrl\":\"\")+\",\"+(e.alt?\"alt\":\"\")+\",\"+(e.shift?\"shift\":\"\")+\",\"+e.keyCode]=e})}}}}),define(\"skylark-domx-eventer/stop\",[\"skylark-langx\",\"./eventer\"],function(t,e){return e.stop=function(t){return window.document.all&&(t.keyCode=0),t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this}}),define(\"skylark-domx-eventer/main\",[\"skylark-langx\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./eventer\",\"./clear\",\"./compatible\",\"./event-bindings\",\"./events-handler\",\"./find-handler\",\"./focused\",\"./is-native-event\",\"./keys\",\"./native-event-ctors\",\"./native-events\",\"./off\",\"./on\",\"./one\",\"./proxy\",\"./ready\",\"./resized\",\"./shortcuts\",\"./special\",\"./stop\",\"./trigger\"],function(t,e,n,s){t.each(s.NativeEvents,function(r){s[r]=function(t,e,n,i){return 1<arguments.length?s.on(t,r,e,n,i):(\"focus\"==r?t.focus&&t.focus():\"blur\"==r?t.blur&&t.blur():\"click\"==r?t.click&&t.click():s.trigger(t,r),this)}});var i=[\"off\",\"on\",\"one\",\"trigger\"];return t.each(s.NativeEvents,function(t){i.push(t)}),e.delegate(i,s),t.each(i,function(t,e){n.fn[e]=n.wraps.wrapper_every_act(s[e],s)}),n.ready=s.ready,s}),define(\"skylark-domx-eventer\",[\"skylark-domx-eventer/main\"],function(t){return t}),define(\"skylark-slax-runtime/slax\",[\"skylark-langx-ns\",\"skylark-langx-objects\",\"skylark-langx-hoster\",\"skylark-langx-async\",\"skylark-net-http/Xhr\",\"skylark-domx-eventer\"],function(skylark,objects,hoster,async,Xhr,eventer){var _config={},_rootUrl=\"\",_baseUrl=\"\",slax={prepare:function(config){var p,slaxRoot,slaxApp,d,p;if(config=config||hoster.global.slaxConfig,!config)for(var scripts=document.getElementsByTagName(\"script\"),i=0,script,slaxDir,src,match;i<scripts.length;)if(script=scripts[i++],(src=script.getAttribute(\"src\"))&&(match=src.match(/(((.*)\\/)|^)skylark-slax-runtime([0-9A-Za-z\\-]*)\\.js(\\W|$)/i))){slaxDir=match[3]||\"\",(src=script.getAttribute(\"data-slax-config\"))?config=eval(\"({ \"+src+\" })\"):(slaxRoot=script.getAttribute(\"data-slax-root\"),null==slaxRoot&&(slaxRoot=slaxDir),slaxApp=script.getAttribute(\"data-slax-page\")||script.getAttribute(\"data-slax-app\"));break}return config?(objects.mixin(_config,config),p=async.Deferred.resolve()):(d=new async.Deferred,p=d.promise,Xhr.get(slaxRoot+\"/slax-config.json\").then(function(t){if(slaxApp){for(var e,n=0;n<t.apps.length;n++)t.apps[n].name==slaxApp&&(e=slaxRoot+t.apps[n].dir);Xhr.get(e+\"/spa.json\").then(function(t){objects.mixin(_config,t),d.resolve()})}else objects.mixin(_config,t),d.resolve()})),p},start:function(){var n,i=_config;i.runtime&&require.config(i.runtime),i.boot?(0,window[i.boot])(i):(n=function(t,e){var n=slax.page=t(e=e||i);hoster.global.go=function(t,e){n.go(t,e)},n.prepare().then(function(){n.run()})},i.spaModule?require([i.spaModule],function(e){e._start?e._start().then(function(t){n(e,t)}):n(e)}):n(skylark.spa))}};return define(\"slax\",[],function(){return slax}),skylark.attach(\"slax\",slax)}),define(\"skylark-io-caches/caches\",[\"skylark-langx-ns\"],function(t){\"use strict\";t=t.attach(\"io.caches\");return t.storages=t.storages||{},t}),define(\"skylark-io-caches/clipboard\",[\"./caches\"],function(t){}),define(\"skylark-io-caches/cookie\",[\"skylark-langx-types\",\"skylark-langx-objects/mixin\",\"skylark-langx-datetimes\",\"./caches\"],function(l,t,c,e){\"use strict\";function n(){return n}return t(n,{get:function(t){return sKey&&this.has(t)?unescape(document.cookie.replace(new RegExp(\"(?:^|.*;\\\\s*)\"+escape(t).replace(/[\\-\\.\\+\\*]/g,\"\\\\$&\")+\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"),\"$1\")):null},has:function(t){return new RegExp(\"(?:^|;\\\\s*)\"+escape(t).replace(/[\\-\\.\\+\\*]/g,\"\\\\$&\")+\"\\\\s*\\\\=\").test(document.cookie)},list:function(){for(var t=document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g,\"\").split(/\\s*(?:\\=[^;]*)?;\\s*/),e=0;e<t.length;e++)t[e]=unescape(t[e]);return t},remove:function(t,e){t&&this.has(t)&&(document.cookie=escape(t)+\"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\"+(e?\"; path=\"+e:\"\"))},set:function(t,e,n,i,r,s){var a,o;t&&!/^(?:expires|max\\-age|path|domain|secure)$/i.test(t)&&(\"number\"===(a=l.type(n))?((o=Date.now()).setTime(o.getTime()+24*expire*60*60*1e3),n=o):\"string\"===a&&(n=new Date(Date.now()+c.parseMilliSeconds(n))),document.cookie=escape(t)+\"=\"+escape(e)+(n?\"; domain=\"+n.toGMTString():\"\")+(r?\"; domain=\"+r:\"\")+(i?\"; path=\"+i:\"\")+(s?\"; secure\":\"\"))}}),e.cookie=n}),define(\"skylark-langx-events/Emitter\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-klass\",\"./events\",\"./event\",\"./listener\"],function(t,e,n,i,r,s,a){var o=Array.prototype.slice,h=n.compact,l=t.isDefined,p=t.isPlainObject,c=t.isFunction,f=t.isString,m=(t.isEmptyObject,e.mixin);e.safeMixin;function g(t){t=(\"\"+t).split(\".\");return{name:t[0],ns:t.slice(1).join(\" \")}}var u=new Map,n=a.inherit({_prepareArgs:function(t,e){return e=l(e)?[t].concat(e):[t]},on:function(t,n,i,r,s,a){var o=this,l=this._hub||(this._hub={});if(p(t))s=r,each(t,function(t,e){o.on(t,n,i,e,s,a)});else{if(f(n)||c(r)||(s=r,r=i,i=n,n=void 0),c(i)&&(s=r,r=i,i=null),!r)throw new Error(\"No callback function\");if(!c(r))throw new Error(\"The callback  is not afunction\");(t=f(t)?t.split(/\\s/):t).forEach(function(t){var t=g(t),e=t.name,t=t.ns;(l[e]||(l[e]=[])).push({fn:r,selector:n,data:i,ctx:s,ns:t,one:a})})}return this},one:function(t,e,n,i,r){return this.on(t,e,n,i,r,1)},emit:function(c){var u,d;return this._hub&&(u=this,f(c)&&(c=new s(c)),Object.defineProperty(c,\"target\",{value:this}),d=o.call(arguments,1),d=this._prepareArgs(c,d),[c.type||c.name,\"all\"].forEach(function(t){var e=g(t),n=e.name,i=e.ns,r=u._hub[n];if(r){for(var s=r.length,a=!1,o=0;o<s;o++){if(c.isImmediatePropagationStopped&&c.isImmediatePropagationStopped())return this;var l=r[o];(!i||l.ns&&l.ns.startsWith(i))&&(l.data&&(c.data=m({},l.data,c.data)),2==d.length&&p(d[1])&&(c.data=c.data||{},m(c.data,d[1])),l.fn.apply(l.ctx,d),l.one)&&(a=!(r[o]=null))}a&&(u._hub[t]=h(r))}})),this},queueEmit:function(t){var e=t.type||t;let n=u.get(this);n||(n=new Map,u.set(this,n));var i=n.get(e),i=(n.delete(e),window.clearTimeout(i),window.setTimeout(()=>{0===n.size&&(n=null,u.delete(this)),this.trigger(t)},0));n.set(e,i)},listened:function(t){return 0<((this._hub||(this._events={}))[t]||[]).length},off:function(t,o){var l;if(t)return l=this._hub||(this._hub={}),(t=f(t)?t.split(/\\s/):t).forEach(function(t){var t=g(t),e=t.name,n=t.ns,i=l[e];if(i){var r=[];if(o||n)for(var s=0,a=i.length;s<a;s++)(!o||i[s].fn===o||i[s].fn._===o)&&(!n||i[s].ns&&0==i[s].ns.indexOf(n))||r.push(i[s]);r.length?l[e]=r:delete l[e]}}),this;this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return r.Emitter=n}),define(\"skylark-langx-async/Deferred\",[\"skylark-langx-arrays\",\"skylark-langx-funcs\",\"skylark-langx-objects\",\"./async\"],function(t,e,n,i){\"use strict\";function a(){var n=this;this.promise=c(new Promise(function(t,e){n._resolve=t,n._reject=e}))}var r=Array.prototype.slice,o=e.proxy,s=t.makeArray,l=n.result;(0,n.mixin)(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});function c(t){var e,n,i,r,s;return t.isResolved||(i=n=!(e=!0),(t=t.then(function(t){return e=!(i=!0),t},function(t){throw e=!(n=!0),t})).isResolved=function(){return i},t.isPending=function(){return e},t.isRejected=function(){return n},t.state=function(){return i?\"resolved\":n?\"rejected\":\"pending\"},r=[],s=[],t.then=function(e,n,t){return t&&this.progress(t),c(Promise.prototype.then.call(this,e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)},n&&function(t){return t&&void 0!==t.__ctx__?n.apply(t.__ctx__,t):n(t)}))},t.progress=function(e){return r.forEach(function(t){e(t)}),s.push(e),this},t.pipe=t.then,t.notify=function(e){try{return r.push(e),s.forEach(function(t){return t(e)})}catch(t){this.reject(t)}return this}),t}return a.prototype.resolve=function(t){var e=r.call(arguments);return this.resolveWith(null,e)},a.prototype.resolveWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},a.prototype.notify=function(t){return l(this,\"promise\").notify(t),this},a.prototype.reject=function(t){var e=r.call(arguments);return this.rejectWith(null,e)},a.prototype.rejectWith=function(t,e){return(e=e?s(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},a.prototype.isResolved=function(){return l(this,\"promise\").isResolved()},a.prototype.isRejected=function(){return l(this,\"promise\").isRejected()},a.prototype.state=function(){return l(this,\"promise\").state()},a.prototype.then=function(t,e,n){return l(this,\"promise\").then(t,e,n)},a.prototype.progress=function(t){return l(this,\"promise\").progress(t)},a.prototype.catch=function(t){return l(this,\"promise\").catch(t)},a.prototype.always=function(){var t=l(this,\"promise\");return t.always.apply(t,arguments),this},a.prototype.done=function(){var t=l(this,\"promise\");return t.done.apply(t,arguments),this},a.prototype.fail=function(t){return l(this,\"promise\").fail(t),this},a.all=function(t){var e=new a;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),l(e,\"promise\")},a.first=function(t){return c(Promise.race(t))},a.when=function(t,e,n,i){var r=t&&\"function\"==typeof t.then,s=r&&t instanceof Promise;return r?(s||(r=new a(t.cancel),t.then(o(r.resolve,r),o(r.reject,r),r.notify),t=r.promise),e||n||i?t.then(e,n,i):t):1<arguments.length?e?e(t):t:(new a).resolve(t)},a.reject=function(t){var e=new a;return e.reject(t),e.promise},a.immediate=a.resolve=function(t){var e=new a;return e.resolve.apply(e,arguments),e.promise},a.promise=function(t){var e=new a;return t(e.resolve.bind(e),e.reject.bind(e),e.progress.bind(e)),e.promise},i.Deferred=a}),define(\"skylark-io-caches/local-file-system\",[\"skylark-langx-objects/mixin\",\"skylark-langx-events/Emitter\",\"skylark-langx-async/Deferred\",\"./caches\"],function(t,e,r,n){\"use strict\";var s=window.requestFileSystem||window.webkitRequestFileSystem;window.resolveLocalFileSystemURL||window.webkitResolveLocalFileSystemURL,window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;function a(t){var e=\"\";switch(t.code){case FileError.QUOTA_EXCEEDED_ERR:e=\"QUOTA_EXCEEDED_ERR\";break;case FileError.NOT_FOUND_ERR:e=\"NOT_FOUND_ERR\";break;case FileError.SECURITY_ERR:e=\"SECURITY_ERR\";break;case FileError.INVALID_MODIFICATION_ERR:e=\"INVALID_MODIFICATION_ERR\";break;case FileError.INVALID_STATE_ERR:e=\"INVALID_STATE_ERR\";break;default:e=\"Unknown Error\"}return e}var o=e.inherit({_fs:null,_isPersisted:!0,_cwd:null,init:function(t){this._fs=t,this._cwd=t.root},readfileAsArrayBuffer:function(t,n,e){this._cwd.getFile(t,{},function(t){t.file(function(t){var e=new FileReader;e.onloadend=function(){n(null,this.result)},e.readAsArrayBuffer(t)},e)},e)},readfileAsDataURL:function(t,n,e){this._cwd.getFile(t,{},function(t){t.file(function(t){var e=new FileReader;e.onloadend=function(){n(null,this.result)},e.readAsDataURL(t)},e)},e)},readfileAsText:function(t,n,e){this._cwd.getFile(t,{},function(t){t.file(function(t){var e=new FileReader;e.onloadend=function(){n(null,this.result)},e.readAsText(t)},e)},e)},writefile:function(t,i,r,s){var e=this,n=(n=t.split(\"/\")).slice(0,n.length-1);this.mkdir(n.join(\"/\"),function(){e._cwd.getFile(t,{create:!0},function(t){t.createWriter(function(t){var e=!1,n=(t.onwriteend=function(){e?r&&r():(e=!0,this.truncate(this.position))},t.onerror=s,i);!n instanceof Blob&&(n=new Blob([i],{type:\"text/plain\"})),t.write(n)},s)},s)})},rmfile:function(t,e,n){this._cwd.getFile(t,{},function(t){t.remove(function(){e()},n)},n)},readdir:function(t,r,s){this._cwd.getDirectory(t,{},function(t){var n=t.createReader(),i=[];!function e(){n.readEntries(function(t){t.length?(i=i.concat(Array.prototype.slice.call(t).map(function(t){return t.name+(t.isDirectory?\"/\":\"\")})),e()):r(null,i)},s)}()},s)},mkdir:function(n,i,r){var s=n.split(\"/\"),a=function(t,e){0==(e=\".\"!=e[0]&&\"\"!=e[0]?e:e.slice(1)).length?i(t):t.getDirectory(e[0],{create:!0,exclusive:!1},function(t){if(t.isDirectory)e.length&&1!=s.length?a(t,e.slice(1)):i&&i(t);else{t=new Error(n+\" is not a directory\");if(!r)throw t;r(t)}},function(t){if(!r)throw t;r(t)})};a(this._cwd,s)},rmdir:function(t,e,n){this._cwd.getDirectory(t,{},function(t){t.removeRecursively(function(){e()},n)},n)},copy:function(t,n,i){this._cwd.getFile(t,{},function(e){cwd.getDirectory(n,{},function(t){e.copyTo(t,function(){i()},i)},i)},i)},move:function(t,n,i){this._cwd.getFile(t,{},function(e){cwd.getDirectory(n,{},function(t){e.moveTo(t,function(){i()},i)},i)},i)},chdir:function(t,e){this._cwd.getDirectory(t,{},function(t){cwd=t,fs.onchdir&&fs.onchdir(cwd.fullPath),e()},e)},importFromHost:function(t){for(var n,e=new r,i=0;n=t[i];++i)!function(e){cwd.getFile(n.name,{create:!0,exclusive:!0},function(t){t.createWriter(function(t){t.write(e)},a)},a)}(n);return e.promise},exportToHost:function(){}});return t(o,{isSupported:function(){return!!s},request:function(t,e){t=t||10485760;var n=e?PERSISTENT:TEMPORARY,i=new r;return s(n,t,function(t){t=new o(t,!!e);i.resolve(t)},function(t){i.reject(t)}),i.promise}}),n.requestLocalFileSystem=o.request,n.LocalFileSystem=o}),define(\"skylark-io-caches/storages/local\",[\"skylark-langx-objects/mixin\",\"skylark-langx-strings\",\"../caches\"],function(t,n,e){\"use strict\";var i=null;try{i=window.localStorage}catch(t){}function r(){return r}return t(r,{isSupported:function(){return!!i},set:function(t,e){return void 0===e?this.remove(t):(i.setItem(t,n.serializeValue(e)),e)},get:function(t,e){t=n.deserializeValue(i.getItem(t));return void 0===t?e:t},remove:function(t){i.removeItem(t)},clear:function(){i.clear()},list:function(){for(var t=0;t<i.length;t++)key,i.key(t);return values}}),e.storages.local=r}),define(\"skylark-io-caches/storages/session\",[\"skylark-langx-objects/mixin\",\"skylark-langx-strings\",\"../caches\"],function(t,n,e){\"use strict\";var i=null;try{i=window.sessiionStorage}catch(t){}return t(function t(){return t},{isSupported:function(){return!!i},set:function(t,e){return void 0===e?this.remove(t):(i.setItem(t,n.serializeValue(e)),e)},get:function(t,e){t=n.deserializeValue(i.getItem(t));return void 0===t?e:t},remove:function(t){i.removeItem(t)},clear:function(){i.clear()},list:function(){for(var t=0;t<i.length;t++)key,i.key(t);return values}}),e.storages.session=sessionStorage}),define(\"skylark-io-caches/main\",[\"./caches\",\"./clipboard\",\"./cookie\",\"./local-file-system\",\"./storages/local\",\"./storages/session\"],function(t){\"use strict\";return t}),define(\"skylark-io-caches\",[\"skylark-io-caches/main\"],function(t){return t}),define(\"skylark-slax-runtime/caches\",[\"./slax\",\"skylark-io-caches\"],function(t,e){return t.caches=e}),define(\"skylark-langx-logging/logging\",[\"skylark-langx-ns\"],function(t){return t.attach(\"langx.logging\",{})}),define(\"skylark-langx-logging/levels\",[\"./logging\"],function(t){return t.levels={all:\"debug|info|warn|error\",off:\"\",debug:\"debug|info|warn|error\",info:\"info|warn|error\",warn:\"warn|error\",error:\"error\",DEFAULT:\"info\"}}),define(\"skylark-langx-logging/Logger\",[\"skylark-langx-objects\",\"skylark-langx-constructs/klass\",\"./logging\",\"./levels\"],function(t,e,n,a){\"use strict\";let o=[];var i=e({_level:\"info\",_construct:function(t){var s;this.name=t,this._logByType=(s=t,(e,n,i)=>{var t,n=a[n],r=new RegExp(`^(${n})$`);if(\"debug\"!==e&&i.unshift(e.toUpperCase()+\":\"),i.unshift(s+\":\"),o&&(o.push([].concat(i)),t=o.length-1e3,o.splice(0,0<t?t:0)),window.console){let t=window.console[e];(t=t||\"debug\"!==e?t:window.console.info||window.console.log)&&n&&r.test(e)&&t[Array.isArray(i)?\"apply\":\"call\"](window.console,i)}})},level:function(t){if(\"string\"==typeof t){if(!a.hasOwnProperty(t))throw new Error(`\"${t}\" in not a valid log level`);this._level=t}return this._level},error:function(...t){this._logByType(\"error\",this._level,t)},warn:function(...t){this._logByType(\"warn\",this._level,t)},debug:function(...t){this._logByType(\"debug\",this._level,t)},info:function(...t){this._logByType(\"info\",this._level,t)},history:function(){return o?[].concat(o):[]},createLogger:function(t){return new i(this.name?this.name+\": \"+t:t)}});return t.mixin(i.prototype.history,{enable:function(){null===o&&(o=[])},filter:function(e){return(o||[]).filter(t=>new RegExp(`.*${e}.*`).test(t[0]))},clear:function(){o&&(o.length=0)},disable:function(){null!==o&&(o.length=0,o=null)}}),i.root=new i(\"\"),n.Logger=i}),define(\"skylark-langx-logging/main\",[\"./logging\",\"./Logger\"],function(t,e){let n=e.root;return t.debug=function(...t){n.debug(...t)},t.info=function(...t){n.debug(...t)},t.warn=function(...t){n.debug(...t)},t.error=function(...t){n.debug(...t)},t}),define(\"skylark-langx-logging\",[\"skylark-langx-logging/main\"],function(t){return t}),define(\"skylark-domx-animates/animates\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\"],function(t,e,n){function i(){return i}return e.mixin(i,{off:!1,speeds:{normal:400,fast:200,slow:600},animationName:n.normalizeCssProperty(\"animation-name\"),animationDuration:n.normalizeCssProperty(\"animation-duration\"),animationDelay:n.normalizeCssProperty(\"animation-delay\"),animationTiming:n.normalizeCssProperty(\"animation-timing-function\"),animationEnd:n.normalizeCssEvent(\"AnimationEnd\"),animateBaseClass:\"animated\"}),t.attach(\"domx.animates\",i)}),define(\"skylark-domx-geom/geom\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-styler\"],function(t,r,i,o){\"use strict\";var s,a=/^(?:body|html)$/i,n=r.toPixel,l=i.offsetParent;function c(t){var e;return i.isWindow(t)?{left:0,top:0,right:0,bottom:0}:(e=getComputedStyle(t),{left:n(e.borderLeftWidth,t),top:n(e.borderTopWidth,t),right:n(e.borderRightWidth,t),bottom:n(e.borderBottomWidth,t)})}function u(t,e){var n,i,r,s;return void 0===e?a.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect():(i=u(n=l(t)),r=y(t),s=c(n),v(t,{top:e.top-i.top-r.top-s.top+(_(n)||0),left:e.left-i.left-r.left-s.left+(w(n)||0)}),this)}function d(t,e){return void 0===e?t==window||t==document.documentElement||t==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect?t.getBoundingClientRect():void 0:(u(t,e),h(t,e),this)}function h(t,e){var n,i;return null==e?r.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:r.isDocument(t)?g(document):{width:t.offsetWidth,height:t.offsetHeight}:(n=\"border-box\"===o.css(t,\"box-sizing\"),e={width:e.width,height:e.height},n||(n=k(t),i=c(t),void 0!==e.width&&\"\"!==e.width&&null!==e.width&&(e.width=e.width-n.left-n.right-i.left-i.right),void 0!==e.height&&\"\"!==e.height&&null!==e.height&&(e.height=e.height-n.top-n.bottom-i.top-i.bottom)),o.css(t,e),this)}function p(t,e){var n;return null==e?{width:t.clientWidth||t.innerWidth,height:t.clientHeight||t.innerHeight}:(n=\"border-box\"===o.css(t,\"box-sizing\"),e={width:e.width,height:e.height},n?(n=c(t),void 0!==e.width&&(e.width=e.width+n.left+n.right),void 0!==e.height&&(e.height=e.height+n.top+n.bottom)):(n=k(t),void 0!==e.width&&(e.width=e.width-n.left-n.right),void 0!==e.height&&(e.height=e.height-n.top-n.bottom)),o.css(t,e),this)}function e(t,e){return null==e?f(t).height:(f(t,{height:e}),this)}function f(t,e){var n=p(t),i=k(t);return void 0===e?{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom}:(n=\"border-box\"===o.css(t,\"box-sizing\"),e={width:e.width,height:e.height},n&&(n=c(t),void 0!==e.width&&\"\"!==e.width&&null!==e.width&&(e.width=e.width+i.left+i.right+n.left+n.right),void 0!==e.height)&&\"\"!==e.height&&null!==e.height&&(e.height=e.height+i.top+i.bottom+n.top+n.bottom),o.css(t,e),this)}function m(t,e){return null==e?f(t).width:(f(t,{width:e}),this)}function g(t){var e=t.documentElement,t=t.body,n=Math.max,i=n(e.scrollWidth,t.scrollWidth),r=n(e.clientWidth,t.clientWidth),s=n(e.offsetWidth,t.offsetWidth),a=n(e.scrollHeight,t.scrollHeight),o=n(e.clientHeight,t.clientHeight);return{width:i<s?r:i,height:a<n(e.offsetHeight,t.offsetHeight)?o:a}}function y(t){return i.isWindow(t)?{left:0,top:0,right:0,bottom:0}:(t=getComputedStyle(t),{left:n(t.marginLeft),top:n(t.marginTop),right:n(t.marginRight),bottom:n(t.marginBottom)})}function k(t){return i.isWindow(t)?{left:0,top:0,right:0,bottom:0}:(t=getComputedStyle(t),{left:n(t.paddingLeft),top:n(t.paddingTop),right:n(t.paddingRight),bottom:n(t.paddingBottom)})}function x(t,e){var n,i,r;return void 0===e?(r=t.getBoundingClientRect(),n=t.ownerDocument.defaultView,{left:r.left+n.pageXOffset,top:r.top+n.pageYOffset}):(n=x(r=l(t)),i=y(t),r=c(r),v(t,{top:e.top-n.top-i.top-r.top,left:e.left-n.left-i.left-r.left}),this)}function v(t,e){var n,i,r,s,a;return null==e?(s=l(t),a=u(t),n=u(s),i=y(t),r=c(s),{top:a.top-n.top-r.top-i.top,left:a.left-n.left-r.left-i.left}):(s=l(t),a={top:e.top,left:e.left},\"static\"==o.css(t,\"position\")&&(a.position=\"relative\"),o.css(t,a),this)}function b(t,e){var n,i,r;return void 0===e?(r=l(t),n=d(t),i=u(r),y(t),r=c(r),{top:n.top-i.top-r.top,left:n.left-i.left-r.left,width:n.width,height:n.height}):(v(t,e),h(t,e),this)}function w(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n=\"scrollLeft\"in t;return void 0===e?n?t.scrollLeft:t.pageXOffset:(n?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function _(t,e){9===t.nodeType?t=t.defaultView:t==document.body&&(t=document.scrollingElement||document.documentElement);var n=\"scrollTop\"in t;return void 0===e?n?t.scrollTop:t.pageYOffset:(n?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function C(t){return d(t=t||window)}function S(){return S}return r.mixin(S,{borderExtents:c,boundingHeight:function(t,e){return null==e?h(t).height:(h(t,{height:e}),this)},boundingPosition:u,boundingRect:d,boundingSize:h,boundingWidth:function(t,e){return null==e?h(t).width:(h(t,{width:e}),this)},clientHeight:function(t,e){return null==e?p(t).height:p(t,{height:e})},clientSize:p,clientWidth:function(t,e){return null==e?p(t).width:(p(t,{width:e}),this)},contentHeight:e,contentRect:function(t){var e=p(t);return{left:(t=k(t)).left,top:t.top,width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}},contentSize:f,contentWidth:m,getDocumentSize:g,hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},height:e,inview:function(t,e){t=d(t),e=e,(n={}).width=(n.right=t.right+(e=+e||0))-(n.left=t.left-e),n.height=(n.bottom=t.bottom+e)-(n.top=t.top-e);var n,t=n,e=C();return!!t&&0<=t.bottom&&0<=t.right&&t.top<=e.height&&t.left<=e.width},marginExtents:y,marginRect:function(t){var e=b(t),t=y(t);return{left:e.left,top:e.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}},marginSize:function(t){var e=h(t),t=y(t);return{width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}},offsetParent:l,paddingExtents:k,pagePosition:x,pageRect:function(t,e){var n,i;return void 0===e?(n=t.getBoundingClientRect(),i=t.ownerDocument.defaultView,{left:n.left+i.pageXOffset,top:n.top+i.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}):(x(t,e),h(t,e),this)},relativePosition:v,relativeRect:b,scrollbarWidth:function(){var t,e,n;return void 0!==s?s:(n=(e=i.createFragment(\"<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>\")[0]).childNodes[0],i.append(document.body,e),t=n.offsetWidth,o.css(e,\"overflow\",\"scroll\"),t===(n=n.offsetWidth)&&(n=e[0].clientWidth),i.remove(e),s=t-n)},scrollIntoView:function(t,e){var n=t.parentNode,i=(r=function(t,e){for(var n,i=t,r=n=0;i&&i!=e&&i.nodeType;)r+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:n}}(t,n)).x,r=r.y,s=t.offsetWidth,t=t.offsetHeight,a=n.clientWidth,o=n.clientHeight;return\"end\"==e?(i-=a-s,r-=o-t):\"center\"==e&&(i-=a/2-s/2,r-=o/2-t/2),n.scrollLeft=i,n.scrollTop=r,this},scrollLeft:w,scrollTop:_,scrollBy:function(t,e,n){t.scrollLeft+=e,t.scrollTop+=n},size:f,testAxis:function(t){for(var e=t.offsetTop,n=t.offsetLeft,i=t.offsetWidth,r=t.offsetHeight;t.offsetParent;)e+=(t=t.offsetParent).offsetTop,n+=t.offsetLeft;var s={x:0,y:0};return e<window.pageYOffset?s.y=e-window.pageYOffset:e+r>window.pageYOffset+window.innerHeight&&(s.y=e+r-(window.pageYOffset+window.innerHeight)),n<window.pageXOffset?s.x=n-window.pageXOffset:n+i>window.pageXOffset+window.innerWidth&&(s.x=n+i-(window.pageXOffset+window.innerWidth)),s},viewportSize:C,width:m}),t.attach(\"domx.geom\",S)}),define(\"skylark-domx-geom/posit\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-styler\",\"./geom\"],function(S,E,T,M){\"use strict\";var A=Math.max,P=Math.abs,$=/left|center|right/,z=/top|center|bottom/,I=/[\\+\\-]\\d+(\\.[\\d]+)?%?/,j=/^\\w+/,i=/%$/;function N(t,e,n){return[parseFloat(t[0])*(i.test(t[0])?e/100:1),parseFloat(t[1])*(i.test(t[1])?n/100:1)]}function O(t,e){return parseInt(T.css(t,e),10)||0}var R={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,i=i.width,s=t.left-e.collisionPosition.marginLeft,a=r-s,o=s+e.collisionWidth-i-r;e.collisionWidth>i?0<a&&o<=0?(n=t.left+a+e.collisionWidth-i-r,t.left+=a-n):t.left=!(0<o&&a<=0)&&o<a?r+i-e.collisionWidth:r:0<a?t.left+=a:0<o?t.left-=o:t.left=A(t.left-s,t.left)},top:function(t,e){var n,i=e.within,i=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,a=i-s,o=s+e.collisionHeight-r-i;e.collisionHeight>r?0<a&&o<=0?(n=t.top+a+e.collisionHeight-r-i,t.top+=a-n):t.top=!(0<o&&a<=0)&&o<a?i+r-e.collisionHeight:i:0<a?t.top+=a:0<o?t.top-=o:t.top=A(t.top-s,t.top)}},flip:{left:function(t,e){var n=e.within,i=n.offset.left+n.scrollLeft,r=n.width,n=n.isWindow?n.scrollLeft:n.offset.left,s=t.left-e.collisionPosition.marginLeft,a=s-n,s=s+e.collisionWidth-r-n,o=\"left\"===e.my[0]?-e.elemWidth:\"right\"===e.my[0]?e.elemWidth:0,l=\"left\"===e.at[0]?e.targetWidth:\"right\"===e.at[0]?-e.targetWidth:0,c=-2*e.offset[0];a<0?((r=t.left+o+l+c+e.collisionWidth-r-i)<0||r<P(a))&&(t.left+=o+l+c):0<s&&(0<(i=t.left-e.collisionPosition.marginLeft+o+l+c-n)||P(i)<s)&&(t.left+=o+l+c)},top:function(t,e){var n=e.within,i=n.offset.top+n.scrollTop,r=n.height,n=n.isWindow?n.scrollTop:n.offset.top,s=t.top-e.collisionPosition.marginTop,a=s-n,s=s+e.collisionHeight-r-n,o=\"top\"===e.my[1]?-e.elemHeight:\"bottom\"===e.my[1]?e.elemHeight:0,l=\"top\"===e.at[1]?e.targetHeight:\"bottom\"===e.at[1]?-e.targetHeight:0,c=-2*e.offset[1];a<0?((r=t.top+o+l+c+e.collisionHeight-r-i)<0||r<P(a))&&(t.top+=o+l+c):0<s&&(0<(i=t.top-e.collisionPosition.marginTop+o+l+c-n)||P(i)<s)&&(t.top+=o+l+c)}},flipfit:{left:function(){R.flip.left.apply(this,arguments),R.fit.left.apply(this,arguments)},top:function(){R.flip.top.apply(this,arguments),R.fit.top.apply(this,arguments)}}};return M.posit=function(t,a){var n,o,l,c,e,u,i,r,s,d,h,p,f,m,g,y,k,x=(a=S.extend({},a)).of,v=(b=a.within,f=b||window,s=E.isWindow(f),p=!!f&&9===f.nodeType,e=!s&&!p,C=M.marginSize(f),{element:f,isWindow:s,isDocument:p,offset:e?M.pagePosition(b):{left:0,top:0},scrollLeft:M.scrollLeft(f),scrollTop:M.scrollTop(f),width:C.width,height:C.height}),b=(p=(s=v).isWindow||s.isDocument?\"\":T.css(s.element,\"overflow-x\"),e=s.isWindow||s.isDocument?\"\":T.css(s.element,\"overflow-y\"),p=\"scroll\"===p||\"auto\"===p&&s.width<M.scrollWidth(s.element),{width:\"scroll\"===e||\"auto\"===e&&s.height<M.scrollHeight(s.element)?M.scrollbarWidth():0,height:p?M.scrollbarWidth():0}),w=(a.collision||\"flip\").split(\" \"),_={},C=9===(f=x).nodeType?{size:size(f),offset:{top:0,left:0}}:E.isWindow(f)?{size:M.size(f),offset:{top:M.scrollTop(f),left:M.scrollLeft(f)}}:f.preventDefault?{size:{width:0,height:0},offset:{top:f.pageY,left:f.pageX}}:{size:M.size(f),offset:M.pagePosition(f)};x.preventDefault&&(a.at=\"left top\"),o=C.size.width,l=C.size.height,c=C.offset,e=S.extend({},c),S.each([\"my\",\"at\"],function(){var t,e,n=(a[this]||\"\").split(\" \");(n=1===n.length?$.test(n[0])?n.concat([\"center\"]):z.test(n[0])?[\"center\"].concat(n):[\"center\",\"center\"]:n)[0]=$.test(n[0])?n[0]:\"center\",n[1]=z.test(n[1])?n[1]:\"center\",t=I.exec(n[0]),e=I.exec(n[1]),_[this]=[t?t[0]:0,e?e[0]:0],a[this]=[j.exec(n[0])[0],j.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),\"right\"===a.at[0]?e.left+=o:\"center\"===a.at[0]&&(e.left+=o/2),\"bottom\"===a.at[1]?e.top+=l:\"center\"===a.at[1]&&(e.top+=l/2),n=N(_.at,o,l),e.left+=n[0],e.top+=n[1],u=t,s=M.marginSize(u),d=s.width,h=s.height,p=O(u,\"marginLeft\"),f=O(u,\"marginTop\"),m=d+p+O(u,\"marginRight\")+b.width,g=h+f+O(u,\"marginBottom\")+b.height,y=S.extend({},e),k=N(_.my,s.width,s.height),\"right\"===a.my[0]?y.left-=d:\"center\"===a.my[0]&&(y.left-=d/2),\"bottom\"===a.my[1]?y.top-=h:\"center\"===a.my[1]&&(y.top-=h/2),y.left+=k[0],y.top+=k[1],i={marginLeft:p,marginTop:f},S.each([\"left\",\"top\"],function(t,e){R[w[t]]&&R[w[t]][e](y,{targetWidth:o,targetHeight:l,elemWidth:d,elemHeight:h,collisionPosition:i,collisionWidth:m,collisionHeight:g,offset:[n[0]+k[0],n[1]+k[1]],my:a.my,at:a.at,within:v,elem:u})}),a.using&&(r=function(t){var e=c.left-y.left,n=e+o-d,i=c.top-y.top,r=i+l-h,s={target:{element:x,left:c.left,top:c.top,width:o,height:l},element:{element:u,left:y.left,top:y.top,width:d,height:h},horizontal:n<0?\"left\":0<e?\"right\":\"center\",vertical:r<0?\"top\":0<i?\"bottom\":\"middle\"};o<d&&P(e+n)<o&&(s.horizontal=\"center\"),l<h&&P(i+r)<l&&(s.vertical=\"middle\"),A(P(e),P(n))>A(P(i),P(r))?s.important=\"horizontal\":s.important=\"vertical\",a.using.call(this,t,s)}),M.pagePosition(u,S.extend(y,{using:r}))}}),define(\"skylark-domx-geom/scroll-to-top\",[\"skylark-langx\",\"skylark-domx-styler\",\"./geom\"],function(c,t,e){return e.scrollToTop=function(t,e,n,i){var r=parseInt(t.scrollTop),s=0,a=1e3*n/5,o=parseInt(e),l=setInterval(function(){++s<=a&&(t.scrollTop=(o-r)/a*s+r),1+a<=s&&(clearInterval(l),i)&&c.debounce(i,1e3)()},5);return this}}),define(\"skylark-domx-geom/main\",[\"skylark-langx/langx\",\"./geom\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./posit\",\"./scroll-to-top\"],function(n,o,t,e){return t.delegate([\"borderExtents\",\"boundingPosition\",\"boundingHeight\",\"boundingRect\",\"boundingSize\",\"boundingWidth\",\"clientHeight\",\"clientSize\",\"clientWidth\",\"contentHeight\",\"contentRect\",\"contentSize\",\"contentWidth\",\"marginExtents\",\"marginRect\",\"marginSize\",\"offsetParent\",\"paddingExtents\",\"pagePosition\",\"pageRect\",\"relativePosition\",\"relativeRect\",\"scrollIntoView\",\"scrollLeft\",\"scrollTop\"],o,{}),e.fn.offset=e.wraps.wrapper_value(o.pagePosition,o,o.pagePosition),e.fn.scrollTop=e.wraps.wrapper_value(o.scrollTop,o),e.fn.scrollLeft=e.wraps.wrapper_value(o.scrollLeft,o),e.fn.position=function(t){var e;return this.length?t?(t.of&&t.of.length&&((t=n.clone(t)).of=t.of[0]),this.each(function(){o.posit(this,t)})):(e=this[0],o.relativePosition(e)):this},e.fn.offsetParent=e.wraps.wrapper_map(o.offsetParent,o),e.fn.boundingSize=e.wraps.wrapper_value(o.boundingSize,o),e.fn.width=e.wraps.wrapper_value(o.width,o,o.width),e.fn.height=e.wraps.wrapper_value(o.height,o,o.height),e.fn.clientSize=e.wraps.wrapper_value(o.clientSize,o),[\"width\",\"height\"].forEach(function(a){var t=a.replace(/./,function(t){return t[0].toUpperCase()});e.fn[\"outer\"+t]=function(r,s){var t,e;return arguments.length?\"boolean\"!=typeof r&&(s=r,r=!1):(r=!1,s=void 0),void 0!==s?this.each(function(t,e){var n={},i=o.marginExtents(e);\"width\"===a?(n.width=s,r&&(n.width=n.width-i.left-i.right)):(n.height=s,r&&(n.height=n.height-i.top-i.bottom)),o.boundingSize(e,n)}):(e=this[0])?(t=o.boundingSize(e),r&&(e=o.marginExtents(e),t.width=t.width+e.left+e.right,t.height=t.height+e.top+e.bottom),\"width\"===a?t.width:t.height):void 0}}),e.fn.innerWidth=e.wraps.wrapper_value(o.clientWidth,o,o.clientWidth),e.fn.innerHeight=e.wraps.wrapper_value(o.clientHeight,o,o.clientHeight),o}),define(\"skylark-domx-geom\",[\"skylark-domx-geom/main\"],function(t){return t}),define(\"skylark-domx-animates/animation\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"skylark-domx-eventer\",\"./animates\"],function(o,t,e,n,l,c,u){var d=u.animationName,h=u.animationDuration,p=u.animationTiming,i=u.animationDelay,f=u.animationEnd;return d,h,i,p,0,u.animation=function(t,e,n,i,r,s){var a={};return o.isPlainObject(n)&&(i=n.easing,r=n.complete,s=n.delay,n=n.duration),void 0===(n=o.isString(n)?u.speeds[n]:n)&&(n=u.speeds.normal),n/=1e3,o.isFunction(i)?(r=i,eace=\"swing\"):i=i||\"swing\",s?s/=1e3:s=0,a[d]=e,a[h]=n+\"s\",a[p]=i,0<n&&c.on(t,f,r),t.clientLeft,l.css(t,a),this}}),define(\"skylark-domx-animates/animate\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"skylark-domx-eventer\",\"./animates\"],function(i,r,s,a){return a.animate=function(e,n,t){if(i.isString(n)){let t=n;return a.animateBaseClass&&(t=a.animateBaseClass+\" \"+t),r.addClass(e,t),s.one(e,a.animationEnd,function(){r.removeClass(e,t)}),this}return e.animate(n,t)}}),define(\"skylark-domx-animates/main\",[\"./animates\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./animation\",\"./animate\"],function(t,e,n){return e.delegate([\"animate\"],t),n.fn.animate=n.wraps.wrapper_every_act(t.animate,t),t}),define(\"skylark-domx-animates\",[\"skylark-domx-animates/main\"],function(t){return t}),define(\"skylark-domx/animates\",[\"skylark-domx-animates\"],function(t){return t}),define(\"skylark-domx/browser\",[\"skylark-domx-browser\"],function(t){\"use strict\";return t}),define(\"skylark-domx-css/css\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-noder\"],function(t,d,r){\"use strict\";var i,s,a=document.getElementsByTagName(\"head\")[0],o=0,l={},c={},u=f(),e=c[u],h=\"cssRules\"in e?\"cssRules\":\"rules\",p=e.deleteRule||e.removeRule;function f(t,e){var n={type:\"text/css\"},i=o++;return(e=e||{}).media&&(n.media=e.media),e=t?r.create(\"link\",d.mixin(n,{rel:\"stylesheet\",async:!1})):r.createElement(\"style\",n),r.append(a,e),c[i]={id:i,node:e},i}function n(t,n){var i=c[t];return d.isNumber(n)?p.call(i,n):d.each(i[h],function(t,e){if(n===e)return p.call(i,t),!1}),this}function m(t,e){t=c[t],e=d.isString(e)?e:y(e);return r.append(t.node,r.createTextNode(e)),this}function g(t){return t.startsWith(\"@\")}function y(t){function u(t,e,n){var i,r,s=\"\",a=g(t);if(g(t))s=d.isString(e)?k.SPACE.repeat(n)+t.trim()+' \"'+e.trim()+' \";\\n':(s=(s+=k.SPACE.repeat(n)+t.trim()+\" {\\n\")+u(\"\",e,n+1))+k.SPACE.repeat(n)+\" }\\n\";else if(d.isString(e))s=k.SPACE.repeat(n)+t.trim(),s=a?s+' \"'+e.trim()+' \";\\n':s+\": \"+e.trim()+\";\\n\";else if(d.isArray(e))for(var o=0;o<e.length;o++)s+=u(t,e[o],n);else{if(t){for(var o in s+=k.SPACE.repeat(n)+t.trim()+\" {\\n\",e){var l=e[o];d.isString(l)&&(s+=u(o,l,n+1))}s+=k.SPACE.repeat(n)+\"}\\n\"}for(var o in e){var c,l=e[o];d.isString(l)||(i=o,r=n,(c=t)&&(g(c)?r+=1:i=c+\" \"+i),s+=u((c={name:i,depth:r}).name,l,c.depth))}}return s}return u(\"\",t,0)}function k(){return k}return s=e.insertRule?(i=e.insertRule,function(t,e,n){i.call(this,t+\"{\"+e+\"}\",n)}):e.addRule,d.mixin(k,{SPACE:\"\\t\",addRules:function(t){return this.addRules(u,t)},addSheetRules:m,createStyleSheet:function(t,e){return e=f(!1,e=e||{}),t&&m(e,t),e},deleteSheetRule:n,deleteRule:function(t){return n(u,t),this},insertRule:function(t,e,n){return this.insertSheetRule(u,t,e,n)},insertSheetRule:function(t,e,n,i){return e&&n?(t=c[t],i=i||t[h].length,s.call(t,e,n,i)):-1},loadStyleSheet:function(t,e,n,i){d.isFunction(e)&&(i=n,n=e,e={});var r=l[t];return r||(e=f(!0,e),r=l[t]=c[e],d.mixin(r,{state:0,url:t,deferred:new d.Deferred}),e=r.node,startTime=(new Date).getTime(),e.onload=function(){r.state=1,r.deferred.resolve(r.id)},e.onerror=function(t){r.state=-1,r.deferred.reject(t)},e.href=r.url),(n||i)&&r.deferred.promise.then(n,i),r.id},removeStyleSheet:function(t){if(t===u)throw new Error(\"The default stylesheet can not be deleted\");var e=c[t];return delete c[t],r.remove(e.node),this},toString:y}),t.attach(\"domx.css\",k)}),define(\"skylark-domx-css/main\",[\"./css\"],function(t){return t}),define(\"skylark-domx-css\",[\"skylark-domx-css/main\"],function(t){return t}),define(\"skylark-domx/css\",[\"skylark-domx-css\"],function(t){\"use strict\";return t}),define(\"skylark-domx/data\",[\"skylark-domx-data\"],function(t){return t}),define(\"skylark-domx/eventer\",[\"skylark-domx-eventer\"],function(t){return t}),define(\"skylark-domx/finder\",[\"skylark-domx-finder\"],function(t){return t}),define(\"skylark-domx-fx/fx\",[\"skylark-langx/skylark\",\"skylark-langx/langx\"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach(\"domx.fx\",n)}),define(\"skylark-domx-transits/transits\",[\"skylark-langx/skylark\",\"skylark-langx/langx\"],function(t,e){function n(){return n}return e.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),t.attach(\"domx.transits\",n)}),define(\"skylark-domx-transits/transit\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"skylark-domx-eventer\",\"./transits\"],function(y,t,e,k,x,v,b){var w,_,C,S,E=t.normalizeCssEvent(\"TransitionEnd\"),T=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,M=t.css3PropPrefix+\"transform\",A={};return A[w=t.normalizeCssProperty(\"transition-property\")]=A[_=t.normalizeCssProperty(\"transition-duration\")]=A[S=t.normalizeCssProperty(\"transition-delay\")]=A[C=t.normalizeCssProperty(\"transition-timing-function\")]=\"\",b.transit=function(e,t,n,i,r,s){var a,o,l,c={},u=[],d=\"\",h=this,p=!1,f=!1;for(a in y.isPlainObject(n)&&(i=n.easing,r=n.complete,s=n.delay,n=n.duration),void 0===(n=y.isString(n)?b.speeds[n]:n)&&(n=b.speeds.normal),n/=1e3,b.off&&(n=0),y.isFunction(i)?(r=i,eace=\"swing\"):i=i||\"swing\",s?s/=1e3:s=0,t){var m,g=t[a];T.test(a)?d+=a+\"(\"+g+\") \":(\"scrollTop\"===a&&(f=!0),\"clip\"==a&&y.isPlainObject(g)?(c[a]=\"rect(\"+g.top+\"px,\"+g.right+\"px,\"+g.bottom+\"px,\"+g.left+\"px)\",\"auto\"==x.css(e,\"clip\")&&(m=k.size(e),x.css(e,\"clip\",\"rect(0px,\"+m.width+\"px,\"+m.height+\"px,0px)\"),0)):c[a]=g,u.push(y.dasherize(a)))}return o=E,d&&(c[M]=d,u.push(M)),0<n&&(c[w]=u.join(\", \"),c[_]=n+\"s\",c[S]=s+\"s\",c[C]=i),l=function(t){if(p=!0,t){if(t.target!==t.currentTarget)return;v.off(t.target,o,l)}else v.off(e,o,l);x.css(e,A),r&&r.call(this)},0<n&&(v.on(e,o,l),y.debounce(function(){p||l.call(h)},1e3*(n+s)+25)()),e.clientLeft,x.css(e,c),n<=0&&y.debounce(function(){p||l.call(h)},0)(),f&&k.scrollToTop(e,t.scrollTop,n,r),this}}),define(\"skylark-domx-fx/animate\",[\"skylark-langx/langx\",\"skylark-domx-transits/transit\",\"skylark-domx-animates/animation\",\"./fx\"],function(a,o,l,t){return t.animate=function(t,e,n,i,r,s){return(a.isString(e)?l:o)(t,e,n,i,r,s)}}),define(\"skylark-domx-transits/bounce\",[\"skylark-langx/langx\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(x,v,b,t,w){return t.bounce=function(t,e,n){var i,r,s,a=\"hide\"===(o=e.mode),o=\"show\"===o,l=e.direction||\"up\",c=e.distance,u=e.times||5,d=e.duration/(2*u+(o||a?1:0)),h=e.easing,p=\"up\"===l||\"down\"===l?\"top\":\"left\",f=\"up\"===l||\"left\"===l,m=0,g=x.Deferred,y=[];function k(e,n,i,r){return function(){var t=new g;return w(e,n,i,r,function(){t.resolve()}),t.promise}}for(e=b.css(t,p),c||(l=v.size(t),c=(\"top\"==p?l.height:l.width)/3),s=v.relativePosition(t)[p],o&&((r={opacity:1})[p]=e,b.css(t,\"opacity\",0),b.css(t,p,s+(f?2*-c:2*c)),y.push(k(t,r,d,h))),a&&(c/=Math.pow(2,u-1)),(r={})[p]=e;m<u;m++)(i={})[p]=s+(f?-c:c),y.push(k(t,i,d,h)),y.push(k(t,r,d,h)),c=a?2*c:c/2;return a&&((i={opacity:0})[p]=s+(f?-1*c:c),y.push(k(t,i,d,h))),y.push(n),y.reduce(function(t,e,n,i){return t.then(e)},g.resolve()),this}}),define(\"skylark-domx-transits/emulate-transition-end\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"./transits\"],function(t,i,r,e){return e.emulateTransitionEnd=function(t,e){var n=!1;return r.one(t,\"transitionEnd\",function(){n=!0}),setTimeout(function(){n||r.trigger(t,i.support.transition.end)},e),this}}),define(\"skylark-domx-transits/show\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(i,r,t,s){return t.show=function(t,e,n){return r.show(t),e&&(!n&&i.isFunction(e)&&(n=e,e=\"normal\"),r.css(t,\"opacity\",0),s(t,{opacity:1,scale:\"1,1\"},e,n)),this}}),define(\"skylark-domx-transits/hide\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(i,r,t,s){return t.hide=function(t,e,n){return e?(!n&&i.isFunction(e)&&(n=e,e=\"normal\"),s(t,{opacity:0,scale:\"0,0\"},e,function(){r.hide(t),n&&n.call(t)})):r.hide(t),this}}),define(\"skylark-domx-transits/explode\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"skylark-domx-geom\",\"skylark-domx-noder\",\"skylark-domx-query\",\"./transits\",\"./transit\",\"./show\",\"./hide\"],function(t,k,x,e,v,n,i,r,s){return n.explode=function(t,e,n){k.show(t),k.css(t,\"visibility\",\"hidden\");var i,r,s,a,o,l=e.pieces?Math.round(Math.sqrt(e.pieces)):3,c=l,u=\"show\"===e.mode,d=x.pagePosition(t),h=x.marginSize(t),p=Math.ceil(h.width/c),f=Math.ceil(h.height/l),m=[];function g(){m.push(this),m.length===l*c&&(k.css(t,{visibility:\"visible\"}),v(m).remove(),n())}for(var y=0;y<l;y++)for(s=d.top+y*f,o=y-(l-1)/2,i=0;i<c;i++)r=d.left+i*p,a=i-(c-1)/2,v(t).clone().appendTo(\"body\").wrap(\"<div></div>\").css({position:\"absolute\",visibility:\"visible\",left:-i*p,top:-y*f}).parent().addClass(e.explodeClass||\"ui-effects-explode\").css({position:\"absolute\",overflow:\"hidden\",width:p,height:f,left:r+(u?a*p:0),top:s+(u?o*f:0),opacity:u?0:1}).transit({left:r+(u?0:a*p),top:s+(u?0:o*f),opacity:u?1:0},e.duration||500,e.easing,g);return this}}),define(\"skylark-domx-transits/fade\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(r,t,e,s){return e.fade=function(t,e,n,i){return r.isFunction(n)&&(i=n,n={}),s(t,{opacity:e},(n=n||{}).duration,n.easing,i),this}}),define(\"skylark-domx-transits/fade-in\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./fade\"],function(t,r,e,s){return e.fadeIn=function(t,e,n){var i=r.css(t,\"opacity\");return 0<i?r.css(t,\"opacity\",0):i=1,r.show(t),s(t,i,e,n),this}}),define(\"skylark-domx-transits/fade-out\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./fade\"],function(t,e,n,i){return n.fadeOut=function(t,e,n){return i(t,0,e,n),this}}),define(\"skylark-domx-transits/fade-toggle\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./fade-in\",\"./fade-out\"],function(t,r,e,s,a){return e.fadeToggle=function(t,e,n,i){return(r.isInvisible(t)?s:a)(t,e,n,i),this}}),define(\"skylark-domx-transits/pulsate\",[\"skylark-langx/langx\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(h,t,p,e,f){return e.pulsate=function(t,e,n){var i=e.mode,r=\"show\"===i||!i,s=2*(e.times||5)+(r||\"hide\"===i?1:0),a=e.duration/s,o=0,l=1,c=((r||p.isInvisible(t))&&(p.css(t,\"opacity\",0),p.show(t),o=1),h.Deferred),u=[];function d(e,n,i,r){return function(){var t=new c;return f(e,n,i,r,function(){t.resolve()}),t.promise}}for(;l<s;l++)u.push(d(t,{opacity:o},a,e.easing)),o=1-o;return u.push(d(t,{opacity:o},a,e.easing)),u.push(n),u.reduce(function(t,e,n,i){return t.then(e)},c.resolve()),this}}),define(\"skylark-domx-transits/shake\",[\"skylark-langx/langx\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(m,g,t,e,y){return e.shake=function(t,e,n){var i=1,r=e.direction||\"left\",s=e.distance||20,a=e.times||3,o=Math.round(e.duration/(2*a+1)),l=\"up\"===r||\"down\"===r?\"top\":\"left\",r=\"up\"===r||\"left\"===r,c={},u={},d={},h={},p=m.Deferred;function f(e,n,i,r){return function(){var t=new p;return y(e,n,i,r,function(){t.resolve()}),t.promise}}for(start=g.relativePosition(t)[l],funcs=[],c[l]=start,u[l]=start+(r?-1:1)*s,d[l]=u[l]+(r?1:-1)*s*2,h[l]=d[l]+(r?-1:1)*s*2,funcs.push(f(t,u,o,e.easing));i<a;i++)funcs.push(f(t,d,o,e.easing)),funcs.push(f(t,h,o,e.easing));return funcs.push(f(t,c,o/2,e.easing)),funcs.push(n),funcs.reduce(function(t,e,n,i){return t.then(e)},p.resolve()),this}}),define(\"skylark-domx-transits/slide\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./transit\"],function(g,y,k,x){return k.slide=function(t,e,n){g.isFunction(e)&&(n=e,e={});var i,r,s,a,o,l,c,u,d,h,p=\"up\"===(f=(e=e||{}).direction||\"down\")||\"left\"===f,f=\"up\"===f||\"down\"===f,e=e.duration||k.speeds.normal,m=y.css(t,\"position\");if(p){if(y.isInvisible(t))return this}else y.show(t),y.css(t,{position:\"absolute\",visibility:\"hidden\"});return f?(i=y.css(t,\"margin-top\"),r=y.css(t,\"margin-bottom\"),s=y.css(t,\"padding-top\"),a=y.css(t,\"padding-bottom\"),o=y.css(t,\"height\"),p?(y.css(t,{visibility:\"visible\",overflow:\"hidden\",height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a}),x(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:e,queue:!1,complete:function(){y.hide(t),y.css(t,{visibility:\"visible\",overflow:\"hidden\",height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a}),n&&n.apply(t)}})):(y.css(t,{position:m,visibility:\"visible\",overflow:\"hidden\",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),x(t,{height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a},{duration:e,complete:function(){n&&n.apply(t)}}))):(l=y.css(t,\"margin-left\"),c=y.css(t,\"margin-right\"),u=y.css(t,\"padding-left\"),d=y.css(t,\"padding-right\"),h=y.css(t,\"width\"),p?(y.css(t,{visibility:\"visible\",overflow:\"hidden\",width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d}),x(t,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:e,queue:!1,complete:function(){y.hide(t),y.css(t,{visibility:\"visible\",overflow:\"hidden\",width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d}),n&&n.apply(t)}})):(y.css(t,{position:m,visibility:\"visible\",overflow:\"hidden\",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),x(t,{width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d},{duration:e,complete:function(){n&&n.apply(t)}}))),this}}),define(\"skylark-domx-transits/slide-down\",[\"./transits\",\"./slide\"],function(t,i){return t.slideDown=function(t,e,n){return i(t,{direction:\"down\",duration:e},n)}}),define(\"skylark-domx-transits/slide-up\",[\"./transits\",\"./slide\"],function(t,i){return t.slideUp=function(t,e,n){return i(t,{direction:\"up\",duration:e},n)}}),define(\"skylark-domx-transits/slide-toggle\",[\"skylark-langx/langx\",\"skylark-domx-geom\",\"./transits\",\"./slide-down\",\"./slide-up\"],function(t,i,e,r,s){return e.slideToggle=function(t,e,n){return(0==i.height(t)?r:s)(t,e,n),this}}),define(\"skylark-domx-transits/throb\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"./transits\",\"./transit\"],function(t,o,l,e,n){return e.throb=function(t,e){e=e||{};var n,i=e.time,r=e.callback,s=l.createElement(\"div\",{class:e.className||\"throbber\"}),a=function(){n&&(clearTimeout(n),n=null),s&&(l.remove(s),s=null)},e=(e.style&&o.css(s,e.style),e.content||'<span class=\"throb\"></span>');return l.html(s,e),t.appendChild(s),i&&(n=setTimeout(function(){a(),r&&r()},i)),{throbber:s,remove:a,update:function(t){t&&t.text&&s&&(textNode.nodeValue=t.text)}}}}),define(\"skylark-domx-transits/toggle\",[\"skylark-langx/langx\",\"skylark-domx-styler\",\"./transits\",\"./show\",\"./hide\"],function(t,i,e,r,s){return e.toggle=function(t,e,n){return(i.isInvisible(t)?r:s)(t,e,n),this}}),define(\"skylark-domx-transits/main\",[\"./transits\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./transit\",\"./bounce\",\"./emulate-transition-end\",\"./explode\",\"./fade-in\",\"./fade-out\",\"./fade\",\"./fade-toggle\",\"./hide\",\"./pulsate\",\"./shake\",\"./show\",\"./slide\",\"./slide-down\",\"./slide-toggle\",\"./slide-up\",\"./throb\",\"./toggle\"],function(t,e,n){return e.delegate([\"transit\",\"emulateTransitionEnd\",\"fadeIn\",\"fadeOut\",\"fade\",\"fadeToggle\",\"hide\",\"scrollToTop\",\"slideDown\",\"slideToggle\",\"slideUp\",\"show\",\"toggle\"],t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.transit=n.wraps.wrapper_every_act(t.transit,t),n.fn.emulateTransitionEnd=n.wraps.wrapper_every_act(t.emulateTransitionEnd,t),n.fn.show=n.wraps.wrapper_every_act(t.show,t),n.fn.hide=n.wraps.wrapper_every_act(t.hide,t),n.fn.toogle=n.wraps.wrapper_every_act(t.toogle,t),n.fn.fadeTo=n.wraps.wrapper_every_act(t.fadeTo,t),n.fn.fadeIn=n.wraps.wrapper_every_act(t.fadeIn,t),n.fn.fadeOut=n.wraps.wrapper_every_act(t.fadeOut,t),n.fn.fadeToggle=n.wraps.wrapper_every_act(t.fadeToggle,t),n.fn.slideDown=n.wraps.wrapper_every_act(t.slideDown,t),n.fn.slideToggle=n.wraps.wrapper_every_act(t.slideToggle,t),n.fn.slideUp=n.wraps.wrapper_every_act(t.slideUp,t),t}),define(\"skylark-domx-transits\",[\"skylark-domx-transits/main\"],function(t){return t}),define(\"skylark-domx-fx/bounce\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.bounce=t.bounce}),define(\"skylark-domx-fx/emulateTransitionEnd\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.emulateTransitionEnd=t.emulateTransitionEnd}),define(\"skylark-domx-fx/explode\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.explode=t.explode}),define(\"skylark-domx-fx/fadeIn\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.fadeIn=t.fadeIn}),define(\"skylark-domx-fx/fadeOut\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.fadeOut=t.fadeOut}),define(\"skylark-domx-fx/fade\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.fade=t.fade}),define(\"skylark-domx-fx/fadeToggle\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.fadeToggle=t.fadeToggle}),define(\"skylark-domx-fx/hide\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.hide=t.hide}),define(\"skylark-domx-fx/pulsate\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.pulsate=t.pulsate}),define(\"skylark-domx-fx/shake\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.shake=t.shake}),define(\"skylark-domx-fx/show\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.show=t.show}),define(\"skylark-domx-fx/slide\",[\"skylark-domx-transits\",\"./fx\"],function(t,g){return g.slide=function(t,e,n){langx.isFunction(e)&&(n=e,e={});var i,r,s,a,o,l,c,u,d,h,p=\"up\"===(f=(e=e||{}).direction||\"down\")||\"left\"===f,f=\"up\"===f||\"down\"===f,e=e.duration||g.speeds.normal,m=styler.css(t,\"position\");if(p){if(styler.isInvisible(t))return this}else styler.show(t),styler.css(t,{position:\"absolute\",visibility:\"hidden\"});return f?(i=styler.css(t,\"margin-top\"),r=styler.css(t,\"margin-bottom\"),s=styler.css(t,\"padding-top\"),a=styler.css(t,\"padding-bottom\"),o=styler.css(t,\"height\"),p?(styler.css(t,{visibility:\"visible\",overflow:\"hidden\",height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a}),animate(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:e,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:\"visible\",overflow:\"hidden\",height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a}),n&&n.apply(t)}})):(styler.css(t,{position:m,visibility:\"visible\",overflow:\"hidden\",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),animate(t,{height:o,marginTop:i,marginBottom:r,paddingTop:s,paddingBottom:a},{duration:e,complete:function(){n&&n.apply(t)}}))):(l=styler.css(t,\"margin-left\"),c=styler.css(t,\"margin-right\"),u=styler.css(t,\"padding-left\"),d=styler.css(t,\"padding-right\"),h=styler.css(t,\"width\"),p?(styler.css(t,{visibility:\"visible\",overflow:\"hidden\",width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d}),animate(t,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:e,queue:!1,complete:function(){styler.hide(t),styler.css(t,{visibility:\"visible\",overflow:\"hidden\",width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d}),n&&n.apply(t)}})):(styler.css(t,{position:m,visibility:\"visible\",overflow:\"hidden\",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),animate(t,{width:h,marginLeft:l,marginRight:c,paddingLeft:u,paddingRight:d},{duration:e,complete:function(){n&&n.apply(t)}}))),this}}),define(\"skylark-domx-fx/slideDown\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.slideDown=function(t,e,n){return slide(t,{direction:\"down\",duration:e},n)}}),define(\"skylark-domx-fx/slideToggle\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.slideToggle=function(t,e,n){return(0==geom.height(t)?slideDown:slideUp)(t,e,n),this}}),define(\"skylark-domx-fx/slideUp\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.slideUp=function(t,e,n){return slide(t,{direction:\"up\",duration:e},n)}}),define(\"skylark-domx-fx/throb\",[\"skylark-domx-noder\",\"./fx\"],function(t,e){return e.throb=t.throb}),define(\"skylark-domx-fx/toggle\",[\"skylark-domx-transits\",\"./fx\"],function(t,e){return e.toggle=function(t,e,n){return(styler.isInvisible(t)?show:hide)(t,e,n),this}}),define(\"skylark-domx-fx/main\",[\"./fx\",\"./animate\",\"./bounce\",\"./emulateTransitionEnd\",\"./explode\",\"./fadeIn\",\"./fadeOut\",\"./fade\",\"./fadeToggle\",\"./hide\",\"./pulsate\",\"./shake\",\"./show\",\"./slide\",\"./slideDown\",\"./slideToggle\",\"./slideUp\",\"./throb\",\"./toggle\"],function(t){return t}),define(\"skylark-domx-fx\",[\"skylark-domx-fx/main\"],function(t){return t}),define(\"skylark-domx/fx\",[\"skylark-domx-fx\"],function(t){return t}),define(\"skylark-domx/geom\",[\"skylark-domx-geom\"],function(t){return t}),define(\"skylark-domx-iframes/iframes\",[\"skylark-langx-ns\"],function(t){return t.attach(\"domx.iframes\")}),define(\"skylark-domx-iframes/create\",[\"skylark-domx-noder\",\"./iframes\"],function(r,t){\"use strict\";return t.create=function(t,e){var n={},i={},n=((t=t||{}).id&&(n.id=t.id),t.url&&(n.src=t.url),t.style&&(n.style=t.style),t.onload&&(n.onload=t.onload),t.onerror&&(n.onload=t.onerror),t.className&&(n.className=t.className),t.sandbox&&(i.sandbox=t.sandbox),t.frameBorder&&(i.frameBorder=t.frameBorder),t.name&&(i.name=t.name),r.create(\"iframe\",n,i,e));return t.contentWindowName&&(n.contentWindow.name=t.contentWindowName),n}}),define(\"skylark-domx-iframes/hook-sizing\",[\"skylark-domx-eventer\",\"./iframes\"],function(t,e){\"use strict\";return e.hookSizing=function(e){t.on(window,\"message\",function(t){t=t||window.event,e.style.height=+t.data.height+2+\"px\"})}}),define(\"skylark-domx-iframes/load-real\",[\"skylark-domx-noder\",\"skylark-domx-data\",\"./iframes\",\"./hook-sizing\"],function(i,r,t,e){return t.loadReal=function(t,e){e=e||{};var t=i.clone(t),n=e.url;n=(n=n||r.attr(t,e.urlAttrName||\"data-url\")).split(\"&\")[0],r.prop(t,\"src\",n),r.prop(t,\"_src\",n),i.replace(t,ifame)}}),define(\"skylark-domx-iframes/lazy-load\",[\"skylark-domx-eventer\",\"skylark-domx-data\",\"skylark-domx-geom\",\"./iframes\",\"./load-real\"],function(t,n,i,e,r){var s;function a(){s||(s=[],t.on(window,\"scroll\",function(){for(var t=0,e=[],t=0;t<s.length;t++)i.inview(s[t],400)&&e.unshift({iframe:s[t],i:t});for(t=e.length-1;0<=t;t--)s.splice(e[t].i,1),r(e[t].iframe)}))}return e.lazyLoad=function(t,e){a(),(e=e||{}).url&&n.attr(t,e.urlAttrName||\"data-url\",e.url),e.holdingUrl&&n.prop(t,\"src\",e.holdingUrl),s.push(t)}}),define(\"skylark-domx-iframes/replace\",[\"skylark-langx-urls/get-query\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"./iframes\",\"./create\",\"./load-real\",\"./lazy-load\"],function(r,s,a,o,t,l,c,u){\"use strict\";return t.replace=function(t,e){e=e||{},l({className:t.className,id:t.id,style:{border:\"1px solid #aaa\"}});var n=e.url||t.href,i=e.size||r(t.search),e=e.holdingUrl;o.css(iframe,\"width\",i.width||\"100%\"),o.css(iframe,\"minHeight\",i.height||\"300px\"),i.height&&o.css(iframe,\"maxHeight\",i.height),a.inview(t,100)?c(iframe,{url:n}):u(iframe,{url:n,holdingUrl:e}),s.replace(iframe,t)}}),define(\"skylark-domx-iframes/main\",[\"./iframes\",\"./create\",\"./lazy-load\",\"./load-real\",\"./replace\"],function(){}),define(\"skylark-domx-iframes\",[\"skylark-domx-iframes/main\"],function(t){return t}),define(\"skylark-domx/iframes\",[\"skylark-domx-iframes\"],function(t){return t}),define(\"skylark-domx-lists/lists\",[\"skylark-langx-ns\",\"skylark-domx-query\",\"skylark-domx-data\",\"skylark-domx-geom\",\"skylark-domx-finder\",\"skylark-domx-noder\",\"skylark-domx-styler\"],function(t){return t.attach(\"domx.lists\")}),define(\"skylark-domx-lists/multitier\",[\"skylark-langx\",\"skylark-domx-query\",\"./lists\"],function(p,f,t){\"use strict\";return t.multitier=function(t,i){var r=(i=p.mixin({classes:{active:\"active\",collapse:\"collapse\",in:\"in\"},selectors:{item:\"li\",sublist:\"ul\",hasSublist:\":has(ul)\",handler:\" > a\"},mode:\"\",levels:2,togglable:!1,multiExpand:!1},i,!0)).selectors.item,t=f(r,t),s=i.classes.active,e=\".\"+s,a=(i.mode,i.selectors.sublist),o=i.togglable,l=i.multiExpand,n=i.selectors.handler,c=i.classes.collapse,u=i.classes.in,d=i.show||function(t){t.addClass(u)},h=i.hide||function(t){t.addClass(c).removeClass(u)};i.toggle,t.find(n).on(\"click.multitier\",function(t){t.preventDefault();let e,n=f(this).closest(r);l||(e=n.siblings().removeClass(s).children(a))&&h(e);t=n.hasClass(s);t&&!o||(e=n.children(i.selectors.sublist),(t?(n.removeClass(s),h):(n.addClass(s),d))(e))}),h(t.has(a).children(a)),d(t.filter(e).has(a).children(a))}}),define(\"skylark-domx-lists/main\",[\"./lists\",\"./multitier\"],function(t){return t}),define(\"skylark-domx-lists\",[\"skylark-domx-lists/main\"],function(t){return t}),define(\"skylark-domx/lists\",[\"skylark-domx-lists\"],function(t){return t}),define(\"skylark-domx-medias/medias\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-data\"],function(t,e,n){function i(){return i}return e.mixin(i,{controls:function(t,e){if(void 0===e)return t.controls;t.controls=e},currentTime:function(t,e){if(void 0===e)return t.currentTime;t.currentTime=e},duration:function(t){return t.duration},ended:function(t){return t.ended},muted:function(t,e){if(void 0===e)return t.muted;t.muted=e},paused:function(t){return t.paused},played:function(t){return t.played},volume:function(t,e){if(void 0===e)return t.volume;t.volume=e},load:function(t,e){return e&&(t.src=e),t.load()},play:function(t){return t.play()},stop:function(t){return t.stop()},pause:function(t){t.pause()}}),t.attach(\"domx.medias\",i)}),define(\"skylark-domx-medias/main\",[\"skylark-domx-velm\",\"skylark-domx-query\",\"./medias\"],function(t,e,n){return t.delegate([\"controls\",\"currentTime\",\"duration\",\"ended\",\"muted\",\"paused\",\"played\",\"volume\",\"load\",\"play\",\"stop\",\"pause\"],n,{}),n}),define(\"skylark-domx-medias\",[\"skylark-domx-medias/main\"],function(t){return t}),define(\"skylark-domx/medias\",[\"skylark-domx-medias\"],function(t){return t}),define(\"skylark-domx/noder\",[\"skylark-domx-noder\"],function(t){return t}),define(\"skylark-domx/styler\",[\"skylark-domx-styler\"],function(t){return t}),define(\"skylark-domx/query\",[\"skylark-domx-query\",\"./data\",\"./eventer\",\"./fx\",\"./geom\",\"./styler\"],function(t){return t}),define(\"skylark-domx-transforms/transforms\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-data\",\"skylark-domx-styler\"],function(t,r,e,n,s){var a=e.normalizeCssProperty(\"transform\");function i(t,e){return 0<t&&-e<t?e:t<0&&t<e?-e:0}function o(t,e){r=e.radian,n=e.y,e=e.x,i=Math.cos(r),r=Math.sin(r);var n,i,r={M11:i*n,M12:-r*e,M21:r*n,M22:i*e};s.css(t,a,\"matrix(\"+r.M11.toFixed(16)+\",\"+r.M21.toFixed(16)+\",\"+r.M12.toFixed(16)+\",\"+r.M22.toFixed(16)+\", 0, 0)\")}function l(t,e){if(!e)return(e=n.data(t,\"transform\")||{}).radian=e.radian||0,e.x=e.x||1,e.y=e.y||1,e.zoom=e.zoom||1,e;n.data(t,\"transform\",e)}var c={vertical:function(t){t.radian=Math.PI-t.radian,t.y*=-1},horizontal:function(t){t.radian=Math.PI-t.radian,t.x*=-1},rotate:function(t,e){t.radian=e*Math.PI/180},left:function(t){t.radian-=Math.PI/2},right:function(t){t.radian+=Math.PI/2},scale:function(t,e){var n=i(t.y,e),e=i(t.x,e);n&&e&&(t.y+=n,t.x+=e)},zoomin:function(t){c.scale(t,.1)},zoomout:function(t){c.scale(t,-.1)}};function u(){return u}return[\"vertical\",\"horizontal\",\"rotate\",\"left\",\"right\",\"scale\",\"zoom\",\"zoomin\",\"zoomout\"].forEach(function(t){var i;u[t]=(i=c[t],function(){var t=r.makeArray(arguments),e=t.shift(),n=l(e);t.unshift(n),i.apply(this,t),o(e,n),l(e,n)})}),r.mixin(u,{reset:function(t){var e={x:1,y:1,radian:0};o(t,e),l(t,e)},matrix:function(t){var e=\"\";do{var n=s.css(t,\"transform\")}while(n&&\"none\"!==n&&(e=n+\" \"+e),t=t.parentElement);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}}),t.attach(\"domx.transforms\",u)}),define(\"skylark-domx-transforms/main\",[\"./transforms\"],function(t){return t}),define(\"skylark-domx-transforms\",[\"skylark-domx-transforms/main\"],function(t){return t}),define(\"skylark-domx/transforms\",[\"skylark-domx-transforms\"],function(t){return t}),define(\"skylark-domx/transits\",[\"skylark-domx-transits\"],function(t){return t}),define(\"skylark-domx/velm\",[\"skylark-domx-velm\",\"./data\",\"./eventer\",\"./fx\",\"./geom\",\"./styler\"],function(t){return t}),define(\"skylark-domx/main\",[\"./animates\",\"./browser\",\"./css\",\"./data\",\"./eventer\",\"./finder\",\"./fx\",\"./geom\",\"./iframes\",\"./lists\",\"./medias\",\"./noder\",\"./query\",\"./styler\",\"./transforms\",\"./transits\",\"./velm\"],function(t,e,n,i,r,s,a,o,l,c,u,d,h,p,f,m,g){return{animates:t,browser:e,css:n,data:i,eventer:r,finder:s,geom:o,lists:c,medias:u,noder:d,iframes:l,query:h,styler:p,transforms:f,transits:m,velm:g}}),define(\"skylark-domx\",[\"skylark-domx/main\"],function(t){return t}),define(\"skylark-domx-files/files\",[\"skylark-langx/skylark\"],function(t){function e(){return e}return t.attach(\"domx.files\",e)}),define(\"skylark-io-diskfs/diskfs\",[\"skylark-langx/skylark\"],function(t){function e(){return e}return t.attach(\"storages.diskfs\",e)}),define(\"skylark-io-diskfs/webentry\",[\"skylark-langx-arrays\",\"skylark-langx-async/deferred\",\"./diskfs\"],function(n,s,t){var i=Array.prototype.concat;function r(e,n){function i(t){r.reject(t)}var r=new s;return n=n||\"\",e.isFile?e.file(function(t){t.relativePath=n,r.resolve(t)},i):e.isDirectory?e.createReader().readEntries(function(t){a(t,n+e.name+\"/\").then(function(t){r.resolve(t)}).catch(i)},i):r.resolve([]),r.promise}function a(t,e){return s.all(n.map(t,function(t){return r(t,e)})).then(function(){return i.apply([],arguments)})}return t.webentry={one:r,all:a}}),define(\"skylark-domx-files/dropzone\",[\"skylark-langx/arrays\",\"skylark-langx/deferred\",\"skylark-domx-styler\",\"skylark-domx-eventer\",\"skylark-domx-velm\",\"skylark-domx-query\",\"skylark-io-diskfs/webentry\",\"./files\"],function(s,t,a,o,e,n,l,i){function r(n,t){var i=(t=t||{}).hoverClass||\"hover\",r=t.dropped,e=0;return o.on(n,\"dragenter\",function(t){t.dataTransfer&&-1<t.dataTransfer.types.indexOf(\"Files\")&&(o.stop(t),e++,a.addClass(n,i))}),o.on(n,\"dragover\",function(t){t.dataTransfer&&-1<t.dataTransfer.types.indexOf(\"Files\")&&o.stop(t)}),o.on(n,\"dragleave\",function(t){t.dataTransfer&&-1<t.dataTransfer.types.indexOf(\"Files\")&&0==--e&&a.removeClass(n,i)}),o.on(n,\"drop\",function(t){var e;t.dataTransfer&&-1<t.dataTransfer.types.indexOf(\"Files\")&&(a.removeClass(n,i),o.stop(t),r)&&((e=t.dataTransfer.items)&&e.length&&(e[0].webkitGetAsEntry||e[0].getAsEntry)?l.all(s.map(e,function(t){return t.webkitGetAsEntry?t.webkitGetAsEntry():t.getAsEntry()})).then(r):r(t.dataTransfer.files))}),this}return i.dropzone=r,e.delegate([\"dropzone\"],i),n.fn.dropzone=n.wraps.wrapper_every_act(i.dropzone,i),r}),define(\"skylark-domx-files/pastezone\",[\"skylark-langx/objects\",\"skylark-domx-eventer\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./files\"],function(r,n,t,e,i){function s(t,e){e=e||{};var i=e.pasted;return n.on(t,\"paste\",function(t){var t=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n=[];t&&t.length&&r.each(t,function(t,e){e=e.getAsFile&&e.getAsFile();e&&n.push(e)}),i&&n.length&&i(n)}),this}return i.pastezone=s,t.delegate([\"pastezone\"],i),e.fn.pastezone=e.wraps.wrapper_every_act(i.pastezone,i),s}),define(\"skylark-io-diskfs/select\",[\"./diskfs\"],function(t){var o;return t.select=function(t){var e=(t=t||{}).directory||!1,n=t.multiple||!1,i=t.accept||\"\",r=t.title||\"\",s=t.picked;function a(t){for(var e=t.length;e--;)t[e].size>1/0&&t.splice(e,1);s(t)}o||((t=o=document.createElement(\"input\")).type=\"file\",t.style.position=\"fixed\",t.style.left=0,t.style.top=0,t.style.opacity=.001,document.body.appendChild(t)),o.onchange=function(t){var e=t.target.webkitEntries||t.target.entries;e&&e.length?webentry.all(e).then(function(t){a(t)}):a(Array.prototype.slice.call(t.target.files)),o.value=\"\",o.onchange=null},o.multiple=n,o.accept=i,o.title=r,o.webkitdirectory=e,o.click()}}),define(\"skylark-domx-files/picker\",[\"skylark-langx/objects\",\"skylark-domx-eventer\",\"skylark-domx-velm\",\"skylark-domx-query\",\"skylark-io-diskfs/select\",\"./files\"],function(t,n,e,i,r,s){function a(t,e){return n.on(t,\"click\",function(t){t.preventDefault(),r(e)}),this}return s.picker=a,e.delegate([\"picker\"],s),i.fn.picker=i.wraps.wrapper_every_act(s.picker,s),a}),define(\"skylark-domx-files/main\",[\"./files\",\"./dropzone\",\"./pastezone\",\"./picker\"],function(t){return t}),define(\"skylark-domx-files\",[\"skylark-domx-files/main\"],function(t){return t}),define(\"skylark-domx-images/images\",[\"skylark-langx/skylark\"],function(t){return t.attach(\"domx.images\",function t(){return t})}),define(\"skylark-domx-images/is-completed\",[\"./images\"],function(t){return t.isCompleted=function(t){return t.complete&&void 0!==t.naturalWidth}}),define(\"skylark-domx-images/is-loaded\",[\"./images\"],function(t){return t.isLoaded=function(t){return t.complete&&0!==t.naturalWidth}}),define(\"skylark-domx-images/watch\",[\"skylark-langx/langx\",\"skylark-domx-eventer\",\"./images\",\"./is-completed\",\"./is-loaded\"],function(t,c,e,u,d){return e.watch=function(n){var i=(n=t.isArray(n)?n:[n]).length,r=0,s=0,a=0,o=new t.Deferred;function l(){o.resolve({total:i,successed:s,failered:a,imgs:n})}function e(t,e){r++,e?s++:a++,o.progress({img:t,isLoaded:e,progressed:r,total:i,imgs:n}),r==i&&l()}return t.defer(function(){n.length?n.forEach(function(t){u(t)?e(t,d(t)):c.on(t,{load:function(){e(t,!0)},error:function(){e(t,!1)}})}):l()}),o.promise.totalCount=i,o.promise}}),define(\"skylark-domx-images/loaded\",[\"skylark-domx-finder\",\"./images\",\"./watch\"],function(o,t,l){return t.loaded=function(t,e){var n=[];function i(t){var e,t=/url\\((['\"])?(.*?)\\1\\)/gi.exec(styler.css(t,\"background-image\")),t=t&&t[2];t&&((e=new Image).src=t,n.push(e))}if(e=e||{},\"IMG\"==t.nodeName)n.push(t);else{for(var r=o.findAll(t,\"img\"),s=0;s<r.length;s++)n.push(r[s]);if(!0===e.background)i(t);else if(\"string\"==typeof e.background)for(var a=o.findAll(t,e.background),s=0;s<a.length;s++)i(a[s])}return l(n)}}),define(\"skylark-domx-images/preload\",[\"skylark-langx/langx\",\"./images\",\"./watch\"],function(i,t,r){return t.preload=function(t,e){i.isString(t)&&(t=[t]);var n=[];return t.forEach(function(t){var e=new Image;e.src=t,n.push(e)}),r(n)}}),define(\"skylark-domx-images/transform\",[\"skylark-domx-transforms\",\"./images\"],function(e,t){function n(t,e){}return[\"vertical\",\"horizontal\",\"rotate\",\"left\",\"right\",\"scale\",\"zoom\",\"zoomin\",\"zoomout\",\"reset\"].forEach(function(t){n[t]=e[t]}),t.transform=n}),define(\"skylark-domx-images/viewer\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"skylark-domx-transforms\",\"./images\"],function(u,d,h,p,f,t){return t.viewer=function(t,e){var n,i={},r=h.clientSize(t),s=e.loaded;function a(){p.css(n,{top:(r.height-n.offsetHeight)/2+\"px\",left:(r.width-n.offsetWidth)/2+\"px\"}),f.reset(n),p.css(n,{visibility:\"visible\"}),s&&s()}function o(){}function l(t){n.style.visibility=\"hidden\",n.src=t}e.failered,\"relative\"!=(i=p.css(t,[\"position\",\"overflow\"])).position&&\"absolute\"!=i.position&&p.css(t,\"position\",\"relative\"),p.css(t,\"overflow\",\"hidden\"),n=new Image,p.css(n,{position:\"absolute\",border:0,padding:0,margin:0,width:\"auto\",height:\"auto\",visibility:\"hidden\"}),n.onload=a,n.onerror=o,d.append(t,n),e.url&&l(e.url);var c={load:l,dispose:function(){d.remove(n),p.css(t,i),n=n.onload=n.onerror=null}};return[\"vertical\",\"horizontal\",\"rotate\",\"left\",\"right\",\"scale\",\"zoom\",\"zoomin\",\"zoomout\",\"reset\"].forEach(function(e){c[e]=function(){var t=u.makeArray(arguments);t.unshift(n),f[e].apply(null,t)}}),c}}),define(\"skylark-domx-images/main\",[\"skylark-domx-query\",\"skylark-domx-velm\",\"./images\",\"./is-completed\",\"./is-loaded\",\"./loaded\",\"./preload\",\"./transform\",\"./viewer\",\"./watch\"],function(t,e,n,i,r,s,a,o,l,c){return e.delegate([\"imageIsCompleted\",\"imageIsLoaded\",\"imageLoaded\",\"imageViewer\"],n,{imageIsCompleted:\"isCompleted\",imageIsLoaded:\"isLoaded\",imageLoaded:\"loaded\",imageViewer:\"viewer\"}),n}),define(\"skylark-domx-images\",[\"skylark-domx-images/main\"],function(t){return t}),define(\"skylark-domx-i18n/i18n\",[\"skylark-langx/skylark\",\"skylark-domx-query\",\"skylark-domx-data\",\"skylark-domx-styler\"],function(t){return t.attach(\"domx.i18n\",{escape:function(t){return\"string\"==typeof t?t.replace(/\\[\\[/g,\"&lsqb;&lsqb;\").replace(/\\]\\]/g,\"&rsqb;&rsqb;\"):t},unescape:function(t){return\"string\"==typeof t?t.replace(/&lsqb;|\\\\\\[/g,\"[\").replace(/&rsqb;|\\\\\\]/g,\"]\"):t},compile:function(){return\"[[\"+Array.prototype.slice.call(arguments,0).map(function(t){return String(t).replace(/%/g,\"&#37;\").replace(/,/g,\"&#44;\")}).join(\", \")+\"]]\"}})}),define(\"skylark-domx-i18n/Translator\",[\"skylark-langx/langx\",\"./i18n\"],function(e,t){var i=Object.freeze({amp:\"&\",gt:\">\",lt:\"<\",quot:'\"',apos:\"'\",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,\"OElig;\":338,\"oelig;\":339,\"Scaron;\":352,\"scaron;\":353,\"Yuml;\":376,\"fnof;\":402,\"circ;\":710,\"tilde;\":732,\"Alpha;\":913,\"Beta;\":914,\"Gamma;\":915,\"Delta;\":916,\"Epsilon;\":917,\"Zeta;\":918,\"Eta;\":919,\"Theta;\":920,\"Iota;\":921,\"Kappa;\":922,\"Lambda;\":923,\"Mu;\":924,\"Nu;\":925,\"Xi;\":926,\"Omicron;\":927,\"Pi;\":928,\"Rho;\":929,\"Sigma;\":931,\"Tau;\":932,\"Upsilon;\":933,\"Phi;\":934,\"Chi;\":935,\"Psi;\":936,\"Omega;\":937,\"alpha;\":945,\"beta;\":946,\"gamma;\":947,\"delta;\":948,\"epsilon;\":949,\"zeta;\":950,\"eta;\":951,\"theta;\":952,\"iota;\":953,\"kappa;\":954,\"lambda;\":955,\"mu;\":956,\"nu;\":957,\"xi;\":958,\"omicron;\":959,\"pi;\":960,\"rho;\":961,\"sigmaf;\":962,\"sigma;\":963,\"tau;\":964,\"upsilon;\":965,\"phi;\":966,\"chi;\":967,\"psi;\":968,\"omega;\":969,\"thetasym;\":977,\"upsih;\":978,\"piv;\":982,\"ensp;\":8194,\"emsp;\":8195,\"thinsp;\":8201,\"zwnj;\":8204,\"zwj;\":8205,\"lrm;\":8206,\"rlm;\":8207,\"ndash;\":8211,\"mdash;\":8212,\"lsquo;\":8216,\"rsquo;\":8217,\"sbquo;\":8218,\"ldquo;\":8220,\"rdquo;\":8221,\"bdquo;\":8222,\"dagger;\":8224,\"Dagger;\":8225,\"bull;\":8226,\"hellip;\":8230,\"permil;\":8240,\"prime;\":8242,\"Prime;\":8243,\"lsaquo;\":8249,\"rsaquo;\":8250,\"oline;\":8254,\"frasl;\":8260,\"euro;\":8364,\"image;\":8465,\"weierp;\":8472,\"real;\":8476,\"trade;\":8482,\"alefsym;\":8501,\"larr;\":8592,\"uarr;\":8593,\"rarr;\":8594,\"darr;\":8595,\"harr;\":8596,\"crarr;\":8629,\"lArr;\":8656,\"uArr;\":8657,\"rArr;\":8658,\"dArr;\":8659,\"hArr;\":8660,\"forall;\":8704,\"part;\":8706,\"exist;\":8707,\"empty;\":8709,\"nabla;\":8711,\"isin;\":8712,\"notin;\":8713,\"ni;\":8715,\"prod;\":8719,\"sum;\":8721,\"minus;\":8722,\"lowast;\":8727,\"radic;\":8730,\"prop;\":8733,\"infin;\":8734,\"ang;\":8736,\"and;\":8743,\"or;\":8744,\"cap;\":8745,\"cup;\":8746,\"int;\":8747,\"there4;\":8756,\"sim;\":8764,\"cong;\":8773,\"asymp;\":8776,\"ne;\":8800,\"equiv;\":8801,\"le;\":8804,\"ge;\":8805,\"sub;\":8834,\"sup;\":8835,\"nsub;\":8836,\"sube;\":8838,\"supe;\":8839,\"oplus;\":8853,\"otimes;\":8855,\"perp;\":8869,\"sdot;\":8901,\"lceil;\":8968,\"rceil;\":8969,\"lfloor;\":8970,\"rfloor;\":8971,\"lang;\":9001,\"rang;\":9002,\"loz;\":9674,\"spades;\":9824,\"clubs;\":9827,\"hearts;\":9829,\"diams;\":9830});function o(t){return e.escapeHTML((t=String(t).replace(/[\\s\\xa0]+/g,\" \").replace(/^\\s+|\\s+$/g,\"\"),String(t).replace(/&#(\\d+);?/g,function(t,e){return String.fromCharCode(e)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(t,e){return String.fromCharCode(parseInt(e,16))}).replace(/&([^;\\W]+;?)/g,function(t,e){var n=e.replace(/;$/,\"\"),e=i[e]||e.match(/;$/)&&i[n];return\"number\"==typeof e?String.fromCharCode(e):\"string\"==typeof e?e:t})))}function l(){console.warn.apply(console,arguments)}Object.assign||jQuery.extend;function r(e,t){if(!e)throw new TypeError(\"Parameter `language` must be a language string. Received \"+e+(\"\"===e?\"(empty string)\":\"\"));this.modules=Object.keys(r.moduleFactories).map(function(t){return[t,(0,r.moduleFactories[t])(e)]}).reduce(function(t,e){var n=e[0],e=e[1];return t[n]=e,t},{}),this.lang=e,this.translations={},this.load=t}function s(t){var s=[];return function t(e){if(3===e.nodeType)s.push(e);else for(var n=0,i=e.childNodes,r=i.length;n<r;n+=1)t(i[n])}(t),s}return r.prototype.translate=function(t){var e=\"a-zA-Z0-9\\\\-_.\\\\/\",n=new RegExp(\"[\"+e+\"]\"),i=new RegExp(\"[^\"+e+\"\\\\]]\"),r=0,s=0,a=t.length,o=[],l=!1;for(r=t.indexOf(\"[[\",r);r+2<=a&&-1!==r;){o.push(t.slice(s,r));for(var s=r+=2,l=!0,c=0,u=!1,d=!1,h=!1,p=!1;r+2<=a;)if(f=t[r],m=t[r+1],!u&&n.test(f))u=!0,r+=1;else if(u&&!d&&\":\"===f)d=!0,r+=1;else if(d&&!h&&n.test(f))h=!0,r+=1;else if(h&&!p&&\",\"===f)p=!0,r+=1;else if(u&&d&&h&&p||!i.test(f))if(\"[\"===f&&\"[\"===m)c+=1,r+=2;else if(\"]\"===f&&\"]\"===m){if(0===c){var f=t.slice(s,r),m=function(t){for(var e=t.length,n=[],i=0,r=0,s=0;i+2<=e;)\"[\"===t[i]&&\"[\"===t[i+1]?(s+=1,i+=1):\"]\"===t[i]&&\"]\"===t[i+1]?(--s,i+=1):0===s&&\",\"===t[i]&&\"\\\\\"!==t[i-1]&&(n.push(t.slice(r,i).trim()),r=i+=1),i+=1;return n.push(t.slice(r,i+1).trim()),n}(f),g=m[0],m=m.slice(1),y=\"\";m&&m.length&&(y=this.translate(f)),o.push(this.translateKey(g,m,y)),s=r+=2,l=!1;break}--c,r+=2}else r+=1;else{if(r+=1,s-=2,l=!1,!(0<c))break;--c}r=t.indexOf(\"[[\",r)}e=t.slice(s);return l&&(e=this.translate(e)),o.push(e),Promise.all(o).then(function(t){return t.join(\"\")})},r.prototype.translateKey=function(n,i,r){var s=this,t=n.split(\":\",2),e=t[0],a=t[1];return s.modules[e]?Promise.resolve(s.modules[e](a,i)):e&&!a?(l('Missing key in translation token \"'+n+'\"'),Promise.resolve(\"[[\"+e+\"]]\")):this.getTranslation(e,a).then(function(e){var t;return e?(t=i.map(function(t){return s.translate(o(t))}),Promise.all(t).then(function(t){var n=e;return t.forEach(function(t,e){t=t.replace(/%(?=\\d)/g,\"&#37;\").replace(/\\\\,/g,\"&#44;\");n=n.replace(new RegExp(\"%\"+(e+1),\"g\"),t)}),n})):(l('Missing translation \"'+n+'\"'),r||a)})},r.prototype.getTranslation=function(t,e){t=t?(this.translations[t]=this.translations[t]||this.load(this.lang,t).catch(function(){return{}}),this.translations[t]):(l(\"[translator] Parameter `namespace` is \"+t+(\"\"===t?\"(empty string)\":\"\")),Promise.resolve({}));return e?t.then(function(t){return t&&t[e]}):t},r.prototype.translateInPlace=function(i,t){t=t||[\"placeholder\",\"title\"];var n=s(i),e=n.map(function(t){return t.nodeValue}).join(\"  ||  \"),r=t.reduce(function(t,e){var n=Array.prototype.map.call(i.querySelectorAll(\"[\"+e+'*=\"[[\"]'),function(t){return[e,t]});return t.concat(n)},[]),t=r.map(function(t){return t[1].getAttribute(t[0])}).join(\"  ||  \");return Promise.all([this.translate(e),this.translate(t)]).then(function(t){var e=t[0],t=t[1];e&&e.split(\"  ||  \").forEach(function(t,e){$(n[e]).replaceWith(t)}),t&&t.split(\"  ||  \").forEach(function(t,e){r[e][1].setAttribute(r[e][0],t)})})},r.getLanguage=function(){return\"en-GB\"},r.create=function(t){return t=t||r.getLanguage(),r.cache[t]=r.cache[t]||new r(t),r.cache[t]},r.cache={},r.registerModule=function(e,n){r.moduleFactories[e]=n,Object.keys(r.cache).forEach(function(t){t=r.cache[t];t.modules[e]=n(t.lang)})},r.moduleFactories={},r.removePatterns=function(t){for(var e,n=t.length,i=0,r=0,s=0,a=\"\";i<n;)\"[[\"===(e=t.slice(i,i+2))?(0===s&&(a+=t.slice(r,i)),s+=1,i+=2):\"]]\"===e?(i+=2,0===--s&&(r=i)):i+=1;return a+=t.slice(r,i)},t.Translator=r}),define(\"skylark-domx-i18n/translate\",[\"./i18n\",\"./Translator\"],function(t,r){return t.translate=function(t,e,n){var i=n,n=e;return\"function\"==typeof e&&(i=e,n=null),(\"string\"==typeof t||t instanceof String)&&\"\"!==t?r.create(n).translate(t).then(function(t){return i&&setTimeout(i,0,t),t},function(t){console.warn(\"Translation failed: \"+t.stack)}):i(\"\")}}),define(\"skylark-domx-i18n/prepareDom\",[\"skylark-domx-query\",\"./i18n\",\"./translate\"],function(e,t,n){return t.prepareDOM=function(){n(\"[[language:dir]]\",function(t){t&&!e(\"html\").attr(\"data-dir\")&&e(\"html\").css(\"direction\",t).attr(\"data-dir\",t)})}}),define(\"skylark-domx-i18n/addTranslation\",[\"skylark-domx-query\",\"./i18n\",\"./Translator\"],function(t,e,i){return e.addTranslation=function(t,e,n){i.create(t).getTranslation(e).then(function(t){assign(t,n)})}}),define(\"skylark-domx-i18n/getTranslations\",[\"skylark-domx-query\",\"./i18n\",\"./Translator\"],function(t,e,i){return e.getTranslations=function(t,e,n){n=n||function(){},i.create(t).getTranslation(e).then(n)}}),define(\"skylark-domx-i18n/main\",[\"./i18n\",\"./Translator\",\"./prepareDom\",\"./translate\",\"./addTranslation\",\"./getTranslations\"],function(t){return t}),define(\"skylark-domx-i18n\",[\"skylark-domx-i18n/main\"],function(t){return t}),define(\"skylark-domx-plugins-base/plugins\",[\"skylark-langx-ns\"],function(t){\"use strict\";return t.attach(\"domx.plugins\",{pluginKlasses:{},shortcuts:{}})}),define(\"skylark-domx-plugins-base/plugin\",[\"skylark-langx-ns\",\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-funcs\",\"skylark-langx-events/Emitter\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-eventer\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"skylark-domx-fx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-domx\",\"./plugins\"],function(t,s,o,e,a,n,i,r,l,c,u,d,h,p,f,m){\"use strict\";Array.prototype.slice,Array.prototype.concat;var g=a.inherit({klassName:\"Plugin\",_domx:f,_construct:function(t,e){this._elm=t,this._initOptions(e)},_initOptions:function(t){var e,n=this.constructor,i=n.cache=n.hasOwnProperty(\"cache\")?n.cache:{};if(!(s=i.defaults)){var r=[];do{if(r.unshift(n),n===g)break;n=(e=n).hasOwnProperty(\"superclass\")?e.superclass:Object.getPrototypeOf(e)}while(n);for(var s=i.defaults={},a=0;a<r.length;a++)(n=r[a]).prototype.hasOwnProperty(\"options\")&&o.mixin(s,n.prototype.options,!0),n.hasOwnProperty(\"options\")&&o.mixin(s,n.options,!0)}return Object.defineProperty(this,\"options\",{value:o.mixin({},s,t,!0)}),this.options},destroy:function(){this._destroy(),this.unlistenTo(),i.removeData(this._elm,this.pluginName)},_destroy:e.noop,_delay:function(t,e){var n=this;return setTimeout(function(){return(\"string\"==typeof t?n[t]:t).apply(n,arguments)},e||0)},elmx:function(t){return t?p(t):(this._velm||(this._velm=p(this._elm)),this._velm)},$:function(t){return t?h(t,this._elm):(this._$elm||(this._$elm=h(this._elm)),this._$elm)},option:function(t,e){var n,i,r,s=t;if(0===arguments.length)return o.mixin({},this.options);if(\"string\"==typeof t)if(s={},t=(n=t.split(\".\")).shift(),n.length){for(i=s[t]=o.mixin({},this.options[t]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=e}return this._setOptions(s),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this},getUID:function(t){for(t=t||\"plugin\";t+=~~(1e6*Math.random()),document.getElementById(t););return t},elm:function(){return this._elm},ensureListenedEmitter:function(t){return t.on?t:h(t)},listenTo:function(t,e,n,i,r){return(s.isString(t)||s.isArray(t)||s.isPlainObject(t))&&(r=i,i=n,n=e,e=t,t=this._elm),a.prototype.listenTo.call(this,t,e,n,i,r)},unlistenTo:function(t,e,n){return(s.isString(t)||s.isArray(t)||s.isPlainObject(t))&&(n=e,e=t,t=this._elm),a.prototype.unlistenTo.call(this,t,e,n)}});return m.Plugin=g}),define(\"skylark-domx-plugins-base/instantiate\",[\"skylark-domx-data\",\"./plugins\",\"./plugin\"],function(u,t,e){\"use strict\";var d=t.pluginKlasses;function n(t,e,n,i,r,s,a,o){var l=e.split(\":\"),c=l[1],l=(e=l[0],u.data(t,c=c||e));if(\"instance\"!==n)if(\"destroy\"===n){if(!l)throw new Error(\"The plugin instance is not existed\");l.destroy(),l=void 0}else if(l)n&&l.reset(n);else{if(void 0!==n&&\"object\"!=typeof n)throw new Error(\"The options must be a plain object\");l=new d[e](t,n,i,r,s,a,o);u.data(t,c,l)}return l}return e.instantiate=function(t,e){return n(t,this.prototype.pluginName,e)},t.instantiate=n}),define(\"skylark-domx-plugins-base/shortcutter\",[\"skylark-langx-types\",\"./plugins\",\"./instantiate\"],function(a,o,l){\"use strict\";var c=Array.prototype.slice;return o.shortcutter=function(r,s){return function(t,e){var n=l(t,r,\"instance\");if(\"instance\"===e)return n||null;if(!n){var i=c.call(arguments,2);if(i.unshift(t,r,\"object\"==typeof e&&e||{}),n=l.apply(o,i),\"string\"!=typeof e)return this}if(e){t=c.call(arguments,1);if(s)return s.apply(n,t);if(\"string\"==typeof e){i=e;if(!n)throw new Error(\"cannot call methods on \"+r+\" prior to initialization; attempted to call method '\"+i+\"'\");if(a.isFunction(n[i])&&\"_\"!==i.charAt(0))return t=c.call(t,1),(e=n[i].apply(n,t))==n?void 0:e;throw new Error(\"no such method '\"+i+\"' for \"+r+\" plugin instance\")}}}}}),define(\"skylark-domx-plugins-base/register\",[\"skylark-langx-types\",\"skylark-domx-query\",\"skylark-domx-velm\",\"./plugins\",\"./shortcutter\"],function(a,o,l,t,c){\"use strict\";var u=Array.prototype.slice,d=t.pluginKlasses,h=t.shortcuts;return t.register=function(t,e,n,i){var r,s=t.prototype.pluginName;d[s]=t,e&&(n&&a.isFunction(n)&&(i=n,n=null),r=h[e]=c(s=n?s+\":\"+n:s,i),o.fn[e]=function(t){var e,n=this;return this.length||\"instance\"!==t?(e=u.call(arguments),this.each(function(){var t=u.call(e),t=(t.unshift(this),r.apply(void 0,t));void 0!==t&&(n=t)})):n=void 0,n},l.partial(e,function(t){t=r(this._elm,t);return t=void 0===t?this:t}))}}),define(\"skylark-domx-plugins-base/main\",[\"skylark-domx-query\",\"skylark-domx-velm\",\"./plugins\",\"./instantiate\",\"./plugin\",\"./register\",\"./shortcutter\"],function(t,e,n,s,i,r,a){\"use strict\";var o=Array.prototype.slice;return t.fn.plugin=function(t,e){var n,i=o.call(arguments,1),r=this;return this.each(function(){n=s.apply(r,[this,t].concat(i))}),n},e.partial(\"plugin\",function(t,e){var n=o.call(arguments,1);return s.apply(this,[this._elm,t].concat(n))}),n}),define(\"skylark-domx-plugins-base\",[\"skylark-domx-plugins-base/main\"],function(t){return t}),define(\"skylark-domx-plugins-colors/colors\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.colores={}}),define(\"skylark-domx-plugins-popups/popups\",[\"skylark-langx-ns\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base/plugins\"],function(t,l,r,e){var s=[];return e.popups={around:function(t){var e=(n=l.size(popup)).width,n=n.height,i=l.height(t),r=t.ownerDocument,s=(a=r.documentElement).clientWidth+l.scrollLeft(r),a=a.clientHeight+l.scrollTop(r),t=(r=l.pagePosition(t)).left,o=r.top;return o+=i,t-=Math.min(t,s<t+e&&e<s?Math.abs(t+e-s):0),{top:o-=Math.min(o,a<o+n&&n<a?Math.abs(+(n+i)):0),bottom:r.bottom,left:t,right:r.right,width:r.width,height:r.height}},open:function(t,e){e.around,(t=r(t)).show().removeAttr(\"aria-hidden\").position(e.position),s.push({popup:t[0]})},close:function(t){var e=0;if(t){t=r(t)[0];for(var n=s.length-1;0<=n;n--)if(s[n].popup==t){e=s.length-n;break}}else e=s.length;for(n=0;n<e;n++){var i=s.pop();r(i.popup).hide().attr(\"aria-hidden\",\"true\")}}}}),define(\"skylark-domx-plugins-popups/calc-offset\",[\"skylark-domx-geom\",\"./popups\"],function(l,t){return t.calcOffset=function(t,e){var n=(i=l.size(t)).width,i=i.height,r=l.height(e),t=t.ownerDocument,s=(a=t.documentElement).clientWidth+l.scrollLeft(t),a=a.clientHeight+l.scrollTop(t),e=(t=l.pagePosition(e)).left,o=t.top;return o+=r,e-=Math.min(e,s<e+n&&n<s?Math.abs(e+n-s):0),{top:o-=Math.min(o,a<o+i&&i<a?Math.abs(+(i+r)):0),bottom:t.bottom,left:e,right:t.right,width:t.width,height:t.height}}}),define(\"skylark-domx-plugins-popups/dropdown\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./popups\"],function(t,e,r,s,n,a,i,o){\"use strict\";var l='[data-toggle=\"dropdown\"]',c=i.Plugin.inherit({klassName:\"Dropdown\",pluginName:\"lark.popups.dropdown\",options:{selectors:{toggler:'[data-toggle=\"dropdown\"],.dropdown-menu'}},_construct:function(t,e){this.overrided(t,e);t=this.$element=a(this._elm);t.on(\"click.dropdown\",this.toggle),t.on(\"keydown.dropdown\",this.options.selectors.toggler,this.keydown)},toggle:function(t){var e=a(this);if(!e.is(\".disabled, :disabled\")){var n=u(e),i=n.hasClass(\"open\");if(d(),!i){\"ontouchstart\"in document.documentElement&&!n.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",d);i={relatedTarget:this};if(n.trigger(t=r.create(\"show.dropdown\",i)),t.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),n.toggleClass(\"open\").trigger(r.create(\"shown.dropdown\",i))}return!1}},keydown:function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(\".disabled, :disabled\")){var n=u(e),i=n.hasClass(\"open\");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(l).trigger(\"focus\"),e.trigger(\"click\");i=n.find(\".dropdown-menu li:not(.disabled):visible a\");i.length&&(e=i.index(t.target),38==t.which&&0<e&&e--,40==t.which&&e<i.length-1&&e++,i.eq(e=~e?e:0).trigger(\"focus\"))}}}});function u(t){var e=t.attr(\"data-target\"),e=(e=e||(e=t.attr(\"href\"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\\s]*$)/,\"\"))&&a(e);return e&&e.length?e:t.parent()}function d(i){i&&3===i.which||(a(\".dropdown-backdrop\").remove(),a(l).each(function(){var t=a(this),e=u(t),n={relatedTarget:this};!e.hasClass(\"open\")||i&&\"click\"==i.type&&/input|textarea/i.test(i.target.tagName)&&s.contains(e[0],i.target)||(e.trigger(i=r.create(\"hide.dropdown\",n)),i.isDefaultPrevented())||(t.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(r.create(\"hidden.dropdown\",n)))}))}return a(document).on(\"click.dropdown.data-api\",d).on(\"click.dropdown.data-api\",\".dropdown form\",function(t){t.stopPropagation()}),i.register(c),o.Dropdown=c}),define(\"skylark-domx-plugins-popups/comboBox\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./popups\",\"./dropdown\"],function(n,t,e,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:\"ComboBox\",pluginName:\"lark.popups.combobox\",options:{autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function(t,i,e){var r=0;e.$dropMenu.find(\".empty-indicator\").remove(),t.each(function(t){var e=s(this),n=s(this).text().trim();e.removeClass(),n===i?(e.addClass(\"text-success\"),r++):n.substr(0,i.length)===i?(e.addClass(\"text-info\"),r++):e.addClass(\"hidden\")}),0===r&&e.$dropMenu.append('<li class=\"empty-indicator text-muted\"><em>No Matches</em></li>')}},_construct:function(t,e){this.overrided(t,e),this.$element=this.$(),this.$dropMenu=this.$element.find(\".dropdown-menu\"),this.$input=this.$element.find(\"input\"),this.$button=this.$element.find(\".btn\"),this.$button.plugin(\"lark.popups.dropdown\"),this.$inputGroupBtn=this.$element.find(\".input-group-btn\"),this.$element.on(\"click.lark\",\"a\",n.proxy(this.itemclicked,this)),this.$element.on(\"change.lark\",\"input\",n.proxy(this.inputchanged,this)),this.$element.on(\"shown.bs.dropdown\",n.proxy(this.menuShown,this)),this.$input.on(\"keyup.lark\",n.proxy(this.keypress,this)),this.setDefaultSelection(),0===this.$dropMenu.children(\"li\").length&&this.$button.addClass(\"disabled\"),this.options.filterOnKeypress&&this.options.filter(this.$dropMenu.find(\"li\"),this.$input.val(),this)},_destroy:function(){return this.$element.remove(),this.$element.find(\"input\").each(function(){s(this).attr(\"value\",s(this).val())}),this.$element[0].outerHTML},doSelect:function(t){void 0!==t[0]?(this.$element.find(\"li.selected:first\").removeClass(\"selected\"),this.$selectedItem=t,this.$selectedItem.addClass(\"selected\"),this.$input.val(this.$selectedItem.text().trim())):(this.$selectedItem=null,this.$element.find(\"li.selected:first\").removeClass(\"selected\"))},clearSelection:function(){this.$selectedItem=null,this.$input.val(\"\"),this.$dropMenu.find(\"li\").removeClass(\"selected\")},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var t=this.$element.outerWidth();this.$dropMenu.outerWidth(t)},selectedItem:function(){var t;return this.$selectedItem?(t=this.$selectedItem.text().trim(),n.mixin({text:t},this.$selectedItem.data())):{text:this.$input.val().trim(),notFound:!0}},selectByText:function(t){var e=s([]);this.$element.find(\"li\").each(function(){if((this.textContent||this.innerText||s(this).text()||\"\").trim().toLowerCase()===(t||\"\").trim().toLowerCase())return e=s(this),!1}),this.doSelect(e)},selectByValue:function(t){this.selectBySelector('li[data-value=\"'+t+'\"]')},selectByIndex:function(t){this.selectBySelector(\"li:eq(\"+t+\")\")},selectBySelector:function(t){t=this.$element.find(t);this.doSelect(t)},setDefaultSelection:function(){var t=\"li[data-selected=true]:first\",e=this.$element.find(t);0<e.length&&(this.selectBySelector(t),e.removeData(\"selected\"),e.removeAttr(\"data-selected\"))},enable:function(){this.$element.removeClass(\"disabled\"),this.$input.removeAttr(\"disabled\"),this.$button.removeClass(\"disabled\")},disable:function(){this.$element.addClass(\"disabled\"),this.$input.attr(\"disabled\",!0),this.$button.addClass(\"disabled\")},itemclicked:function(t){this.$selectedItem=s(t.target).parent(),this.$input.val(this.$selectedItem.text().trim()).trigger(\"change\",{synthetic:!0});var e=this.selectedItem();this.$element.trigger(\"changed.lark\",e),t.preventDefault(),this.$element.find(\".dropdown-toggle\").focus()},keypress:function(t){var e,n=38===t.which||40===t.which||37===t.which||39===t.which;this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass(\"open\")&&(this.$button.plugin(\"lark.popups.dropdown\").toggle(),this.$input.focus()),13===t.which?(t.preventDefault(),0<(e=this.$dropMenu.find(\"li.selected\").text().trim()).length?this.selectByText(e):this.selectByText(this.$input.val()),this.$inputGroupBtn.removeClass(\"open\")):27===t.which?(t.preventDefault(),this.clearSelection(),this.$inputGroupBtn.removeClass(\"open\")):!this.options.showOptionsOnKeypress||40!==t.which&&38!==t.which||(t.preventDefault(),0===(e=0<(e=this.$dropMenu.find(\"li.selected\")).length?40===t.which?e.next(\":not(.hidden)\"):e.prev(\":not(.hidden)\"):e).length&&(e=40===t.which?this.$dropMenu.find(\"li:not(.hidden):first\"):this.$dropMenu.find(\"li:not(.hidden):last\")),this.doSelect(e)),this.options.filterOnKeypress&&!n&&this.options.filter(this.$dropMenu.find(\"li\"),this.$input.val(),this),this.previousKeyPress=t.which},inputchanged:function(t,e){t=s(t.target).val();e&&e.synthetic?this.selectByText(t):(this.selectByText(t),0===(e=this.selectedItem()).text.length&&(e={text:t}),this.$element.trigger(\"changed.lark\",e))}});return c.prototype.getValue=c.prototype.selectedItem,a.register(c),o.ComboBox=c}),define(\"skylark-domx-plugins-popups/select-list\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./popups\",\"./dropdown\"],function(n,t,e,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:\"SelectList\",pluginName:\"lark.popups.selectlist\",options:{emptyLabelHTML:'<li data-value=\"\"><a href=\"#\">No items</a></li>'},_construct:function(t,e){this.overrided(t,e),this.$element=this.$(),this.$button=this.$element.find(\".btn.dropdown-toggle\"),this.$hiddenField=this.$element.find(\".hidden-field\"),this.$label=this.$element.find(\".selected-label\"),this.$dropdownMenu=this.$element.find(\".dropdown-menu\"),this.$button.plugin(\"lark.popups.dropdown\"),this.$element.on(\"click.selectlist\",\".dropdown-menu a\",n.proxy(this.itemClicked,this)),this.setDefaultSelection(),\"auto\"!==this.options.resize&&\"auto\"!==this.$element.attr(\"data-resize\")||this.resize(),0===this.$dropdownMenu.children(\"li\").length&&(this.disable(),this.doSelect(s(this.options.emptyLabelHTML))),this.$element.on(\"shown.dropdown\",function(){var e=s(this);s(document).on(\"keypress.selectlist\",function(t){var n=String.fromCharCode(t.which);e.find(\"li\").each(function(t,e){if(s(e).text().charAt(0).toLowerCase()===n)return s(e).children(\"a\").focus(),!1})})}),this.$element.on(\"hide.dropdown\",function(){s(document).off(\"keypress.selectlist\")})},_destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(t){var e;this.$selectedItem=e=t,this.$hiddenField.val(this.$selectedItem.attr(\"data-value\")),this.$label.html(s(this.$selectedItem.children()[0]).html()),this.$element.find(\"li\").each(function(){e.is(s(this))?s(this).attr(\"data-selected\",!0):s(this).removeData(\"selected\").removeAttr(\"data-selected\")})},itemClicked:function(t){this.$element.trigger(\"clicked.selectlist\",this.$selectedItem),t.preventDefault(),s(t.currentTarget).parent(\"li\").is(\".disabled, :disabled\")||(s(t.target).parent().is(this.$selectedItem)||this.itemChanged(t),this.$element.find(\".dropdown-toggle\").focus())},itemChanged:function(t){this.doSelect(s(t.target).closest(\"li\"));t=this.selectedItem();this.$element.trigger(\"changed.selectlist\",t)},resize:function(){var t=0,e=0,n=s(\"<div/>\").addClass(\"selectlist-sizer\");(Boolean(s(document).find(\"html\").hasClass(\"fuelux\"))?s(document.body):s(\".fuelux:first\")).append(n),n.append(this.$element.clone()),this.$element.find(\"a\").each(function(){n.find(\".selected-label\").text(s(this).text()),e=n.find(\".selectlist\").outerWidth(),e+=n.find(\".sr-only\").outerWidth(),t<e&&(t=e)}),t<=1||(this.$button.css(\"width\",t),this.$dropdownMenu.css(\"width\",t),n.remove())},selectedItem:function(){var t=this.$selectedItem.text();return n.mixin({text:t},this.$selectedItem.data())},selectByText:function(t){var e=s([]);this.$element.find(\"li\").each(function(){if((this.textContent||this.innerText||s(this).text()||\"\").toLowerCase()===(t||\"\").toLowerCase())return e=s(this),!1}),this.doSelect(e)},selectByValue:function(t){this.selectBySelector('li[data-value=\"'+t+'\"]')},selectByIndex:function(t){this.selectBySelector(\"li:eq(\"+t+\")\")},selectBySelector:function(t){t=this.$element.find(t);this.doSelect(t)},setDefaultSelection:function(){var t=this.$element.find(\"li[data-selected=true]\").eq(0);0===t.length&&(t=this.$element.find(\"li\").has(\"a\").eq(0)),this.doSelect(t)},enable:function(){this.$element.removeClass(\"disabled\"),this.$button.removeClass(\"disabled\")},disable:function(){this.$element.addClass(\"disabled\"),this.$button.addClass(\"disabled\")}});return c.prototype.getValue=c.prototype.selectedItem,a.register(c),o.SelectList=c}),define(\"skylark-domx-plugins-popups/main\",[\"./popups\",\"./calc-offset\",\"./dropdown\",\"./comboBox\",\"./select-list\"],function(t){return t}),define(\"skylark-domx-plugins-popups\",[\"skylark-domx-plugins-popups/main\"],function(t){return t}),define(\"skylark-graphics-colors/colors\",[\"skylark-langx-ns\"],function(t){return t.attach(\"graphics.colors\",{})}),define(\"skylark-graphics-colors/_names\",[],function(){return{aliceblue:\"f0f8ff\",antiquewhite:\"faebd7\",aqua:\"0ff\",aquamarine:\"7fffd4\",azure:\"f0ffff\",beige:\"f5f5dc\",bisque:\"ffe4c4\",black:\"000\",blanchedalmond:\"ffebcd\",blue:\"00f\",blueviolet:\"8a2be2\",brown:\"a52a2a\",burlywood:\"deb887\",burntsienna:\"ea7e5d\",cadetblue:\"5f9ea0\",chartreuse:\"7fff00\",chocolate:\"d2691e\",coral:\"ff7f50\",cornflowerblue:\"6495ed\",cornsilk:\"fff8dc\",crimson:\"dc143c\",cyan:\"0ff\",darkblue:\"00008b\",darkcyan:\"008b8b\",darkgoldenrod:\"b8860b\",darkgray:\"a9a9a9\",darkgreen:\"006400\",darkgrey:\"a9a9a9\",darkkhaki:\"bdb76b\",darkmagenta:\"8b008b\",darkolivegreen:\"556b2f\",darkorange:\"ff8c00\",darkorchid:\"9932cc\",darkred:\"8b0000\",darksalmon:\"e9967a\",darkseagreen:\"8fbc8f\",darkslateblue:\"483d8b\",darkslategray:\"2f4f4f\",darkslategrey:\"2f4f4f\",darkturquoise:\"00ced1\",darkviolet:\"9400d3\",deeppink:\"ff1493\",deepskyblue:\"00bfff\",dimgray:\"696969\",dimgrey:\"696969\",dodgerblue:\"1e90ff\",firebrick:\"b22222\",floralwhite:\"fffaf0\",forestgreen:\"228b22\",fuchsia:\"f0f\",gainsboro:\"dcdcdc\",ghostwhite:\"f8f8ff\",gold:\"ffd700\",goldenrod:\"daa520\",gray:\"808080\",green:\"008000\",greenyellow:\"adff2f\",grey:\"808080\",honeydew:\"f0fff0\",hotpink:\"ff69b4\",indianred:\"cd5c5c\",indigo:\"4b0082\",ivory:\"fffff0\",khaki:\"f0e68c\",lavender:\"e6e6fa\",lavenderblush:\"fff0f5\",lawngreen:\"7cfc00\",lemonchiffon:\"fffacd\",lightblue:\"add8e6\",lightcoral:\"f08080\",lightcyan:\"e0ffff\",lightgoldenrodyellow:\"fafad2\",lightgray:\"d3d3d3\",lightgreen:\"90ee90\",lightgrey:\"d3d3d3\",lightpink:\"ffb6c1\",lightsalmon:\"ffa07a\",lightseagreen:\"20b2aa\",lightskyblue:\"87cefa\",lightslategray:\"789\",lightslategrey:\"789\",lightsteelblue:\"b0c4de\",lightyellow:\"ffffe0\",lime:\"0f0\",limegreen:\"32cd32\",linen:\"faf0e6\",magenta:\"f0f\",maroon:\"800000\",mediumaquamarine:\"66cdaa\",mediumblue:\"0000cd\",mediumorchid:\"ba55d3\",mediumpurple:\"9370db\",mediumseagreen:\"3cb371\",mediumslateblue:\"7b68ee\",mediumspringgreen:\"00fa9a\",mediumturquoise:\"48d1cc\",mediumvioletred:\"c71585\",midnightblue:\"191970\",mintcream:\"f5fffa\",mistyrose:\"ffe4e1\",moccasin:\"ffe4b5\",navajowhite:\"ffdead\",navy:\"000080\",oldlace:\"fdf5e6\",olive:\"808000\",olivedrab:\"6b8e23\",orange:\"ffa500\",orangered:\"ff4500\",orchid:\"da70d6\",palegoldenrod:\"eee8aa\",palegreen:\"98fb98\",paleturquoise:\"afeeee\",palevioletred:\"db7093\",papayawhip:\"ffefd5\",peachpuff:\"ffdab9\",peru:\"cd853f\",pink:\"ffc0cb\",plum:\"dda0dd\",powderblue:\"b0e0e6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"f00\",rosybrown:\"bc8f8f\",royalblue:\"4169e1\",saddlebrown:\"8b4513\",salmon:\"fa8072\",sandybrown:\"f4a460\",seagreen:\"2e8b57\",seashell:\"fff5ee\",sienna:\"a0522d\",silver:\"c0c0c0\",skyblue:\"87ceeb\",slateblue:\"6a5acd\",slategray:\"708090\",slategrey:\"708090\",snow:\"fffafa\",springgreen:\"00ff7f\",steelblue:\"4682b4\",tan:\"d2b48c\",teal:\"008080\",thistle:\"d8bfd8\",tomato:\"ff6347\",turquoise:\"40e0d0\",violet:\"ee82ee\",wheat:\"f5deb3\",white:\"fff\",whitesmoke:\"f5f5f5\",yellow:\"ff0\",yellowgreen:\"9acd32\"}}),define(\"skylark-graphics-colors/_hexNames\",[\"./_names\"],function(t){var e,n=t,i={};for(e in n)n.hasOwnProperty(e)&&(i[n[e]]=e);return i}),define(\"skylark-graphics-colors/_conversion\",[\"skylark-langx-strings\",\"./_names\"],function(i,r){var a=Math,s=a.round,c=a.min,u=a.max;a.random;function o(t){return 1==t.length?\"0\"+t:\"\"+t}function d(t,e){\"string\"==typeof(n=t)&&-1!=n.indexOf(\".\")&&1===parseFloat(n)&&(t=\"100%\");var n=\"string\"==typeof(n=t)&&-1!=n.indexOf(\"%\");return t=c(e,u(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),a.abs(t-e)<1e-6?1:t%e/parseFloat(e)}e=\"[\\\\s|\\\\(]+(\"+(t=\"(?:[-\\\\+]?\\\\d*\\\\.\\\\d+%?)|(?:[-\\\\+]?\\\\d+%?)\")+\")[,|\\\\s]+(\"+t+\")[,|\\\\s]+(\"+t+\")\\\\s*\\\\)?\",t=\"[\\\\s|\\\\(]+(\"+t+\")[,|\\\\s]+(\"+t+\")[,|\\\\s]+(\"+t+\")[,|\\\\s]+(\"+t+\")\\\\s*\\\\)?\";var t,e,l={rgb:new RegExp(\"rgb\"+e),rgba:new RegExp(\"rgba\"+t),hsl:new RegExp(\"hsl\"+e),hsla:new RegExp(\"hsla\"+t),hsv:new RegExp(\"hsv\"+e),hsva:new RegExp(\"hsva\"+t),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex3s:/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6s:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8s:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function h(t){return parseInt(t,16)}return{bound01:d,rgbToRgb:function(t,e,n){return{r:255*d(t,255),g:255*d(e,255),b:255*d(n,255)}},rgbToHsl:function(t,e,n){t=d(t,255),e=d(e,255),n=d(n,255);var i,r=u(t,e,n),s=c(t,e,n),a=(r+s)/2;if(r==s)i=l=0;else{var o=r-s,l=.5<a?o/(2-r-s):o/(r+s);switch(r){case t:i=(e-n)/o+(e<n?6:0);break;case e:i=(n-t)/o+2;break;case n:i=(t-e)/o+4}i/=6}return{h:i,s:l,l:a}},hslToRgb:function(t,e,n){var i,r,s;function a(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}return t=d(t,360),e=d(e,100),n=d(n,100),0===e?i=r=s=n:(i=a(e=2*n-(n=n<.5?n*(1+e):n+e-n*e),n,t+1/3),r=a(e,n,t),s=a(e,n,t-1/3)),{r:255*i,g:255*r,b:255*s}},rgbToHsv:function(t,e,n){t=d(t,255),e=d(e,255),n=d(n,255);var i,r=u(t,e,n),s=c(t,e,n),a=r,o=r-s,l=0===r?0:o/r;if(r==s)i=0;else{switch(r){case t:i=(e-n)/o+(e<n?6:0);break;case e:i=(n-t)/o+2;break;case n:i=(t-e)/o+4}i/=6}return{h:i,s:l,v:a}},hsvToRgb:function(t,e,n){t=6*d(t,360),e=d(e,100),n=d(n,100);var i=a.floor(t),r=n*(1-e),s=n*(1-(t=t-i)*e);return{r:255*[n,s,r,r,t=n*(1-(1-t)*e),n][e=i%6],g:255*[t,n,n,s,r,r][e],b:255*[r,r,t,n,n,s][e]}},rgbToHex:function(t,e,n,i){return t=[o(s(t).toString(16)),o(s(e).toString(16)),o(s(n).toString(16))],i&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join(\"\")},rgbaToHex:function(t,e,n,i){return[o(Math.round(255*parseFloat(i)).toString(16)),o(s(t).toString(16)),o(s(e).toString(16)),o(s(n).toString(16))].join(\"\")},hexToRgb:function(t){return(t=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},strToRgb:function(t){t=i.trim(t).toLowerCase();var e,n=!1;if(r[t])t=r[t],n=!0;else if(\"transparent\"==t)return{r:0,g:0,b:0,a:0,format:\"name\"};return(e=l.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=l.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=l.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=l.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=l.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=l.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=(e=l.hex8.exec(t))||l.hex8s.exec(t))?{a:h(e[1])/255,r:h(e[2]),g:h(e[3]),b:h(e[4]),format:n?\"name\":\"hex8\"}:(e=(e=l.hex6.exec(t))||l.hex6s.exec(t))?{r:h(e[1]),g:h(e[2]),b:h(e[3]),format:n?\"name\":\"hex\"}:!!(e=(e=l.hex3.exec(t))||l.hex3s.exec(t))&&{r:h(e[1]+\"\"+e[1]),g:h(e[2]+\"\"+e[2]),b:h(e[3]+\"\"+e[3]),format:n?\"name\":\"hex\"}}}}),define(\"skylark-graphics-colors/color\",[\"skylark-langx-types\",\"skylark-langx-klass\",\"./colors\",\"./_names\",\"./_hexNames\",\"./_conversion\"],function(n,t,e,i,r,s){var a=Math,o=a.round,l=a.min,c=a.max,u=a.random;function d(t){return l(1,c(0,t))}var h=t({init:function(t,e){e=e||{},n.isString(t)&&(t=s.hexToRgb(t)),this._r=t.r,this._g=t.g,this._b=t.b,this._a=n.isDefined(t.a)?t.a:1,this._roundA=o(1e3*this._a)/1e3,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b))},isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=(t=t,t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t),this._roundA=o(1e3*this._a)/1e3,this},toHsv:function(){var t=s.rgbToHsv(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=s.rgbToHsv(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),t=o(100*t.v);return 1==this._a?\"hsv(\"+e+\", \"+n+\"%, \"+t+\"%)\":\"hsva(\"+e+\", \"+n+\"%, \"+t+\"%, \"+this._roundA+\")\"},toHsl:function(){var t=s.rgbToHsl(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s.rgbToHsl(this._r,this._g,this._b),e=o(360*t.h),n=o(100*t.s),t=o(100*t.l);return 1==this._a?\"hsl(\"+e+\", \"+n+\"%, \"+t+\"%)\":\"hsla(\"+e+\", \"+n+\"%, \"+t+\"%, \"+this._roundA+\")\"},toHex:function(t){return s.rgbToHex(this._r,this._g,this._b,t)},toHexString:function(t){return\"#\"+this.toHex(t)},toHex8:function(){return s.rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return\"#\"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?\"rgb(\"+o(this._r)+\", \"+o(this._g)+\", \"+o(this._b)+\")\":\"rgba(\"+o(this._r)+\", \"+o(this._g)+\", \"+o(this._b)+\", \"+this._roundA+\")\"},toPercentageRgb:function(){return{r:o(100*s.bound01(this._r,255))+\"%\",g:o(100*s.bound01(this._g,255))+\"%\",b:o(100*s.bound01(this._b,255))+\"%\",a:this._a}},toPercentageRgbString:function(){return 1==this._a?\"rgb(\"+o(100*s.bound01(this._r,255))+\"%, \"+o(100*s.bound01(this._g,255))+\"%, \"+o(100*s.bound01(this._b,255))+\"%)\":\"rgba(\"+o(100*s.bound01(this._r,255))+\"%, \"+o(100*s.bound01(this._g,255))+\"%, \"+o(100*s.bound01(this._b,255))+\"%, \"+this._roundA+\")\"},toName:function(){return 0===this._a?\"transparent\":!(this._a<1)&&r[s.rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e=\"#\"+s.rgbaToHex(this._r,this._g,this._b,this._a),n=e;return\"progid:DXImageTransform.Microsoft.gradient(\"+(this._gradientType?\"GradientType = 1, \":\"\")+\"startColorstr=\"+e+\",endColorstr=\"+(n=t?h(t).toHex8String():n)+\")\"},toNumber:function(){return this._r<<16^this._g<<8^this._b<<0},toString:function(t){var e=!!t,n=(t=t||this._format,!1),i=this._a<1&&0<=this._a;return e||!i||\"hex\"!==t&&\"hex6\"!==t&&\"hex3\"!==t&&\"name\"!==t?(\"rgb\"===t&&(n=this.toRgbString()),\"prgb\"===t&&(n=this.toPercentageRgbString()),\"hex\"!==t&&\"hex6\"!==t||(n=this.toHexString()),\"hex3\"===t&&(n=this.toHexString(!0)),\"hex8\"===t&&(n=this.toHex8String()),\"name\"===t&&(n=this.toName()),\"hsl\"===t&&(n=this.toHslString()),(n=\"hsv\"===t?this.toHsvString():n)||this.toHexString()):\"name\"===t&&0===this._a?this.toName():this.toRgbString()},lighten:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.l+=t/100,e.l=d(e.l),h.fromHsl(e)},brighten:function(t){t=0===t?0:t||10;var e=this.toRgb();return e.r=c(0,l(255,e.r-o(-t/100*255))),e.g=c(0,l(255,e.g-o(-t/100*255))),e.b=c(0,l(255,e.b-o(-t/100*255))),new h(e)},darken:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.l-=t/100,e.l=d(e.l),h.fromHsl(e)},desaturate:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.s-=t/100,e.s=d(e.s),h.fromHsl(e)},saturate:function(t){t=0===t?0:t||10;var e=this.toHsl();return e.s+=t/100,e.s=d(e.s),h.fromHsl(e)},greyscale:function(){return this.desaturate(100)},spin:function(t){var e=this.toHsl(),t=(o(e.h)+t)%360;return e.h=t<0?360+t:t,h.fromHsl(e)},analogous:function(t,e){t=t||6,e=e||30;var n=this.toHsl(),i=360/e,r=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,r.push(h.fromHsl(n));return r},complement:function(){var t=this.toHsl();return t.h=(t.h+180)%360,h.fromHsl(t)},monochromatic:function(t){t=t||6;for(var e=this.toHsv(),n=e.h,i=e.s,r=e.v,s=[],a=1/t;t--;)s.push(h.fromHsv({h:n,s:i,v:r})),r=(r+a)%1;return s},splitcomplement:function(){var t=this.toHsl(),e=t.h;return[this,h.fromHsl({h:(e+72)%360,s:t.s,l:t.l}),h.fromHsl({h:(e+216)%360,s:t.s,l:t.l})]},triad:function(){var t=this.toHsl(),e=t.h;return[this,h.fromHsl({h:(e+120)%360,s:t.s,l:t.l}),h.fromHsl({h:(e+240)%360,s:t.s,l:t.l})]},tetrad:function(){var t=this.toHsl(),e=t.h;return[this,h.fromHsl({h:(e+90)%360,s:t.s,l:t.l}),h.fromHsl({h:(e+180)%360,s:t.s,l:t.l}),h.fromHsl({h:(e+270)%360,s:t.s,l:t.l})]},mix:function(t,e){e=0===e?0:e||50;var n=this.toRgb(),t=t.toRgb(),e=e/100,i=2*e-1,r=t.a-n.a,i=i*r==-1?i:(i+r)/(1+i*r),r=1-(i=(i+1)/2),i={r:t.r*i+n.r*r,g:t.g*i+n.g*r,b:t.b*i+n.b*r,a:t.a*e+n.a*(1-e)};return new h(i)},isValid:function(){return!0}});function p(t){return t=t<=1?100*t+\"%\":t}return h.equals=function(t,e){return!(!t||!e)&&(t=h.parse(t),e=h.parse(e),t.toRgbString()==e.toRgbString())},h.random=function(){return h.fromRatio({r:u(),g:u(),b:u()})},h.fromRgba=function(t,e,n,i){return new h({r:t,g:e,b:n,a:i})},h.fromRgb=function(t,e,n){return new h({r:t,g:e,b:n})},h.fromHsl=function(t,e,n,i){t=s.hslToRgb(t,e,n);return new h(t)},h.fromHsv=function(t,e,n,i){t=s.hsvToRgb(t,e,n);return new h(t)},h.parse=function(t){var e,n,i,r;return t instanceof h?t:(e={r:0,g:0,b:0},r=i=!(n=1),\"object\"==typeof(t=\"string\"==typeof t?s.strToRgb(t):t)&&(t.hasOwnProperty(\"r\")&&t.hasOwnProperty(\"g\")&&t.hasOwnProperty(\"b\")?(e=s.rgbToRgb(t.r,t.g,t.b),i=!0,r=\"%\"===String(t.r).substr(-1)?\"prgb\":\"rgb\"):t.hasOwnProperty(\"h\")&&t.hasOwnProperty(\"s\")&&t.hasOwnProperty(\"v\")?(t.s=p(t.s),t.v=p(t.v),e=s.hsvToRgb(t.h,t.s,t.v),i=!0,r=\"hsv\"):t.hasOwnProperty(\"h\")&&t.hasOwnProperty(\"s\")&&t.hasOwnProperty(\"l\")&&(t.s=p(t.s),t.l=p(t.l),e=s.hslToRgb(t.h,t.s,t.l),i=!0,r=\"hsl\"),t.hasOwnProperty(\"a\"))&&(n=t.a),new h({ok:i,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n},{format:t.format||r}))},e.Color=h}),define(\"skylark-domx-plugins-colors/helper\",[\"skylark-domx-browser\",\"skylark-domx-query\",\"skylark-graphics-colors/color\"],function(t,u,d){t.isIE;return{paletteTemplate:function(t,e,n,i){for(var r=[],s=0;s<t.length;s++){var a,o,l,c=t[s];c?(o=(a=d.parse(c)).toHsl().l<.5?\"sp-thumb-el sp-thumb-dark\":\"sp-thumb-el sp-thumb-light\",o+=d.equals(e,c)?\" sp-thumb-active\":\"\",c=a.toString(i.preferredFormat||\"rgb\"),l=\"background-color:\"+a.toRgbString(),r.push('<span title=\"'+c+'\" data-color=\"'+a.toRgbString()+'\" class=\"'+o+'\"><span class=\"sp-thumb-inner\" style=\"'+l+';\" /></span>')):r.push(u(\"<div />\").append(u('<span data-color=\"\" style=\"background-color:transparent;\" class=\"sp-clear-display\"></span>').attr(\"title\",i.texts.noColorSelectedText)).html())}return\"<div class='sp-cf \"+n+\"'>\"+r.join(\"\")+\"</div>\"}}}),define(\"skylark-domx-plugins-colors/indicator\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-plugins-base\"],function(t,e,n,i,r,s,a,o){var l=o.Plugin.inherit({klassName:\"Indicator\",pluginName:\"lark.colors.indicator\",options:{},_construct:function(t,e){o.Plugin.prototype._construct.call(this,t,e),this.listenTo(this.elmx(),\"mousedown\",t=>{this._start(t)})},_move:function(t){var e,n,i,r,s;this._dragging&&(e=this._offset,i=t.pageX,s=t.pageY,r=this._maxWidth,n=this._maxHeight,i=Math.max(0,Math.min(i-e.left,r)),r=Math.max(0,Math.min(s-e.top,n)),s=this.options.onmove)&&s.apply(this._elm,[i,r,t])},_start:function(t){var e;(t.which?3==t.which:2==t.button)||this._dragging||(e=this.options.onstart)&&!1===e.apply(this._elm,arguments)||(this._dragging=!0,e=this.$(),this._maxHeight=e.height(),this._maxWidth=e.width(),this._offset=e.offset(),e=this.$(document),this.listenTo(e,{mousemove:t=>{this._move(t)},mouseup:t=>{this._stop(t)}}),e.find(\"body\").addClass(\"sp-dragging\"),this._move(t),r.stop(t))},_stop:function(t){var e=this.$(document);this._dragging&&(this.unlistenTo(e),e.find(\"body\").removeClass(\"sp-dragging\"),onstop=this.options.onstop)&&this._delay(function(){onstop.apply(this._elm,arguments)}),this._dragging=!1}});return o.register(l),l}),define(\"skylark-domx-plugins-colors/color-picker\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-plugins-base\",\"skylark-graphics-colors/color\",\"./colors\",\"./helper\",\"./indicator\"],function(t,a,e,n,o,l,i,r,c,s,u,d){\"use strict\";var h=r.Plugin.inherit({klassName:\"ColorPicker\",pluginName:\"lark.colors.picker\",options:{selectors:{dragger:\".sp-color\",dragHelper:\".sp-dragger\",slider:\".sp-hue\",slideHelper:\".sp-slider\",alphaSliderInner:\".sp-alpha-inner\",alphaSlider:\".sp-alpha\",alphaSlideHelper:\".sp-alpha-handle\",textInput:\".sp-input\",initialColorContainer:\".sp-initial\",cancelButton:\".sp-cancel\",clearButton:\".sp-clear\",chooseButton:\".sp-choose\"},draggingClass:\"sp-dragging\",texts:{cancelText:\"cancel\",chooseText:\"choose\",clearText:\"Clear Color Selection\",noColorSelectedText:\"No Color Selected\"},states:{showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},preferredFormat:\"hex\",color:!1},_drawInitial:function(){var t,e,n=this.options;this.stating(\"showInitial\")&&(t=this._initialColor,e=this.current(),this.$initialColorContainer.html(u.paletteTemplate([t,e],e,\"sp-palette-row-initial\",n)))},_updateHelperLocations:function(){var t=this._currentSaturation,e=this._currentValue;this.stating(\"allowEmpty\")&&this._isEmpty?(this.$alphaSlideHelper.hide(),this.$slideHelper.hide(),this.$dragHelper.hide()):(this.$alphaSlideHelper.show(),this.$slideHelper.show(),this.$dragHelper.show(),t=t*this._dragWidth,e=this._dragHeight-e*this._dragHeight,t=Math.max(-this._dragHelperHeight,Math.min(this._dragWidth-this._dragHelperHeight,t-this._dragHelperHeight)),e=Math.max(-this._dragHelperHeight,Math.min(this._dragHeight-this._dragHelperHeight,e-this._dragHelperHeight)),this.$dragHelper.css({top:e+\"px\",left:t+\"px\"}),e=this._currentAlpha*this._alphaWidth,this.$alphaSlideHelper.css({left:e-this._alphaSlideHelperWidth/2+\"px\"}),t=this._currentHue*this._slideHeight,this.$slideHelper.css({top:t-this._slideHelperHeight+\"px\"}))},_updateOriginalInput:function(t){var e=this.current();c.equals(e,this._colorOnShow);e&&(e.toString(this._currentPreferredFormat),this.emit(\"picked\",e))},_updateUI:function(){this.options;this._dragWidth=this.$dragger.width(),this._dragHeight=this.$dragger.height(),this._dragHelperHeight=this.$dragHelper.height(),this._slideWidth=this.$slider.width(),this._slideHeight=this.$slider.height(),this._slideHelperHeight=this.$slideHelper.height(),this._alphaWidth=this.$alphaSlider.width(),this._alphaSlideHelperWidth=this.$alphaSlideHelper.width(),this.$textInput.removeClass(\"sp-validation-error\"),this._updateHelperLocations();var t,e,n,i=c.parse({h:360*this._currentHue,s:1,v:1}),i=(this.$dragger.css(\"background-color\",i.toHexString()),this._currentPreferredFormat),r=(!(this._currentAlpha<1)||0===this._currentAlpha&&\"name\"===i||\"hex\"!==i&&\"hex3\"!==i&&\"hex6\"!==i&&\"name\"!==i||(i=\"rgb\"),this.current()),s=\"\";!r&&this.stating(\"allowEmpty\")||(t=r.toHexString(),r.toRgbString(),this.stating(\"showAlpha\")&&((e=r.toRgb()).a=0,n=\"linear-gradient(left, \"+(e=c.parse(e).toRgbString())+\", \"+t+\")\",a.isIE?this.$alphaSliderInner.css(\"filter\",c.parse(e).toFilter({gradientType:1},t)):(this.$alphaSliderInner.css(\"background\",\"-webkit-\"+n),this.$alphaSliderInner.css(\"background\",\"-moz-\"+n),this.$alphaSliderInner.css(\"background\",\"-ms-\"+n),this.$alphaSliderInner.css(\"background\",\"linear-gradient(to right, \"+e+\", \"+t+\")\"))),s=r.toString(i)),this.stating(\"showInput\")&&this.$textInput.val(s),this.stating(\"showPalette\")&&this._drawPalette(),this._drawInitial()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){r.Plugin.prototype._construct.call(this,t,e);t=this.$el=this.$(),e=this.options,e.theme,this.$dragger=t.find(e.selectors.dragger),this.$dragHelper=t.find(e.selectors.dragHelper),this.$slider=t.find(e.selectors.slider),this.$slideHelper=t.find(e.selectors.slideHelper),this.$alphaSliderInner=t.find(e.selectors.alphaSliderInner),this.$alphaSlider=t.find(e.selectors.alphaSlider),this.$alphaSlideHelper=t.find(e.selectors.alphaSlideHelper),this.$textInput=t.find(e.selectors.textInput),this.$initialColorContainer=t.find(e.selectors.initialColorContainer),this.$cancelButton=t.find(e.selectors.cancelButton),this.$clearButton=t.find(e.selectors.clearButton),this.$chooseButton=t.find(e.selectors.chooseButton),t=this._initialColor=e.color;this._currentPreferredFormat=e.preferredFormat,this._isEmpty=!t;this._init()},_init:function(){var r=this,t=this.options;function e(){(r._dragHeight<=0||r._dragWidth<=0||r._slideHeight<=0)&&r.reflow(),r._isDragging=!0,r.$el.addClass(r.options.draggingClass),r._shiftMovementDirection=null}function n(){r._isDragging=!1,r.$el.removeClass(r.options.draggingClass)}function s(){r._updateOriginalInput(),r._updateUI()}function i(){var t=r.$textInput.val();null!==t&&\"\"!==t||!r._allowEmpty?(t=c.parse(t)).isValid()?(r.current(t),s()):r.$textInput.addClass(\"sp-validation-error\"):(r.current(null),s())}this._applyOptions(),this.$textInput.change(i),this.$textInput.on(\"paste\",function(){setTimeout(i,1)}),this.$textInput.keydown(function(t){13==t.keyCode&&i()}),this.$cancelButton.text(t.texts.cancelText),this.listenTo(this.$cancelButton,\"click\",function(t){l.stop(t),r.revert(),r.emit(\"canceled\")}),this.$clearButton.attr(\"title\",t.texts.clearText),this.listenTo(this.$clearButton,\"click\",function(t){l.stop(t),r._isEmpty=!0,s()}),this.$chooseButton.text(t.texts.chooseText),this.listenTo(this.$chooseButton,\"click\",function(t){l.stop(t),r._updateOriginalInput(!0),r.emit(\"choosed\")}),this.$alphaSlider.plugin(\"lark.colors.indicator\",{onmove:function(t,e,n){r._currentAlpha=t/r._alphaWidth,r._isEmpty=!1,n.shiftKey&&(r._currentAlpha=Math.round(10*r._currentAlpha)/10),s()},onstart:e,onstop:n}),this.$slider.plugin(\"lark.colors.indicator\",{onmove:function(t,e,n){r._currentHue=parseFloat(e/r._slideHeight),r._isEmpty=!1,r.stating(\"showAlpha\")||(r._currentAlpha=1),s()},onstart:e,onstop:n}),this.$dragger.plugin(\"lark.colors.indicator\",{onmove:function(t,e,n){n.shiftKey?r._shiftMovementDirection||(n=r._currentSaturation*r._dragWidth,i=r._dragHeight-r._currentValue*r._dragHeight,n=Math.abs(t-n)>Math.abs(e-i),r._shiftMovementDirection=n?\"x\":\"y\"):r._shiftMovementDirection=null;var i=!r._shiftMovementDirection||\"x\"===r._shiftMovementDirection,n=!r._shiftMovementDirection||\"y\"===r._shiftMovementDirection;i&&(r._currentSaturation=parseFloat(t/r._dragWidth)),n&&(r._currentValue=parseFloat((r._dragHeight-e)/r._dragHeight)),r._isEmpty=!1,r.stating(\"showAlpha\")||(r._currentAlpha=1),s()},onstart:e,onstop:n}),this.current(this._initialColor),r._updateUI();t=a.isIE?\"mousedown.ColorPicker\":\"click.ColorPicker touchstart.ColorPicker\";this.$initialColorContainer.on(t,\".sp-thumb-el:nth-child(1)\",{ignore:!0},function(t){return t.data&&t.data.ignore,r.current(o(t.target).closest(\".sp-thumb-el\").data(\"color\")),s(),!1})},revert:function(){this.current(this._initialColor,!0),this._updateOriginalInput(!0)},current:function(t){if(void 0===t)return this._allowEmpty&&this._isEmpty?null:c.parse({h:360*this._currentHue,s:this._currentSaturation,v:this._currentValue,a:Math.round(1e3*this._currentAlpha)/1e3});c.equals(t,this.current())||(!t&&this.stating(\"allowEmpty\")?this._isEmpty=!0:(this._isEmpty=!1,t=c.parse(t).toHsv(),this._currentHue=t.h%360/360,this._currentSaturation=t.s,this._currentValue=t.v,this._currentAlpha=t.a)),this._updateUI()},_applyStates:function(){var t=this._states;this.$el.toggleClass(\"sp-input-disabled\",!t.showInput).toggleClass(\"sp-clear-enabled\",!!t.allowEmpty).toggleClass(\"sp-alpha-enabled\",t.showAlpha).toggleClass(\"sp-buttons-disabled\",!t.showButtons).toggleClass(\"sp-initial-disabled\",!t.showInitial),t.allowEmpty||this.$clearButton.hide(),this._dragWidth=this.$dragger.width(),this._dragHeight=this.$dragger.height(),this._dragHelperHeight=this.$dragHelper.height(),this._slideWidth=this.$slider.width(),this._slideHeight=this.$slider.height(),this._slideHelperHeight=this.$slideHelper.height(),this._alphaWidth=this.$alphaSlider.width(),this._alphaSlideHelperWidth=this.$alphaSlideHelper.width()},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this._updateHelperLocations()}});return r.register(h),s.ColorPicker=h}),define(\"skylark-domx-plugins-colors/color-palette\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-fx\",\"skylark-domx-plugins-base\",\"skylark-graphics-colors/color\",\"./colors\",\"./helper\"],function(t,s,n,e,i,r,a,o,l,c,u,d,h){\"use strict\";s.noop;var p=c.Plugin.inherit({klassName:\"ColorPalette\",pluginName:\"lark.colors.palette\",options:{selectors:{},texts:{},states:{showSelectionPalette:!0},palette:[[\"#ffffff\",\"#000000\",\"#ff0000\",\"#ff8000\",\"#ffff00\",\"#008000\",\"#0000ff\",\"#4b0082\",\"#9400d3\"]],selectionPalette:[]},_addColorToSelectionPalette:function(t){if(this.stating(\"showSelectionPalette\")){t=u.parse(t).toRgbString();if(!this._paletteLookup[t]&&-1===s.inArray(t,this._selectionPalette))for(this._selectionPalette.push(t);this._selectionPalette.length>this._maxSelectionSize;)this._selectionPalette.shift()}},getUniqueSelectionPalette:function(){var t=[],e=this.options;if(this.stating(\"showPalette\"))for(var n=0;n<this._selectionPalette.length;n++){var i=u.parse(this._selectionPalette[n]).toRgbString();this._paletteLookup[i]||t.push(this._selectionPalette[n])}return t.reverse().slice(0,e.maxSelectionSize)},_drawPalette:function(){var n=this.options,i=this.current(),t=s.map(this._paletteArray,function(t,e){return h.paletteTemplate(t,i,\"sp-palette-row sp-palette-row-\"+e,n)});this._selectionPalette&&t.push(h.paletteTemplate(this.getUniqueSelectionPalette(),i,\"sp-palette-row sp-palette-row-selection\",n)),this.$el.html(t.join(\"\"))},_updateUI:function(){this._drawPalette()},_applyOptions:function(){var t=this.options;if(this._states={showSelectionPalette:t.showSelectionPalette},t.palette)for(var t=this._palette=t.palette.slice(0),e=this._paletteArray=s.isArray(t[0])?t:[t],n=this._paletteLookup={},i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)n[u.parse(e[i][r]).toRgbString()]=!0;this._applyStates()},_construct:function(t,e){c.Plugin.prototype._construct.call(this,t,e),this.$el=this.$(),this._init()},_init:function(){var e=this,t=this.options;this._initialColor=t.color,this._selectionPalette=t.selectionPalette.slice(0);this._applyOptions(),this._initialColor?(this.current(this._initialColor),e._addColorToSelectionPalette(this._initialColor)):this._updateUI();t=n.isIE?\"mousedown.palette\":\"click.palette touchstart.palette\";this.$el.on(t,\".sp-thumb-el\",function(t){return e.current(r(t.target).closest(\".sp-thumb-el\").data(\"color\")),e.emit(\"selected\",e.current()),!1})},_applyStates:function(){},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this._drawPalette()},current:function(t){if(void 0===t)return this._current;this._current=t,this._updateUI()}});return c.register(p),d.ColorPalette=p}),define(\"skylark-domx-plugins-colors/Color-pane\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-fx\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-popups\",\"skylark-graphics-colors/color\",\"./colors\",\"./color-picker\",\"./color-palette\"],function(t,e,n,i,r,s,a,o,l,c,u,d,h,p){\"use strict\";var f=l.Plugin.inherit({klassName:\"ColorPane\",pluginName:\"lark.colors.pane\",options:{selectors:{pickerContainer:\".sp-picker-container\",toggleButton:\".sp-palette-toggle\",paletteContainer:\".sp-palette\"},draggingClass:\"sp-dragging\",texts:{togglePaletteMoreText:\"more\",togglePaletteLessText:\"less\",clearText:\"Clear Color Selection\",noColorSelectedText:\"No Color Selected\"},states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},color:!1,maxSelectionSize:7},_updateUI:function(){this.stating(\"showPalette\")&&this.palette._updateUI(),this.picker._updateUI()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,togglePaletteOnly:t.states.togglePaletteOnly,showPalette:t.states.showPalette,showPaletteOnly:t.states.showPaletteOnly,showSelectionPalette:t.showSelectionPalette,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){l.Plugin.prototype._construct.call(this,t,e);var t=this.$el=this.$(),e=this.options,n=(e.theme,this.$pickerContainer=t.find(e.selectors.pickerContainer)),i=this.$paletteContainer=t.find(e.selectors.paletteContainer),t=(this.$toggleButton=t.find(e.selectors.toggleButton),this._initialColor=e.color);this._isEmpty=!t;i[0]&&(this.palette=p.instantiate(i[0],{selectionPalette:e.selectionPalette,color:e.color,palette:e.palette,selectionPalette:e.selectionPalette})),n[0]&&(this.picker=h.instantiate(n[0],{color:e.color,states:{showInput:e.states.showInput,allowEmpty:e.states.allowEmpty,showButtons:e.states.showButtons,showInitial:e.states.showInitial,showAlpha:e.states.showAlpha}}),this.listenTo(this.picker,\"canceled\",t=>{this.emit(\"canceled\")}),this.listenTo(this.picker,\"choosed\",t=>{this.emit(\"choosed\")}),this.listenTo(this.picker,\"picked\",(t,e)=>{this.emit(\"picked\",e)})),this._init()},_init:function(){var n=this;this.options;e.isIE&&this.$container.find(\"*:not(input)\").attr(\"unselectable\",\"on\"),this._applyOptions(),this.listenTo(this.$toggleButton,\"click\",function(t){s.stop(t),n.stating(\"showPaletteOnly\",!n.stating(\"showPaletteOnly\"))}),this.listenTo(this.palette,\"selected\",function(t,e){n.picker.current(e)})},revert:function(){this.set(this._colorOnShow,!0),this._updateOriginalInput(!0)},get:function(){return this.picker.current()},set:function(t){this.picker.current(t),this.palette.current(t)},_applyStates:function(){var t=this._states;t.showPaletteOnly&&(t.showPalette=!0),this.$toggleButton.text(t.showPaletteOnly?this.option(\"texts.togglePaletteMoreText\"):this.option(\"texts.togglePaletteLessText\")),this.$el.toggleClass(\"sp-input-disabled\",!t.showInput).toggleClass(\"sp-clear-enabled\",!!t.allowEmpty).toggleClass(\"sp-alpha-enabled\",t.showAlpha).toggleClass(\"sp-buttons-disabled\",!t.showButtons).toggleClass(\"sp-palette-buttons-disabled\",!t.togglePaletteOnly).toggleClass(\"sp-palette-disabled\",!t.showPalette).toggleClass(\"sp-palette-only\",t.showPaletteOnly).toggleClass(\"sp-initial-disabled\",!t.showInitial),t.showPaletteOnly&&this.$el.css(\"left\",\"-=\"+(this.$pickerContainer.outerWidth(!0)+5))},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this.stating(\"showPalette\")&&this.palette.reflow(),this.picker.reflow()}});return l.register(f),d.ColorPane=f}),define(\"skylark-domx-plugins-colors/color-box\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-popups\",\"skylark-graphics-colors/color\",\"./colors\",\"./Color-pane\"],function(n,t,e,i,r,s,a,o,l,c,u){\"use strict\";var d=a.Plugin.inherit({klassName:\"ColorBox\",pluginName:\"lark.colors.box\",options:{pane:{states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},maxSelectionSize:7,palette:void 0,selectionPalette:void 0},color:!1},_updateUI:function(){var t,e=this.get();this.$previewElement.removeClass(\"sp-clear-display\"),this.$previewElement.css(\"background-color\",\"transparent\"),!e&&this.stating(\"allowEmpty\")?this.$previewElement.addClass(\"sp-clear-display\"):(e.toHexString(),t=e.toRgbString(),this.$previewElement.css(\"background-color\",t),e.toString()),this.pane._updateUI()},_applyOptions:function(){this.reflow()},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e),this.$el=this.$();t=this.options,e=this.$pane=i(t.pane.template);this.$previewElement=this.$el.find(\".sp-preview-inner\");e[0]&&(this.pane=u.instantiate(e[0],n.mixin({color:t.color},t.pane))),this._init()},_init:function(){var e=this,n=(this.options,this._applyOptions(),!1);function i(){n&&(n=!1,e.$pane.hide())}this.$pane.hide(),this.listenTo(this.$el,\"click touchstart\",function(t){n?i():n||(n=!0,e.$pane.show(),e.reflow(),e._updateUI()),r.stop(t)}),this.listenTo(this.pane,\"picked\",(t,e)=>{this.$previewElement.css(\"background-color\",e.toRgbString())}),this.listenTo(this.pane,\"canceled choosed\",t=>{i()})},revert:function(){this.pane.revert()},get:function(){return this.pane.get()},set:function(t){this.pane.set(t)},reflow:function(){this.$pane.css(\"position\",\"absolute\"),this.$pane.offset(o.calcOffset(this.$pane[0],this.$el[0])),this.pane.reflow()}});return a.register(d),c.ColorBox=d}),define(\"skylark-domx-plugins-colors/color-pane\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-fx\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-popups\",\"skylark-graphics-colors/color\",\"./colors\",\"./color-picker\",\"./color-palette\"],function(t,e,n,i,r,s,a,o,l,c,u,d,h,p){\"use strict\";var f=l.Plugin.inherit({klassName:\"ColorPane\",pluginName:\"lark.colors.pane\",options:{selectors:{pickerContainer:\".sp-picker-container\",toggleButton:\".sp-palette-toggle\",paletteContainer:\".sp-palette\"},draggingClass:\"sp-dragging\",texts:{togglePaletteMoreText:\"more\",togglePaletteLessText:\"less\",clearText:\"Clear Color Selection\",noColorSelectedText:\"No Color Selected\"},states:{showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,showInput:!1,allowEmpty:!1,showButtons:!0,showInitial:!1,showAlpha:!1},color:!1,maxSelectionSize:7},_updateUI:function(){this.stating(\"showPalette\")&&this.palette._updateUI(),this.picker._updateUI()},_applyOptions:function(){var t=this.options;this._states={allowEmpty:t.states.allowEmpty,showInput:t.states.showInput,showAlpha:t.states.showAlpha,showButtons:t.states.showButtons,togglePaletteOnly:t.states.togglePaletteOnly,showPalette:t.states.showPalette,showPaletteOnly:t.states.showPaletteOnly,showSelectionPalette:t.showSelectionPalette,showInitial:t.states.showInitial},this._applyStates(),this.reflow()},_construct:function(t,e){l.Plugin.prototype._construct.call(this,t,e);var t=this.$el=this.$(),e=this.options,n=(e.theme,this.$pickerContainer=t.find(e.selectors.pickerContainer)),i=this.$paletteContainer=t.find(e.selectors.paletteContainer),t=(this.$toggleButton=t.find(e.selectors.toggleButton),this._initialColor=e.color);this._isEmpty=!t;i[0]&&(this.palette=p.instantiate(i[0],{selectionPalette:e.selectionPalette,color:e.color,palette:e.palette,selectionPalette:e.selectionPalette})),n[0]&&(this.picker=h.instantiate(n[0],{color:e.color,states:{showInput:e.states.showInput,allowEmpty:e.states.allowEmpty,showButtons:e.states.showButtons,showInitial:e.states.showInitial,showAlpha:e.states.showAlpha}}),this.listenTo(this.picker,\"canceled\",t=>{this.emit(\"canceled\")}),this.listenTo(this.picker,\"choosed\",t=>{this.emit(\"choosed\")}),this.listenTo(this.picker,\"picked\",(t,e)=>{this.emit(\"picked\",e)})),this._init()},_init:function(){var n=this;this.options;e.isIE&&this.$container.find(\"*:not(input)\").attr(\"unselectable\",\"on\"),this._applyOptions(),this.listenTo(this.$toggleButton,\"click\",function(t){s.stop(t),n.stating(\"showPaletteOnly\",!n.stating(\"showPaletteOnly\"))}),this.listenTo(this.palette,\"selected\",function(t,e){n.picker.current(e)})},revert:function(){this.set(this._colorOnShow,!0),this._updateOriginalInput(!0)},get:function(){return this.picker.current()},set:function(t){this.picker.current(t),this.palette.current(t)},_applyStates:function(){var t=this._states;t.showPaletteOnly&&(t.showPalette=!0),this.$toggleButton.text(t.showPaletteOnly?this.option(\"texts.togglePaletteMoreText\"):this.option(\"texts.togglePaletteLessText\")),this.$el.toggleClass(\"sp-input-disabled\",!t.showInput).toggleClass(\"sp-clear-enabled\",!!t.allowEmpty).toggleClass(\"sp-alpha-enabled\",t.showAlpha).toggleClass(\"sp-buttons-disabled\",!t.showButtons).toggleClass(\"sp-palette-buttons-disabled\",!t.togglePaletteOnly).toggleClass(\"sp-palette-disabled\",!t.showPalette).toggleClass(\"sp-palette-only\",t.showPaletteOnly).toggleClass(\"sp-initial-disabled\",!t.showInitial),t.showPaletteOnly&&this.$el.css(\"left\",\"-=\"+(this.$pickerContainer.outerWidth(!0)+5))},stating:function(t,e){if(void 0===e)return this._states[t];this._states[t]=e,this._applyStates()},reflow:function(){this.stating(\"showPalette\")&&this.palette.reflow(),this.picker.reflow()}});return l.register(f),d.ColorPane=f}),define(\"skylark-domx-plugins-colors/colorer\",[\"skylark-langx/langx\",\"skylark-domx-data\",\"skylark-domx-query\",\"./colors\",\"./color-box\",\"./color-pane\"],function(l,i,c,t,u,d){var h=[\"<div class='sp-replacer'>\",\"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\"<div class='sp-dd'>&#9660;</div>\",\"</div>\"].join(\"\"),p=[\"<div class='sp-container'>\",\"<div class='sp-palette-container'>\",\"<div class='sp-palette sp-thumb sp-cf'></div>\",\"<div class='sp-palette-button-container sp-cf'>\",\"<button type='button' class='sp-palette-toggle'></button>\",\"</div>\",\"</div>\",\"<div class='sp-picker-container'>\",\"<div class='sp-top sp-cf'>\",\"<div class='sp-fill'></div>\",\"<div class='sp-top-inner'>\",\"<div class='sp-color'>\",\"<div class='sp-sat'>\",\"<div class='sp-val'>\",\"<div class='sp-dragger'></div>\",\"</div>\",\"</div>\",\"</div>\",\"<div class='sp-clear sp-clear-display'>\",\"</div>\",\"<div class='sp-hue'>\",\"<div class='sp-slider'></div>\",\"</div>\",\"</div>\",\"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\"</div>\",\"<div class='sp-input-container sp-cf'>\",\"<input class='sp-input' type='text' spellcheck='false'  />\",\"</div>\",\"<div class='sp-initial sp-thumb sp-cf'></div>\",\"<div class='sp-button-container sp-cf'>\",\"<a class='sp-cancel' href='#'></a>\",\"<button type='button' class='sp-choose'></button>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\");function r(t,e){var n=(e=l.mixin({color:!1,flat:!1,appendTo:\"body\",maxSelectionSize:7,preferredFormat:!1,containerClassName:\"\",replacerClassName:\"\",theme:\"sp-light\",offset:null,pane:{}},e)).theme,i=e.flat,r=e.appendTo,s=c(t),t=c(p,t.ownerDocument).addClass(n),a=s.is(\"input\"),o=(a&&s.attr(\"type\"),this._shouldReplace=a&&!i),n=o?c(h).addClass(n).addClass(e.className).addClass(e.replacerClassName):c([]);return delete e.flat,delete e.appendTo,e.color=e.color||a&&s.val(),o&&s.after(n).hide(),t.toggleClass(\"sp-flat\",i).addClass(e.containerClassName),i?(s.after(t).hide(),a=new d(t[0],e),e.picked&&a.on(\"picked\",e.picked),e.choosed&&a.on(\"choosed\",e.choosed),e.canceled&&a.on(\"canceled\",e.canceled),t.show(),a):((o=1!==(o=\"parent\"===r?s.parent():c(r)).length?c(\"body\"):o).append(t),e.pane.template=t,new u(n[0],e))}return c.fn.colorer=function(t){var e,n=this[0];if(n)return(e=i.data(n,\"domx.colorer\"))||(e=r(n,t),i.data(n,\"domx.colorer\",e)),e},t.colorer=r}),define(\"skylark-domx-plugins-colors/drag\",[],function(){var u={obj:null,gradx:null,init:function(t,e,n,i,r,s,a,o,l,c){t.onmousedown=u.start,t.hmode=!a,t.vmode=!o,t.root=e&&null!=e?e:t,t.hmode&&isNaN(parseInt(t.root.style.left))&&(t.root.style.left=\"0px\"),!t.hmode&&isNaN(parseInt(t.root.style.right))&&(t.root.style.right=\"0px\"),t.minX=void 0!==n?n:null,t.minY=void 0!==r?r:null,t.maxX=void 0!==i?i:null,t.maxY=void 0!==s?s:null,t.xMapper=l||null,t.yMapper=c||null,t.root.onDragStart=new Function,t.root.onDragEnd=new Function,t.root.onDrag=new Function},start:function(t){u.gradx.current_slider_id=\"#\"+this.id;var e=u.obj=this,n=(t=u.fixE(t),parseInt(e.vmode?e.root.style.top:e.root.style.bottom)),i=parseInt(e.hmode?e.root.style.left:e.root.style.right);return e.root.onDragStart(i,n),e.lastMouseX=t.clientX,e.lastMouseY=t.clientY,e.hmode?(null!=e.minX&&(e.minMouseX=t.clientX-i+e.minX),null!=e.maxX&&(e.maxMouseX=e.minMouseX+e.maxX-e.minX)):(null!=e.minX&&(e.maxMouseX=-e.minX+t.clientX+i),null!=e.maxX&&(e.minMouseX=-e.maxX+t.clientX+i)),e.vmode?(null!=e.minY&&(e.minMouseY=t.clientY-n+e.minY),null!=e.maxY&&(e.maxMouseY=e.minMouseY+e.maxY-e.minY)):(null!=e.minY&&(e.maxMouseY=-e.minY+t.clientY+n),null!=e.maxY&&(e.minMouseY=-e.maxY+t.clientY+n)),document.onmousemove=u.drag,document.onmouseup=u.end,!1},drag:function(t){t=u.fixE(t);var e,n,i=u.obj,r=(u.gradx.update_style_array(),u.gradx.apply_style(u.gradx.panel,u.gradx.get_style_value()),u.gradx.gx(\"#\"+i.id).css(\"left\")),r=(60<parseInt(r)&&parseInt(r)<390&&u.gradx.gx(\"#gradx_slider_info\").css(\"left\",r).show(),u.gradx.gx(\"#\"+i.id).css(\"backgroundColor\")),r=u.gradx.get_rgb_obj(r),r=(u.gradx.cp.colorer().set(r),t.clientY),t=t.clientX,s=parseInt(i.vmode?i.root.style.top:i.root.style.bottom),a=parseInt(i.hmode?i.root.style.left:i.root.style.right);return null!=i.minX&&(t=i.hmode?Math.max(t,i.minMouseX):Math.min(t,i.maxMouseX)),null!=i.maxX&&(t=i.hmode?Math.min(t,i.maxMouseX):Math.max(t,i.minMouseX)),null!=i.minY&&(r=i.vmode?Math.max(r,i.minMouseY):Math.min(r,i.maxMouseY)),null!=i.maxY&&(r=i.vmode?Math.min(r,i.maxMouseY):Math.max(r,i.minMouseY)),e=a+(t-i.lastMouseX)*(i.hmode?1:-1),n=s+(r-i.lastMouseY)*(i.vmode?1:-1),i.xMapper?e=i.xMapper(s):i.yMapper&&(n=i.yMapper(a)),u.obj.root.style[i.hmode?\"left\":\"right\"]=e+\"px\",u.obj.lastMouseX=t,u.obj.lastMouseY=r,u.obj.root.onDrag(e,n),!1},end:function(){document.onmousemove=null,document.onmouseup=null,u.obj.root.onDragEnd(parseInt(u.obj.root.style[u.obj.hmode?\"left\":\"right\"]),parseInt(u.obj.root.style[u.obj.vmode?\"top\":\"bottom\"])),u.obj=null},fixE:function(t){return void 0===(t=void 0===t?window.event:t).layerX&&(t.layerX=t.offsetX),void 0===t.layerY&&(t.layerY=t.offsetY),t}};return u}),define(\"skylark-domx-plugins-colors/gradienter\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-finder\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-graphics-colors/color\",\"./colors\",\"./colorer\",\"./drag\"],function(r,t,e,n,i,s,a,o,l,c,u){\"use strict\";void 0===s.fn.draggable&&(s.fn.draggable=function(){var t=document.getElementById(this.attr(\"id\"));return t.style.top=\"121px\",u.init(t,null,26,426,86,86),this});return l.Gradienter=function(t,e){var n,i={targets:[],sliders:[],direction:\"left\",type:\"linear\",code_shown:!1,change:function(t,e){}},l=u.gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:\"left\",type:\"linear\",shape:\"cover\",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=s},add_event:function(t,e,n){var i,r;e=e,r=n,(i=t).attachEvent?i.attachEvent(\"on\"+e,function(){r.call(i)}):i.addEventListener&&i.addEventListener(e,r,!1)},get_random_position:function(){for(var t;t=parseInt(100*Math.random()),-1<this.rand_pos.indexOf(t););return this.rand_pos.push(t),t},get_random_rgb:function(){for(var t;t=\"rgb(\"+parseInt(255*Math.random())+\", \"+parseInt(255*Math.random())+\", \"+parseInt(255*Math.random())+\")\",-1<this.rand_RGB.indexOf(t););return this.rand_RGB.push(t),t},update_target:function(t){if(0<this.targets.length)for(var e,n,i=this.targets.length,r=t.length,s=0;s<i;s++)for(n=l.gx(this.targets[s]),e=0;e<r;e++)n.css(\"background-image\",t[e])},apply_style:function(t,e){for(var n,i=\"linear\",r=(\"linear\"!=l.type&&(i=\"radial\"),(n=-1<e.indexOf(this.direction)?[\"-webkit-\"+i+\"-gradient(\"+e+\")\",\"-moz-\"+i+\"-gradient(\"+e+\")\",\"-ms-\"+i+\"-gradient(\"+e+\")\",\"-o-\"+i+\"-gradient(\"+e+\")\",i+\"-gradient(\"+e+\")\"]:[e]).length),s=\"\";0<r;)t.css(\"background\",n[--r]),s+=\"background: \"+n[r]+\";\\n\";this.change(this.sliders,n),this.update_target(n),l.gx(\"#gradx_code\").html(s)},apply_default_styles:function(){this.update_style_array();var t=this.get_style_value();this.apply_style(this.panel,t)},update_style_array:function(){this.sliders=[];for(var t,e,n=l.slider_ids.length,i=0;i<n;i++)e=\"#\"+l.slider_ids[i],t=parseInt(l.gx(e).css(\"left\")),t=parseInt(t/l.container_width*100),t-=6,l.sliders.push([l.gx(e).css(\"background-color\"),t]);this.sliders.sort(function(t,e){return t[1]>e[1]?1:-1})},get_style_value:function(){var t=l.slider_ids.length;if(1===t)e=this.sliders[0][0];else{for(var e=\"\",n=\"\",i=0;i<t;i++)\"\"==this.sliders[i][1]?e+=n+this.sliders[i][0]:(100<this.sliders[i][1]&&(this.sliders[i][1]=100),e+=n+(this.sliders[i][0]+\" \"+this.sliders[i][1])+\"%\"),n=\" , \";e=\"linear\"==this.type?this.direction+\" , \"+e:this.direction+\" , \"+this.type+\" \"+this.shape+\" , \"+e}return e},get_rgb_obj:function(t){return t=(t=(t=t.split(\"(\"))[1]).split(\",\"),{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2])}},load_info:function(t){var e=\"#\"+t.id;this.current_slider_id=e,-1<this.slider_ids.indexOf(t.id)&&(t=l.gx(e).css(\"backgroundColor\"),t=this.get_rgb_obj(t),e=l.gx(e).css(\"left\"),26<parseInt(e)&&parseInt(e)<426&&l.gx(\"#gradx_slider_info\").css(\"left\",e).show(),this.set_colorpicker(t),console.log(t))},add_slider:function(t){var e,n,i=t=0===t.length?[{color:l.get_random_rgb(),position:l.get_random_position()},{color:l.get_random_rgb(),position:l.get_random_position()}]:t;for(n in i){if(void 0===i[n].position)break;var r=parseInt(i[n].position*this.container_width/100)+26+\"px\",s=\"gradx_slider_\"+this.slider_index;this.sliders.push([i[n].color,i[n].position]),this.slider_ids.push(s),e=\"<div class='gradx_slider' id='\"+s+\"'></div>\",l.gx(\"#gradx_start_sliders_\"+this.id).append(e),l.gx(\"#\"+s).css(\"backgroundColor\",i[n].color).css(\"left\",r),this.slider_index++}for(var a=0,o=this.slider_ids.length;a<o;a++)l.gx(\"#\"+this.slider_ids[a]).draggable({containment:\"parent\",axis:\"x\",start:function(){l.jQ_present&&(l.current_slider_id=\"#\"+l.gx(this).attr(\"id\"))},drag:function(){l.update_style_array(),l.apply_style(l.panel,l.get_style_value());var t=l.gx(l.current_slider_id).css(\"left\"),t=(26<parseInt(t)&&parseInt(t)<426&&l.gx(\"#gradx_slider_info\").css(\"left\",t).show(),l.gx(l.current_slider_id).css(\"backgroundColor\")),t=l.get_rgb_obj(t);l.cp.colorer().set(t)}}).click(function(){return l.load_info(this),!1})},set_colorpicker:function(t){l.cp.colorer({picked:function(t,e){0!=l.current_slider_id&&(e=e.toRgbString(),l.gx(l.current_slider_id).css(\"background-color\",e),l.update_style_array(),l.apply_style(l.panel,l.get_style_value()))},choosed:function(t){l.gx(\"#gradx_slider_info\").hide()},canceled:function(t){l.gx(\"#gradx_slider_info\").hide()},flat:!0,showAlpha:!0,color:t,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(t){for(var e,n,i=t.length,r=\"\",s=0;s<i;s++)e=(e=t[s].split(\" \"))[0],n=s<2?e[1]:\"\",e=e.replace(\"-\",\" \"),r+=\"<option value=\"+t[s]+\" \"+n+\">\"+e+\"</option>\";return r},generate_radial_options:function(){var t=[\"horizontal-center disabled\",\"center selected\",\"left\",\"right\"];l.gx(\"#gradx_gradient_subtype\").html(l.generate_options(t)),t=[\"vertical-center disabled\",\"center selected\",\"top\",\"bottom\"],l.gx(\"#gradx_gradient_subtype2\").html(l.generate_options(t)).show()},generate_linear_options:function(){var t=[\"horizontal-center disabled\",\"left selected\",\"right\",\"top\",\"bottom\"];l.gx(\"#gradx_gradient_subtype\").html(l.generate_options(t)),l.gx(\"#gradx_gradient_subtype2\").hide()},destroy:function(){var t,e={targets:[],sliders:[],direction:\"left\",type:\"linear\",code_shown:!1,change:function(t,e){}};for(t in e)l[t]=e[t]},load_gradx:function(t,e){this.me=l.gx(t),this.id=t.replace(\"#\",\"\"),t=this.id,this.current_slider_id=!1;var n,i,r=\"<div class='gradx'>\\n<div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i>add</div>\\n<div class='gradx_slectboxes'>\\n<select id='gradx_gradient_type' class='gradx_gradient_type'>\\n    <option value='linear'>Linear</option>\\n    <option value='circle'>Radial - Circle</option>\\n    <option value='ellipse'>Radial - Ellipse</option>\\n</select>\\n<select id='gradx_gradient_subtype' class='gradx_gradient_type'>\\n    <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\\n    <option value='left' selected>Left</option>\\n    <option value='right'>Right</option>\\n    <option value='top'>Top</option>\\n    <option value='bottom'>Bottom</option>\\n</select>\\n<select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\\n</select>\\n<select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\\n</select>\\n</div>\\n<div class='gradx_container' id='gradx_\"+t+\"'>\\n    <div id='gradx_stop_sliders_\"+t+\"'></div>\\n    <div class='gradx_panel' id='gradx_panel_\"+t+\"'></div>\\n    <div class='gradx_start_sliders' id='gradx_start_sliders_\"+t+\"'>\\n        <div class='cp-default' id='gradx_slider_info'>\\n            <div id='gradx_slider_controls'>\\n                <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\\n            </div>\\n            <div id='gradx_slider_content'></div>\\n        </div> \\n    </div>\\n</div>\\n<div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\\n<div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\\n<textarea class='gradx_code' id='gradx_code'></textarea>\\n</div>\",r=(this.me.html(r),l.generate_options([\"gradient-size disabled\",\"closest-side selected\",\"closest-corner\",\"farthest-side\",\"farthest-corner\",\"contain\",\"cover\"]));l.gx(\"#gradx_radial_gradient_size\").html(r),this.container=l.gx(\"#gradx_\"+t),this.panel=l.gx(\"#gradx_panel_\"+t),this.container_width=400,this.add_slider(e),l.add_event(document,\"click\",function(){if(!l.slider_hovered[t])return l.gx(\"#gradx_slider_info\").hide(),!1}),l.gx(\"#gradx_add_slider\").click(function(){l.add_slider([{color:l.get_random_rgb(),position:l.get_random_position()}]),l.update_style_array(),l.apply_style(l.panel,l.get_style_value())}),l.cp=l.gx(\"#gradx_slider_content\"),l.set_colorpicker(\"blue\"),l.gx(\"#gradx_delete_slider\").click(function(){l.gx(l.current_slider_id).remove(),l.gx(\"#gradx_slider_info\").hide();for(var t=l.current_slider_id.replace(\"#\",\"\"),e=0;e<l.slider_ids.length;e++)l.slider_ids[e]==t&&l.slider_ids.splice(e,1);l.update_style_array(),l.apply_style(l.panel,l.get_style_value()),l.current_slider_id=!1}),l.gx(\"#gradx_code\").focus(function(){var t=l.gx(this);t.select(),t.mouseup(function(){return t.off(\"mouseup\"),!1})}),l.gx(\"#gradx_gradient_type\").change(function(){var t=l.gx(this).val();\"linear\"!==t?l.generate_radial_options():(l.generate_linear_options(),l.gx(\"#gradx_gradient_subtype\").val(\"left\")),l.type=t,l.direction=l.gx(\"#gradx_gradient_subtype\").val(),l.apply_style(l.panel,l.get_style_value())}),\"linear\"!==this.type?(l.gx(\"#gradx_gradient_type\").val(this.type),l.generate_radial_options(),\"left\"!==this.direction?(n=(r=-1<this.direction.indexOf(\",\")?this.direction.split(\",\"):this.direction.split(\" \"))[0],i=r[1],l.gx(\"#gradx_gradient_subtype\").val(n),l.gx(\"#gradx_gradient_subtype2\").val(i)):(n=l.gx(\"#gradx_gradient_subtype\").val(),i=l.gx(\"#gradx_gradient_subtype2\").val()),l.direction=n+\" \"+i,l.apply_style(l.panel,l.get_style_value())):\"left\"!==this.direction&&l.gx(\"#gradx_gradient_subtype\").val(this.direction),l.gx(\"#gradx_gradient_subtype\").change(function(){var t,e;\"linear\"===l.type?l.direction=l.gx(this).val():(t=l.gx(this).val(),e=l.gx(\"#gradx_gradient_subtype2\").val(),l.direction=t+\" \"+e),l.apply_style(l.panel,l.get_style_value())}),l.gx(\"#gradx_gradient_subtype2\").change(function(){var t=l.gx(\"#gradx_gradient_subtype\").val(),e=l.gx(this).val();l.direction=t+\" \"+e,l.apply_style(l.panel,l.get_style_value())}),l.gx(\"#gradx_radial_gradient_size\").change(function(){l.shape=l.gx(this).val(),l.apply_style(l.panel,l.get_style_value())}),l.gx(\"#gradx_show_code\").click(function(){l.code_shown?(l.code_shown=!1,l.gx(\"#gradx_show_code span\").text(\"show the code\"),l.gx(\"#gradx_code\").hide()):(l.gx(\"#gradx_show_code span\").text(\"hide the code\"),l.gx(\"#gradx_code\").show(),l.code_shown=!0)}),l.code_shown&&(l.gx(\"#gradx_show_code span\").text(\"hide the code\"),l.gx(\"#gradx_code\").show()),l.add_event(document.getElementById(\"gradx_slider_info\"),\"mouseout\",function(){l.slider_hovered[t]=!1}),l.add_event(document.getElementById(\"gradx_slider_info\"),\"mouseover\",function(){l.slider_hovered[t]=!0})}};for(n in l.load_jQ(),r.mixin(i,e),i)l[n]=i[n];l.load_gradx(t,l.sliders),l.apply_default_styles()}}),define(\"skylark-domx-plugins-colors/main\",[\"skylark-domx-query\",\"./colors\",\"./colorer\",\"./color-palette\",\"./color-picker\",\"./color-pane\",\"./gradienter\"],function(t,e,n){return e}),define(\"skylark-domx-plugins-colors\",[\"skylark-domx-plugins-colors/main\"],function(t){return t}),define(\"skylark-domx-plugins-groups/groups\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.groups={}}),define(\"skylark-domx-plugins-groups/group\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-domx-plugins-base\",\"./groups\"],function(i,r,s,t,e){\"use strict\";var n=t.Plugin.inherit({klassName:\"Group\",pluginName:\"lark.groups.group\",options:{classes:{},selectors:{},item:{template:'<span><i class=\"glyphicon\"></i><a href=\"javascript: void(0);\"></a> </span>',selector:\"li\",selectable:!1,multiSelect:!1,classes:{base:\"item\",selected:\"selected\",active:\"active\"}},data:{}},selected:null,_construct:function(t,e){this.overrided(t,e);var n=this,t=this._velm=s(this._elm),e=this.options.item.selector;t.on(\"click\",e,function(){var t;return s(this).hasClass(\"disabled\")||(t=n.getItemValue(this),n.setActiveItem(t),n.options.item.selectable&&(n.options.item.multiSelect?n.toggleSelectOneItem(t):(n.clearSelectedItems(),n.selectOneItem(t)))),!1}),this.resetItems(),this.options.data.items&&this.addItems(this.options.data.items)},resetItems:function(){this._$items=this._velm.$(this.options.item.selector)},findItem:function(t){t=i.isNumber(t)?this._$items.eq(t):i.isString(t)?this._$items.filter('[data-value=\"'+t+'\"]'):r(t);return t[0]},getItems:function(){return this._$items},getItemValue:function(t){let e=r(t),n=e.data(\"value\");return n=void 0===n?this._$items.index(e[0]):n},getItemsCount:function(){return this._$items.size()},getItemIndex:function(t){return this._$items.index(t)},isSelectedItem:function(t){return r(this.findItem(t)).hasClass(this.options.item.classes.selected)},selectOneItem:function(t){r(this.findItem(t)).addClass(this.options.item.classes.selected)},unselectOneItem:function(t){r(this.findItem(t)).removeClass(this.options.item.classes.selected)},clearSelectedItems:function(){var t=this.options.item.classes.selected;this._$items.filter(\".\"+t).removeClass(t)},getSelectedItemValues:function(){var t=this.options.item.classes.selected;return this._$items.filter(\".\"+t).map(t=>this.getItemValue(t))},getSelectedItems:function(){var t=this.options.item.classes.selected;return this._$items.filter(\".\"+t)},setSelectedItems:function(t,e){i.isArray(t)||(t=[t]),this.clearSelectedItems();for(var n=0;n<t.length;n++)this.selectOneItem(t[n])},getActiveItem:function(){var t=this.options.item.classes.active;return this._$items.filter(\".\"+t)[0]||null},setActiveItem:function(t){var e,n=this.getActiveItem(),t=this.findItem(t);t!=n&&(e=this.options.item.classes.active,r(n).removeClass(e),r(t).addClass(e))},getSelectedItem:function(){return this.getSelectedItems()[0]||null},toggleSelectOneItem:function(t){this.isSelectedItem(t)?this.unselectOneItem(t):this.selectOneItem(t)},addItems:function(t){let e=this.getItemsCount();for(var n=0;n<t.length;n++)this.addItem(e++,t[n]);this.resetItems()},addItem:function(t,e){var e=this.renderItemHtml(e),n=this.options.item.classes.base,e=r(e);n&&e.addClass(n),(this._$itemsContainer||this.$()).append(e)},renderItemHtml:function(t){var e;return this._renderItemHtml||(e=this.options.item.template,i.isString(e)?this._renderItemHtml=i.template(e):i.isFunction(e)&&(this._renderItemHtml=e)),this._renderItemHtml(t)}});return t.register(n),e.Group=n}),define(\"skylark-domx-plugins-toggles/toggles\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.toggles={}}),define(\"skylark-domx-plugins-toggles/collapse\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(i,r,s,t,e,n){\"use strict\";var a=e.Plugin.inherit({klassName:\"Collapse\",pluginName:\"lark.toggles.collapse\",options:{toggle:!0},_construct:function(t,e){this.overrided(t,e),this.$element=this.$(),this.transitioning=null,this.options.toggle&&this.toggle()},dimension:function(){return this.$element.hasClass(\"width\")?\"width\":\"height\"},show:function(){if(!this.transitioning&&!this.$element.hasClass(\"in\")){var t=s.create(\"show.collapse\");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension(),t=(this.$element.removeClass(\"collapse\").addClass(\"collapsing\")[e](0).attr(\"aria-expanded\",!0),this.transitioning=1,function(){this.$element.removeClass(\"collapsing\").addClass(\"collapse in\")[e](\"\"),this.transitioning=0,this.$element.trigger(\"shown.collapse\")});if(!r.support.transition)return t.call(this);var n=i.camelCase([\"scroll\",e].join(\"-\"));this.$element.one(\"transitionEnd\",i.proxy(t,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[e](this.$element[0][n])}}},hide:function(){if(!this.transitioning&&this.$element.hasClass(\"in\")){var t=s.create(\"hide.collapse\");if(this.$element.trigger(t),!t.isDefaultPrevented()){var t=this.dimension(),e=(this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass(\"collapsing\").removeClass(\"collapse in\").attr(\"aria-expanded\",!1),this.transitioning=1,function(){this.transitioning=0,this.$element.removeClass(\"collapsing\").addClass(\"collapse\").trigger(\"hidden.collapse\")});if(!r.support.transition)return e.call(this);this.$element[t](0).one(\"transitionEnd\",i.proxy(e,this)).emulateTransitionEnd(a.TRANSITION_DURATION)}}},toggle:function(){this[this.$element.hasClass(\"in\")?\"hide\":\"show\"]()}});return a.TRANSITION_DURATION=350,e.register(a),n.Collapse=a}),define(\"skylark-domx-plugins-groups/linear\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-toggles/collapse\",\"./groups\",\"./group\"],function(t,e,n,i,r,s,a){\"use strict\";a=a.inherit({klassName:\"Linear\",pluginName:\"lark.groups.linear\",options:{item:{selectable:!0}},_construct:function(t,e){this.overrided(t,e)}});return i.register(a),s.Linear=a}),define(\"skylark-devices-points/points\",[\"skylark-langx-ns\"],function(t){return t.attach(\"devices.points\",{})}),define(\"skylark-devices-points/touch\",[\"./points\"],function(t){return t.touch={isTouchEnabled:function(){return new Promise(function(e){var n=function(t){e(!!t),window.removeEventListener(\"touchstart\",n)};window.addEventListener(\"touchstart\",n,!1),setTimeout(n,1e4)})},mousy:function(t){function e(t){if(!(1<t.touches.length)){var e=t.changedTouches[0],n=\"\";switch(t.type){case\"touchstart\":n=\"mousedown\";break;case\"touchmove\":n=\"mousemove\";break;case\"touchend\":n=\"mouseup\";break;default:return}var i=document.createEvent(\"MouseEvent\");i.initMouseEvent(n,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i),t.preventDefault()}}(t=t||document).addEventListener(\"touchstart\",e,!0),t.addEventListener(\"touchmove\",e,!0),t.addEventListener(\"touchend\",e,!0)}}}),define(\"skylark-domx-plugins-dnd/dnd\",[\"skylark-domx-plugins-base/plugins\"],function(t){return t.dnd={}}),define(\"skylark-domx-plugins-scrolls/scrolls\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.scrolls={}}),define(\"skylark-domx-plugins-scrolls/auto-scroll\",[\"skylark-langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-styler\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./scrolls\"],function(e,t,n,C,S,E,T,i,r,s){\"use strict\";var a=r.Plugin.inherit({klassName:\"AutoScroll\",pluginName:\"lark.scrolls.autoscroll\",options:{scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},_construct:function(_,t){this.overrided(_,t),this.autoScrolls=[],this._autoScroll=e.debounce((t,e)=>{var n=this.options,i=n.scrollSensitivity,r=n.scrollSpeed,s=C.scrollingElement(),a=(this.scrollEl=S.scrollableParent(_,!0),0),o=this.scrollEl,l=this.autoScrolls;do{var c,u=o,d=E.boundingRect(u),h=d.top,p=d.bottom,f=d.left,m=d.right,g=d.width,d=d.height,y=u.scrollWidth,k=u.scrollHeight,x=T.css(u),v=u.scrollLeft,b=u.scrollTop,x=u===s?(c=g<y&&(\"auto\"===x.overflowX||\"scroll\"===x.overflowX||\"visible\"===x.overflowX),d<k&&(\"auto\"===x.overflowY||\"scroll\"===x.overflowY||\"visible\"===x.overflowY)):(c=g<y&&(\"auto\"===x.overflowX||\"scroll\"===x.overflowX),d<k&&(\"auto\"===x.overflowY||\"scroll\"===x.overflowY)),m=c&&(Math.abs(m-t)<=i&&v+g<y)-(Math.abs(f-t)<=i&&!!v),g=x&&(Math.abs(p-e)<=i&&b+d<k)-(Math.abs(h-e)<=i&&!!b);if(!l[a])for(var w=0;w<=a;w++)l[w]||(l[w]={});l[a].vx==m&&l[a].vy==g&&l[a].el===u||(l[a].el=u,l[a].vx=m,l[a].vy=g,clearInterval(l[a].pid),!u)||0==m&&0==g||(this.scrollThisInstance=!0,l[a].pid=setInterval(function(){var t=l[this.layer].vy?l[this.layer].vy*r:0,e=l[this.layer].vx?l[this.layer].vx*r:0;E.scrollBy(l[this.layer].el,e,t)}.bind({layer:a}),24)),a++}while(n.bubbleScroll&&o!==s&&(o=S.scrollableParent(o,!1)))},30)},destroy:function(){this._clearAutoScrolls(),this._cancelThrottle(),this._nulling()},handle:function(t,e){this._throttleTimeout=this._autoScroll(t,e)},_clearAutoScrolls:function(){this.autoScrolls.forEach(function(t){clearInterval(t.pid)}),this.autoScrolls=[]},_cancelThrottle:function(){this._throttleTimeout&&this._throttleTimeout.cancel&&(this._throttleTimeout.cancel(),this._throttleTimeout=void 0)},_nulling:function(){this.pointerElemChangedInterval=null,this.lastPointerElemX=null,this.lastPointerElemY=null,this.scrollEl=this.scrollParentEl=this.autoScrolls.length=null}});return r.register(a),s.AutoScroll=a}),define(\"skylark-domx-plugins-dnd/fallback/data-transfer\",[],function(){\"use strict\";function t(){this._dropEffect=\"move\",this._effectAllowed=\"all\",this._data={}}return Object.defineProperty(t.prototype,\"dropEffect\",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"effectAllowed\",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"types\",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),t.prototype.clearData=function(t){null!=t?delete this._data[t]:this._data=null},t.prototype.getData=function(t){return this._data[t]||\"\"},t.prototype.setData=function(t,e){this._data[t]=e},t.prototype.setDragImage=function(t,e,n){this._imgCustom=t,this._imgOffset={x:e,y:n}},t}),define(\"skylark-domx-plugins-dnd/fallback/moused-drag-drop\",[\"skylark-langx\",\"skylark-domx-noder\",\"skylark-domx-query\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-finder\",\"skylark-domx-plugins-scrolls/auto-scroll\",\"./data-transfer\"],function(t,e,i,n,r,s,a,o){\"use strict\";var l=t.Emitter.inherit({_construct:function(t,e,n){this.dnd=t,this._dragSource=e,this._ptDown=n,this._lastClick=0,this._isDragEnabled=!0,this._dataTransfer=new o;t=i(document);this.listenTo(t,\"mousemove\",this._onMouseMove),this.listenTo(t,\"mouseup\",this._onMouseUp)},_onMouseMove:function(t){var e;this._shouldCancelPressHoldMove(t)?this._reset():(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t))&&(e=this._getTarget(t),this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,\"dragstart\",this._dragSource),this._createImage(t),this._dispatchEvent(t,\"dragenter\",e)),this._img&&((this._lastTouch=t).preventDefault(),e!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,\"dragleave\",this._lastTarget),this._dispatchEvent(t,\"dragenter\",e),this._lastTarget=e),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,\"dragover\",e)),this._handleAutoScroll(t))},_onMouseUp:function(t){this._shouldHandle(t)&&(this._destroyImage(),this._dragSource)&&(t.type.indexOf(\"cancel\")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,\"drop\",this._lastTarget),this._dispatchEvent(this._lastTouch,\"dragend\",this._dragSource)),this.destroy()},_shouldHandle:function(t){return t&&!t.defaultPrevented},_shouldHandleMove:function(t){return!l._ISPRESSHOLDMODE&&this._shouldHandle(t)},_shouldHandlePressHoldMove:function(t){return l._ISPRESSHOLDMODE&&this._isDragEnabled},_shouldCancelPressHoldMove:function(t){return l._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>l._PRESSHOLDMARGIN},_shouldStartDragging:function(t){t=this._getDelta(t);return t>l._THRESHOLD||l._ISPRESSHOLDMODE&&t>=l._PRESSHOLDTHRESHOLD},_reset:function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=null,clearInterval(this._pressHoldInterval),this.pointerElemChangedInterval&&(clearInterval(this.pointerElemChangedInterval),this.pointerElemChangedInterval=null),this.autoscroller&&(this.autoscroller.destroy(),this.autoscroller=null)},_getPoint:function(t,e){return{x:e?t.pageX:t.clientX,y:e?t.pageY:t.clientY}},_getDelta:function(t){return l._ISPRESSHOLDMODE&&!this._ptDown?0:(t=this._getPoint(t),Math.abs(t.x-this._ptDown.x)+Math.abs(t.y-this._ptDown.y))},_getTarget:function(t){for(var t=this._getPoint(t),e=document.elementFromPoint(t.x,t.y);e&&\"none\"==getComputedStyle(e).pointerEvents;)e=e.parentElement;return e},_createImage:function(t){this._img&&this._destroyImage(),this._imgCustom=this._dataTransfer._imgCustom,this._imgOffset=this._dataTransfer._imgOffset;var e,n=this._imgCustom||this._dragSource;this._img=n.cloneNode(!0),this._copyStyle(n,this._img),this._img.style.top=this._img.style.left=\"-9999px\",this._imgCustom||(n=n.getBoundingClientRect(),e=this._getPoint(t),this._imgOffset={x:e.x-n.left,y:e.y-n.top},this._img.style.opacity=l._OPACITY.toString()),this._moveImage(t),document.body.appendChild(this._img)},_destroyImage:function(){this._img&&e.remove(this._img),this._img=null,this._imgCustom=null},_moveImage:function(e){var n=this;t.defer(function(){var t;n._img&&(t=n._getPoint(e,!0),r.css(n._img,{position:\"absolute\",pointerEvents:\"none\",zIndex:\"999999\",left:Math.round(t.x-n._imgOffset.x)+\"px\",top:Math.round(t.y-n._imgOffset.y)+\"px\"}))})},_copyProps:function(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];t[r]=e[r]}},_copyStyle:function(t,e){l._rmvAtts.forEach(function(t){e.removeAttribute(t)}),t instanceof HTMLCanvasElement&&((i=e).width=(n=t).width,i.height=n.height,i.getContext(\"2d\").drawImage(n,0,0));for(var n,i,r=getComputedStyle(t),s=0;s<r.length;s++){var a=r[s];a.indexOf(\"transition\")<0&&(e.style[a]=r[a])}e.style.pointerEvents=\"none\";for(s=0;s<t.children.length;s++)this._copyStyle(t.children[s],e.children[s])},_dispatchEvent:function(t,e,n){var i,r;return!(!t||!n)&&(i=document.createEvent(\"Event\"),r=t.touches?t.touches[0]:t,i.initEvent(e,!0,!0),i.button=0,i.which=i.buttons=1,this._copyProps(i,t,l._kbdProps),this._copyProps(i,r,l._ptProps),i.dataTransfer=this._dataTransfer,n.dispatchEvent(i),i.defaultPrevented)},_closestDraggable:function(t){for(;t;t=t.parentElement)if(t.hasAttribute(\"data-draggable\"))return t;return null},_handleAutoScroll:function(t){var e,n=this.dnd,i=t.clientX,r=t.clientY;document.elementFromPoint(i,r);this.pointerElemChangedInterval&&i===this.lastPointerElemX&&r===this.lastPointerElemY||(this.pointerElemChangedInterval&&clearInterval(this.pointerElemChangedInterval),e=null,this.pointerElemChangedInterval=setInterval(function(){var t=s.scrollableParent(document.elementFromPoint(i,r),!0);t!==e&&(e=t,this.autoscroller&&(this.autoscroller.destroy(),this.autoscroller=null),this.autoscroller=new a(e,n.dragging.options),this.autoscroller.handle(i,r))},10),this.lastPointerElemX=i,this.lastPointerElemY=r)},destroy:function(){this.unlistenTo(),this._reset()}});return l._THRESHOLD=5,l._OPACITY=.5,l._DBLCLICK=500,l._CTXMENU=900,l._ISPRESSHOLDMODE=!1,l._PRESSHOLDAWAIT=400,l._PRESSHOLDMARGIN=25,l._PRESSHOLDTHRESHOLD=0,l._rmvAtts=\"id,class,style,draggable\".split(\",\"),l._kbdProps=\"altKey,ctrlKey,metaKey,shiftKey\".split(\",\"),l._ptProps=\"pageX,pageY,clientX,clientY,screenX,screenY\".split(\",\"),l}),define(\"skylark-domx-plugins-dnd/manager\",[\"skylark-langx/langx\",\"skylark-langx-hoster/is-mobile\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"./dnd\",\"./fallback/moused-drag-drop\"],function(i,t,e,r,n,s,a,o,l,c){a.on,a.off,r.attr,r.removeAttr,s.pagePosition,o.addClass,s.height;var u=\"draggable\"in document.createElement(\"div\")&&!t.apple.device;return new(l.Manager=i.Evented.inherit({klassName:\"Manager\",init:function(){},prepare:function(t,e){e=a.create(\"preparing\",{dragSource:t.dragSource,dragHandle:t.dragHandle,originalEvent:e});if(t.trigger(e),t.dragSource=e.dragSource,t.dragHandle=e.dragHandle,t.dragSource){this.useNativeDnd=!t.options.forceFallback&&u,this.dragging=t,r.data(t.dragSource,\"draggable\",!0),this.useNativeDnd?r.attr(t.dragSource,\"draggable\",\"true\"):this._fallbacker=new c(this,t.dragSource,t.startPos);try{document.selection?document.selection.empty():window.getSelection().removeAllRanges()}catch(t){}}},start:function(t,n){r.data(t.dragSource,\"draggable\",!1),this.useNativeDnd&&r.attr(t.dragSource,\"draggable\",\"false\");var e=s.pagePosition(t.dragSource),e=(this.draggingOffsetX=parseInt(n.pageX-e.left),this.draggingOffsetY=parseInt(n.pageY-e.top),a.create(\"started\",{elm:t.elm,dragSource:t.dragSource,dragHandle:t.dragHandle,ghost:null,originalEvent:n,transfer:{}})),t=(t.trigger(e),(this.dragging=t).draggingClass&&o.addClass(t.dragSource,t.draggingClass),this.draggingGhost=e.ghost,this.draggingGhost||(this.draggingGhost=t.dragSource),this.draggingTransfer=e.transfer,this.draggingTransfer&&i.each(this.draggingTransfer,function(t,e){n.dataTransfer.setData(t,e)}),n.dataTransfer.setDragImage(this.draggingGhost,this.draggingOffsetX,this.draggingOffsetY),a.create(\"dndStarted\",{elm:e.elm,dragSource:e.dragSource,dragHandle:e.dragHandle,ghost:e.ghost,transfer:e.transfer,dragging:this.dragging}));this.trigger(t)},over:function(){},end:function(t){var e=this.dragging,e=(e&&e.draggingClass&&o.removeClass(e.dragSource,e.draggingClass),a.create(\"ended\",{originalEvent:void 0})),e=(this.dragging.trigger(e),a.create(\"dndEnded\",{}));this.trigger(e),this.dragging=null,this.draggingTransfer=null,this.draggingGhost=null,this.draggingOffsetX=null,this.draggingOffsetY=null}}))}),define(\"skylark-domx-plugins-dnd/draggable\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-devices-points/touch\",\"skylark-domx-plugins-base\",\"./dnd\",\"./manager\"],function(i,t,e,r,n,s,a,o,l,c,u){s.on,s.off,e.attr,e.removeAttr,n.pagePosition,a.addClass,n.height;e=l.Plugin.inherit({klassName:\"Draggable\",pluginName:\"lark.dnd.draggable\",options:{draggingClass:\"dragging\",forceFallback:!1},_construct:function(t,e){this.overrided(t,e);var n=this,e=this.options;n.draggingClass=e.draggingClass,[\"preparing\",\"started\",\"ended\",\"moving\"].forEach(function(t){i.isFunction(e[t])&&n.on(t,e[t])}),o.mousy(t),s.on(t,{mousedown:function(t){var e=n.options;e.handle&&(i.isFunction(e.handle)?n.dragHandle=e.handle(t.target,n._elm):n.dragHandle=r.closest(t.target,e.handle,n._elm),!n.dragHandle)||(e.source?i.isFunction(e.source)?n.dragSource=e.source(t.target,n._elm):n.dragSource=r.closest(t.target,e.source,n._elm):n.dragSource=n._elm,n.startPos={x:t.clientX,y:t.clientY},u.prepare(n,t))},mouseup:function(t){},dragstart:function(t){u.dragging===n&&u.start(n,t)},dragend:function(t){u.dragging===n&&(s.stop(t),u.dragging)&&u.end(!1)}})}});return l.register(e,\"draggable\"),c.Draggable=e}),define(\"skylark-domx-plugins-dnd/droppable\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-plugins-base\",\"./dnd\",\"./manager\"],function(o,t,e,n,i,l,c,r,s,u){l.on,l.off,e.attr,e.removeAttr,i.pagePosition,c.addClass,i.height;e=r.Plugin.inherit({klassName:\"Droppable\",pluginName:\"lark.dnd.droppable\",options:{draggingClass:\"dragging\"},_construct:function(n,e){this.overrided(n,e);var i,r,s=this,a=((e=s.options).draggingClass,!0);[\"started\",\"entered\",\"leaved\",\"dropped\",\"overing\"].forEach(function(t){o.isFunction(e[t])&&s.on(t,e[t])}),l.on(n,{dragover:function(t){var e;t.stopPropagation(),a&&(e=l.create(\"overing\",{originalEvent:t,overElm:t.target,transfer:u.draggingTransfer,acceptable:!0}),s.trigger(e),e.acceptable)&&t.preventDefault()},dragenter:function(t){s.options;var e=s._elm,n=l.create(\"entered\",{originalEvent:t,transfer:u.draggingTransfer});s.trigger(n),t.stopPropagation(),i&&a&&c.addClass(e,i)},dragleave:function(t){s.options;var e=s._elm;if(!a)return!1;var n=l.create(\"leaved\",{originalEvent:t,transfer:u.draggingTransfer});s.trigger(n),t.stopPropagation(),i&&a&&c.removeClass(e,i)},drop:function(t){s.options;var e=s._elm;l.stop(t),u.dragging&&(i&&a&&c.addClass(e,i),e=l.create(\"dropped\",{originalEvent:t,transfer:u.draggingTransfer}),s.trigger(e),u.end(!0))}}),u.on(\"dndStarted\",function(t){t=l.create(\"started\",{transfer:u.draggingTransfer,acceptable:!1,dragging:t.dragging});s.trigger(t),a=t.acceptable,i=t.hoverClass,(r=t.activeClass)&&a&&c.addClass(n,r)}).on(\"dndEnded\",function(t){var e=l.create(\"ended\",{transfer:u.draggingTransfer,acceptable:!1});s.trigger(e),i&&a&&c.removeClass(n,i),r&&a&&c.removeClass(n,r),a=!1,i=r=null})}});return r.register(e,\"droppable\"),s.Droppable=e}),define(\"skylark-domx-plugins-groups/sortable\",[\"./groups\",\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-dnd/draggable\",\"skylark-domx-plugins-dnd/droppable\"],function(t,e,a,n,i,r,s,o,l,c,u){\"use strict\";r.on,r.off,n.attr,n.removeAttr,i.pagePosition,s.addClass,i.height,Array.prototype.some,Array.prototype.map,l.Plugin.inherit({klassName:\"Sorter\",enable:function(){},disable:function(){},destory:function(){}});var d,h=o(),r=l.Plugin.inherit({klassName:\"Sortable\",pluginName:\"lark.groups.sortable\",options:{connectWith:!1,placeholder:null,placeholderClass:\"sortable-placeholder\",draggingClass:\"sortable-dragging\",items:null},_construct:function(t,e){this.overrided(t,e),e=this.options;var n,i=o(t),r=i.children(e.items),s=o(e.placeholder||a.createElement(/^(ul|ol)$/i.test(t.tagName)?\"li\":\"div\",{class:e.placeholderClass}));c(t,{source:e.items,handle:e.handle,draggingClass:e.draggingClass,preparing:function(t){},started:function(t){t.ghost=t.dragSource,t.transfer={text:\"dummy\"},n=(d=o(t.dragSource)).index()},ended:function(t){d&&(d.show(),h.detach(),n!=d.index()&&d.parent().trigger(\"sortupdate\",{item:d}),d=null)}}),u(t,{started:function(t){t.acceptable=!0,t.activeClass=\"active\",t.hoverClass=\"over\"},overing:function(t){r.is(t.overElm)?(e.forcePlaceholderSize&&s.height(d.outerHeight()),d.hide(),o(t.overElm)[s.index()<o(t.overElm).index()?\"after\":\"before\"](s),h.not(s).detach()):h.is(t.overElm)||o(t.overElm).children(e.items).length||(h.detach(),o(t.overElm).append(s))},dropped:function(t){h.filter(\":visible\").after(d),d.show(),h.detach(),d=null}}),i.data(\"items\",e.items),h=h.add(s),e.connectWith&&o(e.connectWith).add(this).data(\"connectWith\",e.connectWith)}});return l.register(r,\"sortable\"),t.Sortable=r}),define(\"skylark-domx-plugins-groups/tiler\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-domx-plugins-base\",\"./groups\",\"./group\"],function(t,e,n,i,r,s){\"use strict\";s=s.inherit({klassName:\"Tiler\",pluginName:\"lark.groups.tiler\",options:{alignment:\"left\",itemRendered:null,noItemsHTML:\"no items found\",item:{selector:\"div.thumbnail\",template:'<div class=\"thumbnail\"><img height=\"75\" src=\"<%= href %>\" width=\"65\"><span><%= title %></span></div>',selectable:!0,classes:{base:\"thumbnail\"}},renderItem:null},_construct:function(t,e){this.overrided(t,e)}});return i.register(s),r.Tiler=s}),define(\"skylark-domx-plugins-groups/main\",[\"./groups\",\"./group\",\"./linear\",\"./sortable\",\"./tiler\"],function(t){return t}),define(\"skylark-domx-plugins-groups\",[\"skylark-domx-plugins-groups/main\"],function(t){return t}),define(\"skylark-domx-plugins-pictures/pictures\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.pictures={}}),define(\"skylark-domx-plugins-interact/interact\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.interact={}}),define(\"skylark-domx-plugins-interact/mouser\",[\"skylark-domx-data\",\"skylark-domx-plugins-base\",\"./interact\"],function(n,i,t){var e=i.Plugin.inherit({klassName:\"Mouser\",pluginName:\"lark.interact.mouser\",options:{cancel:\"input, textarea, button, select, option\",distance:1,delay:0,started:function(){},moving:function(){},stopped:function(){},capture:function(){return!0}},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),e=this.options,this._startedCallback=e.started,this._movingCallback=e.moving,this._stoppedCallback=e.stopped,this._captureCallback=e.capture,this.listenTo({mousedown:this._mouseDown,click:this._click}),this.started=!1},_click:function(t){if(!0===n.data(t.target,this.pluginName+\".preventClickEvent\"))return n.removeData(t.target,this.pluginName+\".preventClickEvent\"),t.stopImmediatePropagation(),!1},_mouseDown:function(t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this;return 1===t.which&&this._captureCallback(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._startedCallback(t),!this._mouseStarted)?t.preventDefault():(!0===n.data(t.target,this.pluginName+\".preventClickEvent\")&&n.removeData(t.target,this.pluginName+\".preventClickEvent\"),this._startX=t.screenX,this._startY=t.screenY,this.listenTo(document,{mousemove:this._mouseMove,mouseup:this._mouseUp}),this._domx.eventer.stop(t))),!0},_mouseMove:function(t){return t.deltaX=t.screenX-this._startX,t.deltaY=t.screenY-this._startY,(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._movingCallback(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._startedCallback(this._mouseDownEvent,t),this._mouseStarted?this._movingCallback(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.unlistenTo(document),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.pluginName+\".preventClickEvent\",!0),this._stoppedCallback(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this._mouseHandled=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet}});return i.register(e),t.Mouser=e}),define(\"skylark-domx-plugins-interact/movable\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-plugins-base\",\"./interact\",\"./mouser\"],function(g,y,t,k,e,x,n,i,v){e.on,e.off,t.attr,t.removeAttr,k.pagePosition,x.addClass,k.height,Array.prototype.some,Array.prototype.map;e=n.Plugin.inherit({klassName:\"Movable\",pluginName:\"lark.interact.movable\",_construct:function(i,t){function r(t){t.movable=e,t.moveEl=i,t.handleEl=o}n.Plugin.prototype._construct.call(this,i,t),t=this.options;var s,a,e=this,o=t.handle||i,l=!1!==t.auto,c=t.constraints,u=t.document||document,d=t.starting,h=t.started,p=t.moving,f=t.stopped,m=function(t){y.remove(s),f&&f(t)};this._handleEl=o,this._mouser=new v(this._handleEl,{started:function(t){var e=k.getDocumentSize(u);if(r(t),d){var n=d(t);if(!1===n)return;g.isPlainObject(n)&&(n.constraints&&(c=n.constraints),n.started&&(h=n.started),n.moving&&(p=n.moving),n.stopped)&&(f=n.stopped)}t.preventDefault(),t.button,a=k.relativePosition(i),k.size(i),n=x.css(o,\"cursor\"),s=y.createElement(\"div\"),x.css(s,{position:\"absolute\",top:0,left:0,width:e.width,height:e.height,zIndex:2147483647,opacity:1e-4,cursor:n}),y.append(u.body,s),h&&h(t)},moving:function(t){if(r(t),0!==t.button)return m(t);var e,n;l&&(e=a.left+t.deltaX,n=a.top+t.deltaY,c)&&((e=e<c.minX?c.minX:e)>c.maxX&&(e=c.maxX),(n=n<c.minY?c.minY:n)>c.maxY)&&(n=c.maxY),k.relativePosition(i,{left:e,top:n}),t.preventDefault(),p&&p(t)},stopped:m})},remove:function(){this._mouser.destroy(),this._mouser=null}});return n.register(e,\"movable\"),i.Movable=e}),define(\"skylark-domx-plugins-pictures/viewer\",[\"skylark-langx\",\"skylark-domx/eventer\",\"skylark-domx/geom\",\"skylark-domx/query\",\"skylark-domx-images/preload\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-interact/movable\",\"./pictures\"],function(i,n,r,g,s,a,o,t){\"use strict\";var l=a.Plugin.inherit({klassName:\"PictureViewer\",pluginName:\"lark.pictures.pictureviewer\",options:{ratioThreshold:.1,minRatio:.05,maxRatio:16,movable:!0,classes:{grab:null,loader:null}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e),this.$stage=this.$(),this.$image=this.$stage.find(\"img\"),this.$stage.off(\"wheel\").on(\"wheel\",t=>{this._handleWheel(t)}),this.options.movable&&(this._movable=new o(this.$image[0],{starting:t=>{var e=this.$image.width(),n=this.$image.height(),i=this.$stage.width(),r=this.$stage.height();let s,a,o,l;return!(e<=i&&n<=r)&&(e<=i?s=o=(i-e)/2:(s=i-e,o=0),n<=r?a=l=(r-n)/2:(a=r-n,l=0),{constraints:{minX:s,maxX:o,minY:a,maxY:l}})},started:function(t){n.stop(t)}}))},getImageScaleToStage:function(t,e){let n=1;return n=this.isRotated?Math.min(t/this.img.height,e/this.img.width,1):Math.min(t/this.img.width,e/this.img.height,1)},setGrabCursor:function(t,e,n){var i=n?t.h:t.w,n=n?t.w:t.h;(n>e.h||i>e.w)&&this.$stage.addClass(\"is-grab\"),n<=e.h&&i<=e.w&&this.$stage.removeClass(\"is-grab\")},setImageSize:function(t){var e={w:this.$stage.width(),h:this.$stage.height()},n=this.getImageScaleToStage(e.w,e.h);this.$image.css({width:Math.ceil(t.width*n)+\"px\",height:Math.ceil(t.height*n)+\"px\",left:(e.w-Math.ceil(t.width*n))/2+\"px\",top:(e.h-Math.ceil(t.height*n))/2+\"px\"}),i.mixin(this.imageData,{initWidth:t.width*n,initHeight:t.height*n,initLeft:(e.w-t.width*n)/2,initTop:(e.h-t.height*n)/2,width:t.width*n,height:t.height*n,left:(e.w-t.width*n)/2,top:(e.h-t.height*n)/2}),this.setGrabCursor({w:this.$image.width(),h:this.$image.height()},{w:this.$stage.width(),h:this.$stage.height()},this.isRotated),this.imageLoaded||(this.$stage.find(\".${ this.options.classes.loader }\").remove(),this.$stage.removeClass(\"stage-ready\"),this.$image.removeClass(\"image-ready\"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0)},loadImage:function(t,e,n){this.$image.removeAttr(\"style\").attr(\"src\",\"\"),this.isRotated=!1,this.rotateAngle=0,this.imageLoaded=!1,this.$stage.append(`<div class=\"${this.options.classes.loader}\"></div>`),this.$stage.addClass(\"stage-ready\"),this.$image.addClass(\"image-ready\"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),this.$image.attr(\"src\",t),s(t).then(t=>{t=t.imgs[0];this.img=t,this.imageData={originalWidth:t.width,originalHeight:t.height},e&&e(t)},()=>{this.$photoviewer.find(\".${ this.options.classes.loader }\").remove(),n&&n.call()})},_handleWheel:function(t){t.preventDefault();let e=1;t.deltaY?e=0<t.deltaY?1:-1:t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=0<t.detail?1:-1);var n=-e*this.options.ratioThreshold,i={x:t.clientX-this.$stage.offset().left+r.scrollLeft(document.body),y:t.clientY-this.$stage.offset().top+r.scrollTop(document.body)};this.zoom(n,i,t)},zoom:function(t,e,n){t=t<0?1/(1-t):1+t,(t=this.$image.width()/this.imageData.originalWidth*t)>this.options.maxRatio||t<this.options.minRatio||this.zoomTo(t,e,n)},zoomTo:function(t,e,n){var i=this.$image,r=this.$stage;const s=this.imageData.width,a=this.imageData.height,o=this.imageData.left,l=this.imageData.top;var r={w:r.width(),h:r.height(),x:r.offset().left,y:r.offset().top},c=this.imageData.originalWidth*t,t=this.imageData.originalHeight*t;let u=e.x-(e.x-o)/s*c,d=e.y-(e.y-l)/a*t;var e=this.isRotated?(c-t)/2:0,h=this.isRotated?t:c,p=this.isRotated?c:t,f=r.w-c,m=r.h-t;d=p<=r.h?(r.h-t)/2:d>e?e:d>m-e?d:m-e,u=h<=r.w?(r.w-c)/2:u>-e?-e:u>f+e?u:f+e,Math.abs(this.imageData.initWidth-c)<.05*this.imageData.initWidth?this.setImageSize(this.img):(i.css({width:Math.round(c)+\"px\",height:Math.round(t)+\"px\",left:Math.round(u)+\"px\",top:Math.round(d)+\"px\"}),this.setGrabCursor({w:Math.round(h),h:Math.round(p)},{w:r.w,h:r.h})),g.extend(this.imageData,{width:c,height:t,left:u,top:d})},rotate:function(t){this.rotateAngle=this.rotateAngle+t,this.rotateAngle/90%2==0?this.isRotated=!1:this.isRotated=!0,this.rotateTo(this.rotateAngle)},rotateTo:function(t){this.$image.css({transform:\"rotate(\"+t+\"deg)\"}),this.setImageSize({width:this.imageData.originalWidth,height:this.imageData.originalHeight}),this.$stage.removeClass(\"is-grab\")},resize:function(){var t=this.$image.width(),e=this.$image.height(),n=this.$stage.width(),i=this.$stage.height();this.$image.css({left:(n-t)/2,top:(i-e)/2})},shortcut:function(t,n,i){var r=!1;switch(t){case 187:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 189:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 48:n&&i&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},e),r=!0;break;case 188:n&&this.rotate(-90);break;case 190:n&&this.rotate(90),r=!0}return r}});return t.PictureViewer=l}),define(\"skylark-domx-plugins-pictures/main\",[\"./pictures\",\"./viewer\"],function(t){\"use strict\";return t}),define(\"skylark-domx-plugins-pictures\",[\"skylark-domx-plugins-pictures/main\"],function(t){return t}),define(\"skylark-domx-plugins-players/players\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.players={}}),define(\"skylark-domx-plugins-toggles/fullscreen\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"Fullscreen\",pluginName:\"domx.toggles.fullscreen\",options:{classes:{full:\"full\",unfull:\"unfull\"},selectors:{fullscreenButton:null}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors;this.target=this.elmx(this.options.target);e.fullscreenButton?this.$fullscreenButton=t.find(e.fullscreenButton):this.$fullscreenButton=t,this.$fullscreenIcons=t.find(e.fullscreenIcons),this.listenTo(this.$fullscreenButton,\"click\",this.toggleFullScreen),this.listenTo(this.target,\"fullscreenchange\",this.updateFullscreenButton),this.updateFullscreenButton()},toggleFullScreen:function(){n.fullscreen()?n.fullscreen(!1):this.target.fullscreen()},updateFullscreenButton:function(){n.fullscreen()?(this.$fullscreenButton.attr(\"data-title\",\"Exit full screen (f)\"),this.$fullscreenButton.removeClass(this.options.classes.full).addClass(this.options.classes.unfull)):(this.$fullscreenButton.attr(\"data-title\",\"Full screen (f)\"),this.$fullscreenButton.removeClass(this.options.classes.unfull).addClass(this.options.classes.full))}});return s.register(o),a.Fullscreen=o}),define(\"skylark-domx-plugins-toggles/Pip\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"Pip\",pluginName:\"domx.toggles.pip\",options:{classes:{mini:\"mini\",unmini:\"unmini\"},selectors:{pipButton:null}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors;this.target=this.elmx(this.options.target);e.pipButton?this.$pipButton=t.find(e.pipButton):this.$pipButton=t,this.listenTo(this.$pipButton,\"click\",this.togglePip),\"pictureInPictureEnabled\"in document||this.$pipButton.hide()},togglePip:function(){try{var t=this.target.elm();t!==n.pictureInPicture()?(this.$pipButton.disabled(!0),n.pictureInPicture(t)):n.pictureInPicture(!1)}catch(t){console.error(t)}finally{this.$pipButton.disabled(!1)}}});return s.register(o),a.Pip=o}),define(\"skylark-domx-plugins-players/play-control\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./players\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"PlayControl\",pluginName:\"domx.players.play_control\",options:{titles:{play:\"Play (k)\",pause:\"Pause (k)\"},classes:{play:\"play\",pause:\"pause\"},selectors:{playButton:null}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);var t=this.$(),e=this.options.selectors,n=this._media=this.options.media;e.playButton?this.$playButton=t.find(e.playButton):this.$playButton=t,this.listenTo(n,\"click\",this.togglePlay),this.listenTo(n,\"play,pause\",this.updatePlayButton),this.listenTo(this.$playButton,\"click\",this.togglePlay),this.updatePlayButton()},play:function(){this._media.play()},stop:function(){this._media.stop()},pause:function(){this._media.pause()},togglePlay:function(){this._media.paused()||this._media.ended()?this._media.play():this._media.pause()},updatePlayButton:function(){this._media.paused()?(this.$playButton.attr(\"data-title\",this.options.titles.play),this.$playButton.removeClass(this.options.classes.pause).addClass(this.options.classes.play)):(this.$playButton.attr(\"data-title\",this.options.titles.pause),this.$playButton.removeClass(this.options.classes.play).addClass(this.options.classes.pause))}});return s.register(o),a.PlayControl=o}),define(\"skylark-domx-plugins-ranges/ranges\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.ranges={}}),define(\"skylark-domx-plugins-ranges/progress\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./ranges\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"Progress\",pluginName:\"domx.ranges.progressl\",options:{selectors:{progressBar:\".progress-bar\",seek:\".seek\",seekTooltip:\".seek-tooltip\"}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors;this.$progressBar=t.find(e.progressBar),this.$seek=t.find(e.seek),this.$seekTooltip=t.find(e.seekTooltip),this.listenTo(this.$seek,\"mousemove\",this.updateSeekTooltip),this.listenTo(this.$seek,\"input\",this.skipAhead)},formatTime:function(t){t=new Date(1e3*t).toISOString().substr(11,8);return{minutes:t.substr(3,2),seconds:t.substr(6,2)}},updateDuration:function(){var t=this._media,t=Math.round(t.duration());this.$seek.attr(\"max\",t),this.$progressBar.attr(\"max\",t)},updateProgress:function(t){this.$seek.val(t),this.$progressBar.val(t)},updateSeekTooltip:function(t){t=Math.round(t.offsetX/t.target.clientWidth*parseInt(t.target.getAttribute(\"max\"),10)),this.$seek.attr(\"seek\",t),t=this.formatTime(t);this.$seekTooltip.text(t.minutes+\":\"+t.seconds)},skipAhead:function(t){t=t.target.dataset.seek||t.target.value;this.$progressBar.val(t),this.$seek.val(t)}});return s.register(o),a.Progress=o}),define(\"skylark-domx-plugins-ranges/main\",[\"./ranges\",\"./progress\"],function(t){return t}),define(\"skylark-domx-plugins-ranges\",[\"skylark-domx-plugins-ranges/main\"],function(t){return t}),define(\"skylark-domx-plugins-players/progress-control\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-ranges\",\"./players\"],function(t,e,n,i,r,s,a,o){\"use strict\";var l=a.Progress.inherit({klassName:\"ProgressControl\",pluginName:\"domx.players.progress_control\",options:{selectors:{progressBar:\".progress-bar\",seek:\".seek\",seekTooltip:\".seek-tooltip\"}},_construct:function(t,e){a.Progress.prototype._construct.call(this,t,e);this.$(),this.options.selectors;t=this._media=this.options.media;this.listenTo(t,\"timeupdate\",this.updateProgress),this.listenTo(t,\"loadedmetadata\",this.updateDuration)},updateDuration:function(){var t=this._media,t=Math.round(t.duration());this.$seek.attr(\"max\",t),this.$progressBar.attr(\"max\",t)},updateProgress:function(){var t=this._media,t=Math.floor(t.currentTime());this.$seek.val(t),this.$progressBar.val(t)},updateSeekTooltip:function(t){a.Progress.prototype.updateSeekTooltip.call(this,t);var e=this._media.pagePosition();this.$seekTooltip.css(\"left\",t.pageX-e.left+\"px\")},skipAhead:function(t){a.Progress.prototype.skipAhead.call(this,t),this._media.currentTime(this.$seek.val())}});return s.register(l),o.ProgressControl=l}),define(\"skylark-domx-plugins-players/time-control\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\"],function(t,e,n,i,r,s){\"use strict\";var a=s.Plugin.inherit({klassName:\"TimeControl\",pluginName:\"domx.players.time_control\",options:{selectors:{timeElapsed:\".time-elapsed\",duration:\".duration\"}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);var t=this.$(),e=this.options.selectors,n=this._media=this.options.media;this.$timeElapsed=t.find(e.timeElapsed),this.$duration=t.find(e.duration),this.listenTo(n,\"timeupdate\",this.updateTimeElapsed),this.listenTo(n,\"loadedmetadata\",this.updateDuration)},formatTime:function(t){t=new Date(1e3*t).toISOString().substr(11,8);return{minutes:t.substr(3,2),seconds:t.substr(6,2)}},updateDuration:function(){var t=this._media,t=Math.round(t.duration()),t=this.formatTime(t);this.$duration.text(t.minutes+\":\"+t.seconds),this.$duration.attr(\"datetime\",`${t.minutes}m ${t.seconds}s`)},updateTimeElapsed:function(){var t=this.formatTime(Math.round(this._media.currentTime()));this.$timeElapsed.text(t.minutes+\":\"+t.seconds),this.$timeElapsed.attr(\"datetime\",`${t.minutes}m ${t.seconds}s`)}});return s.register(a),a}),define(\"skylark-domx-plugins-players/volume-control\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./players\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"VolumeControl\",pluginName:\"domx.players.volume_control\",options:{selectors:{volumeButton:\".volume-button\",volumeIcons:\".volume-button use\",volumeMute:'use[href=\"#volume-mute\"]',volumeLow:'use[href=\"#volume-low\"]',volumeHigh:'use[href=\"#volume-high\"]',volume:\".volume\"}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e),this._media=this.options.media;var t=this.$(),e=this.options.selectors,n=this._media=this.options.media;this.$volumeButton=t.find(e.volumeButton),this.$volumeIcons=t.find(e.volumeIcons),this.$volumeMute=t.find(e.volumeMute),this.$volumeLow=t.find(e.volumeLow),this.$volumeHigh=t.find(e.volumeHigh),this.$volume=t.find(e.volume),this.listenTo(n,\"volumechange\",this.updateVolumeIcon),this.listenTo(this.$volume,\"input\",this.updateVolume),this.listenTo(this.$volumeButton,\"click\",this.toggleMute),this.updateVolumeIcon()},updateVolume:function(){this._media.muted()&&this._media.muted(!1),this._media.volume(this.$volume.val())},updateVolumeIcon:function(){this.$volumeIcons.forEach(t=>{r(t).hide()}),this.$volumeButton.data(\"title\",\"Mute (m)\"),this._media.muted()||0===this._media.volume()?(this.$volumeMute.show(),this.$volumeButton.data(\"title\",\"Unmute (m)\")):(0<this._media.volume()&&this._media.volume()<=.5?this.$volumeLow:this.$volumeHigh).show()},toggleMute:function(){this._media.muted(!this._media.muted()),this._media.muted()?(this.$volume.data(\"volume\",this.$volume.val()),this.$volume.val(0)):this.$volume.val(this.$volume.data(\"volume\"))}});return s.register(o),a.VolumeControl=o}),define(\"skylark-domx-plugins-players/controls-bar\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-medias\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-toggles/fullscreen\",\"skylark-domx-plugins-toggles/Pip\",\"./players\",\"./play-control\",\"./progress-control\",\"./time-control\",\"./volume-control\"],function(t,e,n,i,r,s,a,o,l,c,u,d,h,p){\"use strict\";var f=a.Plugin.inherit({klassName:\"ControlsBar\",pluginName:\"domx.players.controls_bar\",options:{selectors:{playButton:\".play-button\",playbackIcons:\".playback-icons use\",timeControl:\".time\",timeElapsed:\".time-elapsed\",duration:\".duration\",progressControl:\".progress-control\",progressBar:\".progress-bar\",seek:\".seek\",seekTooltip:\".seek-tooltip\",volumeControl:\".volume-control\",volumeButton:\".volume-button\",volumeIcons:\".volume-button use\",volumeMute:'use[href=\"#volume-mute\"]',volumeLow:'use[href=\"#volume-low\"]',volumeHigh:'use[href=\"#volume-high\"]',volume:\".volume\",fullscreenButton:\".fullscreen-button\",fullscreenIcons:\".fullscreen-button use\",pipButton:\".pip-button\"}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e);var t=this.$(),e=this.options.selectors,n=this.options.media,i=this.options.container;this._playControl=u.instantiate(t.find(e.playButton)[0],{media:n}),this._timeControl=h.instantiate(t.find(e.timeControl)[0],{media:n}),this._progressControl=d.instantiate(t.find(e.progressControl)[0],{media:n}),this._volumeControl=p.instantiate(t.find(e.volumeControl)[0],{media:n}),this._fullscreen=o.instantiate(t.find(e.fullscreenButton)[0],{target:i}),this._pip=l.instantiate(t.find(e.pipButton)[0],{target:n})}});return a.register(f),c.ControlsBar=f}),define(\"skylark-domx-plugins-players/playback-animation\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-animates\",\"skylark-domx-query\",\"skylark-domx-plugins-base\"],function(t,e,n,i,r,s,a){\"use strict\";var o=a.Plugin.inherit({klassName:\"PlaybackAnimation\",pluginName:\"domx.players.playback_animation\",options:{classes:{play:\"play\",pause:\"pause\"},selectors:{playbackAnimation:null}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e);var t=this.$(),e=this.options.selectors,n=this._media=this.options.media;e.playbackAnimation?this.$playbackAnimation=t.find(e.playbackAnimation):this.$playbackAnimation=t,this.listenTo(n,\"click\",this.animatePlayback)},animatePlayback:function(){this._media.paused()?this.$playbackAnimation.removeClass(this.options.classes.play).addClass(this.options.classes.pause):this.$playbackAnimation.removeClass(this.options.classes.pause).addClass(this.options.classes.play),this.$playbackAnimation.animate([{opacity:1,transform:\"scale(1)\"},{opacity:0,transform:\"scale(1.3)\"}],{duration:500})}});return a.register(o),o}),define(\"skylark-domx-plugins-players/audio-player\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-medias\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./players\",\"./controls-bar\",\"./playback-animation\"],function(t,e,n,i,r,s,a,o,l,c){\"use strict\";var u=a.Plugin.inherit({klassName:\"AudioPlayer\",pluginName:\"domx.players.audio\",options:{selectors:{audio:\"audio\",audioControls:\".controls-bar\",playbackAnimation:\".playback-animation\"}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors,this.$audio=this.elmx().find(e.audio),this.$audioControls=t.find(e.audioControls),this._controlsBar=l.instantiate(this.$audioControls[0],{media:this.$audio,container:this.elmx()}),this._playbackAnimation=c.instantiate(t.find(e.playbackAnimation)[0],{media:this.$audio}),this.listenTo(t,\"mouseenter\",this.showControls),this.listenTo(t,\"mouseleave\",this.hideControls),this.listenTo(s(document),\"keyup\",this.keyboardShortcuts),e=!!document.createElement(\"audio\").canPlayType;e&&(this.$audio.controls(!1),this.$audioControls.show()),this.load()},source:function(t){var e=(this._media=t).title||\"\",n=t.href,i=t.type,r=t.poster||\"\",t=t.altText||\"\",s=this.$(),a=this._audio,o=this._$play,l=this._$poster;s.prop(\"title\",e),a.canPlayType&&n&&i&&a.canPlayType(i)&&(a.src=n),a.poster=r,l.prop({src:r,alt:t}),o.prop({download:e,href:n})},load:function(){this.$audio.load()},play:function(){this.$audio.play()},stop:function(){this.$audio.stop()},pause:function(){this.$audio.pause()},togglePlay:function(){this.$audio.paused()||this.$audio.ended()?this.$audio.play():this.$audio.pause()},hideControls:function(){this.$audio.paused()||this.$audioControls.hide()},showControls:function(){this.$audioControls.show()},keyboardShortcuts:function(t){t=t.key;switch(t){case\"k\":this.togglePlay(),this._playbackAnimation.animatePlayback(),this.$audio.paused()?this.showControls():setTimeout(()=>{this.hideControls()},2e3);break;case\"m\":this._volumeControl.toggleMute();break;case\"f\":this._fullscreen.toggleFullScreen();break;case\"p\":this._pip.togglePip()}}});return a.register(u),o.AudioPlayer=u}),define(\"skylark-domx-plugins-players/video-player\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-medias\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./players\",\"./controls-bar\",\"./playback-animation\"],function(t,e,n,i,r,s,a,o,l,c){\"use strict\";var u=a.Plugin.inherit({klassName:\"VideoPlayer\",pluginName:\"domx.players.video\",options:{selectors:{video:\"video\",videoControls:\".controls-bar\",playbackAnimation:\".playback-animation\"}},_construct:function(t,e){a.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors,this.$video=this.elmx().find(e.video),this.$videoControls=t.find(e.videoControls),this._controlsBar=l.instantiate(this.$videoControls[0],{media:this.$video,container:this.elmx()}),this._playbackAnimation=c.instantiate(t.find(e.playbackAnimation)[0],{media:this.$video}),this.listenTo(t,\"mouseenter\",this.showControls),this.listenTo(t,\"mouseleave\",this.hideControls),this.listenTo(s(document),\"keyup\",this.keyboardShortcuts),e=!!document.createElement(\"video\").canPlayType;e&&(this.$video.controls(!1),this.$videoControls.show()),this.load()},source:function(t){var e=(this._media=t).title||\"\",n=t.href,i=t.type,r=t.poster||\"\",t=t.altText||\"\",s=this.$(),a=this._video,o=this._$play,l=this._$poster;s.prop(\"title\",e),a.canPlayType&&n&&i&&a.canPlayType(i)&&(a.src=n),a.poster=r,l.prop({src:r,alt:t}),o.prop({download:e,href:n})},load:function(){this.$video.load()},play:function(){this.$video.play()},stop:function(){this.$video.stop()},pause:function(){this.$video.pause()},togglePlay:function(){this.$video.paused()||this.$video.ended()?this.$video.play():this.$video.pause()},hideControls:function(){this.$video.paused()||this.$videoControls.hide()},showControls:function(){this.$videoControls.show()},keyboardShortcuts:function(t){t=t.key;switch(t){case\"k\":this.togglePlay(),this._playbackAnimation.animatePlayback(),this.$video.paused()?this.showControls():setTimeout(()=>{this.hideControls()},2e3);break;case\"m\":this._volumeControl.toggleMute();break;case\"f\":this._fullscreen.toggleFullScreen();break;case\"p\":this._pip.togglePip()}}});return a.register(u),o.VideoPlayer=u}),define(\"skylark-domx-plugins-players/main\",[\"./players\",\"./audio-player\",\"./video-player\"],function(t){return t}),define(\"skylark-domx-plugins-players\",[\"skylark-domx-plugins-players/main\"],function(t){return t}),define(\"skylark-domx-plugins-panels/panels\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base/plugins\"],function(t,e,n,i,r,s,a,o){function l(e){return function(t){return t.keyCode===e}}var c={},u={BACKSPACE_KEYCODE:8,COMMA_KEYCODE:188,DELETE_KEYCODE:46,DOWN_ARROW_KEYCODE:40,ENTER_KEYCODE:13,TAB_KEYCODE:9,UP_ARROW_KEYCODE:38},d=l(u.BACKSPACE_KEYCODE),h=l(u.DELETE_KEYCODE),p=l(u.TAB_KEYCODE),f=l(u.UP_ARROW_KEYCODE),m=l(u.DOWN_ARROW_KEYCODE),g=/&[^\\s]*;/;return e.mixin(c,{CONST:u,cleanInput:function(t){for(;g.test(t);)t=a(\"<i>\").html(t).text();return a(\"<i>\").text(t).html()},isBackspaceKey:d,isDeleteKey:h,isShiftHeld:function(t){return!0===t.shiftKey},isTabKey:p,isUpArrow:f,isDownArrow:m}),o.panels=c}),define(\"skylark-domx-plugins-interact/resizable\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-finder\",\"skylark-domx-geom\",\"skylark-domx-eventer\",\"skylark-domx-styler\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./interact\",\"./movable\"],function(c,u,t,d,h,p,e,n,f,i,m){p.on,p.off,t.attr,t.removeAttr,h.pagePosition,e.addClass,h.height,Array.prototype.some,Array.prototype.map;t=f.Plugin.inherit({klassName:\"Resizable\",pluginName:\"lark.interact.resizable\",options:{touchActionNone:!0,handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:\"resizable-handle\",top:\"resizable-handle-n\",left:\"resizable-handle-w\",right:\"resizable-handle-e\",bottom:\"resizable-handle-s\",topLeft:\"resizable-handle-nw\",topRight:\"resizable-handle-ne\",bottomLeft:\"resizable-handle-sw\",bottomRight:\"resizable-handle-se\"}},grabber:{selector:\"\",direction:\"bottomRight\"},selector:!0},constraints:{minWidth:null,minHeight:null,maxWidth:null,maxHeight:null}},_construct:function(i,t){f.Plugin.prototype._construct.call(this,i,t);var e=(t=this.options).handle||{},r=t.constraints||{},s=t.started,a=t.moving,o=t.stopped;function n(t,e){let n;m(t,{auto:!1,started:function(t){n=h.relativeRect(i),s&&s(t)},moving:function(t){currentRect={},\"right\"!=e&&\"topRight\"!=e&&\"bottomRight\"!=e||(currentRect.width=n.width+t.deltaX,r.minWidth&&currentRect.width<r.minWidth&&(currentRect.width=r.minWidth),r.maxWidth&&currentRect.width>r.maxWidth&&(currentRect.width=r.maxWidth)),\"bottom\"!=e&&\"bottomLeft\"!=e&&\"bottomRight\"!=e||(currentRect.height=n.height+t.deltaY,r.minHeight&&currentRect.height<r.minHeight&&(currentRect.height=r.minHeight),r.maxHeight&&currentRect.height>r.maxHeight&&(currentRect.height=r.maxHeight)),\"left\"!=e&&\"topLeft\"!=e&&\"bottomLeft\"!=e||(currentRect.left=n.left+t.deltaX,currentRect.width=n.width-t.deltaX,r.minWidth&&currentRect.width<r.minWidth&&(currentRect.left=currentRect.left+currentRect.width-r.minWidth,currentRect.width=r.minWidth),r.maxWidth&&currentRect.width>r.maxWidth&&(currentRect.left=currentRect.left+currentRect.width-r.maxWidth,currentRect.width=r.maxWidth)),\"top\"!=e&&\"topLeft\"!=e&&\"topRight\"!=e||(currentRect.top=n.top+t.deltaY,currentRect.height=n.height-t.deltaY,r.minHeight&&currentRect.height<r.minHeight&&(currentRect.top=currentRect.top+currentRect.height-r.minHeight,currentRect.height=r.minHeight),r.maxHeight&&currentRect.height>r.maxHeight&&(currentRect.top=currentRect.top+currentRect.height-r.maxHeight,currentRect.height=r.maxHeight)),h.relativeRect(i,currentRect),a&&a(t),p.resized(i)},stopped:function(t){o&&o(t)}})}if(c.isString(e)?handleEl=d.find(i,e):c.isHtmlNode(e)&&(handleEl=e),e&&e.border)for(var l in e.border.directions)e.border.directions[l]&&n(u.createElement(\"div\",{className:e.border.classes.all+\" \"+e.border.classes[l],direction:l},i),l);e&&e.grabber&&e.grabber.selector&&n(d.find(i,e.grabber.selector),e.grabber.direction)},remove:function(){p.off(this._handleEl)}});return f.register(t,\"resizable\"),i.Resizable=t}),define(\"skylark-domx-plugins-panels/panel\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-interact/resizable\",\"./panels\"],function(t,e,n,i,r,s,a,o,l){var c=a.Plugin.inherit({klassName:\"Panel\",pluginName:\"lark.panels.panel\",options:{},_construct:function(t,e){this.overrided(t,e),this._velm=this.elmx(),this.options.resizable&&(this._resizable=new o(t,{handle:{border:{directions:{top:!0,left:!0,right:!0,bottom:!0,topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0},classes:{all:this.options.resizable.border.classes.all,top:this.options.resizable.border.classes.top,left:this.options.resizable.border.classes.left,right:this.options.resizable.border.classes.right,bottom:this.options.resizable.border.classes.bottom,topLeft:this.options.resizable.border.classes.topLeft,topRight:this.options.resizable.border.classes.topRight,bottomLeft:this.options.resizable.border.classes.bottomLeft,bottomRight:this.options.resizable.border.classes.bottomRight}}},constraints:{minWidth:this.options.resizable.minWidth,minHeight:this.options.resizable.minHeight},started:()=>{this.isResizing=!0},moving:function(t){},stopped:()=>{this.isResizing=!1}}))}});return a.register(c),c}),define(\"skylark-domx-plugins-panels/collapsible\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-toggles/collapse\",\"./panels\",\"./panel\"],function(t,e,n,i,r,s,a,o,l,c){var u=c.inherit({klassName:\"Collapsible\",pluginName:\"lark.panels.collapsible\",options:{toggler:{selector:'.panel-heading [data-toggle=\"collapse\"]'},body:{selector:\".panel-body\"}},_construct:function(t,e){c.prototype._construct.call(this,t,e),this._expanded=!1,this.$toggle=this._velm.find(this.options.toggler.selector),this.$body=this._velm.find(this.options.body.selector),this.$toggle.on(\"click.panel\",t=>{this.toggle()})},expand:function(){this.emit(\"expanding\"),this.$body.plugin(o.prototype.pluginName).show(),this._expanded=!0,this.emit(\"expanded\")},collapse:function(){this.emit(\"collapsing\"),this.$body.plugin(o.prototype.pluginName).hide(),this._expanded=!1,this.emit(\"collapsed\")},toggle:function(){this._expanded?this.collapse():this.expand()},full:function(){},unfull:function(){},toogleFull:function(){},close:function(){}});return a.register(u),l.Collapsible=u}),define(\"skylark-domx-plugins-panels/accordion\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-domx-plugins-base\",\"./panels\",\"./panel\",\"./collapsible\"],function(t,e,n,i,r,s,a){var o=s.inherit({klassName:\"Accordion\",pluginName:\"lark.panels.accordion\",options:{panel:{selector:\"> .panel\",template:null}},_construct:function(t,e){s.prototype._construct.call(this,t,e);var n=[];this._velm.$(this.options.panel.selector).forEach(t=>{t=new o.Pane(t,{group:this});n.push(t)}),this._panels=n},panels:{get:function(){}},addPanel:function(){},remove:function(){},expand:function(){},expandAll:function(){},collapse:function(){},collapseAll:function(){}});return o.Pane=a.inherit({klassName:\"AccordionPane\",expand:function(){this.options.group.active&&this.options.group.active.collapse(),this.overrided(),this.options.group.active=this},collapse:function(){this.overrided(),this.options.group.active=null},toggle:function(){this.overrided()},remove:function(){this.overrided()}}),i.register(o),r.Accordion=o}),define(\"skylark-domx-plugins-panels/floating\",[\"skylark-domx/noder\",\"skylark-domx/eventer\",\"skylark-domx/query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-interact/movable\",\"./panels\",\"./panel\"],function(t,i,r,e,n,s,a){\"use strict\";var o=[],l=a.inherit({klassName:\"Floating\",pluginName:\"lark.panels.floating\",options:{selectors:{headerPane:\"\",contentPane:\"\",footerPane:\"\",titlebar:\"\",buttons:{fullscreen:\".button-fullscreen\",maximize:\".button-maximize\",minimize:\".button-minimize\",close:\".button-close\"}},classes:{maximize:\"maximize\"},fixedContent:!0,initMaximized:!1,movable:{dragHandle:!1,dragCancel:null}},_construct:function(t,e){a.prototype._construct.call(this,t,e),this.$pane=r(this._elm),this.isOpened=!1,this.isMaximized=!1,this.options.movable&&(this._movable=new n(t,{handle:this.options.movable.dragHandle,starting:t=>{var e=this.options.movable.dragCancel;return!r(t.target).closest(e).length&&!this.isResizing&&!this.isMaximized}})),this.$close=this._velm.$(this.options.selectors.buttons.close),this.$maximize=this._velm.$(this.options.selectors.buttons.maximize),this.$minimize=this._velm.$(this.options.selectors.buttons.minimize),this.$fullscreen=this._velm.$(this.options.selectors.buttons.fullscreen),this.$close.off(\"click.window\").on(\"click.window\",t=>{this.close()}),this.$fullscreen.off(\"click.window\").on(\"click.window\",()=>{this.fullscreen()}),this.$maximize.off(\"click.window\").on(\"click.window\",()=>{this.maximize()}),this.$pane.off(\"keydown.window\").on(\"keydown.window\",t=>{this._keydown(t)}),o.push(this)},close:function(){this.trigger(\"closing\",this),this.$pane.remove(),this.isOpened=!1,this.isMaximized=!1;var t=o.indexOf(this);-1<t&&o.splice(t,1),this.trigger(\"closed\",this)},maximize:function(){var t,e,n;this.$pane.get(0).focus(),this.isMaximized?(n=r(window),t=r(document),this.$pane.removeClass(this.options.classes.maximize),e=(n.width()-this.options.modalWidth)/2+t.scrollLeft(),n=(n.height()-this.options.modalHeight)/2+t.scrollTop(),this.$pane.css({width:this.modalData.width||this.options.modalWidth,height:this.modalData.height||this.options.modalHeight,left:this.modalData.left||e,top:this.modalData.top||n}),this.isMaximized=!1):(this.modalData={width:this.$pane.width(),height:this.$pane.height(),left:this.$pane.offset().left,top:this.$pane.offset().top},this.$pane.addClass(this.options.classes.maximize),this.$pane.css({width:\"100%\",height:\"100%\",left:0,top:0}),this.isMaximized=!0),i.resized(this._elm)},fullscreen:function(){this.$pane.get(0).focus(),t.fullscreen(this.$pane[0])},_keydown:function(t){if(!this.options.keyboard)return!1;var e=t.keyCode||t.which||t.charCode;t.ctrlKey||t.metaKey,t.altKey||t.metaKey;81===e&&this.close()}});return i.on(window,\"resize.window\",()=>{for(let t=0;t<o.length;t++)i.resized(o[t]._elm)}),s.Floating=l}),define(\"skylark-domx-plugins-panels/pagination\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./panels\",\"./panel\"],function(t,e,n,i,r,s,a,o,l){\"use strict\";var c=l.inherit({klassName:\"Pagination\",pluginName:\"lark.panels.pagination\",options:{tagName:\"ul\",css:\"\",selectors:{firstNavi:\"li[aria-label='first']\",prevNavi:\"li[aria-label='prev']\",nextNavi:\"li[aria-label='next']\",lastNavi:\"li[aria-label='last']\",numericNavi:\"li:not([aria-label])\",numericTxt:\"a\"},totalPages:7,maxButtonsVisible:5,currentPage:1},state:{totalPages:Number,currentPage:Number},_construct:function(t,e){l.prototype._construct.call(this,t,e),this.$first=this._velm.$(this.options.selectors.firstNavi),this.$prev=this._velm.$(this.options.selectors.prevNavi),this.$last=this._velm.$(this.options.selectors.lastNavi),this.$next=this._velm.$(this.options.selectors.nextNavi),this.$numeric=this._velm.$(this.options.selectors.numericNavi);var n=this;function i(t){t=s(t);return!t.is(\".disabled,.active\")&&t}this.$first.click(function(){i(this)&&n.currentPage(1)}),this.$prev.click(function(){i(this)&&n.currentPage(n.currentPage()-1)}),this.$last.click(function(){i(this)&&n.currentPage(n.totalPages())}),this.$next.click(function(){i(this)&&n.currentPage(n.currentPage()+1)}),this.$numeric.click(function(){var t=i(this);t&&(t=t.find(n.options.selectors.numericTxt).text(),t=parseInt(t),n.currentPage(t))}),this._currentPage=this.options.currentPage,this._totalPages=this.options.totalPages,this._refresh({currentPage:!0,totalPages:!0})},_refresh:function(t){var e=this;if(t.currentPage||t.totalPages){for(var t=e.currentPage(),n=e.totalPages(),i=t,r=n,s=Math.min(r,e.options.maxButtonsVisible),a=1,o=a+s-1;i<a||o<i;)o<i?(a+=s,r<(o+=s)&&(a-=o-r,o=r)):(o-=s,(a-=s)<0&&(o+=a+s,a=1));i===o&&1!=r&&r<=(o=(a=i-1)+s-1)&&(a-=o-r,o=r),a===i&&1!=r&&1!=i&&(a=(o=i+1)-(s-1));var l=e.$numeric.size(),c=o-a+1,u=0;for(e.$numeric.filter(\".active\").removeClass(\"active\");u<c;){var d=u+a,h=e.$numeric.eq(u);h.find(e.options.selectors.numericTxt).text(u+a).show(),d==i&&h.addClass(\"active\"),u++}for(;u<l;)e.$numeric.eq(u).find(e.options.selectors.numericTxt).text(u+a).hide(),u++;if(t<1)throw\"Page can't be less than 1\";if(n<t)throw\"Page is bigger than total pages\";if(n<1)throw\"Total Pages can't be less than 1\";1==t?(e.$first.addClass(\"disabled\"),e.$prev.addClass(\"disabled\")):(e.$first.removeClass(\"disabled\"),e.$prev.removeClass(\"disabled\")),t==n?(e.$last.addClass(\"disabled\"),e.$next.addClass(\"disabled\")):(e.$last.removeClass(\"disabled\"),e.$next.removeClass(\"disabled\"))}},currentPage:function(t){return void 0!==t?(this._currentPage=t,this._refresh({currentPage:!0}),this):this._currentPage},totalPages:function(t){return void 0!==t?(this._totalPages=t,this._refresh({totalPages:!0}),this):this._totalPages}});return a.register(c),o.Pagination=c}),define(\"skylark-domx-plugins-popups/Dropdown\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./popups\"],function(t,e,r,s,n,a,i,o){\"use strict\";var l='[data-toggle=\"dropdown\"]',c=i.Plugin.inherit({klassName:\"Dropdown\",pluginName:\"lark.popups.dropdown\",options:{selectors:{toggler:'[data-toggle=\"dropdown\"],.dropdown-menu'}},_construct:function(t,e){this.overrided(t,e);t=this.$element=a(this._elm);t.on(\"click.dropdown\",this.toggle),t.on(\"keydown.dropdown\",this.options.selectors.toggler,this.keydown)},toggle:function(t){var e=a(this);if(!e.is(\".disabled, :disabled\")){var n=u(e),i=n.hasClass(\"open\");if(d(),!i){\"ontouchstart\"in document.documentElement&&!n.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",d);i={relatedTarget:this};if(n.trigger(t=r.create(\"show.dropdown\",i)),t.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),n.toggleClass(\"open\").trigger(r.create(\"shown.dropdown\",i))}return!1}},keydown:function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(\".disabled, :disabled\")){var n=u(e),i=n.hasClass(\"open\");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(l).trigger(\"focus\"),e.trigger(\"click\");i=n.find(\".dropdown-menu li:not(.disabled):visible a\");i.length&&(e=i.index(t.target),38==t.which&&0<e&&e--,40==t.which&&e<i.length-1&&e++,i.eq(e=~e?e:0).trigger(\"focus\"))}}}});function u(t){var e=t.attr(\"data-target\"),e=(e=e||(e=t.attr(\"href\"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\\s]*$)/,\"\"))&&a(e);return e&&e.length?e:t.parent()}function d(i){i&&3===i.which||(a(\".dropdown-backdrop\").remove(),a(l).each(function(){var t=a(this),e=u(t),n={relatedTarget:this};!e.hasClass(\"open\")||i&&\"click\"==i.type&&/input|textarea/i.test(i.target.tagName)&&s.contains(e[0],i.target)||(e.trigger(i=r.create(\"hide.dropdown\",n)),i.isDefaultPrevented())||(t.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(r.create(\"hidden.dropdown\",n)))}))}return a(document).on(\"click.dropdown.data-api\",d).on(\"click.dropdown.data-api\",\".dropdown form\",function(t){t.stopPropagation()}),i.register(c),o.Dropdown=c}),define(\"skylark-domx-plugins-toggles/tab\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(n,a,o,t,e,l,i,r){\"use strict\";var c=i.Plugin.inherit({klassName:\"Tab\",pluginName:\"lark.toggles.tab\",_construct:function(t,e){this.element=l(t),this.target=e&&e.target,this.element.on(\"click.lark.toggles.tab\",n.proxy(function(t){t.preventDefault(),this.show()},this))},show:function(){var t,e,n,i=this.element,r=i.closest(\"ul:not(.dropdown-menu)\"),s=(s=this.target||i.data(\"target\"))||(s=i.attr(\"href\"))&&s.replace(/.*(?=#[^\\s]*$)/,\"\");i.parent(\"li\").hasClass(\"active\")||(t=r.find(\".active:last a\"),e=o.create(\"hide\",{relatedTarget:i[0]}),n=o.create(\"show\",{relatedTarget:t[0]}),t.trigger(e),i.trigger(n),n.isDefaultPrevented())||e.isDefaultPrevented()||(n=l(s),this.activate(i.closest(\"li\"),r),this.activate(n,n.parent(),function(){t.trigger({type:\"hidden\",relatedTarget:i[0]}),i.trigger({type:\"shown\",relatedTarget:t[0]})}))},activate:function(t,e,n){var i=e.find(\"> .active\"),r=n&&a.support.transition&&(i.length&&i.hasClass(\"fade\")||!!e.find(\"> .fade\").length);function s(){i.removeClass(\"active\").find(\"> .dropdown-menu > .active\").removeClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!1),t.addClass(\"active\").find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),r?(t[0].offsetWidth,t.addClass(\"in\")):t.removeClass(\"fade\"),t.parent(\".dropdown-menu\").length&&t.closest(\"li.dropdown\").addClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),n&&n()}i.length&&r?i.one(\"transitionEnd\",s).emulateTransitionEnd(c.TRANSITION_DURATION):s(),i.removeClass(\"in\")}});return c.TRANSITION_DURATION=150,i.register(c),r.Tab=c}),define(\"skylark-domx-plugins-panels/tabstrip\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-popups/Dropdown\",\"skylark-domx-plugins-toggles/tab\",\"./panels\",\"./panel\"],function(e,t,n,i,r,d,s,a,o,l,c){var u=c.inherit({klassName:\"TabStrip\",pluginName:\"lark.panels.tabstrip\",options:{selectors:{header:\".nav-tabs\",tab:'[data-toggle=\"tab\"]',content:\".tab-content\",tabpane:\".tab-pane\"},droptabs:{selectors:{dropdown:\"li.droptabs\",dropdownMenu:\"ul.dropdown-menu\",dropdownTabs:\"li\",dropdownCaret:\"b.caret\",visibleTabs:\">li:not(.dropdown)\"},auto:!0,pullDropdownRight:!0}},_construct:function(t,e){c.prototype._construct.call(this,t,e),this.$header=this._velm.$(this.options.selectors.header),this.$tabs=this.$header.find(this.options.selectors.tab),this.$content=this._velm.$(this.options.selectors.content),this.$tabpanes=this.$content.find(this.options.selectors.tabpane),this.$header.find('[data-toggle=\"dropdown\"]').plugin(a.prototype.pluginName);var n=this;this.$tabs.each(function(t,e){d(e).plugin(o.prototype.pluginName,{target:n.$tabpanes[t]})})},arrange:function(){var t=this.options.droptabs.selectors.dropdownTabs,e=this.options.droptabs.selectors.visibleTabs,n=($container=this.$header).find(this.options.droptabs.selectors.dropdown),i=n.find(this.options.droptabs.selectors.dropdownMenu),r=d(\">a\",n).clone(),r=(d(this.options.droptabs.selectors.dropdownCaret,n),d(this.options.droptabs.selectors.dropdownCaret,r).remove(),this.options.droptabs.pullDropdownRight&&d(n).addClass(\"pull-right\"),function(){return d(t,i)}),s=function(){return d(e,$container)};function a(){return $container.outerWidth()-u()}var o,l,c,u=function(){var e=0;return d(s()).each(function(t){e+=parseInt(d(this).outerWidth(),10)}),e+=parseInt(d(n).outerWidth(),10)};a()<0&&(o=a(),d(s().get().reverse()).each(function(t){if(d(this).hasClass(\"always-visible\")||(d(this).prependTo(i),o+=d(this).outerWidth()),0<=o)return!1})),a()>(l=r().first().clone().appendTo($container).css(\"position\",\"fixed\"),c=d(l).outerWidth(),d(l).remove(),c)&&(o=a(),d(r()).each(function(t){if(e=d(e=this).clone().appendTo($container).css(\"position\",\"fixed\"),n=d(e).outerWidth(),d(e).remove(),!(n<o)||d(this).hasClass(\"always-dropdown\"))return!1;var e,n;d(this).appendTo($container),o-=d(this).outerWidth()}),this.options.droptabs.pullDropdownRight||d(n).is(\":last-child\")||d(n).detach().insertAfter($container.find(\"li:last-child\"))),r().length<=0?n.hide():n.show()},activateTab:function(t){e.isNumber(t)&&d(this.$tabs[t]).plugin(o.prototype.pluginName).show()},addTab:function(){},removeTab:function(){}});return s.register(u),l.TabStrip=u}),define(\"skylark-domx-plugins-panels/toolbar\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./panels\",\"./panel\"],function(t,r,e,n,s){var i=s.inherit({klassName:\"Toolbar\",pluginName:\"lark.panels.toolbar\",options:{toolbarFloat:!0,toolbarHidden:!1,toolbarFloatOffset:0,template:'<div class=\"domx-toolbar\"><ul></ul></div>',separator:{template:'<li><span class=\"separator\"></span></li>'}},_construct:function(t,e){var n,i;s.prototype._construct.call(this,t,e),this.opts=this.options,this.wrapper=r(this._elm),this.list=this.wrapper.find(\"ul\"),this.list.on(\"click\",function(t){return!1}),this.wrapper.on(\"mousedown\",(n=this,function(t){return n.list.find(\".menu-on\").removeClass(\".menu-on\")})),r(document).on(\"mousedown.toolbar\",(i=this,function(t){return i.list.find(\".menu-on\").removeClass(\"menu-on\")})),!this.opts.toolbarHidden&&this.opts.toolbarFloat&&this.wrapper.css(\"top\",this.opts.toolbarFloatOffset)},addToolItem:function(t){return r(t._elm).appendTo(this.list),this},addSeparator:function(){return r(this.options.separator.template).appendTo(this.list),this}});return e.register(i),n.Toolbar=i}),define(\"skylark-domx-plugins-panels/wizard\",[\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-eventer\",\"skylark-domx-noder\",\"skylark-domx-geom\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./panels\",\"./panel\"],function(n,t,r,e,i,u,s,a,o){var l=o.inherit({klassName:\"Wizard\",pluginName:\"lark.panels.wizard\",options:{disablePreviousStep:!1,selectedItem:{step:-1}},_construct:function(t,e){o.prototype._construct.call(this,t,e),this.$element=this.$(),this.options.disablePreviousStep=\"previous\"===this.$element.attr(\"data-restrict\")||this.options.disablePreviousStep,this.currentStep=this.options.selectedItem.step,this.numSteps=this.$element.find(\".steps li\").length,this.$prevBtn=this.$element.find(\"button.btn-prev\"),this.$nextBtn=this.$element.find(\"button.btn-next\");t=this.$nextBtn.children().detach(),this.nextText=n.trim(this.$nextBtn.text()),this.$nextBtn.append(t),e=this.$element.children(\".steps-container\");0===e.length&&(e=this.$element,this.$element.addClass(\"no-steps-container\"),window)&&window.console&&window.console.warn&&window.console.warn('please update your wizard markup to include \".steps-container\" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup'),e=e.find(\".steps\"),this.$prevBtn.on(\"click.fu.wizard\",n.proxy(this.previous,this)),this.$nextBtn.on(\"click.fu.wizard\",n.proxy(this.next,this)),e.on(\"click.fu.wizard\",\"li.complete\",n.proxy(this.stepclicked,this)),this.selectedItem(this.options.selectedItem),this.options.disablePreviousStep&&(this.$prevBtn.attr(\"disabled\",!0),this.$element.find(\".steps\").addClass(\"previous-disabled\"))},destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function(t){var e,n,i,r,s,a,o=[].slice.call(arguments).slice(1),l=this.$element.find(\".steps\"),c=this.$element.find(\".step-content\");for(t=-1===t||t>this.numSteps+1?this.numSteps+1:t,o[0]instanceof Array&&(o=o[0]),s=l.find(\"li:nth-child(\"+t+\")\"),r=c.find(\".step-pane:nth-child(\"+t+\")\"),s.length<1&&(s=null),e=0,n=o.length;e<n;e++)(a=u('<li data-step=\"'+t+'\"><span class=\"badge badge-info\"></span></li>')).append(o[e].label||\"\").append('<span class=\"chevron\"></span>'),a.find(\".badge\").append(o[e].badge||t),(i=u('<div class=\"step-pane\" data-step=\"'+t+'\"></div>')).append(o[e].pane||\"\"),s?(s.before(a),r.before(i)):(l.append(a),c.append(i)),t++;this.syncSteps(),this.numSteps=l.find(\"li\").length,this.setState()},removeSteps:function(t,n){var e,i=\"nextAll\",r=0,s=this.$element.find(\".steps\"),a=this.$element.find(\".step-content\");n=void 0!==n?n:1,t>s.find(\"li\").length?e=s.find(\"li:last\"):(e=s.find(\"li:nth-child(\"+t+\")\").prev()).length<1&&(i=\"children\",e=s),e[i]().each(function(){var t=u(this),e=t.attr(\"data-step\");if(!(r<n))return!1;t.remove(),a.find('.step-pane[data-step=\"'+e+'\"]:first').remove(),r++}),this.syncSteps(),this.numSteps=s.find(\"li\").length,this.setState()},setState:function(){var t=1<this.currentStep,e=1===this.currentStep,n=this.currentStep===this.numSteps,e=(this.options.disablePreviousStep||this.$prevBtn.attr(\"disabled\",!0==e||!1==t),this.$nextBtn.attr(\"data-last\")),n=(e&&(this.lastText=e,t=this.nextText,!0==n?(t=this.lastText,this.$element.addClass(\"complete\")):this.$element.removeClass(\"complete\"),e=this.$nextBtn.children().detach(),this.$nextBtn.text(t).append(e)),this.$element.find(\".steps li\")),t=(n.removeClass(\"active\").removeClass(\"complete\"),n.find(\"span.badge\").removeClass(\"badge-info\").removeClass(\"badge-success\"),\".steps li:lt(\"+(this.currentStep-1)+\")\"),e=this.$element.find(t),n=(e.addClass(\"complete\"),e.find(\"span.badge\").addClass(\"badge-success\"),\".steps li:eq(\"+(this.currentStep-1)+\")\"),t=this.$element.find(n),e=(t.addClass(\"active\"),t.find(\"span.badge\").addClass(\"badge-info\"),this.$element.find(\".step-content\")),n=t.attr(\"data-step\"),i=(e.find(\".step-pane\").removeClass(\"active\"),e.find('.step-pane[data-step=\"'+n+'\"]:first').addClass(\"active\"),this.$element.find(\".steps\").first().attr(\"style\",\"margin-left: 0\"),0),t=(this.$element.find(\".steps > li\").each(function(){i+=u(this).outerWidth()}),0);(t=this.$element.find(\".actions\").length?this.$element.width()-this.$element.find(\".actions\").first().outerWidth():this.$element.width())<i&&(e=i-t,this.$element.find(\".steps\").first().attr(\"style\",\"margin-left: -\"+e+\"px\"),this.$element.find(\"li.active\").first().position().left<200)&&((e+=this.$element.find(\"li.active\").first().position().left-200)<1?this.$element.find(\".steps\").first().attr(\"style\",\"margin-left: 0\"):this.$element.find(\".steps\").first().attr(\"style\",\"margin-left: -\"+e+\"px\")),void 0!==this.initialized&&(n=r.create(\"changed.fu.wizard\"),this.$element.trigger(n,{step:this.currentStep})),this.initialized=!0},stepclicked:function(t){var e,t=u(t.currentTarget),t=this.$element.find(\".steps li\").index(t);t<this.currentStep&&this.options.disablePreviousStep||(e=r.create(\"stepclicked.fu.wizard\"),this.$element.trigger(e,{step:t+1}),e.isDefaultPrevented())||(this.currentStep=t+1,this.setState())},syncSteps:function(){var i=1,t=this.$element.find(\".steps\"),r=this.$element.find(\".step-content\");t.children().each(function(){var t=u(this),e=t.find(\".badge\"),n=t.attr(\"data-step\");isNaN(parseInt(e.html(),10))||e.html(i),t.attr(\"data-step\",i),r.find('.step-pane[data-step=\"'+n+'\"]:last').attr(\"data-step\",i),i++})},previous:function(){var t;this.options.disablePreviousStep||1===this.currentStep||(t=r.create(\"actionclicked.fu.wizard\"),this.$element.trigger(t,{step:this.currentStep,direction:\"previous\"}),t.isDefaultPrevented())||(--this.currentStep,this.setState(),this.$prevBtn.is(\":focus\")&&(void 0!==(t=this.$element.find(\".active\").find(\"input, select, textarea\")[0])?u(t).focus():0===this.$element.find(\".active input:first\").length&&this.$prevBtn.is(\":disabled\")&&this.$nextBtn.focus()))},next:function(){var t=r.create(\"actionclicked.fu.wizard\");this.$element.trigger(t,{step:this.currentStep,direction:\"next\"}),t.isDefaultPrevented()||(this.currentStep<this.numSteps?(this.currentStep+=1,this.setState()):this.$element.trigger(\"finished.fu.wizard\"),this.$nextBtn.is(\":focus\")&&(void 0!==(t=this.$element.find(\".active\").find(\"input, select, textarea\")[0])?u(t).focus():0===this.$element.find(\".active input:first\").length&&this.$nextBtn.is(\":disabled\")&&this.$prevBtn.focus()))},selectedItem:function(t){var e;return t?(t=t.step||-1,1<=(t=Number(this.$element.find('.steps li[data-name=\"'+t+'\"]').first().attr(\"data-step\"))||Number(t))&&t<=this.numSteps?(this.currentStep=t,this.setState()):(t=this.$element.find(\".steps li.active:first\").attr(\"data-step\"),isNaN(t)||(this.currentStep=parseInt(t,10),this.setState())),e=this):(e={step:this.currentStep},this.$element.find(\".steps li.active:first[data-name]\").length&&(e.stepname=this.$element.find(\".steps li.active:first\").attr(\"data-name\"))),e}});return s.register(l),a.Wizard=l}),define(\"skylark-domx-plugins-panels/main\",[\"./panels\",\"./accordion\",\"./collapsible\",\"./floating\",\"./pagination\",\"./panel\",\"./tabstrip\",\"./toolbar\",\"./wizard\"],function(t){return t}),define(\"skylark-domx-plugins-panels\",[\"skylark-domx-plugins-panels/main\"],function(t){return t}),define(\"skylark-domx-plugins-embeds/embeds\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.embeds={}}),define(\"skylark-domx-plugins-embeds/embed-runner\",[\"skylark-domx-iframes/create\",\"skylark-domx/query\",\"skylark-domx-plugins-base\",\"./embeds\"],function(t,e,n,i){\"use strict\";var r=e(window),s=e(document),e=n.Plugin.inherit({klassName:\"EmbedRunner\",pluginName:\"lark.embeds.runner\",options:{runnerUrl:\"\",runnerName:\"\"},_construct:function(t,e){this.overrided(t,e),this.runner={},this.runner.origin=\"*\"},prepare:function(){return(this._inited||(this._inited=new Deferred,t({url:this.options.runnerUrl,className:\"stretch\",sandbox:\"allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts\",frameBorder:\"0\",name:\"<proxy>\",contentWindowName:this.options.runnerName,onload:()=>{window.postMessage&&(r.on(\"message\",t=>{this.handleMessage(t.originalEvent)}),this.setup(iframe),this._inited.resolve())},onerror:t=>{this._inited.reject(t)}},this._elm),s.on(\"codeChange.live\",(t,e)=>{\"setValue\"!==e.origin&&e.origin}),s.on(\"console:run\",(t,e)=>{this.postMessage(\"console:run\",e)}),s.on(\"console:load:script\",(t,e)=>{this.postMessage(\"console:load:script\",e)}),s.on(\"console:load:dom\",(t,e)=>{this.postMessage(\"console:load:dom\",e)}),inited)).promise},setup:function(t){this.runner.window=t.contentWindow,this.runner.iframe=t},error:function(){window.console.warn.apply(console,[\"Renderer:\"].concat([].slice.call(arguments)))},handleMessage:function(t){if(t.origin){var e=t.data;if(\"string\"==typeof e){try{e=\"string\"==typeof t.data?JSON.parse(t.data):t.data}catch(t){return this.error(\"Error parsing event data:\",t.message)}if(\"function\"!=typeof this[e.type])return!1;try{this[e.type](e.data)}catch(t){this.error(t.message)}}}},postMessage:function(t,e){if(!this.runner.window)return this.error(\"postMessage: No connection to runner window.\");this.runner.window.postMessage(JSON.stringify({type:t,data:e}),this.runner.origin)},complete:function(){try{store.sessionStorage.removeItem(\"runnerPending\")}catch(t){}},focus:function(){},console:function(t){var e=t.method,t=t.args;window._console&&(window._console[e]||(e=\"log\"),window._console[e].apply(window._console,t))},\"console:load:script:success\":function(t){s.trigger(\"console:load:script:success\",t)},\"console:load:script:error\":function(t){s.trigger(\"console:load:script:error\",t)},\"console:load:dom:success\":function(t){s.trigger(\"console:load:dom:success\",t)},\"console:load:dom:error\":function(t){s.trigger(\"console:load:dom:error\",t)}});return i.EmbedRunner=e}),define(\"skylark-domx-plugins-embeds/embed-vimeo\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./embeds\"],function(t,e,o,n,i){\"use strict\";var r=n.Plugin.inherit({klassName:\"EmbedVimeo\",pluginName:\"lark.embeds.vimeo\",options:{},_construct:function(t,e){n.Plugin.prototype._construct.call(this,t,e),this.url=e.url,this.videoId=e.videoId,this.playerId=e.playerId,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e,n=this,i=\"//f.vimeocdn.com/js/froogaloop2.min.js\",r=document.getElementsByTagName(\"script\"),s=r.length;function a(){!e&&n.playOnReady&&n.play(),e=!0}for(;s;)if(r[--s].src===i){t=r[s];break}t||((t=document.createElement(\"script\")).src=i),o(t).on(\"load\",a),r[0].parentNode.insertBefore(t,r[0]),/loaded|complete/.test(t.readyState)&&a()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent(\"play\",function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent(\"pause\",function(){t.onPause()}),this.player.addEvent(\"finish\",function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit(\"playing\"),this.playStatus=2)},onPause:function(){this.emit(\"pause\"),delete this.playStatus},insertIframe:function(){var t=document.createElement(\"iframe\");t.src=this.url.replace(\"VIDEO_ID\",this.videoId).replace(\"PLAYER_ID\",this.playerId),t.id=this.playerId,this._elm.parentNode.replaceChild(t,this._elm),this._elm=t},play:function(){var t=this;this.playStatus||(this.emit(\"play\"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api(\"play\"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this._elm),this.player.addEvent(\"ready\",function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api(\"pause\"):this.playStatus&&(delete this.playOnReady,this.emit(\"pause\"),delete this.playStatus)}});return i.EmbedVimeo=r}),define(\"skylark-domx-plugins-embeds/embed-youtube\",[\"skylark-langx/langx\",\"skylark-domx-noder\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./embeds\"],function(t,e,n,i,r){\"use strict\";var s=i.Plugin.inherit({klassName:\"EmbedYoutube\",pluginName:\"lark.embeds.youtube\",options:{},_construct:function(t,e){i.Plugin.prototype._construct.call(this,t,e),this.videoId=e.videoId,this.playerVars=e.playerVars,this.clickToPlay=e.clickToPlay},canPlayType:function(){return!0},loadAPI:function(){var t,e=this,n=window.onYouTubeIframeAPIReady,i=\"https://www.youtube.com/iframe_api\",r=document.getElementsByTagName(\"script\"),s=r.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),e.playOnReady&&e.play()};s;)if(r[--s].src===i)return;(t=document.createElement(\"script\")).src=i,r[0].parentNode.insertBefore(t,r[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.emit(\"playing\"),this.playStatus=2)},onPause:function(){t.defer(()=>{this.checkSeek()},2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.emit(\"pause\"),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.trigger(\"error\",t)},play:function(){var e=this;this.playStatus||(this.emit(\"play\"),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this._elm,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){e.onReady()},onStateChange:function(t){e.onStateChange(t)},onError:function(t){e.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.emit(\"pause\"),delete this.playStatus)}});return r.EmbedYoutube=s}),define(\"skylark-domx-plugins-embeds/main\",[\"./embeds\",\"./embed-runner\",\"./embed-vimeo\",\"./embed-youtube\"],function(t){return t}),define(\"skylark-domx-plugins-embeds\",[\"skylark-domx-plugins-embeds/main\"],function(t){return t}),define(\"skylark-domx-plugins-sandboxs/sandboxs\",[\"skylark-domx-plugins-base/plugins\"],function(t){\"use strict\";return t.sandboxs={}}),define(\"skylark-domx-plugins-sandboxs/sandbox\",[\"skylark-langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./sandboxs\"],function(e,t,a,n,i,r,s){\"use strict\";function o(t){return t.contentWindow||t.contentDocument.parentWindow}var l=r.Plugin.inherit({klassName:\"Sandbox\",pluginName:\"lark.sandboxs.sandbox\",options:{name:\"Output\",allows:\"allow-modals allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts\",frameBorder:\"0\",cssTextTagId:\"sandbox-css\"},_construct:function(t,e){this.overrided(t,e),this.target=t,this.old=null,this.active=null,this.state={},this.guid=+new Date},create:function(){var t=document.createElement(\"iframe\");return t.setAttribute(\"sandbox\",this.options.allows),t.setAttribute(\"frameBorder\",this.options.frameBorder),t.setAttribute(\"name\",this.options.name),t.id=this.guid++,t},use:function(t,s){if(!this.target)throw new Error(\"Sandbox has no target element.\");this.old=this.active,this.saveState(this.old),this.active=t,a.prepend(this.target,t),e.defer(function(){s&&s();for(var t,e=this.target.getElementsByTagName(\"iframe\"),n=e.length,i=0,r=this.active.id;t=e[i],i<n;i++)t.id!==r&&(a.remove(t),n--)}.bind(this))},restoreState:function(t,e){return(t=t&&o(t))?void(e.scroll&&t.scrollTo(e.scroll.x,e.scroll.y)):{}},saveState:function(t){return(t=t&&o(t))?{scroll:{x:t.scrollX,y:t.scrollY}}:{}},wrap:function(t,e){t&&(n.on(t,\"resize\",function(){n.resized(this._elm)}),n.on(t,\"focus\",()=>{n.trigger(this._elm,\"focused\")}))},getSizeProperties:function(t){return{width:t.innerWidth||t.document.documentElement.clientWidth,height:t.innerHeight||t.document.documentElement.clientHeight,offsetWidth:t.document.documentElement.offsetWidth,offsetHeight:t.document.documentElement.offsetHeight}},eval:function(t){if(!this.active)throw new Error(\"sandbox.eval: has no active iframe.\");var e=/(^.|\\b)console\\.(\\S+)/g,e=(e.test(t)&&(t=t.replace(e,function(t,e,n){return\"window.runnerWindow.proxyConsole.\"+n})),this.active.contentWindow),n=null,i=\"log\";try{n=e.eval(t)}catch(t){n=t.message,i=\"error\"}return proxyConsole[i](n)},injectScript:function(t,e){if(!this.active)throw new Error(\"sandbox.injectScript: has no active iframe.\");var n=this.active.contentWindow.document,i=n.createElement(\"script\");i.src=t,i.onload=function(){e()},i.onerror=function(){e('Failed to load \"'+t+'\"')},n.body.appendChild(i)},injectDOM:function(t,e){if(!this.active)throw new Error(\"sandbox.injectDOM: has no active iframe.\");var n=this.active.contentWindow.document;try{n.body.innerHTML=t}catch(t){e(\"Failed to load DOM.\")}e()},injectCssText:function(t){var e;this.active&&(e=this.active.contentDocument.getElementById(this.options.cssTextTagId))&&(e.innerHTML=t)},render:function(i,r){var a=this.create(r);this.use(a,()=>{var t=a.contentDocument,e=a.contentWindow||a.contentDocument.parentWindow,t=t||e.document;let s=r.proxyConsole,n=r.loopProtect;s.methods.forEach(function(t){delete s[t]}),t.open(),t.write(\"\"),e.runnerWindow={proxyConsole:s,protect:n},e.console=s,e.onerror=function(t,e,n,i,r){s._raw(\"error\",r&&r.stack?r.stack:t+\" (line \"+n+\")\")},t.write(i),t.close(),this.wrap(e,r)})}});return r.register(l),s.Sandbox=l}),define(\"skylark-domx-plugins-sandboxs/main\",[\"./sandboxs\",\"./sandbox\"],function(t){return t}),define(\"skylark-domx-plugins-sandboxs\",[\"skylark-domx-plugins-sandboxs/main\"],function(t){return t}),define(\"skylark-domx-plugins-menus/menus\",[\"skylark-langx/skylark\"],function(t){return t.attach(\"domx.plugins.menus\")}),define(\"skylark-domx-plugins-menus/menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\"],function(n,i,t,r,e){\"use strict\";var s=r.Plugin.inherit({klassName:\"Menu\",pluginName:\"lark.menus.menu\",options:{template:\"\",classes:{base:\"lark-menu\"},selectors:{container:null},item:{templates:{general:'<li class=\"menu-item\"><a href=\"#\" class=\"link\"><%= title %></a></li>',separator:\"\",hasChildren:'<li class=\"menu-item hasChildren\"><a href=\"#\" class=\"link\"><%= title %></a><ul class=\"submenu\"></ul>'},classes:{base:\"menu-item\",active:\"active\",hasChildren:\"hasChildren\"},selectors:{general:\"li\",hasChildren:\":has(ul)\"}},submenu:{template:\"<ul></ul>\",classes:{base:\"submenu\"},selectors:{children:\"> ul\",descendant:\"ul\"}},data:{},onAction:null},_construct:function(t,e){r.Plugin.prototype._construct.call(this,t,e),this._$container=this.$(this.options.selectors.container),this.options.onAction&&this.listenTo(this._$container,\"click\",\".\"+this.options.item.classes.base,t=>{t=i(t.currentTarget).data(\"item\");this.options.onAction(t)})},renderMenuItemHtml:function(t){var e;return this._renderItemHtml||(e=this.options.item.template,n.isString(e)?this._renderItemHtml=n.template(e):n.isFunction(e)&&(this._renderItemHtml=e)),this._renderItemHtml(t)},renderGeneralMenuItem:function(t){var e;return this._renderGeneralItemHtml||(e=this.options.item.templates.general,n.isString(e)?this._renderGeneralItemHtml=n.template(e):n.isFunction(e)&&(this._renderGeneralItemHtml=e)),i(this._renderGeneralItemHtml(t))},renderHasChildrenMenuItem:function(t){var e;return this._renderHasChildrenItemHtml||(e=this.options.item.templates.hasChildren,n.isString(e)?this._renderHasChildrenItemHtml=n.template(e):n.isFunction(e)&&(this._renderHasChildrenItemHtml=e)),i(this._renderHasChildrenItemHtml(t))}});return r.register(s),e.Menu=s}),define(\"skylark-domx-plugins-menus/accordion-menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\",\"./menu\"],function(t,e,n,i,r,s){\"use strict\";var a=s.inherit({klassName:\"AccordionMenu\",pluginName:\"lark.menus.accordion\",_construct:function(t,e){s.prototype._construct.call(this,t,e),n.multitier(t,{togglable:!0,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})}});return i.register(a),r.AccordionMenu=a}),define(\"skylark-domx-plugins-menus/cascade-menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\",\"./menu\"],function(t,e,n,i,r,s){\"use strict\";var a=s.inherit({klassName:\"CascadeMenu\",pluginName:\"lark.menus.cascade\",_construct:function(t,e){s.prototype._construct.call(this,t,e),n.multitier(t,{togglable:!0,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})}});return i.register(a),r.CascadeMenu=a}),define(\"skylark-domx-plugins-menus/mega-menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\",\"./menu\"],function(d,h,t,e,n,i){\"use strict\";var r=i.inherit({klassName:\"MegaMenu\",pluginName:\"lark.menus.mega\",options:{menuBehaviour:\"click\",stickyHeader:!0,caret:!1,caretArrows:[{up:\"caret-up\",down:\"caret-down\",upUrl:\"\",downUrl:\"\"}],highlighter:!0,followingHighlighter:!1,highlightColor:\"\",textHighlighter:!1,textHighlighterColor:\"\",animation:!1,animationClass:\"\"},_construct:function(t,e){i.prototype._construct.call(this,t,e);let r=this.options;r.selector;var s=h(\".main-links ul li a\"),a=h(\".menu-dropdown .menu-item-wrapper\"),o=[],l=[],c=(h(\"#\"+a.attr(\"id\")),this.options.caretArrows[0].up),u=this.options.caretArrows[0].down;!1===r.stickyHeader?h(\".mega-menu\").removeClass(\"sticky-header\"):h(\".mega-menu\").addClass(\"sticky-header\"),!0===r.caret&&(c=r.caretArrows[0].up,u=r.caretArrows[0].down),(r.caretArrows[0].up||r.caretArrows[0].down)&&(r.caretArrows[0].upUrl=null,r.caretArrows[0].downUrl=null),h(\"a[data-submenu]\").append('<span class=\"caret '+u+'\"></span>'),!0===r.caret&&\"\"!==r.caretArrows[0].downUrl&&(h(\".mega-menu span.caret\").removeClass(\"undefined\"),h(\".mega-menu span.caret\").addClass(\"caret-img down\"),h(\".mega-menu span.caret.caret-img.down\").css({\"background-image\":\"url(\"+r.caretArrows[0].downUrl+\")\"})),h(`<style>\n            .mega-menu .main-links ul li a:hover{\n              border-color:`+r.highlightColor+`}\n          </style>`).appendTo(\"head\"),s.on(r.menuBehaviour,function(){s.removeClass(\"highlight\"),s.css({\"border-color\":\"\"})}),\"\"===r.menuBehaviour&&(r.menuBehaviour=\"click\"),s.each(function(n){var i=h(this).attr(\"data-submenu\");o.push(h(this).attr(\"data-submenu\")),h(this).on(r.menuBehaviour,function(){var t=d.inArray(i,l),e=h(this).find(\".caret.caret-img\");s.find(\"span\").removeClass(c),s.find(\"span\").addClass(u),o[n]!=l[t]||h(a[t]).hasClass(\"active\")?(h(a[t]).removeClass(\"active\"),h(this).find(\"span\").removeClass(c),h(this).find(\"span\").addClass(u)):(a.removeClass(\"active\"),h(a[t]).addClass(\"active\"),h(this).find(\"span\").removeClass(u),h(this).find(\"span\").addClass(c)),h(\".menu-dropdown\").find(\".menu-item-wrapper\").hasClass(\"active\")&&(h(\".mega-menu span.caret\").addClass(\"down\"),h(\".mega-menu span.caret\").css({\"background-image\":\"url(\"+r.caretArrows[0].downUrl+\")\"})),e.hasClass(\"down\")?(e.removeClass(\"down\"),e.addClass(\"up\"),e.css({\"background-image\":\"url(\"+r.caretArrows[0].upUrl+\")\"})):(e.removeClass(\"up\"),e.addClass(\"down\"),e.css({\"background-image\":\"url(\"+r.caretArrows[0].downUrl+\")\"})),(s.find(\"span\").hasClass(\"caret-up\")||h(this).find(\"span\").hasClass(\"up\")&&!h(this).hasClass(\"highlight\"))&&(h(this).addClass(\"highlight\"),h(this).css({\"border-color\":r.highlightColor})),a.hasClass(\"dropdown\")&&h(\"#\"+l[t]+\".dropdown\").css({left:h(this).offset().left})})}),!0===r.followingHighlighter&&(h(\".main-links ul\").append('<div class=\"follow-highlighter\"></div>'),s.mouseover(function(t,e){t.pageX,h(this).offset().left,h(this).innerWidth();h(\".follow-highlighter\").css({display:\"block\"}),h(\".main-links ul\").addClass(\"follow-highlighter-enabled\"),h(\".follow-highlighter\").css({width:h(this).innerWidth(),left:h(this).offset().left,\"background-color\":r.highlightColor})})),h(\".main-links ul\").each(function(){h(this).mouseleave(function(){h(\".main-links ul\").removeClass(\"follow-highlighter-enabled\"),h(\".follow-highlighter\").css({display:\"none\",left:h(s[0]).offset().left})})}),!1===r.highlighter&&(h(\".main-links\").addClass(\"disable-highlighter\"),h(\".follow-highlighter\").remove()),!0===r.textHighlighter&&h(\".main-links\").addClass(\"text-highlighter\"),r.textHighlighterColor&&h(\"style\").append(`.mega-menu .text-highlighter.main-links ul li a:hover{\n            color:`+r.textHighlighterColor+\"}\"),a.each(function(t){l.push(h(a[t]).attr(\"id\"))}),!0===r.animation&&a.addClass(r.animationClass),h(\".mobile-nav-icon a\").click(function(){h(\".follow-highlighter\").remove(),h(\".main-links\").hasClass(\"active\")?(h(\".main-links\").removeClass(\"active\"),h(\".menu-dropdown\").hide()):(h(\".main-links\").addClass(\"active\"),h(\".menu-dropdown\").show())}),h(\".menu-item-wrapper\").prepend('<a href=\"#\" class=\"back-link\">Back</a>'),h(window).resize(function(){h(window).width()<768?h(\".mega-menu\").hasClass(\"sticky-header\")&&(h(\".mega-menu\").addClass(\"responsive-menu\"),h(\".main-links\").css({\"margin-top\":h(\".mobile-nav-icon\").outerHeight()+\"px\"})):h(\".main-links\").css({\"margin-top\":\"0px\"})})}});return e.register(r),n.MegaMenu=r}),define(\"skylark-domx-plugins-menus/nav-menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\",\"./menu\"],function(t,e,n,i,r,s){\"use strict\";var a=s.inherit({klassName:\"NavMenu\",pluginName:\"lark.menus.nav\",options:{item:{templates:{}}},_construct:function(t,e){s.prototype._construct.call(this,t,e),this.options.data.items&&this.resetItems(this.options.data.items),n.multitier(t,{togglable:!1,classes:{active:this.options.item.classes.active},selectors:{item:this.options.item.selectors.general,sublist:this.options.submenu.selectors.descendant,hasSublist:this.options.item.selectors.hasChildren},multiExpand:!1})},resetItems:function(t){let r=this;let e=this.$(this.options.selectors.container);t.forEach(t=>{!function n(t,e){let i;if((i=t.children?r.renderHasChildrenMenuItem(t):r.renderGeneralMenuItem(t)).data(\"item\",t),e.append(i),t.children){let e=i.find(r.options.submenu.selectors.children);t.children.forEach(t=>{n(t,e)})}}(t,e)})}});return i.register(a),r.NavMenu=a}),define(\"skylark-domx-plugins-toggles/checkbox\",[\"skylark-langx/langx\",\"skylark-domx/browser\",\"skylark-domx/eventer\",\"skylark-domx/noder\",\"skylark-domx/geom\",\"skylark-domx/query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(n,t,e,i,r,s,a,o){var l=a.Plugin.inherit({klassName:\"Checkbox\",pluginName:\"lark.toggles.checkbox\",options:{ignoreVisibilityCheck:!1},_construct:function(t,e){this.overrided(t,e);e=this.$();if(\"label\"!==t.tagName.toLowerCase())throw new Error(\"Checkbox must be initialized on the `label` that wraps the `input` element. See https://github.com/ExactTarget/fuelux/blob/master/reference/markup/checkbox.html for example of proper markup. Call `.checkbox()` on the `<label>` not the `<input>`\");if(this.$label=e,this.$chk=this.$label.find('input[type=\"checkbox\"]'),this.$container=e.parent(\".checkbox\"),!this.options.ignoreVisibilityCheck&&this.$chk.css(\"visibility\").match(/hidden|collapse/))throw new Error(\"For accessibility reasons, in order for tab and space to function on checkbox, checkbox `<input />`'s `visibility` must not be set to `hidden` or `collapse`. See https://github.com/ExactTarget/fuelux/pull/1996 for more details.\");t=this.$chk.attr(\"data-toggle\");this.$toggleContainer=s(t),this.$chk.on(\"change\",n.proxy(this.itemchecked,this)),this.setInitialState()},setInitialState:function(){var t=this.$chk,e=t.prop(\"checked\"),n=t.prop(\"disabled\");this.setCheckedState(t,e),this.setDisabledState(t,n)},setCheckedState:function(t,e){var n=this.$label,i=this.$toggleContainer;e?(t.prop(\"checked\",!0),n.addClass(\"checked\"),i.removeClass(\"hide hidden\"),n.trigger(\"checked\")):(t.prop(\"checked\",!1),n.removeClass(\"checked\"),i.addClass(\"hidden\"),n.trigger(\"unchecked\")),n.trigger(\"changed\",e)},setDisabledState:function(t,e){var t=s(t),n=this.$label;return e?(t.prop(\"disabled\",!0),n.addClass(\"disabled\"),n.trigger(\"disabled\")):(t.prop(\"disabled\",!1),n.removeClass(\"disabled\"),n.trigger(\"enabled\")),t},itemchecked:function(t){var t=s(t.target),e=t.prop(\"checked\");this.setCheckedState(t,e)},toggle:function(){this.isChecked()?this.uncheck():this.check()},check:function(){this.setCheckedState(this.$chk,!0)},uncheck:function(){this.setCheckedState(this.$chk,!1)},isChecked:function(){return this.$chk.prop(\"checked\")},enable:function(){this.setDisabledState(this.$chk,!1)},disable:function(){this.setDisabledState(this.$chk,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}});return l.prototype.getValue=l.prototype.isChecked,a.register(l),o.Checkbox=l}),define(\"skylark-domx-plugins-toggles/pip\",[\"skylark-langx\",\"skylark-domx-styler\",\"skylark-domx-noder\",\"skylark-domx-eventer\",\"skylark-domx-query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(t,e,n,i,r,s,a){\"use strict\";var o=s.Plugin.inherit({klassName:\"Pip\",pluginName:\"domx.toggles.pip\",options:{classes:{mini:\"mini\",unmini:\"unmini\"},selectors:{pipButton:null}},_construct:function(t,e){s.Plugin.prototype._construct.call(this,t,e);t=this.$(),e=this.options.selectors;this.target=this.elmx(this.options.target);e.pipButton?this.$pipButton=t.find(e.pipButton):this.$pipButton=t,this.listenTo(this.$pipButton,\"click\",this.togglePip),\"pictureInPictureEnabled\"in document||this.$pipButton.hide()},togglePip:function(){try{var t=this.target.elm();t!==n.pictureInPicture()?(this.$pipButton.disabled(!0),n.pictureInPicture(t)):n.pictureInPicture(!1)}catch(t){console.error(t)}finally{this.$pipButton.disabled(!1)}}});return s.register(o),a.Pip=o}),define(\"skylark-domx-plugins-toggles/radio\",[\"skylark-langx/langx\",\"skylark-domx/browser\",\"skylark-domx/eventer\",\"skylark-domx/noder\",\"skylark-domx/geom\",\"skylark-domx/query\",\"skylark-domx-plugins-base\",\"./toggles\"],function(n,t,e,i,r,s,a,o){var l=a.Plugin.inherit({klassName:\"Radio\",pluginName:\"lark.toggles.radio\",options:{ignoreVisibilityCheck:!1},_construct:function(t,e){if(this.overrided(t,e),\"label\"!==t.tagName.toLowerCase())throw new Error(\"Radio must be initialized on the `label` that wraps the `input` element. See https://github.com/ExactTarget/fuelux/blob/master/reference/markup/radio.html for example of proper markup. Call `.radio()` on the `<label>` not the `<input>`\");if(this.$label=this.$(),this.$radio=this.$label.find('input[type=\"radio\"]'),this.groupName=this.$radio.attr(\"name\"),!this.options.ignoreVisibilityCheck&&this.$radio.css(\"visibility\").match(/hidden|collapse/))throw new Error(\"For accessibility reasons, in order for tab and space to function on radio, `visibility` must not be set to `hidden` or `collapse`. See https://github.com/ExactTarget/fuelux/pull/1996 for more details.\");e=this.$radio.attr(\"data-toggle\");this.$toggleContainer=s(e),this.$radio.on(\"change\",n.proxy(this.itemchecked,this)),this.setInitialState()},setInitialState:function(){var t=this.$radio,e=t.prop(\"checked\"),n=t.prop(\"disabled\");this.setCheckedState(t,e),this.setDisabledState(t,n)},resetGroup:function(){s('input[name=\"'+this.groupName+'\"]').each(function(t,e){var e=s(e),n=e.parent(),e=e.attr(\"data-toggle\"),e=s(e);n.removeClass(\"checked\"),e.addClass(\"hidden\")})},setCheckedState:function(t,e){var n=t.parent(),i=t.attr(\"data-toggle\"),i=s(i);e?(this.resetGroup(),t.prop(\"checked\",!0),n.addClass(\"checked\"),i.removeClass(\"hide hidden\"),n.trigger(\"checked\")):(t.prop(\"checked\",!1),n.removeClass(\"checked\"),i.addClass(\"hidden\"),n.trigger(\"unchecked\")),n.trigger(\"changed\",e)},setDisabledState:function(t,e){var t=s(t),n=this.$label;return e?(t.prop(\"disabled\",!0),n.addClass(\"disabled\"),n.trigger(\"disabled\")):(t.prop(\"disabled\",!1),n.removeClass(\"disabled\"),n.trigger(\"enabled\")),t},itemchecked:function(t){t=s(t.target);this.setCheckedState(t,!0)},check:function(){this.setCheckedState(this.$radio,!0)},uncheck:function(){this.setCheckedState(this.$radio,!1)},isChecked:function(){return this.$radio.prop(\"checked\")},enable:function(){this.setDisabledState(this.$radio,!1)},disable:function(){this.setDisabledState(this.$radio,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}});return l.prototype.getValue=l.prototype.isChecked,a.register(l),o.Radio=l}),define(\"skylark-domx-plugins-toggles/main\",[\"./toggles\",\"./checkbox\",\"./collapse\",\"./fullscreen\",\"./pip\",\"./radio\",\"./tab\"],function(t){return t}),define(\"skylark-domx-plugins-toggles\",[\"skylark-domx-plugins-toggles/main\"],function(t){return t}),define(\"skylark-domx-plugins-menus/tree-menu\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"./menus\",\"./menu\",\"skylark-domx-plugins-toggles\"],function(n,t,i,e,r,s){\"use strict\";var a=s.inherit({klassName:\"Tree\",pluginName:\"lark.menus.tree\",_construct:function(t,e){s.prototype._construct.call(this,t,e),i.multitier(t,n.mixin({hide:function(t){t.plugin(\"lark.toggles.collapse\").hide()},toggle:function(t){t.plugin(\"lark.toggles.collapse\").toggle()}},this.options))}});return e.register(a),r.TreeMenu=a}),define(\"skylark-devices-keyboard/keyboard\",[\"skylark-langx-ns\"],function(t){var e={isShiftDown:function(t){return null!=t&&t.shiftKey},isAltDown:function(t){return null!=t&&t.altKey},isControlDown:function(t){return null!=t&&t.ctrlKey},isMetaDown:function(t){return null!=t&&t.metaKey}};return t.attach(\"devices.keyboard\",e)}),define(\"skylark-devices-keyboard/keys\",[\"./keyboard\"],function(t){var e={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,INSERT:45,DEL:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return t.keys=e}),define(\"skylark-domx-plugins-menus/popup-menu\",[\"skylark-langx/langx\",\"skylark-devices-keyboard/keys\",\"skylark-domx-noder\",\"skylark-domx-styler\",\"skylark-domx-query\",\"skylark-domx-lists\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-popups/popups\",\"./menus\",\"./menu\"],function(n,s,i,r,a,t,e,o,l,c){\"use strict\";var u=c.inherit({klassName:\"PopupMenu\",pluginName:\"lark.menus.popup\",delay:300,options:{icons:{submenu:\"ui-icon-caret-1-e\"},position:{my:\"left top\",at:\"right top\"},role:\"menu\",item:{classes:{base:\"menu-item\",active:\"active\",disabled:\"disabled\",wrapper:\"menu-item-wrapper\"},selector:\"> *\"},blur:null,focus:null,select:null},_construct:function(t,e){c.prototype._construct.call(this,t,e),this.element=this.$(),this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.attr({role:this.options.role,tabIndex:0}),this.listenTo(this.element,{mousedown:function(t){t.preventDefault(),this._activateItem(t)},click:function(t){var e=a(t.target),n=a(i.active());!this.mouseHandled&&e.not(\".\"+this.options.item.classes.disable).length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(\".\"+this.options.submenu.classes.base).length?this.expand(t):!this.element.is(\":focus\")&&n.closest(\".\"+this.options.submenu.classes.base).length&&(this.element.trigger(\"focus\",[!0]),this.active)&&1===this.active.parents(\".\"+this.options.submenu.classes.base).length&&clearTimeout(this.timer))},mouseenter:\"_activateItem\",mousemove:\"_activateItem\"},\".\"+this.options.item.classes.base),this.listenTo(this.element,{mouseleave:\"collapseAll\",focus:function(t,e){var n=this.active||this._menuItems().first();e||this.focus(t,n)},blur:function(t){this._delay(function(){i.contains(this.element[0],i.active())||this.collapseAll(t)})},keydown:\"_keydown\"}),this.listenTo(this.element,\"mouseleave\",\".\"+this.options.submenu.classes.base,\"collapseAll\"),this.listenTo(a(document),{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t,!0),this.mouseHandled=!1}})},_activateItem:function(t){var e,n;this.previousFilter||t.clientX===this.lastMousePosition.x&&t.clientY===this.lastMousePosition.y||(this.lastMousePosition={x:t.clientX,y:t.clientY},e=a(t.target).closest(\".\"+this.options.item.classes.base),n=a(t.currentTarget),e[0]!==n[0])||n.is(\".\"+this.options.item.classes.active)||(n.siblings().children(\".\"+this.options.item.classes.active).removeClass(this.options.item.classes.active),this.focus(t,n))},_keydown:function(t){var e,n,i,r=!0;switch(t.keyCode){case s.PAGE_UP:this.previousPage(t);break;case s.PAGE_DOWN:this.nextPage(t);break;case s.HOME:this._move(\"first\",\"first\",t);break;case s.END:this._move(\"last\",\"last\",t);break;case s.UP:this.previous(t);break;case s.DOWN:this.next(t);break;case s.LEFT:this.collapse(t);break;case s.RIGHT:this.active&&!this.active.is(\".\"+this.options.item.classes.disabled)&&this.expand(t);break;case s.ENTER:case s.SPACE:this._activate(t);break;case s.ESC:this.collapse(t);break;default:e=this.previousFilter||\"\",i=r=!1,n=96<=t.keyCode&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===e?i=!0:n=e+n,e=this._filterMenuItems(n),(e=i&&-1!==e.index(this.active.next())?this.active.nextAll(\".\"+this.options.item.classes.base):e).length||(n=String.fromCharCode(t.keyCode),e=this._filterMenuItems(n)),e.length?(this.focus(t,e),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(\".\"+this.options.item.classes.disabled)&&(this.active.children(\"[aria-haspopup='true']\").length?this.expand(t):this.select(t))},_itemRole:function(){return{menu:\"menuitem\",listbox:\"option\"}[this.options.role]},focus:function(t,e){var n;this.blur(t,t&&\"focus\"===t.type),this._scrollIntoView(e),this.active=e.first(),(n=this.active.children(\".\"+this.options.item.classes.wrapper)).addClass(this.options.item.classes.active),this.options.role&&this.element.attr(\"aria-activedescendant\",n.attr(\"id\")),this.active.parent().closest(\".\"+this.options.item.classes.base).children(\".\"+this.options.item.classes.wrapper).addClass(this.options.item.classes.active),t&&\"keydown\"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(\".\"+this.options.submenu.classes.base)).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this.trigger(\"focus\",{item:e})},_scrollIntoView:function(t){var e,n,i;this._hasScroll()&&(e=parseFloat(r.css(this.activeMenu[0],\"borderTopWidth\"))||0,n=parseFloat(r.css(this.activeMenu[0],\"paddingTop\"))||0,e=t.offset().top-this.activeMenu.offset().top-e-n,n=this.activeMenu.scrollTop(),i=this.activeMenu.height(),t=t.outerHeight(),e<0?this.activeMenu.scrollTop(n+e):i<e+t&&this.activeMenu.scrollTop(n+e-i+t))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children(\".\"+this.options.item.classes.wrapper).removeClass(this.options.item.classes.active),this.trigger(\"blur\",{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),this.timer=this._delay(function(){this._close(),this._open(t)},this.delay)},_open:function(t){var e=n.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(\".\"+this.options.submenu.classes.base).not(t.parents(\".\"+this.options.submenu.classes.base)).hide().attr(\"aria-hidden\",\"true\"),o.open(t.attr(\"aria-expanded\",\"true\"),{position:e})},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:a(e&&e.target).closest(this.element.find(\".\"+this.options.submenu.classes.base));t.length||(t=this.element),this._close(t),this.blur(e),t.find(\".\"+this.options.item.classes.active).removeClass(this.options.item.classes.active),this.activeMenu=t},n?0:this.delay)},_close:function(t){t=t||(this.active?this.active.parent():this.element),o.close(t.find(\".\"+this.options.submenu.classes.base).attr(\"aria-expanded\",\"false\"))},_closeOnDocumentClick:function(t){return!a(t.target).closest(\".\"+this.options.submenu.classes.base).length},_isDivider:function(t){return!/[^\\-\\u2014\\u2013\\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(\".\"+this.options.item.classes.base,this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this._menuItems(this.active.children(\".\"+this.options.submenu.classes.base)).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move(\"next\",\"first\",t)},previous:function(t){this._move(\"prev\",\"last\",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(\".\"+this.options.item.classes.base).length},isLastItem:function(){return this.active&&!this.active.nextAll(\".\"+this.options.item.classes.base).length},_menuItems:function(t){return(t||this.element).find(this.options.items).filter(\".\"+this.options.item.classes.base)},_move:function(t,e,n){var i;(i=this.active?\"first\"===t||\"last\"===t?this.active[\"first\"===t?\"prevAll\":\"nextAll\"](\".\"+this.options.item.classes.base).last():this.active[t+\"All\"](\".\"+this.options.item.classes.base).first():i)&&i.length&&this.active||(i=this._menuItems(this.activeMenu)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(\".\"+this.options.item.classes.base).each(function(){return(e=a(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this._menuItems(this.activeMenu)[this.active?\"last\":\"first\"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(\".\"+this.options.item.classes.base).each(function(){return 0<(e=a(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop(\"scrollHeight\")},select:function(t){this.active=this.active||a(t.target).closest(\".\"+this.options.item.classes.base);var e={item:this.active};this.active.has(\".\"+this.options.submenu.classes.base).length||this.collapseAll(t,!0),this.trigger(\"select\",e)},_filterMenuItems:function(t){var t=t.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\"),e=new RegExp(\"^\"+t,\"i\");return this.activeMenu.find(this.options.items).filter(\".\"+this.options.item.classes.base).filter(function(){return e.test(n.trim(a(this).children(\".\"+this.options.item.classes.wrapper).text()))})}});return e.register(u),l.PopupMenu=u}),define(\"skylark-domx-plugins-menus/main\",[\"./menus\",\"./accordion-menu\",\"./cascade-menu\",\"./mega-menu\",\"./nav-menu\",\"./tree-menu\",\"./popup-menu\"],function(t){return t}),define(\"skylark-domx-plugins-menus\",[\"skylark-domx-plugins-menus/main\"],function(t){return t}),define(\"skylark-domx-plugins-uploads/uploads\",[\"skylark-domx-plugins-base/plugins\",\"skylark-domx-files/dropzone\",\"skylark-domx-files/pastezone\",\"skylark-domx-files/picker\"],function(t){function e(){return e}return t.uploads=e}),define(\"skylark-langx-emitter/main\",[\"./emitter\",\"./evented\"],function(t){return t}),define(\"skylark-langx-emitter\",[\"skylark-langx-emitter/main\"],function(t){return t}),define(\"skylark-domx-plugins-uploads/single-uploader\",[\"skylark-langx-emitter\",\"skylark-langx-async/deferred\",\"skylark-domx-velm\",\"skylark-domx-plugins-base\",\"./uploads\"],function(t,e,n,i,r){class s extends i.Plugin{get klassName(){return\"SingleUploader\"}get pluginName(){return\"lark.uploads.single\"}get options(){return{selectors:{picker:\".file-picker\",dropzone:\".file-dropzone\",pastezone:\".file-pastezone\",startUploads:\".start-uploads\",cancelUploads:\".cancel-uploads\"}}}constructor(t,e){super(t,e),this._velm=n(this._elm),this._initFileHandlers()}_initFileHandlers(){var e=this,t=this.options.selectors,n=t.dropzone,i=t.pastezone,t=t.picker;n&&this._velm.$(n).dropzone({dropped:function(t){e._addFile(t[0])}}),i&&this._velm.$(i).pastezone({pasted:function(t){e._addFile(t[0])}}),t&&this._velm.$(t).picker({multiple:!0,picked:function(t){e._addFile(t[0])}})}_addFile(t){this.emit(\"added\",t)}destroy(){}}return r.SingleUploader=s}),define(\"skylark-net-http/xhr\",[\"skylark-langx-ns/ns\",\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-funcs\",\"skylark-langx-async/deferred\",\"skylark-langx-emitter/evented\",\"skylark-langx-urls/is-cross-origin\",\"./http\"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(){var e;return function(t){return(e=e||document.createElement(\"a\")).href=t,e.href}}(),Xhr=function(){var jsonpID=0,key,name,rscript=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,scriptTypeRE=/^(?:text|application)\\/javascript/i,xmlTypeRE=/^(?:text|application)\\/xml/i,jsonType=\"application/json\",htmlType=\"text/html\",blankRE=/^\\s*$/,XhrDefaultOptions={async:!0,type:\"GET\",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:\"text/javascript, application/javascript, application/x-javascript\",json:\"application/json\",xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{withCredentials:!0}};function mimeToDataType(t){if(t=t&&t.split(\";\",2)[0]){if(t==htmlType)return\"html\";if(t==jsonType)return\"json\";if(scriptTypeRE.test(t))return\"script\";if(xmlTypeRE.test(t))return\"xml\"}return\"text\"}function appendQuery(t,e){return\"\"==e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&\"string\"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&\"GET\"!=t.type.toUpperCase()||(\"string\"!=type(t.data)&&(t.data=param(t.data,t.traditional)),t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(n,t,i,r){var s,a=isArray(t),o=isPlainObject(t);each(t,function(t,e){s=type(e),r&&(t=i?r:r+\"[\"+(o||\"object\"==s||\"array\"==s?t:\"\")+\"]\"),!r&&a?n.add(e.name,e.value):\"array\"==s||!i&&\"object\"==s?serialize(n,e,i,t):n.add(t,e)})}var param=function(t,e){var n=[];return n.add=function(t,e){null==(e=isFunction(e)?e():e)&&(e=\"\"),this.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(e))},serialize(n,t,e),n.join(\"&\").replace(/%20/g,\"+\")},Xhr=Evented.inherit({klassName:\"Xhr\",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest,dataType=(serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options),options.dataType||options.handleAs),mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&\"application/x-www-form-urlencoded\";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&-1<mime.indexOf(\",\")&&(mime=mime.split(\",\",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),\"blob\"!=dataType&&\"arraybuffer\"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(200<=xhr.status&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith(\"file:\")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader(\"content-type\"));try{\"script\"==dataType?eval(xhr.responseText):result=\"xml\"==dataType?xhr.responseXML:\"json\"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):\"blob\"==dataType||\"arraybuffer\"==dataType?xhr.response:xhr.responseText}catch(e){error=e}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error(\"abort\"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error(\"timeout\"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];\"content-type\"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader(\"Content-Type\",contentType),headers&&\"X-Requested-With\"in headers||isCrossOrigin(url)||xhr.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),basicAuthorizationToken&&xhr.setRequestHeader(\"Authorization\",basicAuthorizationToken),xhr.send(options.data||null),deferred.promise},abort:function(){var t=this._.xhr;t&&t.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type=\"GET\",this._request(t)},post:function(t){return(t=t||{}).type=\"POST\",this._request(t)},patch:function(t){return(t=t||{}).type=\"PATCH\",this._request(t)},put:function(t){return(t=t||{}).type=\"PUT\",this._request(t)},del:function(t){return(t=t||{}).type=\"DELETE\",this._request(t)},init:function(t){this._={options:t||{}}}});return[\"request\",\"get\",\"post\",\"put\",\"del\",\"patch\"].forEach(function(n){Xhr[n]=function(t,e){return new Xhr({url:t})[n](e)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define(\"skylark-net-http/upload\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx-async/deferred\",\"skylark-langx-emitter/evented\",\"./xhr\",\"./http\"],function(t,h,n,e,i,p,r){var f=Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice,s=i.inherit({klassName:\"Upload\",_construct:function(t){this._options=h.mixin({debug:!1,url:\"/upload\",headers:{},maxConnections:999,maxChunkSize:void 0,onProgress:function(t,e,n,i){},onComplete:function(t,e,n,i,r){},onCancel:function(t,e){},onFailure:function(t,e,n){}},t),this._queue=[],this._params=[],this._files=[],this._xhrs=[],this._loaded=[]},add:function(t){return this._files.push(t)-1},send:function(t,e){var n;!this._files[t]||-1<this._queue.indexOf(t)||(n=this._queue.push(t),e=h.clone(e),this._params[t]=e,n<=this._options.maxConnections&&this._send(t,this._params[t]))},sendAll:function(t){for(var e=0;e<this._files.length;e++)this.send(e,t)},cancel:function(t){this._cancel(t),this._dequeue(t)},cancelAll:function(){for(var t=0;t<this._queue.length;t++)this._cancel(this._queue[t]);this._queue=[]},getName:function(t){t=this._files[t];return null!=t.fileName?t.fileName:t.name},getSize:function(t){t=this._files[t];return null!=t.fileSize?t.fileSize:t.size},getLoaded:function(t){return this._loaded[t]||0},_send:function(i,r){var s,t,e=this._options,a=this.getName(i),o=this.getSize(i),n=e.maxChunkSize||0,l=0,c=this._files[i],u={headers:h.clone(e.headers)},e=(this._loaded[i]=this._loaded[i]||0,this._xhrs[i]=new p({url:e.url})),d=(n?(u.data=f.call(c,this._loaded[i],this._loaded[i]+n,c.type),s=u.data.size,u.headers[\"content-range\"]=\"bytes \"+this._loaded[i]+\"-\"+(this._loaded[i]+s-1)+\"/\"+o,u.headers[\"Content-Type\"]=\"application/octet-stream\"):(s=o,n=r.formParamName,t=r.formData,n?((t=t||new FormData).append(n,c),u.data=t):(u.headers[\"Content-Type\"]=c.type||\"application/octet-stream\",u.data=c)),this);e.post(u).progress(function(t){t.lengthComputable&&(l+=t.loaded,d._loaded[i]=d._loaded[i]+t.loaded,d._options.onProgress(i,a,d._loaded[i],o))}).then(function(t,e,n){d._files[i]&&(l<s&&(d._loaded[i]=d._loaded[i]+s-l,d._options.onProgress(i,a,d._loaded[i],o)),d._loaded[i]<o?d._send(i,r):(d._options.onComplete(i,a,t,e,n),d._files[i]=null,d._xhrs[i]=null,d._dequeue(i)))}).catch(function(t){d._options.onFailure(i,a,t),d._files[i]=null,d._xhrs[i]=null,d._dequeue(i)})},_cancel:function(t){this._options.onCancel(t,this.getName(t)),this._files[t]=null,this._xhrs[t]&&(this._xhrs[t].abort(),this._xhrs[t]=null)},getQueue:function(){return this._queue},_dequeue:function(t){var t=n.inArray(t,this._queue),e=(this._queue.splice(t,1),this._options.maxConnections);this._queue.length>=e&&t<e&&(t=this._queue[e-1],this._send(t,this._params[t]))}});return s.send=function(t,e){var n=new s(e),t=n.add(t);return n.send(t,e)},s.sendAll=function(t,e){for(var n=new s(e),i=0,r=t.length;i<r;i++)this.add(file[i]);return n.send(e)},r.Upload=s}),define(\"skylark-domx-plugins-uploads/multi-uploader\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-query\",\"skylark-domx-velm\",\"skylark-net-http/upload\",\"skylark-domx-plugins-base\",\"./uploads\"],function(t,e,a,n,i,r,s){var o=r.Plugin.inherit({klassName:\"MultiUploader\",pluginName:\"lark.uploads.multi\",options:{uploadUrl:\"/upload\",params:{formParamName:\"file\"},maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,autoUpload:!1,selectors:{fileList:\".file-list\",fileItem:\".file-item\",nodata:\".file-list .no-data\",picker:\".file-picker\",dropzone:\".file-dropzone\",pastezone:\".file-pastezone\",startUploads:\".start-uploads\",cancelUploads:\".cancel-uploads\"},template:'<div class=\"lark-multiuploader\">    <h3 class=\"popover-title\">Upload files</h3>    <div class=\"popover-content container-fluid\" class=\"file-list file-dropzone file-pastezone\">        <div class=\"no-data\"><em>Add files.</em></div>    </div>    <footer>        <button class=\"btn btn-warning pull-right btn-sm\" id=\"cancel-uploads-button\"><i class=\"icon-cancel\"></i>Cancel uploads</button>        <span class=\"btn btn-success fileinput-button btn-sm\" id=\"fileinput-button\">            <i class=\"icon-plus\"></i>            <span>Add files...</span>            <input id=\"fileupload\" type=\"file\" name=\"files[]\" multiple=\"multiple\">        </span>        <button class=\"btn btn-primary btn-sm\" id=\"start-uploads-button\"><i class=\"icon-start\"></i>Start uploads</button>    </footer></div>',dataType:\"json\",fileItem:{selectors:{name:\".name\",size:\".size\",cancel:\".cancel\",clear:\".clear\",progress:\".progress\",message:\".message\"},template:'<div class=\"file-item row\">   <div class=\"col-md-6\"><span class=\"name\"></span></div>   <div class=\"col-md-3\">    <span class=\"size\"></span>    <div class=\"progress hidden\">        <div class=\"progress-label\"></div>        <div class=\"bar\"></div>    </div>    <span class=\"message hidden\"></span>   </div>   <div class=\"col-md-3\">    <button class=\"btn btn-warning btn-xs cancel\"><i class=\"icon-remove\"></i>Cancel</button>    <button class=\"btn btn-xs clear hidden\">Clear</button>   </div></div>'}},_construct:function(t,e){this.overrided(t,e),this._velm=n(this._elm),this._initEventHandler(),this._initFileHandlers(),this._initUpoadHandler(),this._updateFileList()},_initFileHandlers:function(){var e=this,t=this.options.selectors,n=t.dropzone,i=t.pastezone,t=t.picker;n&&this._velm.$(n).dropzone({dropped:function(t){e._addFiles(t)}}),i&&this._velm.$(i).pastezone({pasted:function(t){e._addFiles(t)}}),t&&this._velm.$(t).picker({multiple:!0,picked:function(t){e._addFiles(t)}})},_initUpoadHandler:function(){var r=this;this._handler=new i({url:this.options.uploadUrl,maxConnections:this.options.maxConnections,onProgress:function(t,e,n,i){r._onProgress(t,e,n,i)},onComplete:function(t,e,n){r._onComplete(t,e,n)},onCancel:function(t,e){r._onCancel(t,e)},onFailure:function(t,e,n){r._onFailure(t,e,n)}})},_initEventHandler:function(){var i=this,r=this.options.selectors,t=this.options.fileItem.selectors;this._listElement;this._velm.$(r.fileList).on(\"click\",t.cancel,function(t){var e=a(this).closest(r.fileItem),n=e.data(\"fileId\");i._handler.cancel(n),e.remove(),i._updateFileList()}),this._velm.$(r.fileList).on(\"click\",t.clear,function(t){var e=a(this).closest(r.fileItem);e.data(\"fileId\");e.remove(),i._updateFileList()}),this._velm.$(r.cancelUploads).click(function(){i._velm.$(r.fileList).find(r.fileItem).forEach(function(t){var t=a(t),e=t.data(\"fileId\");i._handler.cancel(e),t.remove()}),i._updateFileList()}),this._velm.$(r.startUploads).click(function(){i._velm.$(r.fileList).find(r.fileItem).forEach(function(t){var t=a(t),e=t.data(\"fileId\");t.data(\"status\")||i._handler.send(e,i.options.params)})})},_onProgress:function(t,e,n,i){var t=this._getItemByFileId(t),r=parseInt(n/i*100,10),n=this._formatSize(n)+\" of \"+this._formatSize(i);t.data(\"status\",\"running\"),t.find(\".progress\").find(\".bar\").css(\"width\",r+\"%\").parent().find(\".progress-label\").html(n),this._updateFile(t)},_onComplete:function(t,e,n){this._filesInProgress--;t=this._getItemByFileId(t);t.data(\"status\",\"done\"),t.find(\".message\").html('<i class=\"icon-success\"></i> '+(this.doneMsg||\"Uploaded\")),this._updateFile(t)},_onFailure:function(t,e,n){this._filesInProgress--;t=this._getItemByFileId(t);t.data(\"status\",\"error\"),t.find(\".message\").html('<i class=\"icon-error\"></i> '),this._updateFile(t)},_onCancel:function(t,e){this._filesInProgress--;t=this._getItemByFileId(t);t.data(\"status\",\"cancel\"),this._updateFile(t)},_addToList:function(t,e){var e=this._handler.getName(t),n=this._handler.getSize(t),i=a(this.options.fileItem.template);i.data(\"fileId\",t),i.find(this.options.fileItem.selectors.name).html(this._formatFileName(e)),i.find(this.options.fileItem.selectors.size).html(this._formatSize(n)),this._velm.$(this.options.selectors.fileList).append(i),this._updateFileList()},_updateFileList:function(){var t=this.options.selectors,e=(this.options.fileItem.selectors,this._velm.$(t.fileList).find(t.fileItem)),n=this._velm.$(t.cancelUploads+\",\"+t.startUploads),t=this._velm.$(t.nodata);0<e.length?(n.removeClass(\"hidden\"),t.addClass(\"hidden\")):(n.addClass(\"hidden\"),t.removeClass(\"hidden\"))},_updateFile:function(t){var e=this.options.fileItem.selectors,n=t.find(e.size+\",\"+e.cancel),i=t.find(e.progress+\",\"+e.cancel),e=t.find(e.message+\",\"+e.clear),t=t.data(\"status\");\"pending\"==t?(i.add(e).addClass(\"hidden\"),n.removeClass(\"hidden\")):\"running\"==t?(n.add(e).addClass(\"hidden\"),i.removeClass(\"hidden\")):\"done\"!=t&&\"error\"!=t||(n.add(i).addClass(\"hidden\"),e.removeClass(\"hidden\"))},_getItemByFileId:function(t){for(var e,n=this.options.selectors,i=this._velm.$(n.fileList).find(n.fileItem),r=0;r<i.length;r++){var s=i[r];if(a(s).data(\"fileId\")==t){e=s;break}}if(e)return a(e)},_addFiles:function(t){for(var e=0;e<t.length;e++)if(!this._validateFile(t[e]))return;for(e=0;e<t.length;e++)this._addFile(t[e])},_addFile:function(t){t=this._handler.add(t);this._filesInProgress++,this._addToList(t)},_validateFile:function(t){var e,n;return t.value?e=t.value.replace(/.*(\\/|\\\\)/,\"\"):(e=null!=t.fileName?t.fileName:t.name,n=null!=t.fileSize?t.fileSize:t.size),this._isAllowedExtension(e)?0===n?(this._error(\"emptyError\",e),!1):n&&this.options.sizeLimit&&n>this.options.sizeLimit?(this._error(\"sizeError\",e),!1):!(n&&n<this.options.minSizeLimit&&(this._error(\"minSizeError\",e),1)):(this._error(\"typeError\",e),!1)},_error:function(t,e){var n=this.options.messages[t];function i(t,e){n=n.replace(t,e)}i(\"{file}\",this._formatFileName(e)),i(\"{extensions}\",this.options.allowedExtensions.join(\", \")),i(\"{sizeLimit}\",this._formatSize(this.options.sizeLimit)),i(\"{minSizeLimit}\",this._formatSize(this.options.minSizeLimit)),this.options.showMessage(n)},_formatFileName:function(t){return t=33<t.length?t.slice(0,19)+\"...\"+t.slice(-13):t},_isAllowedExtension:function(t){var e=-1!==t.indexOf(\".\")?t.replace(/.*[.]/,\"\").toLowerCase():\"\",n=this.options.allowedExtensions;if(!n.length)return!0;for(var i=0;i<n.length;i++)if(n[i].toLowerCase()==e)return!0;return!1},_formatSize:function(t){for(var e=-1;e++,99<(t/=1024););return Math.max(t,.1).toFixed(1)+[\"KB\",\"MB\",\"GB\",\"TB\",\"PB\",\"EB\"][e]}});return r.register(o),s.MultiUploader=o}),define(\"skylark-domx-plugins-uploads/main\",[\"./uploads\",\"./single-uploader\",\"./multi-uploader\"],function(t){return t}),define(\"skylark-domx-plugins-uploads\",[\"skylark-domx-plugins-uploads/main\"],function(t){return t}),define(\"skylark-devices-keyboard/KeyState\",[\"skylark-langx-klass\",\"./keyboard\"],function(t,e){\"use strict\";var n=t({_construct:function(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1},update:function(t){this.justPressed=!1,this.justReleased=!1,t===n.DOWN?(!1===this.pressed&&(this.justPressed=!0),this.pressed=!0):t===n.UP?(this.pressed&&(this.justReleased=!0),this.pressed=!1):t===n.RESET&&(this.justReleased=!1,this.justPressed=!1)},set:function(t,e,n){this.justPressed=t,this.pressed=e,this.justReleased=n},reset:function(){this.justPressed=!1,this.pressed=!1,this.justReleased=!1}});return n.DOWN=-1,n.UP=1,n.RESET=0,e.KeyState=n}),define(\"skylark-devices-keyboard/Monitor\",[\"skylark-langx-klass\",\"./keyboard\",\"./KeyState\"],function(t,e,n){\"use strict\";t=t({_construct:function(t){this.keyStates=[],this.actions=[];var e=this,n=this.actions;this.handlers={keydown:function(t){n.push(t.keyCode),n.push(Key.DOWN)},keyup:function(t){n.push(t.keyCode),n.push(Key.UP)},focus:function(t){e.reset()}},!0!==t&&this.create()},update:function(){for(var t=0;this.actions.length>t;){var e=this.actions.shift(),n=this.actions.shift();void 0===this.keyStates[e]&&(this.keyStates[e]=new Key),this.keyStates[e].update(n),(this.keyStates[e].justReleased||this.keyStates[e].justPressed)&&(this.actions.push(e),this.actions.push(Key.RESET),t+=2)}},reset:function(){for(var t=0;t<this.keyStates.length;t++)void 0!==this.keyStates[t]&&this.keyStates[t].reset()},keyPressed:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].pressed},keyJustPressed:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].justPressed},keyJustReleased:function(t){return void 0!==this.keyStates[t]&&this.keyStates[t].justReleased},create:function(){for(var t in this.handlers)window.addEventListener(t,this.handlers[t])},dispose:function(){for(var t in this.handlers)window.removeEventListener(t,this.handlers[t])}});return e.Monitor=t}),define(\"skylark-devices-keyboard/codes\",[\"./keyboard\"],function(t){for(var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,\"pause/break\":19,\"caps lock\":20,esc:27,space:32,\"page up\":33,\"page down\":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,\"left command\":91,\"right command\":93,\"numpad *\":106,\"numpad +\":107,\"numpad -\":109,\"numpad .\":110,\"numpad /\":111,\"num lock\":144,\"scroll lock\":145,\"my computer\":182,\"my calculator\":183,\";\":186,\"=\":187,\",\":188,\"-\":189,\".\":190,\"/\":191,\"`\":192,\"[\":219,\"\\\\\":220,\"]\":221,\"'\":222},n=97;n<123;n++)e[String.fromCharCode(n)]=n-32;for(n=48;n<58;n++)e[n-48]=n;for(n=1;n<13;n++)e[\"f\"+n]=n+111;for(n=0;n<10;n++)e[\"numpad \"+n]=n+96;return t.codes=e}),define(\"skylark-devices-keyboard/names\",[\"./keyboard\",\"./codes\"],function(t,e){var n,i={};for(n in e)i[e[n]]=n;return t.names=i}),define(\"skylark-devices-keyboard/aliases\",[\"./keyboard\",\"./codes\",\"./names\"],function(t,e){return t.aliases={windows:91,\"⇧\":16,\"⌥\":18,\"⌃\":17,\"⌘\":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91}}),define(\"skylark-devices-keyboard/isEventKey\",[\"skylark-langx-types\",\"./keyboard\",\"./aliases\",\"./codes\",\"./names\"],function(i,t,r,s,e){return t.isEventKey=function(t,e){if(null!=(t=t.which||t.keyCode||t.charCode))if(i.isString(e)){var n=s[e.toLowerCase()];if(n)return n===t;if(n=r[e.toLowerCase()])return n===t}else if(i.isNumber(e))return e===t;return!1}}),define(\"skylark-devices-keyboard/main\",[\"./keyboard\",\"./KeyState\",\"./keys\",\"./Monitor\",\"./aliases\",\"./codes\",\"./isEventKey\",\"./names\"],function(t){return t}),define(\"skylark-devices-keyboard\",[\"skylark-devices-keyboard/main\"],function(t){return t}),define(\"skylark-devices-orientation/orientation\",[\"skylark-langx-ns\"],function(t){return t.attach(\"devices.orientation\",{isDeviceOrientationSupported:function(){return new Promise(function(e){var n;\"DeviceOrientationEvent\"in window?(n=function(t){t&&null!==t.alpha&&!isNaN(t.alpha)?e(!0):e(!1),window.removeEventListener(\"deviceorientation\",n)},window.addEventListener(\"deviceorientation\",n,!1),setTimeout(n,2e3)):e(!1)})}})}),define(\"skylark-devices-orientation/main\",[\"./orientation\"],function(t){return t}),define(\"skylark-devices-orientation\",[\"skylark-devices-orientation/main\"],function(t){return t}),define(\"skylark-devices-points/mouse\",[\"./points\"],function(t){return t.mouse={mouseWheelEvent:function(){return\"onwheel\"in document.createElement(\"div\")?\"wheel\":void 0!==document.onmousewheel?\"mousewheel\":\"DOMMouseScroll\"},normalizeWheel:function(t){var e=0,n=0,i=0,r=0;return\"detail\"in t&&(n=t.detail),\"wheelDelta\"in t&&(n=-t.wheelDelta/120),\"wheelDeltaY\"in t&&(n=-t.wheelDeltaY/120),\"wheelDeltaX\"in t&&(e=-t.wheelDeltaX/120),\"axis\"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=10*e,r=10*n,\"deltaY\"in t&&(r=t.deltaY),((i=\"deltaX\"in t?t.deltaX:i)||r)&&t.deltaMode&&(1===t.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),{spinX:e=i&&!e?i<1?-1:1:e,spinY:n=r&&!n?r<1?-1:1:n,pixelX:i,pixelY:r}},isMouseEvent:function(t){return null!=t.pointerType?\"mouse\"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE:null!=t.mozInputSource?1==t.mozInputSource:0==t.type.indexOf(\"mouse\")},isLeftMouseButton:function(t){return\"buttons\"in t&&(\"mousedown\"==t.type||\"mousemove\"==t.type)?1==t.buttons:\"which\"in t?1===t.which:1===t.button},isMiddleMouseButton:function(t){return\"which\"in t?2===t.which:4===t.button},isRightMouseButton:function(t){return\"which\"in t?3===t.which:2===t.button}}}),define(\"skylark-devices-points/main\",[\"./points\",\"./mouse\",\"./touch\"],function(t){return t}),define(\"skylark-devices-points\",[\"skylark-devices-points/main\"],function(t){return t}),define(\"skylark-devices-webgl/webgl\",[\"skylark-langx-ns\"],function(t){function e(){var e=document.createElement(\"canvas\"),n=null;return e.getContext&&[\"webgl\",\"experimental-webgl\",\"moz-webgl\",\"webkit-3d\"].some(function(t){try{return(n=e.getContext(t))&&\"function\"==typeof n.getParameter}catch(t){return!1}})?n:null}return t.attach(\"devices.webgl\",{getWebGLCtx:e,isWebGLSupported:function(){return!!window.WebGLRenderingContext&&null!==e()},getMaxTextureWidth:function(){var t=e();return null!==t?t.getParameter(t.MAX_TEXTURE_SIZE):0}})}),define(\"skylark-devices-webgl/main\",[\"./webgl\"],function(t){return t}),define(\"skylark-devices-webgl\",[\"skylark-devices-webgl/main\"],function(t){return t}),define(\"skylark-io-mimes/mimes\",[\"skylark-langx-ns\"],function(t){return t.attach(\"io.mimes\",{})}),define(\"skylark-io-mimes/types\",[\"./mimes\"],function(t){return t.types={\"application/x-executable\":\"exe\",\"application/x-jar\":\"jar\",\"application/x-gzip\":\"gz\",\"application/x-bzip2\":\"tbz\",\"application/x-rar\":\"rar\",\"application/x-mpegURL\":\"m3u8\",\"application/dash+xml\":\"mpd\",\"application/andrew-inset\":\"ez\",\"application/applixware\":\"aw\",\"application/atom+xml\":\"atom\",\"application/atomcat+xml\":\"atomcat\",\"application/atomsvc+xml\":\"atomsvc\",\"application/ccxml+xml\":\"ccxml\",\"application/cdmi-capability\":\"cdmia\",\"application/cdmi-container\":\"cdmic\",\"application/cdmi-domain\":\"cdmid\",\"application/cdmi-object\":\"cdmio\",\"application/cdmi-queue\":\"cdmiq\",\"application/cu-seeme\":\"cu\",\"application/davmount+xml\":\"davmount\",\"application/docbook+xml\":\"dbk\",\"application/dssc+der\":\"dssc\",\"application/dssc+xml\":\"xdssc\",\"application/ecmascript\":\"ecma\",\"application/emma+xml\":\"emma\",\"application/epub+zip\":\"epub\",\"application/exi\":\"exi\",\"application/font-tdpfr\":\"pfr\",\"application/gml+xml\":\"gml\",\"application/gpx+xml\":\"gpx\",\"application/gxf\":\"gxf\",\"application/hyperstudio\":\"stk\",\"application/inkml+xml\":\"ink\",\"application/ipfix\":\"ipfix\",\"application/java-serialized-object\":\"ser\",\"application/java-vm\":\"class\",\"application/json\":\"json\",\"application/jsonml+json\":\"jsonml\",\"application/lost+xml\":\"lostxml\",\"application/mac-binhex40\":\"hqx\",\"application/mac-compactpro\":\"cpt\",\"application/mads+xml\":\"mads\",\"application/marc\":\"mrc\",\"application/marcxml+xml\":\"mrcx\",\"application/mathematica\":\"ma\",\"application/mathml+xml\":\"mathml\",\"application/mbox\":\"mbox\",\"application/mediaservercontrol+xml\":\"mscml\",\"application/metalink+xml\":\"metalink\",\"application/metalink4+xml\":\"meta4\",\"application/mets+xml\":\"mets\",\"application/mods+xml\":\"mods\",\"application/mp21\":\"m21\",\"application/mp4\":\"mp4s\",\"application/msword\":\"doc\",\"application/mxf\":\"mxf\",\"application/octet-stream\":\"bin\",\"application/oda\":\"oda\",\"application/oebps-package+xml\":\"opf\",\"application/ogg\":\"ogx\",\"application/omdoc+xml\":\"omdoc\",\"application/onenote\":\"onetoc\",\"application/oxps\":\"oxps\",\"application/patch-ops-error+xml\":\"xer\",\"application/pdf\":\"pdf\",\"application/pgp-encrypted\":\"pgp\",\"application/pgp-signature\":\"asc\",\"application/pics-rules\":\"prf\",\"application/pkcs10\":\"p10\",\"application/pkcs7-mime\":\"p7m\",\"application/pkcs7-signature\":\"p7s\",\"application/pkcs8\":\"p8\",\"application/pkix-attr-cert\":\"ac\",\"application/pkix-cert\":\"cer\",\"application/pkix-crl\":\"crl\",\"application/pkix-pkipath\":\"pkipath\",\"application/pkixcmp\":\"pki\",\"application/pls+xml\":\"pls\",\"application/postscript\":\"ai\",\"application/prs.cww\":\"cww\",\"application/pskc+xml\":\"pskcxml\",\"application/rdf+xml\":\"rdf\",\"application/reginfo+xml\":\"rif\",\"application/relax-ng-compact-syntax\":\"rnc\",\"application/resource-lists+xml\":\"rl\",\"application/resource-lists-diff+xml\":\"rld\",\"application/rls-services+xml\":\"rs\",\"application/rpki-ghostbusters\":\"gbr\",\"application/rpki-manifest\":\"mft\",\"application/rpki-roa\":\"roa\",\"application/rsd+xml\":\"rsd\",\"application/rss+xml\":\"rss\",\"application/rtf\":\"rtf\",\"application/sbml+xml\":\"sbml\",\"application/scvp-cv-request\":\"scq\",\"application/scvp-cv-response\":\"scs\",\"application/scvp-vp-request\":\"spq\",\"application/scvp-vp-response\":\"spp\",\"application/sdp\":\"sdp\",\"application/set-payment-initiation\":\"setpay\",\"application/set-registration-initiation\":\"setreg\",\"application/shf+xml\":\"shf\",\"application/smil+xml\":\"smi\",\"application/sparql-query\":\"rq\",\"application/sparql-results+xml\":\"srx\",\"application/srgs\":\"gram\",\"application/srgs+xml\":\"grxml\",\"application/sru+xml\":\"sru\",\"application/ssdl+xml\":\"ssdl\",\"application/ssml+xml\":\"ssml\",\"application/tei+xml\":\"tei\",\"application/thraud+xml\":\"tfi\",\"application/timestamped-data\":\"tsd\",\"application/vnd.3gpp.pic-bw-large\":\"plb\",\"application/vnd.3gpp.pic-bw-small\":\"psb\",\"application/vnd.3gpp.pic-bw-var\":\"pvb\",\"application/vnd.3gpp2.tcap\":\"tcap\",\"application/vnd.3m.post-it-notes\":\"pwn\",\"application/vnd.accpac.simply.aso\":\"aso\",\"application/vnd.accpac.simply.imp\":\"imp\",\"application/vnd.acucobol\":\"acu\",\"application/vnd.acucorp\":\"atc\",\"application/vnd.adobe.air-application-installer-package+zip\":\"air\",\"application/vnd.adobe.formscentral.fcdt\":\"fcdt\",\"application/vnd.adobe.fxp\":\"fxp\",\"application/vnd.adobe.xdp+xml\":\"xdp\",\"application/vnd.adobe.xfdf\":\"xfdf\",\"application/vnd.ahead.space\":\"ahead\",\"application/vnd.airzip.filesecure.azf\":\"azf\",\"application/vnd.airzip.filesecure.azs\":\"azs\",\"application/vnd.amazon.ebook\":\"azw\",\"application/vnd.americandynamics.acc\":\"acc\",\"application/vnd.amiga.ami\":\"ami\",\"application/vnd.android.package-archive\":\"apk\",\"application/vnd.anser-web-certificate-issue-initiation\":\"cii\",\"application/vnd.anser-web-funds-transfer-initiation\":\"fti\",\"application/vnd.antix.game-component\":\"atx\",\"application/vnd.apple.installer+xml\":\"mpkg\",\"application/vnd.aristanetworks.swi\":\"swi\",\"application/vnd.astraea-software.iota\":\"iota\",\"application/vnd.audiograph\":\"aep\",\"application/vnd.blueice.multipass\":\"mpm\",\"application/vnd.bmi\":\"bmi\",\"application/vnd.businessobjects\":\"rep\",\"application/vnd.chemdraw+xml\":\"cdxml\",\"application/vnd.chipnuts.karaoke-mmd\":\"mmd\",\"application/vnd.cinderella\":\"cdy\",\"application/vnd.claymore\":\"cla\",\"application/vnd.cloanto.rp9\":\"rp9\",\"application/vnd.clonk.c4group\":\"c4g\",\"application/vnd.cluetrust.cartomobile-config\":\"c11amc\",\"application/vnd.cluetrust.cartomobile-config-pkg\":\"c11amz\",\"application/vnd.commonspace\":\"csp\",\"application/vnd.contact.cmsg\":\"cdbcmsg\",\"application/vnd.cosmocaller\":\"cmc\",\"application/vnd.crick.clicker\":\"clkx\",\"application/vnd.crick.clicker.keyboard\":\"clkk\",\"application/vnd.crick.clicker.palette\":\"clkp\",\"application/vnd.crick.clicker.template\":\"clkt\",\"application/vnd.crick.clicker.wordbank\":\"clkw\",\"application/vnd.criticaltools.wbs+xml\":\"wbs\",\"application/vnd.ctc-posml\":\"pml\",\"application/vnd.cups-ppd\":\"ppd\",\"application/vnd.curl.car\":\"car\",\"application/vnd.curl.pcurl\":\"pcurl\",\"application/vnd.dart\":\"dart\",\"application/vnd.data-vision.rdz\":\"rdz\",\"application/vnd.dece.data\":\"uvf\",\"application/vnd.dece.ttml+xml\":\"uvt\",\"application/vnd.dece.unspecified\":\"uvx\",\"application/vnd.dece.zip\":\"uvz\",\"application/vnd.denovo.fcselayout-link\":\"fe_launch\",\"application/vnd.dna\":\"dna\",\"application/vnd.dolby.mlp\":\"mlp\",\"application/vnd.dpgraph\":\"dpg\",\"application/vnd.dreamfactory\":\"dfac\",\"application/vnd.ds-keypoint\":\"kpxx\",\"application/vnd.dvb.ait\":\"ait\",\"application/vnd.dvb.service\":\"svc\",\"application/vnd.dynageo\":\"geo\",\"application/vnd.ecowin.chart\":\"mag\",\"application/vnd.enliven\":\"nml\",\"application/vnd.epson.esf\":\"esf\",\"application/vnd.epson.msf\":\"msf\",\"application/vnd.epson.quickanime\":\"qam\",\"application/vnd.epson.salt\":\"slt\",\"application/vnd.epson.ssf\":\"ssf\",\"application/vnd.eszigno3+xml\":\"es3\",\"application/vnd.ezpix-album\":\"ez2\",\"application/vnd.ezpix-package\":\"ez3\",\"application/vnd.fdf\":\"fdf\",\"application/vnd.fdsn.mseed\":\"mseed\",\"application/vnd.fdsn.seed\":\"seed\",\"application/vnd.flographit\":\"gph\",\"application/vnd.fluxtime.clip\":\"ftc\",\"application/vnd.framemaker\":\"fm\",\"application/vnd.frogans.fnc\":\"fnc\",\"application/vnd.frogans.ltf\":\"ltf\",\"application/vnd.fsc.weblaunch\":\"fsc\",\"application/vnd.fujitsu.oasys\":\"oas\",\"application/vnd.fujitsu.oasys2\":\"oa2\",\"application/vnd.fujitsu.oasys3\":\"oa3\",\"application/vnd.fujitsu.oasysgp\":\"fg5\",\"application/vnd.fujitsu.oasysprs\":\"bh2\",\"application/vnd.fujixerox.ddd\":\"ddd\",\"application/vnd.fujixerox.docuworks\":\"xdw\",\"application/vnd.fujixerox.docuworks.binder\":\"xbd\",\"application/vnd.fuzzysheet\":\"fzs\",\"application/vnd.genomatix.tuxedo\":\"txd\",\"application/vnd.geogebra.file\":\"ggb\",\"application/vnd.geogebra.tool\":\"ggt\",\"application/vnd.geometry-explorer\":\"gex\",\"application/vnd.geonext\":\"gxt\",\"application/vnd.geoplan\":\"g2w\",\"application/vnd.geospace\":\"g3w\",\"application/vnd.gmx\":\"gmx\",\"application/vnd.google-earth.kml+xml\":\"kml\",\"application/vnd.google-earth.kmz\":\"kmz\",\"application/vnd.grafeq\":\"gqf\",\"application/vnd.groove-account\":\"gac\",\"application/vnd.groove-help\":\"ghf\",\"application/vnd.groove-identity-message\":\"gim\",\"application/vnd.groove-injector\":\"grv\",\"application/vnd.groove-tool-message\":\"gtm\",\"application/vnd.groove-tool-template\":\"tpl\",\"application/vnd.groove-vcard\":\"vcg\",\"application/vnd.hal+xml\":\"hal\",\"application/vnd.handheld-entertainment+xml\":\"zmm\",\"application/vnd.hbci\":\"hbci\",\"application/vnd.hhe.lesson-player\":\"les\",\"application/vnd.hp-hpgl\":\"hpgl\",\"application/vnd.hp-hpid\":\"hpid\",\"application/vnd.hp-hps\":\"hps\",\"application/vnd.hp-jlyt\":\"jlt\",\"application/vnd.hp-pcl\":\"pcl\",\"application/vnd.hp-pclxl\":\"pclxl\",\"application/vnd.hydrostatix.sof-data\":\"sfd-hdstx\",\"application/vnd.ibm.minipay\":\"mpy\",\"application/vnd.ibm.modcap\":\"afp\",\"application/vnd.ibm.rights-management\":\"irm\",\"application/vnd.ibm.secure-container\":\"sc\",\"application/vnd.iccprofile\":\"icc\",\"application/vnd.igloader\":\"igl\",\"application/vnd.immervision-ivp\":\"ivp\",\"application/vnd.immervision-ivu\":\"ivu\",\"application/vnd.insors.igm\":\"igm\",\"application/vnd.intercon.formnet\":\"xpw\",\"application/vnd.intergeo\":\"i2g\",\"application/vnd.intu.qbo\":\"qbo\",\"application/vnd.intu.qfx\":\"qfx\",\"application/vnd.ipunplugged.rcprofile\":\"rcprofile\",\"application/vnd.irepository.package+xml\":\"irp\",\"application/vnd.is-xpr\":\"xpr\",\"application/vnd.isac.fcs\":\"fcs\",\"application/vnd.jam\":\"jam\",\"application/vnd.jcp.javame.midlet-rms\":\"rms\",\"application/vnd.jisp\":\"jisp\",\"application/vnd.joost.joda-archive\":\"joda\",\"application/vnd.kahootz\":\"ktz\",\"application/vnd.kde.karbon\":\"karbon\",\"application/vnd.kde.kchart\":\"chrt\",\"application/vnd.kde.kformula\":\"kfo\",\"application/vnd.kde.kivio\":\"flw\",\"application/vnd.kde.kontour\":\"kon\",\"application/vnd.kde.kpresenter\":\"kpr\",\"application/vnd.kde.kspread\":\"ksp\",\"application/vnd.kde.kword\":\"kwd\",\"application/vnd.kenameaapp\":\"htke\",\"application/vnd.kidspiration\":\"kia\",\"application/vnd.kinar\":\"kne\",\"application/vnd.koan\":\"skp\",\"application/vnd.kodak-descriptor\":\"sse\",\"application/vnd.las.las+xml\":\"lasxml\",\"application/vnd.llamagraphics.life-balance.desktop\":\"lbd\",\"application/vnd.llamagraphics.life-balance.exchange+xml\":\"lbe\",\"application/vnd.lotus-1-2-3\":123,\"application/vnd.lotus-approach\":\"apr\",\"application/vnd.lotus-freelance\":\"pre\",\"application/vnd.lotus-notes\":\"nsf\",\"application/vnd.lotus-organizer\":\"org\",\"application/vnd.lotus-screencam\":\"scm\",\"application/vnd.lotus-wordpro\":\"lwp\",\"application/vnd.macports.portpkg\":\"portpkg\",\"application/vnd.mcd\":\"mcd\",\"application/vnd.medcalcdata\":\"mc1\",\"application/vnd.mediastation.cdkey\":\"cdkey\",\"application/vnd.mfer\":\"mwf\",\"application/vnd.mfmp\":\"mfm\",\"application/vnd.micrografx.flo\":\"flo\",\"application/vnd.micrografx.igx\":\"igx\",\"application/vnd.mif\":\"mif\",\"application/vnd.mobius.daf\":\"daf\",\"application/vnd.mobius.dis\":\"dis\",\"application/vnd.mobius.mbk\":\"mbk\",\"application/vnd.mobius.mqy\":\"mqy\",\"application/vnd.mobius.msl\":\"msl\",\"application/vnd.mobius.plc\":\"plc\",\"application/vnd.mobius.txf\":\"txf\",\"application/vnd.mophun.application\":\"mpn\",\"application/vnd.mophun.certificate\":\"mpc\",\"application/vnd.mozilla.xul+xml\":\"xul\",\"application/vnd.ms-artgalry\":\"cil\",\"application/vnd.ms-cab-compressed\":\"cab\",\"application/vnd.ms-excel\":\"xls\",\"application/vnd.ms-excel.addin.macroenabled.12\":\"xlam\",\"application/vnd.ms-excel.sheet.binary.macroenabled.12\":\"xlsb\",\"application/vnd.ms-excel.sheet.macroenabled.12\":\"xlsm\",\"application/vnd.ms-excel.template.macroenabled.12\":\"xltm\",\"application/vnd.ms-fontobject\":\"eot\",\"application/vnd.ms-htmlhelp\":\"chm\",\"application/vnd.ms-ims\":\"ims\",\"application/vnd.ms-lrm\":\"lrm\",\"application/vnd.ms-officetheme\":\"thmx\",\"application/vnd.ms-pki.seccat\":\"cat\",\"application/vnd.ms-pki.stl\":\"stl\",\"application/vnd.ms-powerpoint\":\"ppt\",\"application/vnd.ms-powerpoint.addin.macroenabled.12\":\"ppam\",\"application/vnd.ms-powerpoint.presentation.macroenabled.12\":\"pptm\",\"application/vnd.ms-powerpoint.slide.macroenabled.12\":\"sldm\",\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\":\"ppsm\",\"application/vnd.ms-powerpoint.template.macroenabled.12\":\"potm\",\"application/vnd.ms-project\":\"mpp\",\"application/vnd.ms-word.document.macroenabled.12\":\"docm\",\"application/vnd.ms-word.template.macroenabled.12\":\"dotm\",\"application/vnd.ms-works\":\"wps\",\"application/vnd.ms-wpl\":\"wpl\",\"application/vnd.ms-xpsdocument\":\"xps\",\"application/vnd.mseq\":\"mseq\",\"application/vnd.musician\":\"mus\",\"application/vnd.muvee.style\":\"msty\",\"application/vnd.mynfc\":\"taglet\",\"application/vnd.neurolanguage.nlu\":\"nlu\",\"application/vnd.nitf\":\"ntf\",\"application/vnd.noblenet-directory\":\"nnd\",\"application/vnd.noblenet-sealer\":\"nns\",\"application/vnd.noblenet-web\":\"nnw\",\"application/vnd.nokia.n-gage.data\":\"ngdat\",\"application/vnd.nokia.n-gage.symbian.install\":\"n-gage\",\"application/vnd.nokia.radio-preset\":\"rpst\",\"application/vnd.nokia.radio-presets\":\"rpss\",\"application/vnd.novadigm.edm\":\"edm\",\"application/vnd.novadigm.edx\":\"edx\",\"application/vnd.novadigm.ext\":\"ext\",\"application/vnd.oasis.opendocument.chart\":\"odc\",\"application/vnd.oasis.opendocument.chart-template\":\"otc\",\"application/vnd.oasis.opendocument.database\":\"odb\",\"application/vnd.oasis.opendocument.formula\":\"odf\",\"application/vnd.oasis.opendocument.formula-template\":\"odft\",\"application/vnd.oasis.opendocument.graphics\":\"odg\",\"application/vnd.oasis.opendocument.graphics-template\":\"otg\",\"application/vnd.oasis.opendocument.image\":\"odi\",\"application/vnd.oasis.opendocument.image-template\":\"oti\",\"application/vnd.oasis.opendocument.presentation\":\"odp\",\"application/vnd.oasis.opendocument.presentation-template\":\"otp\",\"application/vnd.oasis.opendocument.spreadsheet\":\"ods\",\"application/vnd.oasis.opendocument.spreadsheet-template\":\"ots\",\"application/vnd.oasis.opendocument.text\":\"odt\",\"application/vnd.oasis.opendocument.text-master\":\"odm\",\"application/vnd.oasis.opendocument.text-template\":\"ott\",\"application/vnd.oasis.opendocument.text-web\":\"oth\",\"application/vnd.olpc-sugar\":\"xo\",\"application/vnd.oma.dd2+xml\":\"dd2\",\"application/vnd.openofficeorg.extension\":\"oxt\",\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\"pptx\",\"application/vnd.openxmlformats-officedocument.presentationml.slide\":\"sldx\",\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":\"ppsx\",\"application/vnd.openxmlformats-officedocument.presentationml.template\":\"potx\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\"xlsx\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":\"xltx\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\"docx\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":\"dotx\",\"application/vnd.osgeo.mapguide.package\":\"mgp\",\"application/vnd.osgi.dp\":\"dp\",\"application/vnd.osgi.subsystem\":\"esa\",\"application/vnd.palm\":\"pdb\",\"application/vnd.pawaafile\":\"paw\",\"application/vnd.pg.format\":\"str\",\"application/vnd.pg.osasli\":\"ei6\",\"application/vnd.picsel\":\"efif\",\"application/vnd.pmi.widget\":\"wg\",\"application/vnd.pocketlearn\":\"plf\",\"application/vnd.powerbuilder6\":\"pbd\",\"application/vnd.previewsystems.box\":\"box\",\"application/vnd.proteus.magazine\":\"mgz\",\"application/vnd.publishare-delta-tree\":\"qps\",\"application/vnd.pvi.ptid1\":\"ptid\",\"application/vnd.quark.quarkxpress\":\"qxd\",\"application/vnd.realvnc.bed\":\"bed\",\"application/vnd.recordare.musicxml\":\"mxl\",\"application/vnd.recordare.musicxml+xml\":\"musicxml\",\"application/vnd.rig.cryptonote\":\"cryptonote\",\"application/vnd.rim.cod\":\"cod\",\"application/vnd.rn-realmedia\":\"rm\",\"application/vnd.rn-realmedia-vbr\":\"rmvb\",\"application/vnd.route66.link66+xml\":\"link66\",\"application/vnd.sailingtracker.track\":\"st\",\"application/vnd.seemail\":\"see\",\"application/vnd.sema\":\"sema\",\"application/vnd.semd\":\"semd\",\"application/vnd.semf\":\"semf\",\"application/vnd.shana.informed.formdata\":\"ifm\",\"application/vnd.shana.informed.formtemplate\":\"itp\",\"application/vnd.shana.informed.interchange\":\"iif\",\"application/vnd.shana.informed.package\":\"ipk\",\"application/vnd.simtech-mindmapper\":\"twd\",\"application/vnd.smaf\":\"mmf\",\"application/vnd.smart.teacher\":\"teacher\",\"application/vnd.solent.sdkm+xml\":\"sdkm\",\"application/vnd.spotfire.dxp\":\"dxp\",\"application/vnd.spotfire.sfs\":\"sfs\",\"application/vnd.stardivision.calc\":\"sdc\",\"application/vnd.stardivision.draw\":\"sda\",\"application/vnd.stardivision.impress\":\"sdd\",\"application/vnd.stardivision.math\":\"smf\",\"application/vnd.stardivision.writer\":\"sdw\",\"application/vnd.stardivision.writer-global\":\"sgl\",\"application/vnd.stepmania.package\":\"smzip\",\"application/vnd.stepmania.stepchart\":\"sm\",\"application/vnd.sun.xml.calc\":\"sxc\",\"application/vnd.sun.xml.calc.template\":\"stc\",\"application/vnd.sun.xml.draw\":\"sxd\",\"application/vnd.sun.xml.draw.template\":\"std\",\"application/vnd.sun.xml.impress\":\"sxi\",\"application/vnd.sun.xml.impress.template\":\"sti\",\"application/vnd.sun.xml.math\":\"sxm\",\"application/vnd.sun.xml.writer\":\"sxw\",\"application/vnd.sun.xml.writer.global\":\"sxg\",\"application/vnd.sun.xml.writer.template\":\"stw\",\"application/vnd.sus-calendar\":\"sus\",\"application/vnd.svd\":\"svd\",\"application/vnd.symbian.install\":\"sis\",\"application/vnd.syncml+xml\":\"xsm\",\"application/vnd.syncml.dm+wbxml\":\"bdm\",\"application/vnd.syncml.dm+xml\":\"xdm\",\"application/vnd.tao.intent-module-archive\":\"tao\",\"application/vnd.tcpdump.pcap\":\"pcap\",\"application/vnd.tmobile-livetv\":\"tmo\",\"application/vnd.trid.tpt\":\"tpt\",\"application/vnd.triscape.mxs\":\"mxs\",\"application/vnd.trueapp\":\"tra\",\"application/vnd.ufdl\":\"ufd\",\"application/vnd.uiq.theme\":\"utz\",\"application/vnd.umajin\":\"umj\",\"application/vnd.unity\":\"unityweb\",\"application/vnd.uoml+xml\":\"uoml\",\"application/vnd.vcx\":\"vcx\",\"application/vnd.visio\":\"vsd\",\"application/vnd.visionary\":\"vis\",\"application/vnd.vsf\":\"vsf\",\"application/vnd.wap.wbxml\":\"wbxml\",\"application/vnd.wap.wmlc\":\"wmlc\",\"application/vnd.wap.wmlscriptc\":\"wmlsc\",\"application/vnd.webturbo\":\"wtb\",\"application/vnd.wolfram.player\":\"nbp\",\"application/vnd.wordperfect\":\"wpd\",\"application/vnd.wqd\":\"wqd\",\"application/vnd.wt.stf\":\"stf\",\"application/vnd.xara\":\"xar\",\"application/vnd.xfdl\":\"xfdl\",\"application/vnd.yamaha.hv-dic\":\"hvd\",\"application/vnd.yamaha.hv-script\":\"hvs\",\"application/vnd.yamaha.hv-voice\":\"hvp\",\"application/vnd.yamaha.openscoreformat\":\"osf\",\"application/vnd.yamaha.openscoreformat.osfpvg+xml\":\"osfpvg\",\"application/vnd.yamaha.smaf-audio\":\"saf\",\"application/vnd.yamaha.smaf-phrase\":\"spf\",\"application/vnd.yellowriver-custom-menu\":\"cmp\",\"application/vnd.zul\":\"zir\",\"application/vnd.zzazz.deck+xml\":\"zaz\",\"application/voicexml+xml\":\"vxml\",\"application/widget\":\"wgt\",\"application/winhlp\":\"hlp\",\"application/wsdl+xml\":\"wsdl\",\"application/wspolicy+xml\":\"wspolicy\",\"application/x-7z-compressed\":\"7z\",\"application/x-abiword\":\"abw\",\"application/x-ace-compressed\":\"ace\",\"application/x-apple-diskimage\":\"dmg\",\"application/x-authorware-bin\":\"aab\",\"application/x-authorware-map\":\"aam\",\"application/x-authorware-seg\":\"aas\",\"application/x-bcpio\":\"bcpio\",\"application/x-bittorrent\":\"torrent\",\"application/x-blorb\":\"blb\",\"application/x-bzip\":\"bz\",\"application/x-cbr\":\"cbr\",\"application/x-cdlink\":\"vcd\",\"application/x-cfs-compressed\":\"cfs\",\"application/x-chat\":\"chat\",\"application/x-chess-pgn\":\"pgn\",\"application/x-conference\":\"nsc\",\"application/x-cpio\":\"cpio\",\"application/x-csh\":\"csh\",\"application/x-debian-package\":\"deb\",\"application/x-dgc-compressed\":\"dgc\",\"application/x-director\":\"dir\",\"application/x-doom\":\"wad\",\"application/x-dtbncx+xml\":\"ncx\",\"application/x-dtbook+xml\":\"dtb\",\"application/x-dtbresource+xml\":\"res\",\"application/x-dvi\":\"dvi\",\"application/x-envoy\":\"evy\",\"application/x-eva\":\"eva\",\"application/x-font-bdf\":\"bdf\",\"application/x-font-ghostscript\":\"gsf\",\"application/x-font-linux-psf\":\"psf\",\"application/x-font-pcf\":\"pcf\",\"application/x-font-snf\":\"snf\",\"application/x-font-type1\":\"pfa\",\"application/x-freearc\":\"arc\",\"application/x-futuresplash\":\"spl\",\"application/x-gca-compressed\":\"gca\",\"application/x-glulx\":\"ulx\",\"application/x-gnumeric\":\"gnumeric\",\"application/x-gramps-xml\":\"gramps\",\"application/x-gtar\":\"gtar\",\"application/x-hdf\":\"hdf\",\"application/x-install-instructions\":\"install\",\"application/x-iso9660-image\":\"iso\",\"application/x-java-jnlp-file\":\"jnlp\",\"application/x-latex\":\"latex\",\"application/x-lzh-compressed\":\"lzh\",\"application/x-mie\":\"mie\",\"application/x-mobipocket-ebook\":\"prc\",\"application/x-ms-application\":\"application\",\"application/x-ms-shortcut\":\"lnk\",\"application/x-ms-wmd\":\"wmd\",\"application/x-ms-wmz\":\"wmz\",\"application/x-ms-xbap\":\"xbap\",\"application/x-msaccess\":\"mdb\",\"application/x-msbinder\":\"obd\",\"application/x-mscardfile\":\"crd\",\"application/x-msclip\":\"clp\",\"application/x-msdownload\":\"dll\",\"application/x-msmediaview\":\"mvb\",\"application/x-msmetafile\":\"wmf\",\"application/x-msmoney\":\"mny\",\"application/x-mspublisher\":\"pub\",\"application/x-msschedule\":\"scd\",\"application/x-msterminal\":\"trm\",\"application/x-mswrite\":\"wri\",\"application/x-netcdf\":\"nc\",\"application/x-nzb\":\"nzb\",\"application/x-pkcs12\":\"p12\",\"application/x-pkcs7-certificates\":\"p7b\",\"application/x-pkcs7-certreqresp\":\"p7r\",\"application/x-research-info-systems\":\"ris\",\"application/x-shar\":\"shar\",\"application/x-shockwave-flash\":\"swf\",\"application/x-silverlight-app\":\"xap\",\"application/x-sql\":\"sql\",\"application/x-stuffit\":\"sit\",\"application/x-stuffitx\":\"sitx\",\"application/x-subrip\":\"srt\",\"application/x-sv4cpio\":\"sv4cpio\",\"application/x-sv4crc\":\"sv4crc\",\"application/x-t3vm-image\":\"t3\",\"application/x-tads\":\"gam\",\"application/x-tar\":\"tar\",\"application/x-tcl\":\"tcl\",\"application/x-tex\":\"tex\",\"application/x-tex-tfm\":\"tfm\",\"application/x-texinfo\":\"texinfo\",\"application/x-tgif\":\"obj\",\"application/x-ustar\":\"ustar\",\"application/x-wais-source\":\"src\",\"application/x-x509-ca-cert\":\"der\",\"application/x-xfig\":\"fig\",\"application/x-xliff+xml\":\"xlf\",\"application/x-xpinstall\":\"xpi\",\"application/x-xz\":\"xz\",\"application/x-zmachine\":\"z1\",\"application/xaml+xml\":\"xaml\",\"application/xcap-diff+xml\":\"xdf\",\"application/xenc+xml\":\"xenc\",\"application/xhtml+xml\":\"xhtml\",\"application/xml\":\"xsl\",\"application/xml-dtd\":\"dtd\",\"application/xop+xml\":\"xop\",\"application/xproc+xml\":\"xpl\",\"application/xslt+xml\":\"xslt\",\"application/xspf+xml\":\"xspf\",\"application/xv+xml\":\"mxml\",\"application/yang\":\"yang\",\"application/yin+xml\":\"yin\",\"application/zip\":\"zip\",\"application/rtfd\":\"rtfd\",\"application/x-cglap\":\"cglap\",\"audio/wav\":\"wav\",\"audio/adpcm\":\"adp\",\"audio/basic\":\"au\",\"audio/midi\":\"mid\",\"audio/mp4\":\"m4a\",\"audio/mpeg\":\"mpga\",\"audio/ogg\":\"oga\",\"audio/s3m\":\"s3m\",\"audio/silk\":\"sil\",\"audio/vnd.dece.audio\":\"uva\",\"audio/vnd.digital-winds\":\"eol\",\"audio/vnd.dra\":\"dra\",\"audio/vnd.dts\":\"dts\",\"audio/vnd.dts.hd\":\"dtshd\",\"audio/vnd.lucent.voice\":\"lvp\",\"audio/vnd.ms-playready.media.pya\":\"pya\",\"audio/vnd.nuera.ecelp4800\":\"ecelp4800\",\"audio/vnd.nuera.ecelp7470\":\"ecelp7470\",\"audio/vnd.nuera.ecelp9600\":\"ecelp9600\",\"audio/vnd.rip\":\"rip\",\"audio/webm\":\"weba\",\"audio/x-aac\":\"aac\",\"audio/x-aiff\":\"aif\",\"audio/x-caf\":\"caf\",\"audio/x-flac\":\"flac\",\"audio/x-matroska\":\"mka\",\"audio/x-mpegurl\":\"m3u\",\"audio/x-ms-wax\":\"wax\",\"audio/x-ms-wma\":\"wma\",\"audio/x-pn-realaudio\":\"ram\",\"audio/x-pn-realaudio-plugin\":\"rmp\",\"audio/xm\":\"xm\",\"chemical/x-cdx\":\"cdx\",\"chemical/x-cif\":\"cif\",\"chemical/x-cmdf\":\"cmdf\",\"chemical/x-cml\":\"cml\",\"chemical/x-csml\":\"csml\",\"chemical/x-xyz\":\"xyz\",\"font/collection\":\"ttc\",\"font/otf\":\"otf\",\"font/ttf\":\"ttf\",\"font/woff\":\"woff\",\"font/woff2\":\"woff2\",\"image/x-ms-bmp\":\"bmp\",\"image/x-targa\":\"tga\",\"image/xbm\":\"xbm\",\"image/pxm\":\"pxm\",\"image/cgm\":\"cgm\",\"image/g3fax\":\"g3\",\"image/gif\":\"gif\",\"image/ief\":\"ief\",\"image/jpeg\":\"jpeg\",\"image/jpg\":\"jpg\",\"image/ktx\":\"ktx\",\"image/png\":\"png\",\"image/prs.btif\":\"btif\",\"image/sgi\":\"sgi\",\"image/svg+xml\":\"svg\",\"image/tiff\":\"tiff\",\"image/vnd.adobe.photoshop\":\"psd\",\"image/vnd.dece.graphic\":\"uvi\",\"image/vnd.djvu\":\"djvu\",\"image/vnd.dvb.subtitle\":\"sub\",\"image/vnd.dwg\":\"dwg\",\"image/vnd.dxf\":\"dxf\",\"image/vnd.fastbidsheet\":\"fbs\",\"image/vnd.fpx\":\"fpx\",\"image/vnd.fst\":\"fst\",\"image/vnd.fujixerox.edmics-mmr\":\"mmr\",\"image/vnd.fujixerox.edmics-rlc\":\"rlc\",\"image/vnd.ms-modi\":\"mdi\",\"image/vnd.ms-photo\":\"wdp\",\"image/vnd.net-fpx\":\"npx\",\"image/vnd.wap.wbmp\":\"wbmp\",\"image/vnd.xiff\":\"xif\",\"image/webp\":\"webp\",\"image/x-3ds\":\"3ds\",\"image/x-cmu-raster\":\"ras\",\"image/x-cmx\":\"cmx\",\"image/x-freehand\":\"fh\",\"image/x-icon\":\"ico\",\"image/x-mrsid-image\":\"sid\",\"image/x-pcx\":\"pcx\",\"image/x-pict\":\"pic\",\"image/x-portable-anymap\":\"pnm\",\"image/x-portable-bitmap\":\"pbm\",\"image/x-portable-graymap\":\"pgm\",\"image/x-portable-pixmap\":\"ppm\",\"image/x-rgb\":\"rgb\",\"image/x-xpixmap\":\"xpm\",\"image/x-xwindowdump\":\"xwd\",\"image/panorama+jpeg\":\"jpegp\",\"image/panorama+jpg\":\"jpgp\",\"image/panorama+png\":\"pngp\",\"message/rfc822\":\"eml\",\"model/iges\":\"igs\",\"model/mesh\":\"msh\",\"model/vnd.collada+xml\":\"dae\",\"model/vnd.dwf\":\"dwf\",\"model/vnd.gdl\":\"gdl\",\"model/vnd.gtw\":\"gtw\",\"model/vnd.vtu\":\"vtu\",\"model/vrml\":\"wrl\",\"model/x3d+binary\":\"x3db\",\"model/x3d+vrml\":\"x3dv\",\"model/x3d+xml\":\"x3d\",\"model/gltf+json\":\"gltf\",\"model/gltf+binary\":\"glb\",\"model/u-obj+text\":\"obj\",\"text/x-php\":\"php\",\"text/javascript\":\"js\",\"text/x-python\":\"py\",\"text/x-ruby\":\"rb\",\"text/x-shellscript\":\"sh\",\"text/x-perl\":\"pl\",\"text/xml\":\"xml\",\"text/x-csrc\":\"c\",\"text/x-chdr\":\"h\",\"text/x-c++src\":\"cpp\",\"text/x-c++hdr\":\"hh\",\"text/x-markdown\":\"md\",\"text/x-yaml\":\"yml\",\"text/cache-manifest\":\"appcache\",\"text/calendar\":\"ics\",\"text/css\":\"css\",\"text/csv\":\"csv\",\"text/html\":\"html\",\"text/n3\":\"n3\",\"text/plain\":\"txt\",\"text/prs.lines.tag\":\"dsc\",\"text/richtext\":\"rtx\",\"text/sgml\":\"sgml\",\"text/tab-separated-values\":\"tsv\",\"text/troff\":\"t\",\"text/turtle\":\"ttl\",\"text/uri-list\":\"uri\",\"text/vcard\":\"vcard\",\"text/vnd.curl\":\"curl\",\"text/vnd.curl.dcurl\":\"dcurl\",\"text/vnd.curl.mcurl\":\"mcurl\",\"text/vnd.curl.scurl\":\"scurl\",\"text/vnd.fly\":\"fly\",\"text/vnd.fmi.flexstor\":\"flx\",\"text/vnd.graphviz\":\"gv\",\"text/vnd.in3d.3dml\":\"3dml\",\"text/vnd.in3d.spot\":\"spot\",\"text/vnd.sun.j2me.app-descriptor\":\"jad\",\"text/vnd.wap.wml\":\"wml\",\"text/vnd.wap.wmlscript\":\"wmls\",\"text/x-asm\":\"s\",\"text/x-c\":\"cc\",\"text/x-fortran\":\"f\",\"text/x-java-source\":\"java\",\"text/x-nfo\":\"nfo\",\"text/x-opml\":\"opml\",\"text/x-pascal\":\"p\",\"text/x-setext\":\"etx\",\"text/x-sfv\":\"sfv\",\"text/x-sql\":\"sql\",\"text/x-uuencode\":\"uu\",\"text/x-vcalendar\":\"vcs\",\"text/x-vcard\":\"vcf\",\"text/x-httpd-cgi\":\"cgi\",\"text/x-asap\":\"asp\",\"text/x-jsp\":\"jsp\",\"video/3gpp\":\"3gp\",\"video/3gpp2\":\"3g2\",\"video/h261\":\"h261\",\"video/h263\":\"h263\",\"video/h264\":\"h264\",\"video/jpeg\":\"jpgv\",\"video/jpm\":\"jpm\",\"video/mj2\":\"mj2\",\"video/MP2T\":\"m2ts\",\"video/mp4\":\"mp4\",\"video/mpeg\":\"mpeg\",\"video/ogg\":\"ogm\",\"video/quicktime\":\"qt\",\"video/vnd.dece.hd\":\"uvh\",\"video/vnd.dece.mobile\":\"uvm\",\"video/vnd.dece.pd\":\"uvp\",\"video/vnd.dece.sd\":\"uvs\",\"video/vnd.dece.video\":\"uvv\",\"video/vnd.dvb.file\":\"dvb\",\"video/vnd.fvt\":\"fvt\",\"video/vnd.mpegurl\":\"mxu\",\"video/vnd.ms-playready.media.pyv\":\"pyv\",\"video/vnd.uvvu.mp4\":\"uvu\",\"video/vnd.vivo\":\"viv\",\"video/webm\":\"webm\",\"video/x-dv\":\"dv\",\"video/x-f4v\":\"f4v\",\"video/x-fli\":\"fli\",\"video/x-flv\":\"flv\",\"video/x-m4v\":\"m4v\",\"video/x-matroska\":\"mkv\",\"video/x-mng\":\"mng\",\"video/x-ms-asf\":\"asf\",\"video/x-ms-vob\":\"vob\",\"video/x-ms-wmx\":\"wmx\",\"video/x-ms-wvx\":\"wvx\",\"video/x-msvideo\":\"avi\",\"video/x-sgi-movie\":\"movie\",\"video/x-smv\":\"smv\",\"video/x-ms-wmv\":\"wm\",\"video/panorama+mp4\":\"mp4p\",\"x-conference/x-cooltalk\":\"ice\",\"image/x-pixlr-data\":\"pxd\",\"image/x-adobe-dng\":\"dng\",\"image/x-sketch\":\"sketch\",\"image/x-xcf\":\"xcf\",\"audio/amr\":\"amr\",\"image/vnd-ms.dds\":\"dds\",\"application/plt\":\"plt\",\"application/sat\":\"sat\",\"application/step\":\"step\"}}),define(\"skylark-io-mimes/extensions\",[\"skylark-langx-types\",\"./mimes\",\"./types\"],function(t,e,n){var i,r={};for(i in n){var s=n[i];t.isString(s)&&(s=[s]);for(var a=0;a<s.length;a++){var o=s[a];r[o]?t.isString(r[o])?r[o]=[r[o],i]:r[o].push(i):r[o]=i}}return e.extenstions=r}),define(\"skylark-io-mimes/getMimeType\",[\"./mimes\",\"./types\"],function(t,i){return t.getMimeType=function(t,e){for(var n in i)if(i[n]===t&&(!e||n.startsWith(e)))return n}}),define(\"skylark-io-mimes/main\",[\"./mimes\",\"./extensions\",\"./getMimeType\",\"./types\"],function(t){return t}),define(\"skylark-io-mimes\",[\"skylark-io-mimes/main\"],function(t){return t}),define(\"skylark-io-diskfs/download\",[\"skylark-langx/types\",\"./diskfs\"],function(i,t){return t.downlad=function(t,e){var n;window.navigator.msSaveBlob?(i.isString(t)&&(t=dataURItoBlob(t)),window.navigator.msSaveBlob(t,e)):(n=document.createElement(\"a\"),t instanceof Blob&&(t=URL.createObjectURL(t)),n.href=t,n.setAttribute(\"download\",e||\"noname\"),n.click())}}),define(\"skylark-io-diskfs/read\",[\"skylark-langx-async/deferred\",\"./diskfs\"],function(r,t){return t.read=t.readFile=function(t,e){e=e||{};var n=new r,i=new FileReader;return i.onload=function(t){n.resolve(t.target.result)},i.onerror=function(t){t=t.target.error.code;2===t?alert(\"please don't open this page using protocol fill:///\"):alert(\"error code: \"+t)},e.asArrayBuffer?i.readAsArrayBuffer(t):e.asDataUrl?i.readAsDataURL(t):e.asText?i.readAsText(t):i.readAsArrayBuffer(t),n.promise}}),define(\"skylark-io-diskfs/read-image\",[\"skylark-langx-async/deferred\",\"./diskfs\",\"./read\"],function(i,t,r){return t.readImage=function(t){var e=new i,n=new Image;return n.onload=function(){e.resolve(n)},n.onerror=function(t){e.reject(t)},r(t,{asDataUrl:!0}).then(function(t){n.src=t}).catch(function(t){e.reject(t)}),e.promise}}),define(\"skylark-io-diskfs/main\",[\"./diskfs\",\"./download\",\"./read\",\"./read-image\",\"./select\",\"./webentry\"],function(t){return t}),define(\"skylark-io-diskfs\",[\"skylark-io-diskfs/main\"],function(t){return t}),define(\"skylark-io-streams/streams\",[\"skylark-langx-ns\"],function(t){return t.attach(\"io.streams\")}),define(\"skylark-io-streams/decode-stream\",[\"skylark-langx-events\",\"skylark-langx-chars\",\"./streams\"],function(t,e,n){var i=new Uint8Array(0),t=t.Emitter.inherit({klassName:\"DecodeStream\",_construct:function(t){if(this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=i,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2},length:{get:function(){throw new Error(\"Should not access DecodeStream.length\")}},isEmpty:{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}},ensureBuffer:function(t){var e=this.buffer;if(t<=e.byteLength)return e;for(var n=this.minBufferLength;n<t;)n*=2;var i=new Uint8Array(n);return i.set(e),this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},getUint16:function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(t,e=!1){var n,i=this.pos;if(t){for(this.ensureBuffer(i+t),n=i+t;!this.eof&&this.bufferLength<n;)this.readBlock();t=this.bufferLength;t<n&&(n=t)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;t=this.buffer.subarray(i,n);return!e||t instanceof Uint8ClampedArray?t:new Uint8ClampedArray(t)},peekByte:function(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes(t,e=!1){t=this.getBytes(t,e);return this.pos-=t.length,t},makeSubStream:function(t,e,n){for(var i=t+e;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},getByteRange(t,e){throw new Error(\"Should not call DecodeStream.getByteRange\")},skip:function(t){this.pos+=t=t||1},reset:function(){this.pos=0},getBaseStreams:function(){return this.str&&this.str.getBaseStreams?this.str.getBaseStreams():[]}});return n.DecodeStream=t}),define(\"skylark-io-streams/ascii85-stream\",[\"skylark-langx-chars\",\"./streams\",\"./decode-stream\"],function(o,t,e){var n=e.inherit({klassName:\"Ascii85Stream\",_construct:function(t){this.str=t,this.dict=t.dict,this.input=new Uint8Array(5),maybeLength&&(maybeLength*=.8),e.prototype._construct.call(this,maybeLength)},readBlock:function(){for(var t=this.str,e=t.getByte();o.isWhiteSpace(e);)e=t.getByte();if(-1===e||126===e)this.eof=!0;else{var n,i=this.bufferLength;if(122===e){for(n=this.ensureBuffer(i+4),a=0;a<4;++a)n[i+a]=0;this.bufferLength+=4}else{var r=this.input;for(r[0]=e,a=1;a<5;++a){for(e=t.getByte();o.isWhiteSpace(e);)e=t.getByte();if(-1===(r[a]=e)||126===e)break}if(n=this.ensureBuffer(i+a-1),this.bufferLength+=a-1,a<5){for(;a<5;++a)r[a]=117;this.eof=!0}for(var s=0,a=0;a<5;++a)s=85*s+(r[a]-33);for(a=3;0<=a;--a)n[i+a]=255&s,s>>=8}}}});return t.Ascii85Stream=n}),define(\"skylark-io-streams/ascii-hex-stream\",[\"./streams\",\"./decode-stream\"],function(t,n){var e=n.inherit({klassName:\"AsciiHexStream\",_construct:function(t,e){this.str=t,this.dict=t.dict,this.firstDigit=-1,e&&(e*=.5),n.prototype._construct.call(this,e)},readBlock:function(){var t=this.str.getBytes(8e3);if(t.length){for(var e=t.length+1>>1,n=this.ensureBuffer(this.bufferLength+e),i=this.bufferLength,r=this.firstDigit,s=0,a=t.length;s<a;s++){var o,l=t[s];if(48<=l&&l<=57)o=15&l;else{if(!(65<=l&&l<=70||97<=l&&l<=102)){if(62!==l)continue;this.eof=!0;break}o=9+(15&l)}r=r<0?o:(n[i++]=r<<4|o,-1)}0<=r&&this.eof&&(n[i++]=r<<4,r=-1),this.firstDigit=r,this.bufferLength=i}else this.eof=!0}});return t.AsciiHexStream=e}),define(\"skylark-io-streams/_stream\",[\"skylark-langx-events\",\"./streams\"],function(t,e){var i=t.Emitter.inherit({klassName:\"Stream\",_construct:function(t,e,n,i){this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+n||this.bytes.length,this.dict=i},length:{get:function(){return this.end-this.start}},getByte:function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},getUint16:function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},getInt32:function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},getBytes(t,e=!1){var n=this.bytes,i=this.pos,r=this.end;if(!t){const s=n.subarray(i,r);return e?new Uint8ClampedArray(s):s}t=i+t;this.pos=t=r<t?r:t;const s=n.subarray(i,t);return e?new Uint8ClampedArray(s):s},peekByte:function(){var t=this.getByte();return-1!==t&&this.pos--,t},peekBytes(t,e=!1){t=this.getBytes(t,e);return this.pos-=t.length,t},getByteRange(t,e){return e>this.end&&(e=this.end),this.bytes.subarray(t=t<0?0:t,e)},skip:function(t){this.pos+=t=t||1},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(t,e,n){return new i(this.bytes.buffer,t,e,n)}});return e.Stream=i}),define(\"skylark-io-streams/chunked-stream\",[\"./streams\",\"./_stream\"],function(t,e){e=e.inherit({klassName:\"ChunkedStream\",numChunks:function(){},numChunksLoaded:0,_construct:function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=t.charCodeAt(i);DecodeStream.prototype._construct.call(n),this.dict=stream.dict},getMissingChunks:function(){for(var t=[],e=0,n=this.numChunks;e<n;++e)e in this.loadedChunks||t.push(e);return t},getBaseStreams:function(){return[this]},allChunksLoaded:function(){var t=this._;return t.numChunksLoaded===t.numChunks},onReceiveData:function(t,e){for(var n=t+e.byteLength,i=(assert(t%this.chunkSize==0,\"Bad begin offset: \"+t),this.bytes.length),i=(assert(n%this.chunkSize==0||n===i,\"Bad end offset: \"+n),this.bytes.set(new Uint8Array(e),t),this.chunkSize),t=Math.floor(t/i),r=Math.floor((n-1)/i)+1,e=t;e<r;++e)e in this.loadedChunks||(this.loadedChunks[e]=!0,++this.numChunksLoaded)},onReceiveInitialData:function(t){this.bytes.set(t),this.initialDataLength=t.length;for(var e=this.end===t.length?this.numChunks:Math.floor(t.length/this.chunkSize),n=0;n<e;n++)this.loadedChunks[n]=!0,++this.numChunksLoaded},ensureRange:function(t,e){if(!(e<=t||e<=this.initialDataLength))for(var n=this.chunkSize,i=Math.floor(t/n),r=Math.floor((e-1)/n)+1,s=i;s<r;++s)if(!(s in this.loadedChunks))throw new MissingDataException(t,e)},nextEmptyChunk:function(t){for(var e=t,n=this.numChunks;e<n;++e)if(!(e in this.loadedChunks))return e;for(e=0;e<t;++e)if(!(e in this.loadedChunks))return e;return null},hasChunk:function(t){return t in this._.loadedChunks},getByte:function(){var t=this.pos;return t>=this.end?-1:(this.ensureRange(t,t+1),this.bytes[this.pos++])},getBytes:function(t){var e=this.bytes,n=this.pos,i=this.end;return t?(this.ensureRange(n,t=i<(t=n+t)?i:t),this.pos=t,e.subarray(n,t)):(this.ensureRange(n,i),e.subarray(n,i))},peekBytes:function(t){t=this.getBytes(t);return this.pos-=t.length,t},getByteRange:function(t,e){return this.ensureRange(t,e),this.bytes.subarray(t,e)},skip:function(t){this.pos+=t=t||1},reset:function(){this.pos=this.start},moveStart:function(){this.start=this.pos},makeSubStream:function(t,e,n){function i(){}(i.prototype=Object.create(this)).getMissingChunks=function(){for(var t=this.chunkSize,e=Math.floor(this.start/t),n=Math.floor((this.end-1)/t)+1,i=[],r=e;r<n;++r)r in this.loadedChunks||i.push(r);return i};var r=new i;return r.pos=r.start=t,r.end=t+e||this.end,r.dict=n,r}});return t.ChunkedStream=e}),define(\"skylark-io-streams/decrypt-stream\",[\"./streams\",\"./decode-stream\"],function(t,i){var e=i.inherit({klassName:\"DecryptStream\",_construct:function(t,e,n){this.str=t,this.dict=t.dict,this.decrypt=n,this.nextChunk=null,this.initialized=!1,i.prototype._construct.call(this,e)},readBlock:function(){if(this.initialized?e=this.nextChunk:(e=this.str.getBytes(512),this.initialized=!0),e&&0!==e.length){this.nextChunk=this.str.getBytes(512);for(var t=this.nextChunk&&0<this.nextChunk.length,e=(0,this.decrypt)(e,!t),n=this.bufferLength,i=e.length,r=this.ensureBuffer(n+i),s=0;s<i;s++)r[n++]=e[s];this.bufferLength=n}else this.eof=!0}});return t.DecryptStream=e}),define(\"skylark-io-streams/fake-stream\",[\"./streams\",\"./decode-stream\"],function(t,e){var n=e.inherit({klassName:\"FakeStream\",_construct:function(t){this.dict=t.dict,e.prototype._construct.call(this)},readBlock:function(){var t=this.bufferLength;this.ensureBuffer(t+=1024);this.bufferLength=t},getBytes:function(t){var e,n=this.pos;if(t){for(this.ensureBuffer(n+t),e=n+t;!this.eof&&this.bufferLength<e;)this.readBlock();t=this.bufferLength;t<e&&(e=t)}else this.eof=!0,e=this.bufferLength;return this.pos=e,this.buffer.subarray(n,e)}});return t.FakeStream=n}),define(\"skylark-io-streams/flate-stream\",[\"./streams\",\"./decode-stream\"],function(t,i){var E=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),M=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),A=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],P=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],e=i.inherit({klassName:\"FlateStream\",_construct:function(t,e){this.str=t,this.dict=t.dict;var n=t.getByte(),t=t.getByte();if(-1===n||-1===t)throw new util.FormatError(`Invalid header in flate stream: ${n}, `+t);if(8!=(15&n))throw new util.FormatError(`Unknown compression method in flate stream: ${n}, `+t);if(((n<<8)+t)%31!=0)throw new util.FormatError(`Bad FCHECK in flate stream: ${n}, `+t);if(32&t)throw new util.FormatError(`FDICT bit set in flate stream: ${n}, `+t);this.codeSize=0,this.codeBuf=0,i.prototype._construct.call(this,e)},getBits:function(t){for(var e,n=this.str,i=this.codeSize,r=this.codeBuf;i<t;){if(-1===(e=n.getByte()))throw new util.FormatError(\"Bad encoding in flate stream\");r|=e<<i,i+=8}return e=r&(1<<t)-1,this.codeBuf=r>>t,this.codeSize=i-=t,e},getCode:function(t){for(var e,n=this.str,i=t[0],r=t[1],s=this.codeSize,a=this.codeBuf;s<r&&-1!==(e=n.getByte());)a|=e<<s,s+=8;t=i[a&(1<<r)-1],i=t>>16,t&=65535;if(i<1||s<i)throw new util.FormatError(\"Bad encoding in flate stream\");return this.codeBuf=a>>i,this.codeSize=s-i,t},generateHuffmanTable:function(t){var e=t.length,n=0;for(d=0;d<e;++d)t[d]>n&&(n=t[d]);for(var i=1<<n,r=new Int32Array(i),s=1,a=0,o=2;s<=n;++s,a<<=1,o<<=1)for(var l=0;l<e;++l)if(t[l]===s){for(var c=0,u=a,d=0;d<s;++d)c=c<<1|1&u,u>>=1;for(d=c;d<i;d+=o)r[d]=s<<16|l;++a}return[r,n]},readBlock:function(){var t,e,n=this.str,i=this.getBits(3);if(1&i&&(this.eof=!0),0==(i>>=1)){if(-1===(a=n.getByte()))throw new util.FormatError(\"Bad block header in flate stream\");var r=a;if(-1===(a=n.getByte()))throw new util.FormatError(\"Bad block header in flate stream\");if(r|=a<<8,-1===(a=n.getByte()))throw new util.FormatError(\"Bad block header in flate stream\");var s=a;if(-1===(a=n.getByte()))throw new util.FormatError(\"Bad block header in flate stream\");if((s|=a<<8)!=(65535&~r)&&(0!=r||0!=s))throw new util.FormatError(\"Bad uncompressed block length in flate stream\");this.codeBuf=0,this.codeSize=0;var a=this.bufferLength,s=a+r,o=this.ensureBuffer(s);this.bufferLength=s,0==r?-1===n.peekByte()&&(this.eof=!0):(s=n.getBytes(r),o.set(s,a),s.length<r&&(this.eof=!0))}else{if(1==i)t=A,e=P;else{if(2!=i)throw new util.FormatError(\"Unknown block type in flate stream\");for(var n=this.getBits(5)+257,a=this.getBits(5)+1,l=this.getBits(4)+4,c=new Uint8Array(E.length),u=0;u<l;++u)c[E[u]]=this.getBits(3);var d=this.generateHuffmanTable(c),h=0;u=0;for(var p,f,m,g=n+a,y=new Uint8Array(g);u<g;){var k=this.getCode(d);if(16===k)p=2,f=3,m=h;else{if(17===k)f=p=3;else{if(18!==k){y[u++]=h=k;continue}p=7,f=11}m=h=0}for(var x=this.getBits(p)+f;0<x--;)y[u++]=m}t=this.generateHuffmanTable(y.subarray(0,n)),e=this.generateHuffmanTable(y.subarray(n,g))}for(var v=(o=this.buffer)?o.length:0,b=this.bufferLength;;)if((w=this.getCode(t))<256)v<=b+1&&(v=(o=this.ensureBuffer(b+1)).length),o[b++]=w;else{if(256===w)return void(this.bufferLength=b);var w,_=(w=T[w-=257])>>16,C=(h=(65535&w)+(_=0<_?this.getBits(_):_),w=this.getCode(e),(65535&(w=M[w]))+(_=0<(_=w>>16)?this.getBits(_):_));v<=b+h&&(v=(o=this.ensureBuffer(b+h)).length);for(var S=0;S<h;++S,++b)o[b]=o[b-C]}}}});return t.FlateStream=e}),define(\"skylark-io-streams/lzw-stream\",[\"./streams\",\"./decode-stream\"],function(t,s){var e=s.inherit({klassName:\"LZWStream\",_construct:function(t,e,n){this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;for(var i={earlyChange:n,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(4096),dictionaryLengths:new Uint16Array(4096),dictionaryPrevCodes:new Uint16Array(4096),currentSequence:new Uint8Array(4096),currentSequenceLength:0},r=0;r<256;++r)i.dictionaryValues[r]=r,i.dictionaryLengths[r]=1;this.lzwState=i,s.prototype._construct.call(this,e)},readBits:function(t){for(var e=this.bitsCached,n=this.cachedData;e<t;){var i=this.str.getByte();if(-1===i)return this.eof=!0,null;n=n<<8|i,e+=8}return this.bitsCached=e-=t,this.cachedData=n,this.lastCode=null,n>>>e&(1<<t)-1},readBlock:function(){var t,e,n=1024,i=this.lzwState;if(i){for(var r=i.earlyChange,s=i.nextCode,a=i.dictionaryValues,o=i.dictionaryLengths,l=i.dictionaryPrevCodes,c=i.codeLength,u=i.prevCode,d=i.currentSequence,h=i.currentSequenceLength,p=0,f=this.bufferLength,m=this.ensureBuffer(this.bufferLength+n),g=0;g<512;g++){var y=this.readBits(c),k=0<h;if(y<256)d[0]=y,h=1;else{if(!(258<=y)){if(256===y){c=9,s=258,h=0;continue}this.eof=!0,delete this.lzwState;break}if(y<s)for(t=(h=o[y])-1,e=y;0<=t;t--)d[t]=a[e],e=l[e];else d[h++]=d[0]}if(k&&(l[s]=u,o[s]=o[u]+1,a[s]=d[0],c=++s+r&s+r-1?c:0|Math.min(Math.log(s+r)/.6931471805599453+1,12)),u=y,n<(p+=h)){for(;(n+=512)<p;);m=this.ensureBuffer(this.bufferLength+n)}for(t=0;t<h;t++)m[f++]=d[t]}i.nextCode=s,i.codeLength=c,i.prevCode=u,i.currentSequenceLength=h,this.bufferLength=f}}});return t.LZWStream=e}),define(\"skylark-io-streams/null-stream\",[\"./streams\",\"./_stream\"],function(t,e){var n=e.inherit({klassName:\"NullStream\",_construct:function(){e.prototype._construct.call(this,new Uint8Array(0))}});return t.NullStream=n}),define(\"skylark-io-streams/predictor-stream\",[\"./streams\",\"./decode-stream\"],function(t,r){var e=r.inherit({klassName:\"PredictorStream\",_construct:function(t,e,n){if(!primitives.isDict(n))return t;var i=this.predictor=n.get(\"Predictor\")||1;if(i<=1)return t;if(2!==i&&(i<10||15<i))throw new Error(\"Unsupported predictor: \"+i);this.readBlock=2===i?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;i=this.colors=n.get(\"Colors\")||1,t=this.bits=n.get(\"BitsPerComponent\")||8,n=this.columns=n.get(\"Columns\")||1;return this.pixBytes=i*t+7>>3,this.rowBytes=n*i*t+7>>3,r.call(this,e),this},readBlockTiff:function(){var t=this.rowBytes,e=this.bufferLength,n=this.ensureBuffer(e+t),i=this.bits,r=this.colors,s=this.str.getBytes(t);if(this.eof=!s.length,!this.eof){var a=0,o=0,l=0,c=0,u=e;if(1===i&&1===r)for(p=0;p<t;++p){var d=s[p]^a,a=(1&(d=(d=(d^=d>>1)^d>>2)^d>>4))<<7;n[u++]=d}else if(8===i){for(p=0;p<r;++p)n[u++]=s[p];for(;p<t;++p)n[u]=n[u-r]+s[p],u++}else if(16===i){for(var h=2*r,p=0;p<h;++p)n[u++]=s[p];for(;p<t;p+=2){var f=((255&s[p])<<8)+(255&s[p+1])+((255&n[u-h])<<8)+(255&n[u-h+1]);n[u++]=f>>8&255,n[u++]=255&f}}else{var m=new Uint8Array(r+1),g=(1<<i)-1,y=0,k=e,x=this.columns;for(p=0;p<x;++p)for(var v=0;v<r;++v)l<i&&(a=a<<8|255&s[y++],l+=8),m[v]=m[v]+(a>>l-i)&g,l-=i,o=o<<i|m[v],8<=(c+=i)&&(n[k++]=o>>c-8&255,c-=8);0<c&&(n[k++]=(o<<8-c)+(a&(1<<8-c)-1))}this.bufferLength+=t}},readBlockPng:function(){var t=this.rowBytes,e=this.pixBytes,n=this.str.getByte(),i=this.str.getBytes(t);if(this.eof=!i.length,!this.eof){var r=this.bufferLength,s=this.ensureBuffer(r+t),a=s.subarray(r-t,r);0===a.length&&(a=new Uint8Array(t));var o,l,c=r;switch(n){case 0:for(o=0;o<t;++o)s[c++]=i[o];break;case 1:for(o=0;o<e;++o)s[c++]=i[o];for(;o<t;++o)s[c]=s[c-e]+i[o]&255,c++;break;case 2:for(o=0;o<t;++o)s[c++]=a[o]+i[o]&255;break;case 3:for(o=0;o<e;++o)s[c++]=(a[o]>>1)+i[o];for(;o<t;++o)s[c]=(a[o]+s[c-e]>>1)+i[o]&255,c++;break;case 4:for(o=0;o<e;++o)u=a[o],l=i[o],s[c++]=u+l;for(;o<t;++o){var u=a[o],d=a[o-e],h=s[c-e],p=h+u-d,f=p-h,m=(f<0&&(f=-f),p-u),p=(m<0&&(m=-m),p-d);p<0&&(p=-p),l=i[o],s[c++]=f<=m&&f<=p?h+l:m<=p?u+l:d+l}break;default:throw new Error(\"Unsupported predictor: \"+n)}this.bufferLength+=t}}});return t.PredictorStream=e}),define(\"skylark-io-streams/run-length-stream\",[\"skylark-langx-chars\",\"./streams\",\"./decode-stream\"],function(t,e,n){var i=n.inherit({klassName:\"RunLengthStream\",_construct:function(t,e){this.str=t,this.dict=t.dict,n.prototype._construct.call(this,e)},readBlock:function(){var t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])this.eof=!0;else{var e,n,i=this.bufferLength;if((r=t[0])<128)(n=this.ensureBuffer(i+r+1))[i++]=t[1],0<r&&(e=this.str.getBytes(r),n.set(e,i),i+=r);else{var r,s=t[1];n=this.ensureBuffer(i+(r=257-r)+1);for(var a=0;a<r;a++)n[i++]=s}this.bufferLength=i}}});return e.RunLengthStream=i}),define(\"skylark-io-streams/streams-sequence-stream\",[\"skylark-langx-chars\",\"./streams\",\"./decode-stream\"],function(t,i,s){var e=s.inherit({klassName:\"StreamsSequenceStream\",_construct:function(n){let i=0;for(let t=0,e=(this.streams=n).length;t<e;t++){var r=n[t];r instanceof s?i+=r._rawMinBufferLength:i+=r.length}s.prototype._construct.call(this,i)},readBlock:function(){var t,e,n=this.streams;0===i.length?this.eof=!0:(n=n.shift().getBytes(),e=(t=this.bufferLength)+n.length,this.ensureBuffer(e).set(n,t),this.bufferLength=e)},getBaseStreams:function(){for(var t=[],e=0,n=this.streams.length;e<n;e++){var i=this.streams[e];i.getBaseStreams&&t.push(...i.getBaseStreams())}return t}});return i.StreamsSequenceStream=e}),define(\"skylark-io-streams/string-stream\",[\"./streams\",\"./_stream\"],function(t,r){var e=r.inherit({klassName:\"StringStream\",_construct:function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=t.charCodeAt(i);r.prototype._construct.call(this,n)}});return t.StringStream=e}),define(\"skylark-io-streams/main\",[\"./streams\",\"./ascii85-stream\",\"./ascii-hex-stream\",\"./chunked-stream\",\"./decode-stream\",\"./decrypt-stream\",\"./fake-stream\",\"./flate-stream\",\"./lzw-stream\",\"./null-stream\",\"./predictor-stream\",\"./run-length-stream\",\"./_stream\",\"./streams-sequence-stream\",\"./string-stream\"],function(t){return t}),define(\"skylark-io-streams\",[\"skylark-io-streams/main\"],function(t){return t}),define(\"skylark-net-http/restful\",[\"skylark-langx-objects\",\"skylark-langx-strings\",\"skylark-langx-emitter/evented\",\"./xhr\"],function(t,e,n,i){var r=t.mixin,s=e.substitute;return n.inherit({klassName:\"Restful\",idAttribute:\"id\",getBaseUrl:function(t){var e=s(this.baseEndpoint,t),e=this.server+this.basePath+e;return e=void 0!==t[this.idAttribute]?e+\"/\"+t[this.idAttribute]:e},_head:function(t){},_get:function(t){return i.get(this.getBaseUrl(t),t)},_post:function(t,e){var n=this.getBaseUrl(t);return i.post(n=e?n+\"/\"+e:n,t)},_put:function(t,e){var n=this.getBaseUrl(t);return i.put(n=e?n+\"/\"+e:n,t)},_delete:function(t){t=this.getBaseUrl(t);return i.del(t)},_patch:function(t){var e=this.getBaseUrl(t);return i.patch(e,t)},query:function(t){return this._post(t)},retrieve:function(t){return this._get(t)},create:function(t){return this._post(t)},update:function(t){return this._put(t)},delete:function(t){return this._delete(t)},patch:function(t){return this._patch(t)},init:function(t){r(this,t)}})}),define(\"skylark-net-http/main\",[\"./http\",\"./restful\",\"./Xhr\",\"./upload\"],function(t){return t}),define(\"skylark-net-http\",[\"skylark-net-http/main\"],function(t){return t}),define(\"skylark-appify-routers/routers\",[\"skylark-langx/skylark\",\"skylark-langx/langx\"],function(t,n){return t.attach(\"appify.routers\",{createEvent:function(t,e){t=new CustomEvent(t,e);return n.safeMixin(t,e)}})}),define(\"skylark-appify-routers/route\",[\"skylark-langx/langx\",\"./routers\"],function(a,t){var i=t.createEvent,e=a.Evented.inherit({klassName:\"Route\",init:function(t,e){var n=(e=a.mixin({},e)).pathto||\"\",i=n,r=i.match(/\\:([a-zA-Z0-9_]+)/g),s=(null!==r?(r=r.map(function(t){return t.substring(1)}),i=i.replace(/\\:([a-zA-Z0-9_]+)/g,\"(.*?)\")):r=[],i=\"*\"===i?\"(.*)\":i.replace(\"/\",\"\\\\/\"),this._setting=e,this.name=t,this.pathto=n,this.paramNames=r,this.params=i,this.regex=new RegExp(\"^\"+i+\"$\",\"\"),this);[\"entering\",\"entered\",\"exiting\",\"exited\"].forEach(function(t){a.isFunction(e[t])&&s.on(t,e[t])})},enter:function(t,e){var n;return e?(e=this._entering(t),n=this,a.Deferred.when(e).then(function(){var t=i(\"entering\",{route:n,result:!0});return n.trigger(t),t.result})):(this._entered(t),this.trigger(i(\"entered\",a.safeMixin({route:this},t))),this)},exit:function(t,e){return e?!!this._exiting(t)&&(e=i(\"exiting\",{route:this,result:!0}),this.trigger(e),e.result):(this._exited(t),this.trigger(i(\"exited\",a.safeMixin({route:this},t))),this)},match:function(t){var e=this.paramNames,n=t.indexOf(\"?\"),t=~n?t.slice(0,n):decodeURIComponent(t),i=this.regex.exec(t);if(!i)return!1;for(var r={},s=1,a=i.length;s<a;++s){var o=e[s-1],l=decodeURIComponent(i[s]);r[o]=l}return r},path:function(n){var t=this.pathto;return t=n?t.replace(/:([a-zA-Z0-9_]+)/g,function(t,e){return n[e]}):t},_entering:function(t){return!0},_entered:function(t){return!0},_exiting:function(t){return!0},_exited:function(t){return!0}});return t.Route=e}),define(\"skylark-appify-routers/router\",[\"skylark-langx/langx\",\"./routers\",\"./route\"],function(p,t,f){var m=t.createEvent;return t.Router=function(){var i,e,r,n,s={},a={},o=new p.Evented,l=this;function c(t){if(i&&!i.route.exit({path:i.path,params:i.params},!0))return;e=i,(i=t).route||(t=d(i.path),i.route=t.route,i.params=t.params);t=i.route.enter({force:i.force,path:i.path,params:i.params},!0);p.Deferred.when(t).then(function(){o.trigger(m(\"routing\",{current:i,previous:e})),i.route.enter({path:i.path,params:i.params},!1),e&&e.route.exit({path:e.path,params:e.params},!1),o.trigger(m(\"routed\",{current:i,previous:e}))})}function u(t,e){var n;return!(!e&&i&&i.path==t||((n=d(t))&&(n.path=t,l.useHistoryApi?(e={force:e,path:t},window.history.pushState(e,document.title,(r+t).replace(\"//\",\"/\")),window.dispatchEvent(m(\"popstate\",{state:e}))):l.useHashbang&&(e=\"#!\"+t,window.location.hash!==e)?window.location.hash=e:c(n)),0))}function d(i,t){var r=!1;return!t&&(r=a[i])||(p.each(s,function(t,e){var n=e.match(i);return!n||!(r={route:e,params:n})}),r&&!t&&(a[i]=r)),r}function h(t){if(!p.isDefined(t))return p.mixin({},s);for(var e in t)s[e]=new l.Route(e,t[e])}p.mixin(l,{Route:f,current:function(){return i},go:u,map:d,hub:function(){return o},off:function(){o.off.apply(o,arguments)},on:function(){o.on.apply(o,arguments)},one:function(){o.one.apply(o,arguments)},path:function(t,e){var n,t=s[t];return n=t?t.path(e):n},previous:function(){return e},baseUrl:function(t){return p.isDefined(t)?(r=t,this):r},homePath:function(t){return p.isDefined(t)?(n=t,this):n},route:function(t,e){var n;return p.isDefined(e)?((n={})[t]=e,h(n),this):s[t]},routes:h,start:function(){null==l.useHashbang&&null==l.useHistoryApi&&(window.location.host&&window.history.pushState?l.useHistoryApi=!0:l.useHashbang=!0);var t=\"\";(t=l.useHistoryApi?(t=window.location.pathname,void 0===r&&(r=t.replace(/\\/$/,\"\")),t.replace(r,\"\")||n||\"/\"):l.useHashbang&&(window.location.hash.replace(\"#!\",\"\")||n)||\"/\").startsWith(\"/\")||(t=\"/\"+t),l.useHistoryApi?window.addEventListener(\"popstate\",function(t){t.state&&c(t.state),t.preventDefault()}):l.useHashbang&&window.addEventListener(\"hashchange\",function(t){c({path:window.location.hash.replace(/^#!/,\"\")}),t.preventDefault()}),u(t)},trigger:function(t){return o.trigger(t),this},useHistoryApi:null,useHashbang:null})}}),define(\"skylark-appify-routers/main\",[\"./routers\",\"./router\",\"./route\"],function(t){return t}),define(\"skylark-appify-routers\",[\"skylark-appify-routers/main\"],function(t){return t}),define(\"skylark-appify-spa/spa\",[\"skylark-langx/skylark\"],function(t){function e(t){return e.Page(t)}return t.attach(\"appify.spa\",e)}),define(\"skylark-appify-spa/router\",[\"skylark-appify-routers\",\"./spa\"],function(t,e){t=new t.Router;return e.router=t}),define(\"skylark-appify-spa/page\",[\"skylark-langx/langx\",\"./spa\",\"./router\"],function(i,r,s){var a=i.Deferred,t=i.Evented.inherit({klassName:\"SpaPage\",_construct:function(t){var n=this._plugins={},e=(t=this._config=i.mixin({plugins:{}},t,!0),i.each(t.plugins,function(t,e){n[t]=new r.Plugin(t,e)}),s.routes(t.routes),this._router=s,i.mixin({routeViewer:\"body\"},t.page)),e=(this._params=e,this._rvc=document.querySelector(e.routeViewer),s.on(\"routed\",i.proxy(this,\"refresh\")),document.title=t.title,t.baseUrl);void 0===e&&(e=t.baseUrl=new i.URL(document.baseURI).pathname),s.baseUrl(e),t.homePath&&s.homePath(t.homePath)},baseUrl:function(){return s.baseUrl()},getConfig:function(t){return t?this._config[t]:this._config},go:function(t,e){return s.go(t,e),this},refresh:function(){var t=s.current(),e=(s.previous(),t.route.render(t));null!=e&&(i.isString(e)?this._rvc.innerHTML=e:(this._rvc.innerHTML=\"\",this._rvc.appendChild(e)),t.route.trigger(i.createEvent(\"rendered\",{route:t.route,content:e})))},prepare:function(){var n,t;return this._prepared?a.resolve():(t=i.map((n=this)._plugins,function(t,e){if(t.isHooked(\"starting\"))return t.prepare()}),a.all(t).then(function(){s.trigger(i.createEvent(\"starting\",{spa:n}));var t=i.map(s.routes(),function(t,e){if(!1===t.lazy)return t.prepare()}),e=i.map(n._plugins,function(t,e){if(!t.isHooked(\"starting\"))return t.prepare()});return a.all(t.concat(e)).then(function(){n._prepared=!0})}))},run:function(){this._router.start(),s.trigger(i.createEvent(\"started\",{spa:this}))}});return r.Page=t}),define(\"skylark-appify-spa/plugin\",[\"skylark-langx/langx\",\"./spa\",\"./router\"],function(a,t,o){var l=a.Deferred,e=a.Evented.inherit({klassName:\"SpaPlugin\",_construct:function(t,e){this.name=t,a.isString(e.hookers)&&(e.hookers=e.hookers.split(\" \")),this._setting=e},isHooked:function(t){return-1<(this._setting.hookers||[]).indexOf(t)},prepare:function(){var e,n=new l,i=this._setting,r=i.controller,s=(this.controller,this);return require([r.type],function(t){e=s.controller=new t(r),o.on(i.hookers,{plugin:s},a.proxy(e.perform,e)),n.resolve()}),n.then(function(){var t=a.createEvent(\"preparing\",{plugin:s,result:!0});return s.trigger(t),l.when(t.result).then(function(){s._prepared=!0})})},trigger:function(t){var e=this.controller;return e?e.perform(t):this.overrided(t)}});return t.Plugin=e}),define(\"skylark-appify-spa/plugin_controller\",[\"skylark-langx/langx\",\"./spa\"],function(t,e){t=t.Evented.inherit({klassName:\"SpaPluginController\",_construct:function(t){this.plugin=t},perform:function(t){var e=t.type;if(this[e])return this[e].call(this,t)}});return e.PluginController=t}),define(\"skylark-appify-spa/route\",[\"skylark-langx/langx\",\"./spa\",\"./router\"],function(r,t,e){var s=r.Deferred,e=e.Route=e.Route.inherit({klassName:\"SpaRoute\",_construct:function(t,e){this.overrided(t,e),this.content=e.content,this.forceRefresh=e.forceRefresh,this.data=e.data;var n=this;[\"preparing\",\"rendering\",\"rendered\"].forEach(function(t){r.isFunction(e[t])&&n.on(t,e[t])})},_entering:function(t){return this.forceRefresh||t.force||!this._prepared?this.prepare():this},getConfigData:function(t){return t?this.data[t]:this.data},getNamedValue:function(){return window.location.pathname.match(this.regex)},prepare:function(){var e=new s,t=this._setting,n=t.controller,i=(this.controller,this);t.content,t.contentPath;return require([n.type],function(t){i.controller=new t(n),e.resolve()}),e.then(function(){var t=r.createEvent(\"preparing\",{route:i,result:!0});return i.trigger(t),s.when(t.result).then(function(){i._prepared=!0})})},render:function(t){t=r.createEvent(\"rendering\",{route:this,context:t,content:this.content});return this.trigger(t),t.content},trigger:function(t){var e=this.controller;return e?e.perform(t):this.overrided(t)}});return t.Route=e}),define(\"skylark-appify-spa/route_controller\",[\"skylark-langx/langx\",\"./spa\"],function(t,e){t=t.Evented.inherit({klassName:\"SpaRouteController\",_construct:function(t,e){this.content=(e=e||{}).content,this.data=e.data},getConfigData:function(t){return t?this.data[t]:this.data},perform:function(t){var e=t.type;if(this[e])return this[e].call(this,t)}});return e.RouteController=t}),define(\"skylark-appify-spa/main\",[\"./spa\",\"./page\",\"./plugin\",\"./plugin_controller\",\"./route\",\"./route_controller\",\"./router\"],function(t){return t}),define(\"skylark-appify-spa\",[\"skylark-appify-spa/main\"],function(t){return t}),define(\"skylark-data-entities/entities\",[\"skylark-langx/langx\"],function(t){function e(){return e}return t.mixin(e,{emulateHTTP:!1,emulateJSON:!1,backends:{}}),e}),define(\"skylark-data-entities/Entity\",[\"skylark-langx/langx\",\"./entities\"],function(l,t){function c(e,n){var i=n.error;n.error=function(t){i&&i.call(n.context,e,t,n),e.trigger(\"error\",e,t,n)}}var e=l.Stateful.inherit({sync:function(){return t.sync.apply(this,arguments)},matches:function(t){return l.isMatch(this.attributes,t)},fetch:function(n){n=l.mixin({parse:!0},n);var i=this,r=n.success;return n.success=function(t){var e=n.parse?i.parse(t,n):t;if(!i.set(e,n))return!1;r&&r.call(n.context,i,t,n),i.trigger(\"sync\",i,t,n)},c(this,n),this.sync(\"read\",this,n)},save:function(t,e,n){null==t||\"object\"==typeof t?(i=t,n=e):(i={})[t]=e;var i,r=(n=l.mixin({validate:!0,parse:!0},n)).wait;if(i&&!r){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var s=this,a=n.success,o=this.attributes,t=(n.success=function(t){s.attributes=o;var e=n.parse?s.parse(t,n):t;if((e=r?l.mixin({},i,e):e)&&!s.set(e,n))return!1;a&&a.call(n.context,s,t,n),s.trigger(\"sync\",s,t,n)},c(this,n),i&&r&&(this.attributes=l.mixin({},o,i)),this.isNew()?\"create\":n.patch?\"patch\":\"update\"),e=(\"patch\"!=t||n.attrs||(n.attrs=i),this.sync(t,this,n));return this.attributes=o,e},destroy:function(e){e=e?l.clone(e):{};function n(){i.stopListening(),i.trigger(\"destroy\",i,i.collection,e)}var i=this,r=e.success,s=e.wait,t=!(e.success=function(t){s&&n(),r&&r.call(e.context,i,t,e),i.isNew()||i.trigger(\"sync\",i,t,e)});return this.isNew()?l.defer(e.success):(c(this,e),t=this.sync(\"delete\",this,e)),s||n(),t},url:function(){var t,e=l.result(this,\"urlRoot\")||l.result(this.collection,\"url\")||urlError();return this.isNew()?e:(t=this.get(this.idAttribute),e.replace(/[^\\/]$/,\"$&/\")+encodeURIComponent(t))},parse:function(t,e){return t}});return t.Entity=e}),define(\"skylark-data-entities/Collection\",[\"skylark-langx/langx\",\"./entities\",\"./Entity\"],function(v,t,e){function b(t,e,n){n=Math.min(Math.max(n,0),t.length);for(var i=Array(t.length-n),r=e.length,s=0;s<i.length;s++)i[s]=t[s+n];for(s=0;s<r;s++)t[s+n]=e[s];for(s=0;s<i.length;s++)t[s+r+n]=i[s]}var n=v.Evented.inherit({_construct:function(t,e){(e=e||{}).entity&&(this.entity=e.entity),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),t&&this.reset(t,v.mixin({silent:!0},e))}}),w={add:!0,remove:!0,merge:!0},i={add:!0,remove:!1};return n.partial({entity:e,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,v.mixin({merge:!1},e,i))},remove:function(t,e){e=v.mixin({},e);var n=!v.isArray(t),t=(t=n?[t]:t.slice(),this._removeEntitys(t,e));return!e.silent&&t.length&&(e.changes={added:[],merged:[],removed:t},this.trigger(\"update\",this,e)),n?t[0]:t},set:function(t,e){if(null!=t){(e=v.mixin({},w,e)).parse&&!this._isEntity(t)&&(t=this.parse(t,e)||[]);for(var n=!v.isArray(t),i=(t=n?[t]:t.slice(),e.at),r=((i=(i=null!=i?+i:i)>this.length?this.length:i)<0&&(i+=this.length+1),[]),s=[],a=[],o=[],l={},c=e.add,u=e.merge,d=e.remove,h=!1,p=this.comparator&&null==i&&!1!==e.sort,f=v.isString(this.comparator)?this.comparator:null,m=0;m<t.length;m++){var g,y=t[m],k=this.get(y);k?(u&&y!==k&&(g=this._isEntity(y)?y.attributes:y,e.parse&&(g=k.parse(g,e)),k.set(g,e),a.push(k),p)&&!h&&(h=k.hasChanged(f)),l[k.cid]||(l[k.cid]=!0,r.push(k)),t[m]=k):c&&(y=t[m]=this._prepareEntity(y,e))&&(s.push(y),this._addReference(y,e),l[y.cid]=!0,r.push(y))}if(d){for(m=0;m<this.length;m++)l[(y=this.entities[m]).cid]||o.push(y);o.length&&this._removeEntitys(o,e)}var x=!1;if(r.length&&(!p&&c&&d)?(x=this.length!==r.length||this.entities.some(function(t,e){return t!==r[e]}),this.entities.length=0,b(this.entities,r,0),this.length=this.entities.length):s.length&&(p&&(h=!0),b(this.entities,s,null==i?this.length:i),this.length=this.entities.length),h&&this.sort({silent:!0}),!e.silent){for(m=0;m<s.length;m++)null!=i&&(e.index=i+m),(y=s[m]).trigger(\"add\",y,this,e);(h||x)&&this.trigger(\"sort\",this,e),(s.length||o.length||a.length)&&(e.changes={added:s,removed:o,merged:a},this.trigger(\"update\",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?v.clone(e):{};for(var n=0;n<this.entities.length;n++)this._removeReference(this.entities[n],e);return e.previousEntitys=this.entities,this._reset(),t=this.add(t,v.mixin({silent:!0},e)),e.silent||this.trigger(\"reset\",this,e),t},push:function(t,e){return this.add(t,v.mixin({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,v.mixin({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return slice.apply(this.entities,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.entityId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.entities[t]},where:function(t,e){return this[e?\"find\":\"filter\"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error(\"Cannot sort a set without a comparator\");t=t||{};var n=e.length;return v.isFunction(e)&&(e=v.proxy(e,this)),1===n||v.isString(e)?this.entities=this.sortBy(e):this.entities.sort(e),t.silent||this.trigger(\"sort\",this,t),this},pluck:function(t){return this.map(t+\"\")},fetch:function(n){var e,i,r,s=(n=v.mixin({parse:!0},n)).success,a=this;return n.success=function(t){var e=n.reset?\"reset\":\"set\";a[e](t,n),s&&s.call(n.context,a,t,n),a.trigger(\"sync\",a,t,n)},e=this,r=(i=n).error,i.error=function(t){r&&r.call(i.context,e,t,i),e.trigger(\"error\",e,t,i)},this.sync(\"read\",this,n)},create:function(t,e){var i=(e=e?v.clone(e):{}).wait;if(!(t=this._prepareEntity(t,e)))return!1;i||this.add(t,e);var r=this,s=e.success;return e.success=function(t,e,n){i&&r.add(t,n),s&&s.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.entities,{entity:this.entity,comparator:this.comparator})},entityId:function(t){return t[this.entity.prototype&&this.entity.prototype.idAttribute||\"id\"]},_reset:function(){this.length=0,this.entities=[],this._byId={}},_prepareEntity:function(t,e){return this._isEntity(t)?(t.collection||(t.collection=this),t):(t=new((e=e?v.clone(e):{}).collection=this).entity(t,e)).validationError?(this.trigger(\"invalid\",this,t.validationError,e),!1):t},_removeEntitys:function(t,e){for(var n=[],i=0;i<t.length;i++){var r,s,a=this.get(t[i]);a&&(r=this.indexOf(a),this.entities.splice(r,1),this.length--,delete this._byId[a.cid],null!=(s=this.entityId(a.attributes))&&delete this._byId[s],e.silent||(e.index=r,a.trigger(\"remove\",a,this,e)),n.push(a),this._removeReference(a,e))}return n},_isEntity:function(t){return t instanceof e},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.entityId(t.attributes);null!=n&&(this._byId[n]=t),t.on(\"all\",this._onEntityEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.entityId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off(\"all\",this._onEntityEvent,this)},_onEntityEvent:function(t,e,n,i){if(e){if((\"add\"===t||\"remove\"===t)&&n!==this)return;var r,s;\"destroy\"===t&&this.remove(e,i),\"change\"===t&&(r=this.entityId(e.previousAttributes()))!==(s=this.entityId(e.attributes))&&(null!=r&&delete this._byId[r],null!=s)&&(this._byId[s]=e)}this.trigger.apply(this,arguments)}}),t.Collection=n}),define(\"skylark-data-entities/backends/registry\",[],function(){var n={};return{add:function(t,e){n[t]=e},remove:function(t){delete provides[t]},get:function(t){return n[t]}}}),define(\"skylark-data-entities/sync\",[\"skylark-langx/langx\",\"./entities\",\"./backends/registry\"],function(s,t,a){return t.sync=function(t,e,n){if(!n.backend)throw new Error(\"The backend is not specified\");var i=a.get(n.backend);if(!i)throw new Error(\"The backend is not defined:\"+n.backend);var r=i.sync;if(r)return i=s.mixin({},i.options,n),r.apply(this,[t,e,i]);throw new Error(\"The backend sync method is not defined:\"+n.backend)}}),define(\"skylark-data-entities/backends/ajaxSync\",[\"skylark-langx/langx\",\"../entities\"],function(o,l){var c={create:\"POST\",update:\"PUT\",patch:\"PATCH\",delete:\"DELETE\",read:\"GET\"};return l.backends.ajaxSync=function(t,e,i){var n,r=c[t],s=(o.defaults(i=i||{},{emulateHTTP:l.emulateHTTP,emulateJSON:l.emulateJSON}),{type:r,dataType:\"json\"}),a=(i.url||(s.url=o.result(e,\"url\")||urlError()),null!=i.data||!e||\"create\"!==t&&\"update\"!==t&&\"patch\"!==t||(s.contentType=\"application/json\",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType=\"application/x-www-form-urlencoded\",s.data=s.data?{entity:s.data}:{}),!i.emulateHTTP||\"PUT\"!==r&&\"DELETE\"!==r&&\"PATCH\"!==r||(s.type=\"POST\",i.emulateJSON&&(s.data._method=r),n=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader(\"X-HTTP-Method-Override\",r),n)return n.apply(this,arguments)}),\"GET\"===s.type||i.emulateJSON||(s.processData=!1),i.error),t=(i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,a&&a.call(i.context,t,e,n)},i.xhr=o.Xhr.request(o.mixin(s,i)));return e.trigger(\"request\",e,t,i),t}}),define(\"skylark-data-entities/backends/localSync\",[\"skylark-langx/langx\",\"../entities\"],function(o,t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n=o.klass({_construct:function(t){this.name=t;t=this.localStorage().getItem(this.name);this.records=t&&t.split(\",\")||[]},save:function(){this.localStorage().setItem(this.name,this.records.join(\",\"))},create:function(t){return t.id||(t.id=e()+e()+\"-\"+e()+\"-\"+e()+\"-\"+e()+\"-\"+e()+e()+e(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+\"-\"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){return this.localStorage().setItem(this.name+\"-\"+t.id,JSON.stringify(t)),_.include(this.records,t.id.toString())||this.records.push(t.id.toString()),this.save(),this.find(t)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+\"-\"+t.id))},findAll:function(){return _(this.records).chain().map(function(t){return this.jsonData(this.localStorage().getItem(this.name+\"-\"+t))},this).compact().value()},destroy:function(e){return!e.isNew()&&(this.localStorage().removeItem(this.name+\"-\"+e.id),this.records=_.reject(this.records,function(t){return t===e.id.toString()}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)}});function i(t,e,n){var i,r,s=e.localStorage||e.collection.localStorage,a=o.Deferred();try{switch(t){case\"read\":i=null!=e.id?s.find(e):s.findAll();break;case\"create\":i=s.create(e);break;case\"update\":i=s.update(e);break;case\"delete\":i=s.destroy(e)}}catch(t){r=t.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length?\"Private browsing is unsupported\":t.message}return i?(e.trigger(\"sync\",e,i,n),n&&n.success&&n.success(i),a&&a.resolve(i)):(r=r||\"Record Not Found\",n&&n.error&&n.error(r),a&&a.reject(r)),n&&n.complete&&n.complete(i),a&&a.promise()}return t.backends.LocalStorage=i.LocalStorage=n,t.backends.localSync=i}),define(\"skylark-data-entities/main\",[\"./entities\",\"./Collection\",\"./Entity\",\"./sync\",\"./backends/ajaxSync\",\"./backends/localSync\",\"./backends/registry\"],function(t){return t}),define(\"skylark-data-entities\",[\"skylark-data-entities/main\"],function(t){return t}),define(\"skylark-domx-forms/forms\",[\"skylark-langx/skylark\"],function(t){return t.attach(\"domx.forms\",{})}),define(\"skylark-domx-forms/deserialize\",[\"skylark-langx/langx\",\"skylark-domx-query\",\"./forms\"],function(u,c,t){function d(t,e,n){var i=n[t];void 0===i?n[t]=[e]:i.push(e)}var h={checked:[\"radio\",\"checkbox\"],selected:[\"option\",\"select-one\",\"select-multiple\"],value:[\"button\",\"color\",\"date\",\"datetime\",\"datetime-local\",\"email\",\"hidden\",\"month\",\"number\",\"password\",\"range\",\"reset\",\"search\",\"submit\",\"tel\",\"text\",\"textarea\",\"time\",\"url\",\"week\"]};function p(t,e,n,i,r){a=((s=s=t).type||s.nodeName).toLowerCase(),o=void 0,u.each(h,function(t,e){if(-1<u.inArray(a,e))return o=t,!1});var s,a,o,l,c=o;\"value\"==c&&e==i?(t.value=n,r.call(t,n)):\"checked\"!=c&&\"selected\"!=c||(l=[],t.options?u.each(t.options,function(t,e){l.push(e)}):l.push(t),t.multiple&&0==i&&(t.selectedIndex=-1),u.each(l,function(t,e){e.value==n&&(e[c]=!0,r.call(e,n))}))}var f={change:u.noop,complete:u.noop};return t.deserialize=function(t,e,r){u.isFunction(r)&&(r={complete:r}),r=u.extend(f,r||{}),s=e,n={},i=/\\+/g,u.isPlainObject(s)?(u.extend(n,s),u.each(n,function(t,e){u.isArray(e)||(n[t]=[e])})):u.isArray(s)?u.each(s,function(t,e){d(e.name,e.value,n)}):\"string\"==typeof s&&u.each(s.split(\"&\"),function(t,e){e=e.split(\"=\");d(decodeURIComponent(e[0].replace(i,\"%20\")),decodeURIComponent(e[1].replace(i,\"%20\")),n)}),e=n,s=t,a=r.filter,o={},s=c(t).map(function(){return this.elements?u.makeArray(this.elements):this}).filter(a||\":input:not(:disabled)\").get(),u.each(s,function(t,e){d(e.name,e,o)});var n,i,s,a,o,l=o;return u.each(e,function(t,e){u.each(l[t],function(n,i){u.each(e,function(t,e){p(i,n,e,t,r.change)})})}),r.complete.call(t),this}}),define(\"skylark-domx-forms/serialize-array\",[\"skylark-langx/langx\",\"skylark-domx-data\",\"./forms\"],function(s,a,t){return t.serializeArray=function(t){function n(t){if(t.forEach)return t.forEach(n);e.push({name:i,value:t})}var i,r,e=[],t=t.elements||(s.isArrayLike(t)?t:[t]);return s.each(t,function(t,e){r=e.type,(i=e.name)&&\"fieldset\"!=e.nodeName.toLowerCase()&&!e.disabled&&\"submit\"!=r&&\"reset\"!=r&&\"button\"!=r&&\"file\"!=r&&(\"radio\"!=r&&\"checkbox\"!=r||e.checked)&&n(a.val(e))}),e}}),define(\"skylark-domx-forms/serialize-object\",[\"skylark-langx/langx\",\"./forms\",\"./serialize-array\"],function(r,t,e){return t.serializeObject=function(t){var i={};return r.each(e(t),function(t,e){var n=e.name,e=e.value;i[n]=void 0===i[n]?e:r.isArray(i[n])?i[n].concat(e):[i[n],e]}),i}}),define(\"skylark-domx-forms/serialize\",[\"skylark-langx/langx\",\"./forms\",\"./serialize-array\"],function(t,e,n){return e.serialize=function(t){var e=[];return n(t).forEach(function(t){e.push(encodeURIComponent(t.name)+\"=\"+encodeURIComponent(t.value))}),e.join(\"&\")}}),define(\"skylark-domx-forms/main\",[\"skylark-langx\",\"skylark-domx-data\",\"./forms\",\"skylark-domx-velm\",\"skylark-domx-query\",\"./deserialize\",\"./serialize-array\",\"./serialize-object\",\"./serialize\"],function(t,e,n,i,r){return i.delegate([\"deserialize\",\"serializeArray\",\"serializeObject\",\"serialize\"],n),r.fn.deserialize=r.wraps.wrapper_every_act(n.deserialize,n,n.deserialize),r.fn.serializeArray=r.wraps.wrapper_map(n.serializeArray,n,n.serializeArray,!0),r.fn.serializeObject=r.wraps.wrapper_map(n.serializeObject,n,n.serializeObject,!0),r.fn.serialize=r.wraps.wrapper_value(n.serialize,n,n.serialize),n}),define(\"skylark-domx-forms\",[\"skylark-domx-forms/main\"],function(t){return t}),define(\"skylark-jquery/core\",[\"skylark-langx/skylark\",\"skylark-langx/langx\",\"skylark-domx-browser\",\"skylark-domx-noder\",\"skylark-domx-data\",\"skylark-domx-eventer\",\"skylark-domx-finder\",\"skylark-domx-forms\",\"skylark-domx-transits\",\"skylark-domx-fx\",\"skylark-domx-styler\",\"skylark-domx-query\",\"skylark-langx-scripter\",\"skylark-domx-animates\"],function(t,n,e,i,r,s,a,o,l,c,u,d,h){var p,f,m,g,y=Array.prototype.filter;Array.prototype.slice;return(p=d).fn.jquery=\"2.2.0\",p.browser=e,p.camelCase=n.camelCase,p.cleanData=function(t){for(var e,n=0;void 0!==(e=t[n]);n++)r.cleanData(e)},p.removeData=function(t,e){r.removeData(t,e)},p.each=n.each,p.extend=n.extend,p.grep=function(t,e){return y.call(t,e)},p.attr=function(t,e){return r.attr(t,e)},p.isArray=n.isArray,p.isEmptyObject=n.isEmptyObject,p.isFunction=n.isFunction,p.isWindow=n.isWindow,p.isPlainObject=n.isPlainObject,p.isNumeric=n.isNumber,p.inArray=n.inArray,p.makeArray=n.makeArray,p.map=n.map,p.noop=function(){},p.parseJSON=window.JSON.parse,p.proxy=n.proxy,p.trim=n.trim,p.type=n.type,p.fn.extend=function(t){n.mixin(p.fn,t)},(f=d).Event=function(t,e){return n.isString(t)?s.create(t,e):s.proxy(t,e)},f.event={},f.event.special=s.special,f.fn.submit=function(t){var e;return 0 in arguments?this.bind(\"submit\",t):this.length&&(e=f.Event(\"submit\"),this.eq(0).trigger(e),e.isDefaultPrevented()||this.get(0).submit()),this},f.fn.triggerHandler=f.fn.trigger,f.fn.delegate=function(t,e,n){return this.on(e,t,n)},f.fn.undelegate=function(t,e,n){return this.off(e,t,n)},f.fn.live=function(t,e){return f(document.body).delegate(this.selector,t,e),this},f.fn.die=function(t,e){return f(document.body).undelegate(this.selector,t,e),this},f.fn.bind=function(t,e,n,i){return this.on(t,e,n,i)},f.fn.unbind=function(t,e){return this.off(t,e)},f.fn.ready=function(t){return s.ready(t),this},f.fn.stop=function(){return this},f.fn.moveto=function(t,e){return this.transit({left:t+\"px\",top:e+\"px\"},.4)},f.ready=s.ready,f.on=s.on,f.off=s.off,(m=d).uuid=0,m.support=e.support,m.expr={},m.expr[\":\"]=m.expr.pseudos=m.expr.filters=a.pseudos,m.expr.createPseudo=function(t){return t},m.cssHooks=u.cssHooks,m.contains=i.contains,m.css=u.css,m.data=r.data,m.fx=c,m.fx.step={},m.fn.animate=m.wraps.wrapper_every_act(c.animate,c),m.speed=function(t,e,n){var i=t&&\"object\"==typeof t?m.extend({},t):{complete:n||!n&&e||m.isFunction(t)&&t,duration:t,easing:n&&e||e&&!m.isFunction(e)&&e};return m.fx.off?i.duration=0:\"number\"!=typeof i.duration&&(i.duration in m.fx.speeds?i.duration=m.fx.speeds[i.duration]:i.duration=m.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue=\"fx\"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.easing={},m.offset={},m.offset.setOffset=function(t,e,n){var i,r=m.css(t,\"position\"),s=(\"static\"===r&&(t.style.position=\"relative\"),m(t)),a=s.offset(),o=m.css(t,\"top\"),l=m.css(t,\"left\"),c={},r=(\"absolute\"===r||\"fixed\"===r)&&-1<m.inArray(\"auto\",[o,l])?(i=(r=s.position()).top,r.left):(i=parseFloat(o)||0,parseFloat(l)||0);null!=(e=m.isFunction(e)?e.call(t,n,a):e).top&&(c.top=e.top-a.top+i),null!=e.left&&(c.left=e.left-a.left+r),\"using\"in e?e.using.call(t,c):s.css(c)},m._data=function(t,e){return t.hasAttribute?r.data(t,e):{}},g=m.fn.text,m.fn.text=function(t){var e=g.apply(this,arguments);return e=void 0===e?\"\":e},m.fn.pos=m.fn.position,d.parseHTML=function(t){return i.createFragment(t)},d.uniqueSort=d.unique=n.uniq,d.skylark=t,window.jQuery=window.$=d}),define(\"skylark-jquery/ajax\",[\"skylark-langx/langx\",\"skylark-net-http/xhr\",\"./core\"],function(d,n,h){var p=0;function f(t,e){return\"\"==e?t:(t+\"&\"+e).replace(/[&?]{1,2}/,\"?\")}function l(t,e,n,i){return h.isFunction(t)?(i=e,n=t,t=e=void 0):h.isFunction(e)&&(i=n,n=e,e=void 0),h.isFunction(n)||(i=n,n=void 0),{url:t,data:e,success:n,dataType:i}}h.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(t,e){h.fn[e]=function(t){return this.on(e,t)}}),h.ajaxJSONP=function(t){function e(t){h(l).triggerHandler(\"error\",t||\"abort\")}var n,i,r,s=new d.Deferred,a=t.jsonpCallback,o=(h.isFunction(a)?a():a)||\"jsonp\"+ ++p,l=document.createElement(\"script\"),c=window[o],u={abort:e};for(r in t.data)t.url=f(t.url,r+\"=\"+t.data[r]);return h(l).on(\"load error\",function(t,e){clearTimeout(i),h(l).off().remove(),\"error\"!=t.type&&n?s.resolve(n[0],200,u):s.reject(t),window[o]=c,n&&h.isFunction(c)&&c(n[0]),c=n=void 0}),window[o]=function(){n=arguments},l.src=t.url.replace(/\\?(.+)=\\?/,\"?$1=\"+o),document.head.appendChild(l),0<t.timeout&&(i=setTimeout(function(){e(\"timeout\")},t.timeout)),s},h.ajaxSettings={processData:!0},h.ajax=function(t,i){return t?i?i.url=t:i=d.isString(t)?{url:t}:t:i={url:\"./\"},\"jsonp\"==(i=d.mixin({},h.ajaxSettings,i)).dataType?(/\\?.+=\\?/.test(i.url)||(i.url=f(i.url,i.jsonp?i.jsonp+\"=?\":!1===i.jsonp?\"\":\"callback=?\")),h.ajaxJSONP(i)):((t=(t=n.request(i.url,i)).then(function(t,e,n){return h(document).trigger(\"ajaxSucess\"),i.success&&i.success.apply(this,arguments),i.complete&&i.complete.apply(this,arguments),t},function(){h(document).trigger(\"ajaxError\"),i.error&&i.error.apply(this,arguments)})).success=t.done,t.error=t.fail,t.complete=t.always,t)},h.get=function(){return h.ajax(l.apply(null,arguments))},h.post=function(){var t=l.apply(null,arguments);return t.type=\"POST\",h.ajax(t)},h.getJSON=function(){var t=l.apply(null,arguments);return t.dataType=\"json\",h.ajax(t)};var c=h.fn.load;function t(s){return function(t,e){\"string\"!=typeof t&&(e=t,t=\"*\");var n,i=0,r=t.toLowerCase().match(a)||[];if(jQuery.isFunction(e))for(;n=r[i++];)\"+\"===n[0]?(n=n.slice(1)||\"*\",(s[n]=s[n]||[]).unshift(e)):(s[n]=s[n]||[]).push(e)}}h.fn.load=function(t,e,n){var i,r,s,a,o;return\"string\"!=typeof t&&c?c.apply(this,arguments):(this.length&&(i=this,s=(r=l(t,e,n)).url&&r.url.split(/\\s/),o=r.success,s&&1<s.length&&(r.url=s[0],a=s[1]),r.data&&\"object\"==typeof r.data&&(r.type=\"POST\"),r.success=function(t){i.html(a?h(\"<div>\").html(t.replace(rscript,\"\")).find(a):t),o&&o.apply(i,arguments)},h.ajax(r)),this)},h.param=n.param;var a=/\\S+/g;return h.ajaxPrefilter=t({}),h.ajaxTransport=t({}),h.ajaxSetup=function(t,e){d.mixin(n.defaultOptions,t,e)},h.getScript=function(t,e){return h.get(t,void 0,e,\"script\")},h}),define(\"skylark-jquery/callbacks\",[\"./core\"],function(h){return h.Callbacks=function(i){i=h.extend({},i);function r(t){for(e=i.memory&&t,n=!0,l=a||0,a=0,o=c.length,s=!0;c&&l<o;++l)if(!1===c[l].apply(t[0],t[1])&&i.stopOnFalse){e=!1;break}s=!1,c&&(u?u.length&&r(u.shift()):e?c.length=0:d.disable())}var e,n,s,a,o,l,c=[],u=!i.once&&[],d={add:function(){var t,n;return c&&(t=c.length,(n=function(t){h.each(t,function(t,e){\"function\"==typeof e?i.unique&&d.has(e)||c.push(e):e&&e.length&&\"string\"!=typeof e&&n(e)})})(arguments),s?o=c.length:e&&(a=t,r(e))),this},remove:function(){return c&&h.each(arguments,function(t,e){for(var n;-1<(n=h.inArray(e,c,n));)c.splice(n,1),s&&(n<=o&&--o,n<=l)&&--l}),this},has:function(t){return!(!c||!(t?-1<h.inArray(t,c):c.length))},empty:function(){return o=c.length=0,this},disable:function(){return c=u=e=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,e||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||n&&!u||(e=[t,(e=e||[]).slice?e.slice():e],s?u.push(e):r(e)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!n}};return d},h}),define(\"skylark-jquery/deferred\",[\"./core\",\"skylark-langx/langx\"],function(t,e){return t.Deferred=function(){var n=new e.Deferred,i={promise:function(){return n.promise}};return[\"resolve\",\"resolveWith\",\"reject\",\"rejectWith\",\"notify\",\"then\",\"done\",\"fail\",\"progress\",\"always\",\"state\"].forEach(function(e){i[e]=function(){var t=n[e].apply(n,arguments);return t=t==n?i:t}}),i},t.when=function(){var n=e.Deferred.all(e.makeArray(arguments)),i=n.then;return n.then=function(e,t){return i.call(n,function(t){return e&&e.apply(null,t)},t)},n},t}),define(\"skylark-jquery/queue\",[\"skylark-langx/langx\",\"./core\",\"./callbacks\"],function(t,l){var e=\"Sky\"+(\"1.0\"+Math.random()).replace(/\\D/g,\"\"),s=/\\S+/g,a=[].push;function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e+Math.random()}r.uid=1,r.accepts=function(t){return!t.nodeType||1===t.nodeType||9===t.nodeType},r.prototype={key:function(e){if(!r.accepts(e))return 0;var n={},i=e[this.expando];if(!i){i=r.uid++;try{n[this.expando]={value:i},Object.defineProperties(e,n)}catch(t){n[this.expando]=i,l.extend(e,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,n){var i,t=this.key(t),r=this.cache[t];if(\"string\"==typeof e)r[e]=n;else if(l.isEmptyObject(r))l.extend(this.cache[t],e);else for(i in e)r[i]=e[i];return r},get:function(t,e){t=this.cache[this.key(t)];return void 0===e?t:t[e]},access:function(t,e,n){var i;return void 0===e||e&&\"string\"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,l.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,t=this.key(t),r=this.cache[t];if(void 0===e)this.cache[t]={};else{n=(i=l.isArray(e)?e.concat(e.map(l.camelCase)):(t=l.camelCase(e),e in r?[e,t]:(i=t)in r?[i]:i.match(s)||[])).length;for(;n--;)delete r[i[n]]}},hasData:function(t){return!l.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var c=new r;return l.extend(l,{queue:function(t,e,n){var i;if(t)return i=c.get(t,e=(e||\"fx\")+\"queue\"),n&&(!i||l.isArray(n)?i=c.access(t,e,l.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||\"fx\";var n=l.queue(t,e),i=n.length,r=n.shift(),s=l._queueHooks(t,e);\"inprogress\"===r&&(r=n.shift(),i--),r&&(\"fx\"===e&&n.unshift(\"inprogress\"),delete s.stop,r.call(t,function(){l.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+\"queueHooks\";return c.get(t,n)||c.access(t,n,{empty:l.Callbacks(\"once memory\").add(function(){c.remove(t,[e+\"queue\",n])})})},makeArray:function(t,e){var n,i,r,e=e||[];return null!=t&&(n=Object(t),i=n.length,r=l.type(n),!l.isWindow(n)&&(1===n.nodeType&&i||\"array\"===r||\"function\"!==r&&(0===i||\"number\"==typeof i&&0<i&&i-1 in n))?l.merge(e,\"string\"==typeof t?[t]:t):a.call(e,t)),e},merge:function(t,e){var n=e.length,i=t.length,r=0;if(\"number\"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t}}),l.extend(l.fn,{queue:function(e,n){var t=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",t--),arguments.length<t?l.queue(this[0],e):void 0===n?this:this.each(function(){var t=l.queue(this,e,n);l._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&l.dequeue(this,e)})},dequeue:function(t){return this.each(function(){l.dequeue(this,t)})},delay:function(i,t){return i=l.fx&&l.fx.speeds[i]||i,this.queue(t=t||\"fx\",function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||\"fx\",[])},promise:function(t,e){function n(){--r||s.resolveWith(a,[a])}var i,r=1,s=l.Deferred(),a=this,o=this.length;for(\"string\"!=typeof t&&(e=t,t=void 0),t=t||\"fx\";o--;)(i=c.get(a[o],t+\"queueHooks\"))&&i.empty&&(r++,i.empty.add(n));return n(),s.promise(e)}}),l}),define(\"skylark-jquery/jquery-plugin\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"skylark-langx/langx\",\"skylark-domx-data\",\"skylark-domx-eventer\",\"skylark-domx-plugins-base\",\"skylark-domx-query\"],function(a,e,r,o,n,l,i,c){var s=0;return i.Plugin.inherit({klassName:\"JqPlugin\",pluginEventPrefix:\"\",options:{create:null},destroy:function(){this.overrided(),this.element.off(this.eventNamespace),this.bindings.off(this.eventNamespace)},_construct:function(e,t){e=c(e||this.defaultElement||this)[0],this.element=c(e),this.uuid=s++,this.eventNamespace=\".\"+this.pluginName+this.uuid,this.bindings=c(),this.classesElementLookup={},this.hoverable=c(),this.focusable=c(),e!==this&&(n.data(e,this.pluginName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow)),i.Plugin.prototype._construct.call(this,e,t),this._create(),this._trigger(\"create\",null,this._getCreateEventData()),this._init()},_initOptions:function(t){t=o.mixin(this._getCreateOptions(),t),this.overrided(t)},_getCreateOptions:function(){return{}},_getCreateEventData:o.noop,_super:function(){if(this.overrided)return this.overrided.apply(this,arguments)},_superApply:function(t){if(this.overrided)return this.overrided.apply(this,t)},_create:o.noop,_init:o.noop,_classes:function(r){var s=[],a=this;function t(t,e){for(var n,i=0;i<t.length;i++)n=a.classesElementLookup[t[i]]||c(),n=r.add?(r.element.each(function(t,e){o.map(a.classesElementLookup,function(t){return t}).some(function(t){return c(t).is(e)})||a._on(c(e),{remove:\"_untrackClassesElement\"})}),c(o.uniq(n.get().concat(r.element.get())))):c(n.not(r.element).get()),a.classesElementLookup[t[i]]=n,s.push(t[i]),e&&r.classes[t[i]]&&s.push(r.classes[t[i]])}return(r=e.mixin({element:this.element,classes:this.options.classes||{}},r)).keys&&t(r.keys.match(/\\S+/g)||[],!0),r.extra&&t(r.extra.match(/\\S+/g)||[]),s.join(\" \")},_untrackClassesElement:function(n){var i=this;o.each(i.classesElementLookup,function(t,e){-1!==r.inArray(n.target,e)&&(i.classesElementLookup[t]=c(e.not(n.target).get()))}),this._off(c(n.target))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){var r=\"string\"==typeof t||null===t,e={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i=\"boolean\"==typeof i?i:n};return e.element.toggleClass(this._classes(e),i),this},_on:function(r,s,t){var a,o=this;\"boolean\"!=typeof r&&(t=s,s=r,r=!1),t?(s=a=c(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,a=this.widget()),e.each(t,function(t,e){function n(){if(r||!0!==o.options.disabled&&!c(this).hasClass(\"ui-state-disabled\"))return(\"string\"==typeof e?o[e]:e).apply(o,arguments)}\"string\"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||c.guid++);var t=t.match(/^([\\w:-]*)\\s*(.*)$/),i=t[1]+o.eventNamespace,t=t[2];t?a.on(i,t,n):s.on(i,n)})},_off:function(t,e){e=(e||\"\").split(\" \").join(this.eventNamespace+\" \")+this.eventNamespace,t.off(e),this.bindings=c(this.bindings.not(t).get()),this.focusable=c(this.focusable.not(t).get()),this.hoverable=c(this.hoverable.not(t).get())},_trigger:function(t,e,n){var i,r,s=this.options[t];if(n=n||{},(e=l.proxy(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(a.isFunction(s)&&!1===s.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(c(t.currentTarget),null,\"ui-state-hover\")},mouseleave:function(t){this._removeClass(c(t.currentTarget),null,\"ui-state-hover\")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(c(t.currentTarget),null,\"ui-state-focus\")},focusout:function(t){this._removeClass(c(t.currentTarget),null,\"ui-state-focus\")}})},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})}})}),define(\"skylark-jquery/widget\",[\"skylark-langx/langx\",\"skylark-domx-plugins-base\",\"./core\",\"./jquery-plugin\"],function(t,h,p,e){var r,a=Array.prototype.hasOwnProperty,o=Array.prototype.slice;return p.cleanData=(r=p.cleanData,function(t){for(var e,n,i=0;null!=(n=t[i]);i++)(e=p._data(n,\"events\"))&&e.remove&&p(n).triggerHandler(\"remove\");r(t)}),p.widget=function(t,e,n){var i,r,s=t.split(\".\")[0],a=s+\"-\"+(t=t.split(\".\")[1]),o=(n||(n=e,e=p.Widget),p.isArray(n)&&(n=p.extend.apply(null,[{}].concat(n))),p.expr.pseudos[a.toLowerCase()]=function(t){return!!p.data(t,a)},p[s]=p[s]||{},i=p[s][t],e.prototype),l={};for(r in n){var c=n[r];p.isPlainObject(c)?l[r]=p.isPlainObject(o[r])?p.widget.extend({},o[r],c):p.widget.extend({},c):l[r]=c}var u=p.widget.extend({widgetEventPrefix:i&&e.prototype.widgetEventPrefix||t},{options:e.prototype.options},l,{name:a,namespace:s,widgetName:t,pluginName:\"jqueryui.\"+(s?s+\".\":\"\")+t,widgetFullName:a}),d=p[s][t]=e.inherit(u);return p.extend(d,i,{version:n.version,_proto:u,_childConstructors:[]}),i?(p.each(i._childConstructors,function(t,e){var n=e.prototype;p.widget(n.namespace+\".\"+n.widgetName,d,e._proto)}),delete i._childConstructors):e._childConstructors&&e._childConstructors.push(d),h.register(d,t,a),d},p.widget.extend=function(t){for(var e,n,i=o.call(arguments,1),r=0,s=i.length;r<s;r++)for(e in i[r])n=i[r][e],a.call(i[r],e)&&void 0!==n&&(p.isPlainObject(n)?t[e]=p.isPlainObject(t[e])?p.widget.extend({},t[e],n):p.widget.extend({},n):t[e]=n);return t},p.Widget=e.inherit({widgetName:\"widget\",widgetEventPrefix:\"\",defaultElement:\"<div>\",options:{classes:{},disabled:!1,create:null},widget:function(){return this.element},_setOption:function(t,e){return\"classes\"===t&&this._setOptionClasses(e),this.options[t]=e,\"disabled\"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,n,i;for(e in t)i=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&i&&i.length&&(n=p(i.get()),this._removeClass(i,e),n.addClass(this._classes({element:n,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+\"-disabled\",null,!!t),t&&(this._removeClass(this.hoverable,null,\"ui-state-hover\"),this._removeClass(this.focusable,null,\"ui-state-focus\"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_delay:function(t,e){var n=this;return setTimeout(function(){return(\"string\"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(p(t.currentTarget),null,\"ui-state-hover\")},mouseleave:function(t){this._removeClass(p(t.currentTarget),null,\"ui-state-hover\")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(p(t.currentTarget),null,\"ui-state-focus\")},focusout:function(t){this._removeClass(p(t.currentTarget),null,\"ui-state-focus\")}})}}),p.Widget._childConstructors=[],p.each({show:\"fadeIn\",hide:\"fadeOut\"},function(s,a){p.Widget.prototype[\"_\"+s]=function(e,t,n){var i=(t=\"string\"==typeof t?{effect:t}:t)?!0!==t&&\"number\"!=typeof t&&t.effect||a:s,r=!p.isEmptyObject(t=\"number\"==typeof(t=t||{})?{duration:t}:t);t.complete=n,t.delay&&e.delay(t.delay),r&&p.effects&&p.effects.effect[i]?e[s](t):i!==s&&e[i]?e[i](t.duration,t.easing,n):e.queue(function(t){p(this)[s](),n&&n.call(e[0]),t()})}}),p.widget}),define(\"skylark-jquery/main\",[\"./core\",\"./ajax\",\"./callbacks\",\"./deferred\",\"./queue\",\"./jquery-plugin\",\"./widget\"],function(t){return t}),define(\"skylark-jquery\",[\"skylark-jquery/main\"],function(t){return t}),define(\"skylark-slax-runtime/skylark\",[\"./slax\",\"skylark-langx-ns\",\"skylark-langx\",\"skylark-langx-logging\",\"skylark-domx\",\"skylark-domx-files\",\"skylark-domx-images\",\"skylark-domx-i18n\",\"skylark-domx-plugins-base\",\"skylark-domx-plugins-colors\",\"skylark-domx-plugins-groups\",\"skylark-domx-plugins-pictures\",\"skylark-domx-plugins-players\",\"skylark-domx-plugins-panels\",\"skylark-domx-plugins-embeds\",\"skylark-domx-plugins-sandboxs\",\"skylark-domx-plugins-menus\",\"skylark-domx-plugins-popups\",\"skylark-domx-plugins-uploads\",\"skylark-devices-keyboard\",\"skylark-devices-orientation\",\"skylark-devices-points\",\"skylark-devices-webgl\",\"skylark-io-mimes\",\"skylark-io-caches\",\"skylark-io-diskfs\",\"skylark-io-streams\",\"skylark-net-http\",\"skylark-appify-routers\",\"skylark-appify-spa\",\"skylark-data-entities\",\"skylark-jquery\"],function(t,e){return t.skylark=e}),define(\"skylark-slax-runtime/main\",[\"./slax\",\"./caches\",\"./skylark\"],function(t){return t}),define(\"skylark-slax-runtime\",[\"skylark-slax-runtime/main\"],function(t){return t});"]}